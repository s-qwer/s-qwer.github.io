<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="https://s-qwer.github.io">
  <title>swx的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="跨行转业到计算机，未来发展方向在后端。目前记录学习和工作生涯中的经验和经历。前端，后端，测试，产品，设计，运维都需要去探索。">
<meta property="og:type" content="website">
<meta property="og:title" content="swx的博客">
<meta property="og:url" content="https://s-qwer.github.io/page/10/index.html">
<meta property="og:site_name" content="swx的博客">
<meta property="og:description" content="跨行转业到计算机，未来发展方向在后端。目前记录学习和工作生涯中的经验和经历。前端，后端，测试，产品，设计，运维都需要去探索。">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="swx">
<meta property="article:tag" content="后端，Java">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="swx的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.0cf68a.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/"></a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author"></h1>
			</hgroup>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">主页</a></li>
		        
					<li style="width: 50%"><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-14.1.linux" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/07/14.1.linux/">linux</a>
    </h1>
  

        
        <a href="/2021/04/07/14.1.linux/" class="archive-article-date">
  	<time datetime="2021-04-07T11:42:46.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2021-04-07</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>学习Linux目标:掌握linux常用命令，会安装开发中使用软件，例如mysql,jdk…</p>
<p>开发人员掌握就好，更多的是运维人员需要掌握</p>
<h1 id="Linux介绍"><a href="#Linux介绍" class="headerlink" title="Linux介绍"></a>Linux介绍</h1><p>Linux是基于Unix开发的，Linux是一种自由和开放源码的操作系统，存在着许多不同的Linux版本，但它们都使用了Linux内核</p>
<p>Unix是一个强大的多用户、多任务操作系统。    于1969年在AT&amp;T的贝尔实验室开发。    UNIX的商标权由国际开放标准组织（The Open Group）所拥有。    UNIX操作系统是商业版，需要收费，价格比Microsoft Windows正版要贵一些</p>
<p>Linux可安装在各种计算机硬件设备中，比如手机、平板电脑、路由器、台式计算机</p>
<p>Linux系统的应用</p>
<p>服务器系统Web应用服务器、数据库服务器、接口服务器、DNS、FTP等等； </p>
<p>嵌入式系统路由器、防火墙、手机、PDA、IP 分享器、交换器、家电用品的微电脑控制器等等，</p>
<p>高性能运算、计算密集型应用Linux有强大的运算能力。</p>
<p>桌面应用系统 ubuntu</p>
<p>移动手持系统</p>
<p>Linux版本：<em><strong>*内核版本和发行版本*</strong></em></p>
<p>内核版本是指在Linus领导下的内核小组开发维护的系统内核的版本号，非常小，只有几M</p>
<p>​    常用的ubuntu  centos  fedora  redhat</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps1.jpg" alt="img"> </p>
<h1 id="Linux-安装"><a href="#Linux-安装" class="headerlink" title="*Linux*****安装****"></a><em><strong>*Linux*</strong>***</em>*安装****</h1><p>我们在虚拟机上来安装Linux</p>
<p>虚拟机：一台虚拟的电脑</p>
<p>虚拟机软件：</p>
<p>VMWare它是一个收费虚拟软件，密钥</p>
<p>VirtualBox    :免费的</p>
<p>怎样安装linux系统(centos6.5)：</p>
<p>参考《虚拟软件vmware安装.doc》，安装VmWare</p>
<p>参考《CentOS6详细安装文档.doc》，安装CentOS</p>
<p>前提需要一个.iso的镜像文件</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps2.jpg" alt="img"> </p>
<p>典型安装就可以</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps3.jpg" alt="img"><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps4.jpg" alt="img"><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps5.jpg" alt="img"><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps6.jpg" alt="img"> </p>
<p>需要指定iso文件的位置</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps7.jpg" alt="img"> </p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps8.jpg" alt="img"> </p>
<p>进入安装，选择skip（ctrl+alt可以将鼠标的光标跳出虚拟机）</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps9.jpg" alt="img"> </p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps10.jpg" alt="img"> </p>
<p>时区，亚洲上海</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps11.jpg" alt="img"> </p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps12.jpg" alt="img"> </p>
<p>选择basic server是安装为服务，只有dos命令，便于远程连接访问。如果是desktop桌面版的话不灵活且安装的内容会很多</p>
<p>慢慢等待安装完成，重新引导（重启）</p>
<p>登录时，使用的用户是root,录入密码时不会显示（其实已经输入了），显示第三行的内容为登录成功</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps13.jpg" alt="img"> </p>
<p>很少会直接登录，一般都是远程访问</p>
<h1 id="Linux远程访问"><a href="#Linux远程访问" class="headerlink" title="*Linux远程访问*"></a><em><strong>*Linux远程访问*</strong></em></h1><p>使用CRT软件打开</p>
<p>新建一个连接，快速连接</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps14.jpg" alt="img"> </p>
<p>需要录入linux的ip地址及用户名密码，连接成功后可以在选项中设置窗口颜色方案，变为黑白的这种经典窗口</p>
<p>在虚拟机中查看ip地址 ，输入命令 ifconfig</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps15.jpg" alt="img"> </p>
<p>注意事项:</p>
<p>1.关于linux安装时失败问题，有可能是硬件虚拟化没有打开，需要在bios中开启虚拟化。通过 <img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps16.jpg" alt="img">可以查看</p>
<p>2.关于CRT安装与破解(参考图片)</p>
<h1 id="Linux目录结构"><a href="#Linux目录结构" class="headerlink" title="*Linux目录结构*"></a><em><strong>*Linux目录结构*</strong></em></h1><p>Linux系统它是文件系统</p>
<p>它的根目录 是”/”,是以树型结构来管理</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps17.jpg" alt="img"> </p>
<p>Root用户登录后，显示时有一个~,它其实代表的就是root目录</p>
<p>通过命令cd..  就会放回上层的根目录 /]#</p>
<p>通过命令ls  可以查看所有的文件名 </p>
<p>bin  boot  cgroup  dev  etc  home  lib  lost  found  media  misc  mnt  net  opt  proc  root  sbin  selinux  srv  sys  tmp  usr  var</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps18.jpg" alt="img"> </p>
<p>root管理员的home目录root</p>
<p>其他用户的home目录home目录中</p>
<p>我们可以将我们自己的文件安装在任意位置</p>
<h1 id="Linux常用命令-重点"><a href="#Linux常用命令-重点" class="headerlink" title="*Linux常用命令(重点)*"></a><em><strong>*Linux常用命令(重点)*</strong></em></h1><p>1.切换目录命令 <em><strong>*cd*</strong></em> （这个命令非常重要）</p>
<p>cd app    切换到app目录    cd ..      切换到上一层目录    cd /        切换到系统根目录    cd ~        切换到用户主目录 root    cd -        切换到上一次执行时所在的目录</p>
<p>2.列出文件列表 <em><strong>*ls ll*</strong></em> （这个命令非常重要）</p>
<p>ls(list)是一个非常有用的命令，用来显示当前目录下的内容。配合参数的使用，能以不同的方式显示目录内容。</p>
<p>dir命令很少用</p>
<p> 格式：ls [参数]  [路径或文件名]        ls –help 可以帮助我们查看帮助信息，都有哪些命令可以执行</p>
<p>可能会出现中文乱码的问题，可以在选项中选择编码为UTF-8</p>
<p>ls -a  显示所有文件或目录（包含隐藏的文件）</p>
<p>ls -l  使用较长格式列出信息（详细信息），缩写成ll</p>
<p>TIPS:在linux中以 . 开头的文件都是隐藏的文件</p>
<p>3.创建与删除目录（注意权限）</p>
<p>可以mkdir –help查看可用命令</p>
<p>mkdir(make directory)命令可用来创建子目录：mkdir app  è  在当前目录下创建app目录mkdir –p app2/test  è 级联创建aap2以及test目录</p>
<p>rmdir(remove directory)命令可用来删除“空”的子目录：    rmdir app  è  删除app目录</p>
<p>当用rmdir 删除非空目录时会显示失败</p>
<p>4.浏览文件</p>
<p>cat操作：cat用于显示文件的内容。</p>
<p>格式：cat [参数] &lt;文件名&gt;</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps19.jpg" alt="img"> </p>
<p>more操作：more一般用于要显示的内容会超过一个画面长度的情况。</p>
<p>按空格键显示下一个画面，按回车键显示下一行内容，按 q 键退出查看</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps20.jpg" alt="img"> </p>
<p>less操作：用法和more类似，不同的是less可以通过PgUp、PgDn键来控制</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps21.jpg" alt="img"> </p>
<p>tail操作：tail命令是在实际使用过程中使用非常多的一个命令，它的功能是：用于显示文件后几行的内容</p>
<p>用法:</p>
<p>tail -10 /etc/passwd  è 查看后10行数据</p>
<p>tail -f catalina.log  è <em><strong>*动态查看日志*</strong></em>(非常重要)</p>
<p>ctrl+c 结束查看</p>
<p>5.文件操作</p>
<p>cp操作：是copy操作</p>
<p>cp(copy)命令可以将文件从一处复制到另一处。一般在使用cp命令时将一个文件复制成另一个文件或复制到某目录时，需要指定源文件名与目标文件名或目录。</p>
<p>cp a.txt b.txt  è 将a.txt复制为b.txt文件</p>
<p>cp  a.txt  ../  è 将a.txt文件复制到上一层目录中</p>
<p>cp  a.txt  /a/b.txt  将a.txt文件复制到a目录下的b.txt文件中（如果没有这个文件会创建）</p>
<p>mv操作：是move相当于剪切</p>
<p>mv 移动或者重命名</p>
<p>mv a.txt ../  è 将a.txt文件移动到上一层目录中</p>
<p>mv a.txt b.txt  è 将a.txt文件重命名为b.txt</p>
<p>rm操作：它可以帮助我们删除文件与目录</p>
<p>rm  删除文件</p>
<p>用法：rm  [选项]  文件</p>
<p>rm a.txt  è 删除a.txt文件 （删除需要用户确认，y/n）</p>
<p>rm 删除不需要询问</p>
<p>rm -f a.txt  è 不询问，直接删除</p>
<p>rm 删除目录</p>
<p>rm -r a  è 递归删除 （删除需要用户递归确认，y/n）</p>
<p>不询问递归删除（慎用）</p>
<p>rm -rf  a  è 不询问递归删除</p>
<p>rm -rf *  è  删除所有文件</p>
<p>rm -rf /*  è  自杀</p>
<p>****tar操作****：打包压缩与解压（打包或解压操作时常用）</p>
<p>ls或者ll命令下查看：d开头的一般是一个目录，r开头的是一个文件</p>
<p>tar命令位于/bin目录下，它能够将用户所指定的文件或目录打包成一个文件，但不做压缩。一般Linux上常用的压缩方式是选用tar将许多文件打包成一个文件，再以gzip压缩命令压缩成xxx.tar.gz(或称为xxx.tgz)的文件（所以一般.gz或者.tgz文件就是linux系统的文件，.zip就是windows系统的文件）</p>
<p>常用参数：</p>
<p>-c：创建一个新tar文件</p>
<p>-v：显示运行过程的信息</p>
<p>-f：指定文件名</p>
<p>-z：调用gzip压缩命令进行压缩</p>
<p>-t：查看压缩文件的内容</p>
<p>-x：解开tar文件</p>
<p>打包：</p>
<p>tar –cvf xxx.tar ./*  将./*（./*可以是多个文件）的文件打包成xxx.tar文件</p>
<p>打包并且压缩：</p>
<p>tar –zcvf xxx.tar.gz ./* </p>
<p>解压 </p>
<p> tar –xvf xxx.tar   就会解压到当前路径</p>
<p>tar -xvf xxx.tar.gz -C /usr/aaa 注意：C要大写，必须在xxx.tar.gz的目录下执行这个命令</p>
<p>find操作：文件查找，用于查找符合条件的文件</p>
<p>示例：</p>
<p>find / -name “ins*” 查找文件名称是以ins开头的文件</p>
<p>find / -name “ins*” –ls  查找文件名称是以ins开头的文件并列出来详细信息</p>
<p>find / –user itcast –ls 查找用户itcast的文件并列出详细信息（user是权限符）</p>
<p>find / –user itcast –type d –ls 查找用户itcast的目录</p>
<p>find /-perm -777 –type d-ls 查找权限是777的文件</p>
<p>grep操作：字符串查找，用于查找文件中符合条件的字符串</p>
<p>用法: grep  [选项]   PATTERN [FILE]</p>
<p>示例：</p>
<p>grep lang anaconda-ks.cfg  在文件中查找lang</p>
<p>grep lang anaconda-ks.cfg –color 高亮显示</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps22.jpg" alt="img"> </p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps23.jpg" alt="img"> </p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps24.jpg" alt="img"> </p>
<p>A是after，B是before的意思，A5 B5就是前五行和后五行</p>
<p>6.其它常用命令</p>
<p>clear：清屏命令</p>
<p>pwd：显示当前所在目录</p>
<p>touch：创建一个空文件  touch a.txt</p>
<p>ll -h：友好显示文件大小，k表示</p>
<p>wget：下载资料   wget <a target="_blank" rel="noopener" href="http://nginx.org/download/nginx-1.9.12.tar.gz">http://nginx.org/download/nginx-1.9.12.tar.gz</a>  下载的东西会保存再当前目录</p>
<p>LSB是Linux Standard Base的缩写，lsb_release命令用来显示LSB和特定版本的相关信息。如果使用该命令时不带参数，则默认加上-v参数。</p>
<p>-v, –version<br>显示版本信息<br>-i, –id<br>显示发行版的ID<br>-d, –description<br>显示该发行版的描述信息<br>-r, –release<br>显示当前系统是发行版的具体版本号<br>-c, –codename<br>发行版代号<br>-a, –all<br>显示上面的所有信息<br>-h, –help<br>显示帮助信息</p>
<p> netstat -anp  查看当前进程</p>
<p>netstat -lnp|grep 80 查看80端口  tcp和linux的进程</p>
<p>netstat -ntpl|grep 80 查看80端口   只有tcp</p>
<p>netstat -tunlp|grep 80 查看80端口  只有tcp</p>
<p>ps -aux |grep 80  查看80端口  最全</p>
<p>lsof -i:80   查看80端口  最少</p>
<p>kill -9 进程名字  杀死进程</p>
<p>CentOS7 的防火墙配置跟以前版本有很大区别，CentOS7这个版本的防火墙默认使用的是firewall，与之前的版本Centos 6.x使用iptables不一样</p>
<p>一、iptables防火墙<br>1、基本操作</p>
<p>查看防火墙状态</p>
<p>service iptables status  </p>
<p>停止防火墙</p>
<p>service iptables stop  </p>
<p>启动防火墙</p>
<p>service iptables start  </p>
<p>重启防火墙</p>
<p>service iptables restart  </p>
<p>永久关闭防火墙</p>
<p>chkconfig iptables off  </p>
<p>永久关闭后重启</p>
<p>chkconfig iptables on　　</p>
<p>2、开启80端口</p>
<p>vim /etc/sysconfig/iptables</p>
<p>加入如下代码</p>
<p>-A INPUT -m state –state NEW -m tcp -p tcp –dport 80 -j ACCEPT<br>保存退出后重启防火墙</p>
<p>service iptables restart<br>二、firewall防火墙<br>1、查看firewall服务状态</p>
<p>systemctl status firewalld</p>
<p>出现Active: active (running)切高亮显示则表示是启动状态。</p>
<p>出现 Active: inactive (dead)灰色表示停止，看单词也行。<br>2、查看firewall的状态</p>
<p>firewall-cmd –state<br>3、开启、重启、关闭、firewalld.service服务</p>
<p>开启</p>
<p>service firewalld start</p>
<p>重启</p>
<p>service firewalld restart</p>
<p>关闭</p>
<p>service firewalld stop<br>4、查看防火墙规则</p>
<p>firewall-cmd –list-all<br>5、查询、开放、关闭端口</p>
<p>查询端口是否开放</p>
<p>firewall-cmd –query-port=8080/tcp</p>
<p>开放80端口</p>
<p>firewall-cmd –permanent –add-port=80/tcp</p>
<p>移除端口</p>
<p>firewall-cmd –permanent –remove-port=8080/tcp<br>#重启防火墙(修改配置后要重启防火墙)<br>firewall-cmd –reload</p>
<p>参数解释</p>
<p>1、firwall-cmd：是Linux提供的操作firewall的一个工具；<br>2、–permanent：表示设置为持久；<br>3、–add-port：标识添加的端口；</p>
<p>CentOS7 默认使用firewalld防火墙，如果想换回iptables防火墙，可关闭firewalld并安装iptables。</p>
<h1 id="VI与VIM编辑器"><a href="#VI与VIM编辑器" class="headerlink" title="VI与VIM编辑器"></a>VI与VIM编辑器</h1><p>vim是vi的升级。</p>
<p>在Linux下一般使用vi编辑器来编辑文件。vi既可以查看文件也可以编辑文件。有三种模式： 命令行、 插入  、底行 模式</p>
<p>通过vi（vim）文件名，就可以对文件进行操作。 </p>
<p>当操作时，开始是命令行模式，按<strong>i 或o 或 a</strong> 切换到插入模式</p>
<p>i 在当前位置前插入</p>
<p>  I 在当前行首插入</p>
<p>  a 在当前位置后插入</p>
<p>  A 在当前行尾插入</p>
<p>  o 在当前行之后插入一行</p>
<p>  O 在当前行之前插入一行</p>
<p>再按<strong>esc</strong> 可以重新切换到命令行模式 </p>
<p>在命令行模式下按 <strong>“:”</strong> 就可以切换到底行模式，更多详细用法，可以查询文档《Vim命令合集.docx》和《vi使用方法详细介绍.docx》</p>
<p>在命令行模式下可以使用一些快捷键：</p>
<p>打开文件：vim file</p>
<p>退出：esc 输入 :q （切换到底行模式，再按q就是退出）</p>
<p>修改文件：输入i进入插入模式</p>
<p>保存并退出：esc 输入:wq</p>
<p>不保存退出：esc 输入:q!</p>
<p>三种进入插入模式：</p>
<p>i:在当前的光标所在处插入</p>
<p>o:在当前光标所在的行的下一行插入</p>
<p>a:在光标所在的下一个字符插入</p>
<p>快捷键：</p>
<p>dd – 快速删除一行</p>
<p>yy - 复制当前行</p>
<p>nyy - 从当前行向后复制几行</p>
<p>p - 粘贴</p>
<p>R – 替换</p>
<p>重定向</p>
<p>echo  “sdahufha”  命令就是直接打印出“”内容</p>
<p>&gt;  重定向输出，覆盖原有内容；    &gt;&gt; 重定向输出，换行+追加功能；    示例：</p>
<p>cat /etc/passwd &gt; a.txt  将输出定向到a.txt中</p>
<p>cat /etc/passwd &gt;&gt; a.txt  输出并且追加</p>
<p>ifconfig &gt; ifconfig.txt</p>
<p>管道</p>
<p>管道是Linux命令中重要的一个概念，其作用是将一个命令的输出用作另一个命令的输入。示例</p>
<p>ls –help | more  分页查询帮助信息</p>
<p>ps –ef | grep java  查询名称中包含java的进程 （ps -ef 查看当前的进程）</p>
<p>ifconfig | more</p>
<p>cat index.html | more</p>
<p>ps –ef | grep aio</p>
<p>&amp;&amp;命令执行控制</p>
<p>命令之间使用 &amp;&amp; 连接，实现逻辑与的功能。  </p>
<p>只有在 &amp;&amp; 左边的命令返回真（命令返回值 $? == 0），&amp;&amp; 右边的命令才会被执行。 </p>
<p>只要有一个命令返回假（命令返回值 $? == 1），后面的命令就不会被执行。</p>
<p>mkdir test &amp;&amp; cd test</p>
<p>系统管理常用命令</p>
<p>date 可以显示或设置系统时间</p>
<p>date  显示当前系统时间</p>
<p>date -s “2014-01-01 10:10:10“  设置系统时间df 显示磁盘信息</p>
<p>df –h  友好显示大小free 显示内存状态</p>
<p>free –m 以mb单位显示内存组昂头top 显示，管理执行中的程序</p>
<p>clear 清屏幕 </p>
<p>ps 正在运行的某个进程的状态</p>
<p>ps –ef  查看所有进程</p>
<p>ps –ef | grep ssh 查找某一进程kill 杀掉某一进程kill + pid</p>
<p>kill 2868  杀掉2868编号的进程</p>
<p>kill -9 2868  强制杀死进程</p>
<p>du 显示目录或文件的大小。</p>
<p>du –h 显示当前目录的大小</p>
<p> who 显示目前登入系统的用户信息。 </p>
<p>uname 显示系统信息。</p>
<p>uname -a 显示本机详细信息。依次为：内核名称(类别)，主机名，内核版本号，内核版本，内核编译日期，硬件名，处理器类型，硬件平台类型，操作系统名称</p>
<h1 id="Linux下用户与组管理"><a href="#Linux下用户与组管理" class="headerlink" title="*Linux下用户与组管理*"></a><em><strong>*Linux下用户与组管理*</strong></em></h1><p>用户管理</p>
<p>useradd 添加一个用户</p>
<p>useradd test 添加test用户 （会出现在home目录下）</p>
<p>useradd test -d /home/t1  指定用户home目录 </p>
<p>passwd  设置、修改密码</p>
<p>passwd test  为test用户设置密码</p>
<p>切换登录：</p>
<p>ssh -l test -p 22 192.168.19.128  （ssh协议默认22端口）</p>
<p>su – 用户名 切换到这个用户</p>
<p> userdel 删除一个用户</p>
<p>userdel test 删除test用户(不会删除home目录)</p>
<p>userdel –r test  删除用户以及home目录</p>
<p>组管理</p>
<p>当在创建一个新用户user时，若没有指定他所属于的组，就建立一个和该用户同名的私有组 </p>
<p>创建用户时也可以指定所在组 </p>
<p>groupadd  创建组</p>
<p>groupadd public  创建一个名为public的组</p>
<p>useradd u1 –g public  创建用户指定组groupdel 删除组，如果该组有用户成员，必须先删除用户才能删除组。</p>
<p>groupdel public</p>
<p>id命令：查看一个用户的UID和GID用法：id  [选项] [用户名]</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps25.jpg" alt="img"> </p>
<p>直接使用id，直接使用id 用户名</p>
<p>su命令：切换用户。用法：su   [选项]  [-] [用户   [参数]  ]示例：</p>
<p>su u1  切换到u1用户</p>
<p>su - u1 切换到u1用户，并且将环境也切换到u1用户的环境（推荐使用）</p>
<p>账户文件</p>
<p>/etc/passwd  用户文件    /etc/shadow  密码文件    /etc/group  组信息文件</p>
<p>【用户文件】</p>
<p>root:x:0:0:root:/root:/bin/bash账号名称：        在系统中是唯一的用户密码：        此字段存放加密口令用户标识码(User ID)：  系统内部用它来标示用户组标识码(Group ID)：  系统内部用它来标识用户属性用户相关信息：        例如用户全名等用户目录：        用户登录系统后所进入的目录用户环境:        用户工作的环境</p>
<p>【密码文件】</p>
<p>shadow文件中每条记录用冒号间隔的9个字段组成.用户名：用户登录到系统时使用的名字，而且是惟一的口令：  存放加密的口令最后一次修改时间:  标识从某一时刻起到用户最后一次修改时间最大时间间隔:  口令保持有效的最大天数，即多少天后必须修改口令最小时间间隔：    再次修改口令之间的最小天数警告时间：从系统开始警告到口令正式失效的天数不活动时间：    口令过期少天后，该账号被禁用失效时间：指示口令失效的绝对天数(从1970年1月1日开始计算)标志：未使用 </p>
<p>【组文件】</p>
<p>root:x:0:组名：用户所属组组口令：一般不用GID：组ID用户列表：属于该组的所有用户</p>
<h1 id="文件权限管理"><a href="#文件权限管理" class="headerlink" title="*文件权限管理*"></a><em><strong>*文件权限管理*</strong></em></h1><p>文件权限</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps26.jpg" alt="img"> </p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps27.jpg" alt="img"> </p>
<p>r:对文件是指可读取内容 对目录是可以ls</p>
<p>w:对文件是指可修改文件内容，对目录 是指可以在其中创建或删除子节点(目录或文件)</p>
<p>x:对文件是指是否可以运行这个文件，对目录是指是否可以cd进入这个目录</p>
<p>Linux三种文件类型：</p>
<p>普通文件： 包括文本文件、数据文件、可执行的二进制程序文件等。 </p>
<p> 目录文件： Linux系统把目录看成是一种特殊的文件，利用它构成文件系统的树型结构。  </p>
<p>设备文件： Linux系统把每一个设备都看成是一个文件</p>
<p>文件类型标识：</p>
<p>普通文件（-）目录（d）符号链接（l） 进入etc可以查看，相当于快捷方式字符设备文件（c）块设备文件（s）套接字（s）命名管道（p）</p>
<p>文件权限管理：</p>
<p>chmod 变更文件或目录的权限。</p>
<p>chmod 755 a.txt </p>
<p>chmod u=rwx,g=rx,o=rx a.txt</p>
<p>chmod 000 a.txt  / chmod 777 a.txt</p>
<p>chmod u-r a.txt  /  chmod g+x a.txtchown 变更文件或目录改文件所属用户和组</p>
<p>chown u1:public a.txt：变更当前的目录或文件的所属用户和组(用户为u1，组为public)</p>
<p>chown -R u1:public dir：变更目录中的所有的子目录及子文件的所属用户和组</p>
<h1 id="常用网络操作"><a href="#常用网络操作" class="headerlink" title="*常用网络操作*"></a><em><strong>*常用网络操作*</strong></em></h1><p>主机名配置</p>
<p>hostname 查看主机名</p>
<p>hostname xxx 修改主机名，临时性修改 重启后无效</p>
<p>如果想要永久生效，可以修改/etc/sysconfig/network文件（vi 进入文件后编辑）</p>
<p>IP地址配置</p>
<p>Setup设置ip地址</p>
<p>ifconfig 查看(修改)ip地址(重启后无效)</p>
<p>ifconfig eth0 192.168.12.22 修改ip地址</p>
<p>如果想要永久生效</p>
<p>修改 /etc/sysconfig/network-scripts/ifcfg-eth0文件</p>
<p>可以直接输入setup进入网络配置设置（DHCP是自动分配，自己设置的话就是静态ip，空格，tab键）</p>
<p>域名映射</p>
<p>在windows中，System下的drivers下的etc下的hosts文件是域名映射文件</p>
<p>/etc/hosts文件用于在通过主机名进行访问时做ip地址解析之用</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps28.jpg" alt="img"> </p>
<p>网络服务管理</p>
<p>service network status 查看指定服务的状态</p>
<p>service network stop 停止指定服务</p>
<p>service network start 启动指定服务</p>
<p>service network restart 重启指定服务</p>
<p>service —status–all 查看系统中所有后台服务</p>
<p>netstat –nltp 查看系统中网络进程的端口监听情况</p>
<p>防火墙设置</p>
<p>防火墙根据配置文件/etc/sysconfig/iptables来控制本机的”出”、”入”网络访问行为。</p>
<p>service iptables status 查看防火墙状态</p>
<p><em><strong>*service iptables stop 关闭防火墙*</strong></em> （需要关闭以访问一些服务和下载）</p>
<p>service iptables start 启动防火墙</p>
<p>chkconfig  iptables off 禁止防火墙自启</p>
<h1 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h1><p>Shell是命令解释器(command interpreter)，是Unix操作系统的用户接口，程序从用户接口得到输入信息，shell将用户程序及其输入翻译成操作系统内核（kernel）能够识别的指令，并且操作系统内核执行完将返回的输出通过shell再呈现给用户</p>
<p>Shell也是一门编程语言，即shell脚本，shell是解释执行的脚本语言，可直接调用linux命令。 .java -&gt; .class</p>
<p>一个系统可以存在多个shell，可以通过cat /etc/shells命令查看系统中安装的shell，不同的shell可能支持的命令语法是不相同的。</p>
<p>shell本质上是一个.sh结尾的文件，运行这个文件即是执行这个shell脚本</p>
<h2 id="Shell种类"><a href="#Shell种类" class="headerlink" title="Shell种类"></a>Shell种类</h2><p>　　操作系统内核（kernel）与shell是独立的套件，而且都可被替换。不同的操作系统使用不同的shell；同一个kernel之上可以使用不同的shell。</p>
<p>　　常见的shell分为两大主流：</p>
<p>　　<strong>sh</strong>：</p>
<p>　　　　Bourne shell（sh） ,Solaris,hpux默认shell</p>
<p>　　　　Bourne again shell（bash） ,Linux系统默认shell</p>
<p>　　<strong>csh</strong>：</p>
<p>　　　　C shell(csh)</p>
<p>　　　　tc shell(tcsh)</p>
<h2 id="查看使用Shell"><a href="#查看使用Shell" class="headerlink" title="查看使用Shell"></a>查看使用Shell</h2><p><img src="/14.1.linux/1478220-20180909162724107-79067916.png" alt="img"></p>
<h2 id="创建Shell脚本"><a href="#创建Shell脚本" class="headerlink" title="创建Shell脚本"></a>创建Shell脚本</h2><p>　　一个shell脚本通常包含如下部分：</p>
<h3 id="首行"><a href="#首行" class="headerlink" title="首行"></a>首行</h3><p>第一行内容在脚本的首行左侧，表示脚本将要调用的shell解释器，内容如下：</p>
<p>#!/bin/bash</p>
<p>#！符号能够被内核识别成是一个脚本的开始，这一行必须位于脚本的首行，/bin/bash是bash程序的绝对路径，在这里表示后续的内容将通过bash程序解释执行。</p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>注释符号# 放在需注释内容的前面，如下：</p>
<p><img src="/14.1.linux/1478220-20180909163342914-155992410.png" alt="img"></p>
<h3 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h3><p>可执行内容和shell结构，echo是输出语句，<code>date +%F</code>是shell中生成当前日期，格式如2015-11-05</p>
<p>DATE=<code>date -d &quot;-1 day&quot; +%F</code>  前一天的日期</p>
<p> <img src="/14.1.linux/1478220-20180909163422796-541570573.png" alt="img"></p>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;sh</span><br><span class="line"></span><br><span class="line"># Database info</span><br><span class="line">DB_USER&#x3D;&quot;&quot;</span><br><span class="line">DB_PASS&#x3D;&quot;&quot;</span><br><span class="line">DB_HOST&#x3D;&quot;&quot;</span><br><span class="line">DB_NAME&#x3D;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># Others vars</span><br><span class="line">BIN_DIR&#x3D;&quot;&#x2F;usr&#x2F;bin&quot;            #the mysql bin path</span><br><span class="line">BCK_DIR&#x3D;&quot;&#x2F;data&#x2F;backup_mysql&quot;    #the backup file directory</span><br><span class="line">DATE&#x3D;&#96;date +%F&#96;</span><br><span class="line"></span><br><span class="line"># TODO</span><br><span class="line">$BIN_DIR&#x2F;mysqldump --opt -h$DB_HOST -u$DB_USER -p$DB_PASS  $DB_NAME | gzip &gt; $BCK_DIR&#x2F;$DATE.sql.zip</span><br><span class="line"></span><br><span class="line"># 还原数据库</span><br><span class="line"># 把 *.sql.zip 使用gunzip 或 本地的解压软件 解压为 *.sql 文件</span><br><span class="line"># 用mysql-front导入前一天的 *.sql 文件即可恢复数据</span><br><span class="line"></span><br><span class="line">#如果该数据库的用户没有分配 锁表 的权限，则备份会报错 when using LOCK TABLES 。那是因为mysqldump命令默认在导出时是要锁定表的，所以解决方式有两个。一个是给该用户开放 锁表 的权限；另一个是在命令中加上  --skip-lock-tables 这个参数。即是：</span><br><span class="line"></span><br><span class="line">#$BIN_DIR&#x2F;mysqldump --opt -u$DB_USER -p$DB_PASS -h$DB_HOST $DB_NAME --skip-lock-tables | gzip &gt; $BCK_DIR&#x2F;db_$DATE.sql.gz</span><br></pre></td></tr></table></figure>



<h2 id="Shell脚本的权限"><a href="#Shell脚本的权限" class="headerlink" title="Shell脚本的权限"></a>Shell脚本的权限</h2><p>　　一般情况下，默认创建的脚本是没有执行权限的。</p>
<p><img src="/14.1.linux/1478220-20180909163516646-385129409.png" alt="img"></p>
<p>　　没有权限不能执行，需要赋予可执行权限。（进入到该脚本文件目录 chmod +x sqlAutoBak.sh 添加执行权限，否则会报错  Permission denied）</p>
<p><img src="/14.1.linux/1478220-20180909163601299-1304176479.png" alt="img"></p>
<p>执行脚本：./sqlAutoBak.sh</p>
<p>注：如果是在windows编写上传的文件可能会报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;bin&#x2F;sh^M: bad interpreter: No such file or directory</span><br></pre></td></tr></table></figure>


<p>这是不同系统编码格式引起的：在 windows系统中编辑的 .sh文件可能有不可见字符，所以在 Linux系统下执行会报以上异常信息。可以在Windows上使用Notepad++转换成Unix格式（菜单中选择：编辑&gt;档案格式转换&gt;转换成UNIX）</p>
<h2 id="Shell脚本的执行"><a href="#Shell脚本的执行" class="headerlink" title="Shell脚本的执行"></a>Shell脚本的执行</h2><h3 id="1，输入脚本的绝对路径或相对路径"><a href="#1，输入脚本的绝对路径或相对路径" class="headerlink" title="1，输入脚本的绝对路径或相对路径"></a>1，输入脚本的绝对路径或相对路径</h3><p>　　　　/root/helloWorld.sh</p>
<p>　　　　./helloWorld.sh</p>
<h3 id="2，bash或sh-脚本"><a href="#2，bash或sh-脚本" class="headerlink" title="2，bash或sh +脚本"></a>2，bash或sh +脚本</h3><p>　　　　bash /root/helloWorld.sh</p>
<p>　　　　sh helloWorld.sh</p>
<p>注：当脚本没有x权限时，root和文件所有者通过该方式可以正常执行。</p>
<p><img src="/14.1.linux/1478220-20180909163735967-1442298941.png" alt="img"></p>
<h3 id="3，在脚本的路径前再加”-“-或source"><a href="#3，在脚本的路径前再加”-“-或source" class="headerlink" title="3，在脚本的路径前再加”. “ 或source"></a>3，在脚本的路径前再加”. “ 或source</h3><p>　　　　source /root/helloWorld.sh</p>
<p>　　　　. ./helloWorld.sh</p>
<p>　　区别：第一种和第二种会新开一个bash，不同bash中的变量无法共享。但是使用. ./脚本.sh 这种方式是在同一个shell里面执行的。</p>
<p><img src="/14.1.linux/1478220-20180909163850037-1459460638.png" alt="img"></p>
<h1 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h1><p>检查是否安装了crontab，如果提示未安装请自行安装，crontab安装包在系统光盘里面的pacekage文件夹crontabs安装包。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep crontab</span><br></pre></td></tr></table></figure>

<p>crontab服务启动与关闭。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;etc&#x2F;init.d&#x2F;crond stop           --关闭服务</span><br><span class="line">&#x2F;etc&#x2F;init.d&#x2F;crond start           --启动服务</span><br><span class="line">&#x2F;etc&#x2F;init.d&#x2F;crond restart        --重启服务</span><br><span class="line">&#x2F;etc&#x2F;init.d&#x2F;crond reload        --重新载入配置</span><br></pre></td></tr></table></figure>

<p>编辑定时任务列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<p>查看任务是否创建成功</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -l</span><br></pre></td></tr></table></figure>

<p>删除当前用户定时任务(删除所有,除非不再使用,否则没必要使用）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -r        </span><br></pre></td></tr></table></figure>

<p>设置crond开机自动启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chkconfig  --list crond                 --查看crond是否开机自动启动</span><br><span class="line">chkconfig  --level 35 crond on  		--设置crond开机自动启动</span><br></pre></td></tr></table></figure>



<h1 id="日志问题"><a href="#日志问题" class="headerlink" title="日志问题"></a>日志问题</h1><p>可参考文章：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/kevingrace/p/6307298.html">https://www.cnblogs.com/kevingrace/p/6307298.html</a></p>
<p>logrotate是Linux系统自带命令，用于对系统日志进行轮转、压缩和删除，也可以将日志发送到指定邮箱。它默认的配置文件在:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;etc&#x2F;logrotate.conf </span><br><span class="line">&#x2F;etc&#x2F;logrotate.d&#x2F;</span><br></pre></td></tr></table></figure>

<p>以mqtt日志文件为例：</p>
<p>1.在logrotate.d目录中新建文件mosquitto，可以直接在该目录下使用vim mosquitto命令编辑文件mosquitto，写入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;var&#x2F;log&#x2F;mosquitto&#x2F;mosquitto.log &#123;</span><br><span class="line">daily</span><br><span class="line">dateext</span><br><span class="line">copytruncate</span><br><span class="line">nocompress</span><br><span class="line">rotate 15</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>/var/log/mosquitto/mosquitto.log: mosquitto日志输出文件（这里注意这个文件路径是之前.log的位置，一定要对，不然不会生效）<br>daily: 日志将按照天来转储，也可以设置为weekly和monthly<br>dateext: 转储后的日志文件会附加上日期信息，例如转储后文件为mosquitto.log-20181105，如果不加的话，文件名格式就变为了序号mosquitto.log-1<br>copytruncate: 备份日志文件并截断，设置为nocopytruncate时备份日志文件但是不截断<br>nocompress: 不进行压缩<br>rotate 15: 指定日志文件删除之前转储的次数</p>
<p>2.执行命令：<code>/usr/sbin/logrotate -vf /etc/logrotate.d/mosquitto</code></p>
<p>完成后可看到在/var/log/mosquitto/目录中多了一个文件mosquitto.log-20210806</p>
<h1 id="Linux上软件安装介绍"><a href="#Linux上软件安装介绍" class="headerlink" title="*Linux上软件安装介绍*"></a><em><strong>*Linux上软件安装介绍*</strong></em></h1><p>Linux上的软件安装有以下几种常见方式介绍</p>
<p>1.二进制发布包</p>
<p>软件已经针对具体平台编译打包发布，只要解压，修改配置即可（可能对linux的某个版本可以，其他版本不可用）</p>
<p>2.RPM包</p>
<p>软件已经按照redhat的包管理工具规范RPM进行打包发布，需要获取到相应的软件RPM发布包，然后用RPM命令进行安装（可能依赖其他包，需要下载其他包，但是可能没有打包依赖包）</p>
<p>3.Yum在线安装</p>
<p>软件已经以RPM规范打包，但发布在了网络上的一些服务器上，可用yum在线安装服务器上的rpm软件，并且会自动解决软件安装过程中的库依赖问题</p>
<p>4.源码编译安装</p>
<p>软件以源码工程的形式发布，需要获取到源码工程后用相应开发工具进行编译打包部署。</p>
<p>上传与下载工具介绍：就是windows和linux的文件交互</p>
<p>1.FileZilla：在windows上下载好</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps29.jpg" alt="img"> </p>
<p>解压后，运行exe文件：</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps30.jpg" alt="img"> </p>
<p>左边是windows的文件，右边是linux的文件，可以直接把左边的安装包拖拽到右边进行上传</p>
<p>2.lrzsz</p>
<p>我们可以在linux上使用yum安装方式安装 yum install lrzsz</p>
<p>注意：必须有网络</p>
<p>直接输入命令：yum install lrzsz 就会提示下载成功</p>
<p>可以在crt中设置上传与下载目录：在crt上面有个选项，会话选择</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps31.jpg" alt="img"> </p>
<p>上传：</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps32.jpg" alt="img"> </p>
<p>下载：</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps33.jpg" alt="img"> </p>
<p>在Linux上安装JDK:</p>
<p>1.上传JDK到Linux的服务器</p>
<p>通过rz命令上传JDK，然后java –version发现可以查到版本号，所以卸载自带的open-JDK</p>
<p>rpm -qa | grep java 查找自带的java版本。然后复制，再通过rpm -e –nodeps 复制的内容卸载</p>
<p>rpm -e –nodeps java-1.6.0-openjdk-1.6.0.35-1.13.7.1.el6_6.i686</p>
<p>rpm -e –nodeps java-1.7.0-openjdk-1.7.0.79-2.5.5.4.el6.i686</p>
<p>2.在Linux服务器上安装JDK</p>
<p>通常将软件安装到/usr/local</p>
<p>直接解压就可以： tar –xvf  jdk.tar.gz  -C 目标路径  </p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps34.jpg" alt="img">./就是当前</p>
<p>3.配置JDK的环境变量</p>
<p>ll查看jdk下的文件获得版本号</p>
<p>配置环境变量：</p>
<p>① vi /etc/profile</p>
<p>② 在末尾行添加</p>
<p>​    #set java environment</p>
<p>​    JAVA_HOME=/usr/local/jdk/jdk1.7.0_71</p>
<p>​    CLASSPATH=.:$JAVA_HOME/lib.tools.jar</p>
<p>​    PATH=$JAVA_HOME/bin:$PATH</p>
<p>​    export JAVA_HOME CLASSPATH PATH</p>
<p>保存退出 ：wq</p>
<p>③source /etc/profile  使更改的配置立即生效</p>
<p>在Linux上安装Mysql:</p>
<p>1.将mysql的安装文件上传到Linux的服务器.（也可以通过wget 网址下载Mysql的安装包）</p>
<p>rz上传</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps35.jpg" alt="img"> </p>
<p>将mysql的tar解压：创建一个新的mysql目录</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps36.jpg" alt="img"> </p>
<p>将系统自带的mysql卸载</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps37.jpg" alt="img"> </p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps38.jpg" alt="img"> </p>
<p>–nodeps是忽略相关依赖包</p>
<p>2.安装MYSQL服务端</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps39.jpg" alt="img"> </p>
<p>如果安装显示出错，需要导入相关的依赖包</p>
<p>下面的提示是告诉我们root用户的密码第一次是随机生成的，它保存在/root/.mysql_secret中，第一次登录需要修改root密码</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps40.jpg" alt="img"> </p>
<p>3.安装MYSQL客户端</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps41.jpg" alt="img"> </p>
<p>查看生成的root密码</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps42.jpg" alt="img"> </p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps43.jpg" alt="img"> </p>
<p>报错:原因是没有启动mysql服务</p>
<p>需要开启mysql服务</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps44.jpg" alt="img"> </p>
<p>可以通过netstat -nltp 查看现在的服务，找到3306的端口证明启动了mysql</p>
<p>然后进行登录，操作mysql时会报错，原因是第一次操作mysql必须修改root用户的密码</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps45.jpg" alt="img"> </p>
<p>设置root用户的密码为root</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps46.jpg" alt="img"> </p>
<p><em><strong>*M*</strong>***</em>*ysql服务加入到系统服务并自动启动操作********：****chkconfig –add mysql</p>
<p>自动启动：chkconfig mysql on</p>
<p>查询列表：chkconfig</p>
<p>关于mysql远程访问设置：</p>
<p>先登录到mysql，然后输入下面命令进行设置</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml2932\wps47.jpg" alt="img"> </p>
<p>在linux中很多软件的端口都被”防火墙”限止，我们需要将防火墙关闭，也可以将防火墙打开3306端口</p>
<p>/sbin/iptables -I INPUT -p tcp –dport 3306 -j ACCEPT</p>
<p>/etc/rc.d/init.d/iptables save</p>
<p>/etc/init.d/iptables status</p>
<p>学习阶段我们也可以直接将防火墙关闭（不推荐，因为服务器需要防火墙）：service iptables stop</p>
<p>在Linux上安装tomcat:</p>
<p>1.Tomcat上传到linux上：rz，上传文件。ll查看是否上传成功</p>
<p>2.将上传的tomcat解压：建目录mkdir tomcat7  ，然后tar -xvf 安装包名字 -C ./tomacat7</p>
<p>3.在tomcat/bin目录下执行 startup.sh（注意防火墙需要关闭）： ./startup.sh </p>
<p>4.查看日志 tomcat/logs/catalina.out：cat ./catalina.out</p>
<p>也可以查看cat ./catalina.日期.log</p>
<p>以后的文件工程可以放到webapp下进行发布</p>
<p><strong>Linux系统一般有4个主要部分：</strong></p>
<p>内核、shell、文件系统和应用程序。内核、shell和文件系统一起形成了基本的操作系统结构，它们使得用户可以运行程序、管理文件并使用系统。部分层次结构如图1-1所示。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/9aPYe0E1fb3DzFFWFib9rGhGy7kGA70lEDBbOe0FuicSPxypcgPoeL9uibcHTFXGQibX74k5ffhwscOY6zyhhZgH1w/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h1 id=""><a href="#" class="headerlink" title=""></a></h1><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iblTYUnF9yPPAFqPibv6Siadtw5kYIvianGuggAAZcL0nicTqibicKG1MUJG8Nvic9BVDaXuJSlRZquoQJjNkNgglBRAxA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>一、linux内核</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/1OKdYEbfJSc6gicBpKXLM0OehXMoaLEVciciaZtGq2EVOCnYxayTAq4iat0n7tpp67RLQyAwnJ704cic8UPyaYhQicRg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>内核是操作系统的核心，具有很多最基本功能，它负责管理系统的进程、内存、设备驱动程序、文件和网络系统，决定着系统的性能和稳定性。</p>
<p>Linux 内核由如下几部分组成：内存管理、进程管理、设备驱动程序、文件系统和网络管理等。如图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/9aPYe0E1fb3DzFFWFib9rGhGy7kGA70lETUWYmjOW4badfSmqjQhYuGiaxO1ZmiaiayfKJslK7oJBD2qZN4t5IHicuA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">图1</p>
<p> 系统调用接口：SCI 层提供了某些机制执行从用户空间到内核的函数调用。这个接口依赖于体系结构，甚至在相同的处理器家族内也是如此。SCI 实际上是一个非常有用的函数调用多路复用和多路分解服务。在 ./linux/kernel 中您可以找到 SCI 的实现，并在 ./linux/arch 中找到依赖于体系结构的部分。</p>
<h3 id="1、内存管理"><a href="#1、内存管理" class="headerlink" title="1、内存管理"></a><strong>1、内存管理</strong></h3><p>对任何一台计算机而言，其内存以及其它资源都是有限的。为了让有限的物理内存满足应用程序对内存的大需求量，Linux  采用了称为“虚拟内存”的内存管理方式。Linux  将内存划分为容易处理的“内存页”（对于大部分体系结构来说都是 4KB）。Linux 包括了管理可用内存的方式，以及物理和虚拟映射所使用的硬件机制。</p>
<p>不过内存管理要管理的可不止 4KB 缓冲区。Linux 提供了对 4KB 缓冲区的抽象，例如 slab 分配器。这种内存管理模式使用 4KB 缓冲区为基数，然后从中分配结构，并跟踪内存页使用情况，比如哪些内存页是满的，哪些页面没有完全使用，哪些页面为空。这样就允许该模式根据系统需要来动态调整内存使用。</p>
<p>为了支持多个用户使用内存，有时会出现可用内存被消耗光的情况。由于这个原因，页面可以移出内存并放入磁盘中。这个过程称为交换，因为页面会被从内存交换到硬盘上。内存管理的源代码可以在 ./linux/mm 中找到。</p>
<h3 id="2、进程管理"><a href="#2、进程管理" class="headerlink" title="2、进程管理"></a><strong>2、进程管理</strong></h3><p>进程实际是某特定应用程序的一个运行实体。在 Linux  系统中，能够同时运行多个进程，Linux  通过在短的时间间隔内轮流运行这些进程而实现“多任务”。这一短的时间间隔称为“时间片”，让进程轮流运行的方法称为“进程调度” ，完成调度的程序称为调度程序。</p>
<p>进程调度控制进程对CPU的访问。当需要选择下一个进程运行时，由调度程序选择最值得运行的进程。可运行进程实际上是仅等待CPU资源的进程，如果某个进程在等待其它资源，则该进程是不可运行进程。Linux使用了比较简单的基于优先级的进程调度算法选择新的进程。</p>
<p>通过多任务机制，每个进程可认为只有自己独占计算机，从而简化程序的编写。每个进程有自己单独的地址空间，并且只能由这一进程访问，这样，操作系统避免了进程之间的互相干扰以及“坏”程序对系统可能造成的危害。 为了完成某特定任务，有时需要综合两个程序的功能，例如一个程序输出文本，而另一个程序对文本进行排序。为此，操作系统还提供进程间的通讯机制来帮助完成这样的任务。Linux 中常见的进程间通讯机制有信号、管道、共享内存、信号量和套接字等。</p>
<p>内核通过 SCI 提供了一个应用程序编程接口（API）来创建一个新进程（fork、exec 或 Portable Operating System Interface [POSⅨ] 函数），停止进程（kill、exit），并在它们之间进行通信和同步（signal 或者 POSⅨ 机制）。</p>
<h3 id="3、-文件系统"><a href="#3、-文件系统" class="headerlink" title="3、 文件系统"></a><strong>3、 文件系统</strong></h3><p>和 DOS 等操作系统不同，Linux 操作系统中单独的文件系统并不是由驱动器号或驱动器名称（如 A:  或 C:  等）来标识的。相反，和 UNIX  操作系统一样，Linux 操作系统将独立的文件系统组合成了一个层次化的树形结构，并且由一个单独的实体代表这一文件系统。Linux  将新的文件系统通过一个称为“挂装”或“挂上”的操作将其挂装到某个目录上，从而让不同的文件系统结合成为一个整体。Linux  操作系统的一个重要特点是它支持许多不同类型的文件系统。Linux 中最普遍使用的文件系统是 Ext2，它也是 Linux  土生土长的文件系统。但 Linux  也能够支持 FAT、VFAT、FAT32、MINIX 等不同类型的文件系统，从而可以方便地和其它操作系统交换数据。由于 Linux  支持许多不同的文件系统，并且将它们组织成了一个统一的虚拟文件系统.</p>
<p>虚拟文件系统（VirtualFileSystem,VFS）:隐藏了各种硬件的具体细节，把文件系统操作和不同文件系统的具体实现细节分离了开来，为所有的设备提供了统一的接口，VFS提供了多达数十种不同的文件系统。虚拟文件系统可以分为逻辑文件系统和设备驱动程序。逻辑文件系统指Linux所支持的文件系统，如ext2,fat等，设备驱动程序指为每一种硬件控制器所编写的设备驱动程序模块。</p>
<p>虚拟文件系统（VFS）是 Linux 内核中非常有用的一个方面，因为它为文件系统提供了一个通用的接口抽象。VFS 在 SCI 和内核所支持的文件系统之间提供了一个交换层。即VFS 在用户和文件系统之间提供了一个交换层。</p>
<h5 id="VFS在用户和文件系统之间提供了一个交换层"><a href="#VFS在用户和文件系统之间提供了一个交换层" class="headerlink" title="VFS在用户和文件系统之间提供了一个交换层:"></a>VFS在用户和文件系统之间提供了一个交换层:</h5><p><img src="https://mmbiz.qpic.cn/mmbiz/9aPYe0E1fb3DzFFWFib9rGhGy7kGA70lEQqkMREF3lmAGBkIon8Nm1VNjPdYz1KxFnV2oEVdLjNU9AnJzPRDVuw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>在 VFS 上面，是对诸如 open、close、read 和 write 之类的函数的一个通用 API 抽象。在 VFS 下面是文件系统抽象，它定义了上层函数的实现方式。它们是给定文件系统（超过 50 个）的插件。文件系统的源代码可以在 ./linux/fs 中找到。</p>
<p>文件系统层之下是缓冲区缓存，它为文件系统层提供了一个通用函数集（与具体文件系统无关）。这个缓存层通过将数据保留一段时间（或者随即预先读取数据以便在需要是就可用）优化了对物理设备的访问。缓冲区缓存之下是设备驱动程序，它实现了特定物理设备的接口。</p>
<p>因此，用户和进程不需要知道文件所在的文件系统类型，而只需要象使用 Ext2  文件系统中的文件一样使用它们。</p>
<h3 id="4、设备驱动程序"><a href="#4、设备驱动程序" class="headerlink" title="4、设备驱动程序"></a><strong>4、设备驱动程序</strong></h3><p>设备驱动程序是 Linux  内核的主要部分。和操作系统的其它部分类似，设备驱动程序运行在高特权级的处理器环境中，从而可以直接对硬件进行操作，但正因为如此，任何一个设备驱动程序的错误都可能导致操作系统的崩溃。设备驱动程序实际控制操作系统和硬件设备之间的交互。</p>
<p>设备驱动程序提供一组操作系统可理解的抽象接口完成和操作系统之间的交互，而与硬件相关的具体操作细节由设备驱动程序完成。一般而言，设备驱动程序和设备的控制芯片有关，例如，如果计算机硬盘是 SCSI  硬盘，则需要使用 SCSI  驱动程序，而不是 IDE 驱动程序。</p>
<h3 id="5、网络接口（NET）"><a href="#5、网络接口（NET）" class="headerlink" title="5、网络接口（NET）"></a><strong>5、网络接口（NET）</strong></h3><p>提供了对各种网络标准的存取和各种网络硬件的支持。网络接口可分为网络协议和网络驱动程序。网络协议部分负责实现每一种可能的网络传输协议。众所周知，TCP/IP  协议是 Internet  的标准协议，同时也是事实上的工业标准。</p>
<p>Linux  的网络实现支持 BSD 套接字，支持全部的TCP/IP协议。Linux内核的网络部分由BSD套接字、网络协议层和网络设备驱动程序组成。网络设备驱动程序负责与硬件设备通讯，每一种可能的硬件设备都有相应的设备驱动程序。</p>
<h1 id="-1"><a href="#-1" class="headerlink" title=""></a></h1><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iblTYUnF9yPPAFqPibv6Siadtw5kYIvianGuggAAZcL0nicTqibicKG1MUJG8Nvic9BVDaXuJSlRZquoQJjNkNgglBRAxA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>二、linux shell</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/1OKdYEbfJSc6gicBpKXLM0OehXMoaLEVciciaZtGq2EVOCnYxayTAq4iat0n7tpp67RLQyAwnJ704cic8UPyaYhQicRg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>shell是系统的用户界面，提供了用户与内核进行交互操作的一种接口。它接收用户输入的命令并把它送入内核去执行，是一个命令解释器。另外，shell编程语言具有普通编程语言的很多特点，用这种编程语言编写的shell程序与其他应用程序具有同样的效果。</p>
<p><strong>目前主要有下列版本的shell。</strong></p>
<p>1、Bourne Shell：是贝尔实验室开发的。<br>2、BASH：是GNU的Bourne Again Shell，是GNU操作系统上默认的shell,大部分linux的发行套件使用的都是这种shell。<br>3、Korn Shell：是对Bourne SHell的发展，在大部分内容上与Bourne Shell兼容。<br>4、C Shell：是SUN公司Shell的BSD版本。</p>
<h1 id="-2"><a href="#-2" class="headerlink" title=""></a></h1><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iblTYUnF9yPPAFqPibv6Siadtw5kYIvianGuggAAZcL0nicTqibicKG1MUJG8Nvic9BVDaXuJSlRZquoQJjNkNgglBRAxA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>三、****linux 文件系统</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/1OKdYEbfJSc6gicBpKXLM0OehXMoaLEVciciaZtGq2EVOCnYxayTAq4iat0n7tpp67RLQyAwnJ704cic8UPyaYhQicRg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>文件系统是文件存放在磁盘等存储设备上的组织方法。Linux系统能支持多种目前流行的文件系统，如EXT2、 EXT3、 FAT、 FAT32、 VFAT和ISO9660。</p>
<h3 id="3-1-文件类型"><a href="#3-1-文件类型" class="headerlink" title="3.1 文件类型"></a><strong>3.1 文件类型</strong></h3><p>Linux下面的文件类型主要有：</p>
<p><strong>1) 普通文件：</strong>C语言元代码、SHELL脚本、二进制的可执行文件等。分为纯文本和二进制。<br><strong>2) 目录文件：</strong>目录，存储文件的唯一地方。<br><strong>3) 链接文件：</strong>指向同一个文件或目录的的文件。<br><strong>4) 设备文件：</strong>与系统外设相关的，通常在/dev下面。分为块设备和字符设备。</p>
<p><strong>5）管道(FIFO)文件 :</strong> 提供进程建通信的一种方式<br><strong>6）套接字(socket) 文件：</strong> 该文件类型与网络通信有关</p>
<p>可以通过ls –l, file, stat几个命令来查看文件的类型等相关信息。</p>
<h3 id="3-2-Linux目录"><a href="#3-2-Linux目录" class="headerlink" title="3.2  Linux目录"></a><strong>3.2  Linux目录</strong></h3><p>文件结构是文件存放在磁盘等存贮设备上的组织方法。主要体现在对文件和目录的组织上。</p>
<p>目录提供了管理文件的一个方便而有效的途径。</p>
<p>Linux使用标准的目录结构，在安装的时候，安装程序就已经为用户创建了文件系统和完整而固定的目录组成形式，并指定了每个目录的作用和其中的文件类型。</p>
<p>完整的目录树可划分为小的部分，这些小部分又可以单独存放在自己的磁盘或分区上。这样，相对稳定的部分和经常变化的部分可单独存放在不同的分区中，从而方便备份或系统管理。目录树的主要部分有 root、/usr、/var、/home  等（图2） 。这样的布局可方便在 Linux 计算机之间共享文件系统的某些部分。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/9aPYe0E1fb3DzFFWFib9rGhGy7kGA70lEs5lJ5fZtO0ibWSopT8HNxrGISkXhdWxKwicwodAHXdLluic9ibuQszIGOA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>图2</p>
<p>Linux采用的是树型结构。最上层是根目录，其他的所有目录都是从根目录出发而生成的。</p>
<p>微软的DOS和windows也是采用树型结构，但是在DOS和 windows中这样的树型结构的根是磁盘分区的盘符，有几个分区就有几个树型结构，他们之间的关系是并列的。最顶部的是不同的磁盘（分区），如：C，D，E，F等。</p>
<p>但是在linux中，无论操作系统管理几个磁盘分区，这样的目录树只有一个。从结构上讲，各个磁盘分区上的树型目录不一定是并列的。</p>
<h3 id="3-3-Linux磁盘分区"><a href="#3-3-Linux磁盘分区" class="headerlink" title="3.3 Linux磁盘分区"></a><strong>3.3 Linux磁盘分区</strong></h3><h4 id="一、主分区，扩展分区和逻辑分区："><a href="#一、主分区，扩展分区和逻辑分区：" class="headerlink" title="一、主分区，扩展分区和逻辑分区："></a><strong>一、主分区，扩展分区和逻辑分区：</strong></h4><p>linux分区不同于windows,硬盘和硬盘分区在Linux都表示为设备.</p>
<p><strong>硬盘分区一共有三种：</strong>主分区，扩展分区和逻辑分区。</p>
<p>硬盘的分区主要分为主分区(Primary Partion)和扩展分区(Extension Partion)两种，主分区和扩展分区的数目之和不能大于四个。</p>
<blockquote>
<p><strong>主分区(Primary Partion)：</strong>可以马上被使用但不能再分区。</p>
<p><strong>扩展分区(Extension Partion)：</strong>必须再进行分区后才能使用，也就是说它必须还要进行二次分区。</p>
<p><strong>逻辑分区（(Logical Partion)）：</strong>由扩展分区建立起来的分区。逻辑分区没有数量上限制。</p>
</blockquote>
<p>扩展分区只不过是逻辑分区的“容器”，实际上只有主分区和逻辑分区进行数据存储。</p>
<h4 id="二、Linux下硬盘分区的标识"><a href="#二、Linux下硬盘分区的标识" class="headerlink" title="二、Linux下硬盘分区的标识"></a><strong>二、Linux下硬盘分区的标识</strong></h4><p>硬盘分区的标识一般使用/dev/hd[a-z]X或者/dev/sd[a-z]X来标识，其中[a-z]代表硬盘号，X代表硬盘内的分区号。</p>
<p>整块硬盘分区的块号标识:Linux下用hda、hdb、sda、sdb 等来标识不同的硬盘;</p>
<p><strong>其中：</strong></p>
<p><strong>IDE接口硬盘：</strong>表示为/dev/hda1、/dev/hdb …；</p>
<p>SCSI 接口的硬盘、SATA接口的硬盘表示为/dev/sda、/dev/sdb … … ；</p>
<p><strong>硬盘内的分区：</strong>如果X的值是1到4,表示硬盘的主分区（包含扩展分区）；逻辑分区从是从5开始的，比如/dev/hda5肯定是逻辑分区了；</p>
<p><strong>例如：</strong></p>
<p>用hda1、hda2、 hda5、hda6 来标识不同的分区。其中，字母a 代表第一块硬盘，b代表第二块硬盘，依次类推。而数字1 代表一块硬盘的第一个分区、2 代表第二个分区，依次类推。1 到4 对应的是主分区(Primary Partition)或扩展分区(Extension Partition)。从5开始，对应的都是硬盘的逻辑分区(Logical Partition)。一块硬盘即使只有一个主分区，逻辑分区也是从5开始编号的，这点应特别注意。</p>
<p><strong>总结：</strong>一个硬盘分区首先要大确认在哪个硬盘，然后再确认它所在硬盘内的哪个分区。</p>
<p>对于/dev/hda 类似的表示方法，也并不寞生吧；我们在Linux通过fdisk -l 就可以查到硬盘是/dev/hda还是/dev/hdb；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  　[root@localhost ~]# fdisk -l      　　</span><br><span class="line">   　Disk &#x2F;dev&#x2F;hda: 80.0 GB, 80026361856 bytes   　　255 heads, 63 sectors&#x2F;track, 9729 cylinders   　　Units &#x3D; cylinders of 16065 * 512 &#x3D; 8225280 bytes   　　 Device Boot Start End Blocks Id System   　　&#x2F;dev&#x2F;hda1 * 1 970 7791493+ 7 HPFS&#x2F;NTFS   　　&#x2F;dev&#x2F;hda2 971 9729 70356667+ 5 Extended   　　&#x2F;dev&#x2F;hda5 971 2915 15623181 b W95 FAT32   　　&#x2F;dev&#x2F;hda6 2916 4131 9767488+ 83 linux   　　&#x2F;dev&#x2F;hda7 4132 5590 11719386 83 linux   　　&#x2F;dev&#x2F;hda8 5591 6806 9767488+ 83 linux   　　&#x2F;dev&#x2F;hda9 6807 9657 22900626 83 linux   　　&#x2F;dev&#x2F;hda10 9658 9729 578308+ 82 linux swap &#x2F; Solaris</span><br></pre></td></tr></table></figure>

<p>请注意第一行， Disk /dev/hda: 80.0 GB, 80026361856 bytes ，这个就是表示机器中只有一个硬盘设备/dev/hda ，体积大小为 80.0G；下面的就是硬盘的分区，每个分区都有详细的信息，在这里不详细说了；</p>
<p><strong>Linux下磁盘分区和目录的关系如下：</strong></p>
<p>– 任何一个分区都必须挂载到某个目录上。</p>
<p>– 目录是逻辑上的区分。分区是物理上的区分。</p>
<p>– 磁盘Linux分区都必须挂载到目录树中的某个具体的目录上才能进行读写操作。</p>
<p>– 根目录是所有Linux的文件和目录所在的地方，需要挂载上一个磁盘分区。</p>
<h3 id="3-4-linux主要目录的功用。"><a href="#3-4-linux主要目录的功用。" class="headerlink" title="3.4 linux主要目录的功用。"></a><strong>3.4 linux主要目录的功用。</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;bin 二进制可执行命令   　　</span><br><span class="line"> &#x2F;dev 设备特殊文件   　　&#x2F;etc 系统管理和配置文件   　　&#x2F;etc&#x2F;rc.d 启动的配置文件和脚本   　　&#x2F;home 用户主目录的基点，比如用户user的主目录就是&#x2F;home&#x2F;user，可以用~user表示   　　&#x2F;lib 标准程序设计库，又叫动态链接共享库，作用类似windows里的.dll文件   　　&#x2F;sbin 系统管理命令，这里存放的是系统管理员使用的管理程序   　　&#x2F;tmp 公用的临时文件存储点   　　&#x2F;root 系统管理员的主目录（呵呵，特权阶级）   　　&#x2F;mnt 系统提供这个目录是让用户临时挂载其他的文件系统。  　　&#x2F;lost+found 这个目录平时是空的，系统非正常关机而留下“无家可归”的文件（windows下叫什么.chk）就在这里   　　&#x2F;proc 虚拟的目录，是系统内存的映射。可直接访问这个目录来获取系统信息。  　　&#x2F;var 某些大文件的溢出区，比方说各种服务的日志文件   　　&#x2F;usr 最庞大的目录，要用到的应用程序和文件几乎都在这个目录。其中包含：  　　      &#x2F;usr&#x2F;X11R6 存放X window的目录   　　      &#x2F;usr&#x2F;bin 众多的应用程序   　　      &#x2F;usr&#x2F;sbin 超级用户的一些管理程序   　　      &#x2F;usr&#x2F;doc linux文档   　　      &#x2F;usr&#x2F;include linux下开发和编译应用程序所需要的头文件   　　      &#x2F;usr&#x2F;lib 常用的动态链接库和软件包的配置文件   　　      &#x2F;usr&#x2F;man 帮助文档   　　      &#x2F;usr&#x2F;src 源代码，linux内核的源代码就放在&#x2F;usr&#x2F;src&#x2F;linux里   　　      &#x2F;usr&#x2F;local&#x2F;bin 本地增加的命令   　　      &#x2F;usr&#x2F;local&#x2F;lib 本地增加的库</span><br></pre></td></tr></table></figure>

<h3 id="3-5-linux文件系统"><a href="#3-5-linux文件系统" class="headerlink" title="3.5  linux文件系统"></a><strong>3.5  linux文件系统</strong></h3><p>文件系统指文件存在的物理空间，linux系统中每个分区都是一个文件系统，都有自己的目录层次结构。linux会将这些分属不同分区的、单独的文件系统按一定的方式形成一个系统的总的目录层次结构。一个操作系统的运行离不开对文件的操作，因此必然要拥有并维护自己的文件系统。</p>
<p><strong>1、文件系统类型：</strong></p>
<h4 id="ext2-：-早期linux中常用的文件系统-ext3-：-ext2的升级版，带日志功能-RAMFS-：-内存文件系统，速度很快-NFS-：-网络文件系统，由SUN发明，主要用于远程文件共享-MS-DOS-：-MS-DOS文件系统-VFAT-：-Windows-95-98-操作系统采用的文件系统-FAT-：-Windows-XP-操作系统采用的文件系统-NTFS：-Windows-NT-XP-操作系统采用的文件系统-HPFS-：-OS-2-操作系统采用的文件系统-PROC-虚拟的进程文件系统-ISO9660-：-大部分光盘所采用的文件系统-ufsSun-OS-所采用的文件系统-NCPFS-：-Novell-服务器所采用的文件系统-SMBFS-：-Samba-的共享文件系统-XFS-：-由SGI开发的先进的日志文件系统，支持超大容量文件-JFS-：IBM的AIX使用的日志文件系统-ReiserFS-基于平衡树结构的文件系统-udf-可擦写的数据光盘文件系统"><a href="#ext2-：-早期linux中常用的文件系统-ext3-：-ext2的升级版，带日志功能-RAMFS-：-内存文件系统，速度很快-NFS-：-网络文件系统，由SUN发明，主要用于远程文件共享-MS-DOS-：-MS-DOS文件系统-VFAT-：-Windows-95-98-操作系统采用的文件系统-FAT-：-Windows-XP-操作系统采用的文件系统-NTFS：-Windows-NT-XP-操作系统采用的文件系统-HPFS-：-OS-2-操作系统采用的文件系统-PROC-虚拟的进程文件系统-ISO9660-：-大部分光盘所采用的文件系统-ufsSun-OS-所采用的文件系统-NCPFS-：-Novell-服务器所采用的文件系统-SMBFS-：-Samba-的共享文件系统-XFS-：-由SGI开发的先进的日志文件系统，支持超大容量文件-JFS-：IBM的AIX使用的日志文件系统-ReiserFS-基于平衡树结构的文件系统-udf-可擦写的数据光盘文件系统" class="headerlink" title="ext2 ： 早期linux中常用的文件系统 ext3 ： ext2的升级版，带日志功能 RAMFS ： 内存文件系统，速度很快 NFS ： 网络文件系统，由SUN发明，主要用于远程文件共享 MS-DOS ： MS-DOS文件系统 VFAT ： Windows 95/98 操作系统采用的文件系统 FAT ： Windows XP 操作系统采用的文件系统 NTFS： Windows NT/XP 操作系统采用的文件系统 HPFS ： OS/2 操作系统采用的文件系统 PROC : 虚拟的进程文件系统 ISO9660 ： 大部分光盘所采用的文件系统 ufsSun : OS 所采用的文件系统 NCPFS ： Novell 服务器所采用的文件系统 SMBFS ： Samba 的共享文件系统 XFS ： 由SGI开发的先进的日志文件系统，支持超大容量文件 JFS ：IBM的AIX使用的日志文件系统 ReiserFS : 基于平衡树结构的文件系统 udf: 可擦写的数据光盘文件系统"></a><strong>ext2 ：</strong> 早期linux中常用的文件系统 <strong>ext3 ：</strong> ext2的升级版，带日志功能 <strong>RAMFS ：</strong> 内存文件系统，速度很快 <strong>NFS ：</strong> 网络文件系统，由SUN发明，主要用于远程文件共享 <strong>MS-DOS ：</strong> MS-DOS文件系统 <strong>VFAT ：</strong> Windows 95/98 操作系统采用的文件系统 <strong>FAT ：</strong> Windows XP 操作系统采用的文件系统 <strong>NTFS：</strong> Windows NT/XP 操作系统采用的文件系统 <strong>HPFS ：</strong> OS/2 操作系统采用的文件系统 <strong>PROC :</strong> 虚拟的进程文件系统 <strong>ISO9660 ：</strong> 大部分光盘所采用的文件系统 <strong>ufsSun :</strong> OS 所采用的文件系统 <strong>NCPFS ：</strong> Novell 服务器所采用的文件系统 <strong>SMBFS ：</strong> Samba 的共享文件系统 <strong>XFS ：</strong> 由SGI开发的先进的日志文件系统，支持超大容量文件 <strong>JFS ：</strong>IBM的AIX使用的日志文件系统 ReiserFS : 基于平衡树结构的文件系统 udf: 可擦写的数据光盘文件系统</h4><h4 id="2、文件系统特性："><a href="#2、文件系统特性：" class="headerlink" title="2、文件系统特性："></a><strong>2、文件系统特性：</strong></h4><p>磁盘分区完毕后还需要进行格式化(format)，之后操作系统才能够使用这个分区。格式化的目的是能使操作系统可以使用的文件系统格式（即我们上面提到文件系统类型）.</p>
<p>每种操作系统能够使用的文件系统并不相同. 如windows 98 以前的微软操作系统主要利用的文件系统是 FAT (或 FAT16)，windows 2000 以后的版本有所谓的 NTFS 文件系统，至于 Linux 的正统文件系统则为 Ext2 (Linux second extended file system, ext2fs)这一个。此外，在默认的情况下，windows 操作系统是不会认识 Linux 的 Ext2 的。</p>
<p>传统的磁盘与文件系统之应用中，一个分区就是只能够被格式化成为一个文件系统，所以我们可以说一个 filesystem 就是一个 partition。但是由于新技术的利用，例如我们常听到的LVM与软件磁盘阵列(software raid)， 这些技术可以将一个分区格式化为多个文件系统(例如LVM)，也能够将多个分区合成一个文件系统(LVM, RAID)！所以说，目前我们在格式化时已经不再说成针对 partition 来格式化了， 通常我们可以称呼一个可被挂载的数据为一个文件系统而不是一个分区喔！</p>
<p>那么文件系统是如何运行的呢？这与操作系统的文件数据有关。较新的操作系统的文件数据除了文件实际内容外， 通常含有非常多的属性，例如 Linux 操作系统的文件权限(rwx)与文件属性(拥有者、群组、时间参数等)。 文件系统通常会将这两部份的数据分别存放在不同的区块，权限与属性放置到 inode 中，至于实际数据则放置到 data block 区块中。另外，还有一个超级区块 (superblock) 会记录整个文件系统的整体信息，包括 inode 与 block 的总量、使用量、剩余量等。</p>
<p>对于一个磁盘分区来说，在被指定为相应的文件系统后，整个分区被分为 1024，2048 和 4096 字节大小的块。根据块使用的不同，可分为：</p>
<p>1、超级块(Superblock): 这是整个文件系统的第一块空间。包括整个文件系统的基本信息，如块大小，inode/block的总量、使用量、剩余量，指向空间 inode 和数据块的指针等相关信息。</p>
<p>2、inode块(文件索引节点) : 文件系统索引,记录文件的属性。它是文件系统的最基本单元，是文件系统连接任何子目录、任何文件的桥梁。每个子目录和文件只有唯一的一个 inode 块。它包含了文件系统中文件的基本属性(文件的长度、创建及修改时间、权限、所属关系)、存放数据的位置等相关信息. 在 Linux 下可以通过 “ls -li” 命令查看文件的 inode 信息。硬连接和源文件具有相同的 inode 。</p>
<p>3、数据块(Block) :实际记录文件的内容，若文件太大时，会占用多个 block。为了提高目录访问效率，Linux 还提供了表达路径与 inode 对应关系的 dentry 结构。它描述了路径信息并连接到节点 inode，它包括各种目录信息，还指向了 inode 和超级块。</p>
<p>就像一本书有封面、目录和正文一样。在文件系统中，超级块就相当于封面，从封面可以得知这本书的基本信息；inode 块相当于目录，从目录可以得知各章节内容的位置；而数据块则相当于书的正文，记录着具体内容。</p>
<p>Linux正统的文件系统(如ext2、3等)将硬盘分区时会划分出超级块、inode Table区块和data block数据区域。一个文件由一个超级块、inode和数据区域块组成。Inode包含文件的属性(如读写属性、owner等，以及指向数据块的指针)，数据区域块则是文件内容。当查看某个文件时，会先从inode table中查出文件属性及数据存放点，再从数据块中读取数据。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/9aPYe0E1fb3DzFFWFib9rGhGy7kGA70lEG57fUxgGiagsu2Ty4hUoPaKBu81GmhwLPJAc4nAc6icE8VfOZdgZdDpA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>ext2文件系统示意图</p>
<p>我们将 inode 与 block 区块用图解来说明一下，如下图所示，文件系统先格式化出 inode 与 block 的区块，假设某一个文件的属性与权限数据是放置到 inode 4 号(下图较小方格内)，而这个 inode 记录了文件数据的实际放置点为 2, 7, 13, 15 这四个 block 号码，此时我们的操作系统就能够据此来排列磁盘的阅读顺序，可以一口气将四个 block 内容读出来！那么数据的读取就如同下图中的箭头所指定的模样了。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/9aPYe0E1fb3DzFFWFib9rGhGy7kGA70lExkXOIu9JicNV1EibibQSEcLezMzcicbQZ2d6mBa0NefDIKXth0rUGouuEg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>图 inode/block 数据存取示意图</p>
<p>这种数据存取的方法我们称为索引式文件系统(indexed allocation)。那有没有其他的惯用文件系统可以比较一下啊？有的，那就是我们惯用的闪盘(闪存)，闪盘使用的文件系统一般为 FAT 格式。FAT 这种格式的文件系统并没有 inode 存在，所以 FAT 没有办法将这个文件的所有 block 在一开始就读取出来。每个 block 号码都记录在前一个 block 当中， 其读取方式有点像下图所示:</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/9aPYe0E1fb3DzFFWFib9rGhGy7kGA70lEicTYERpYiaUcHTbIntEic8A1lgZXX3YiaEpI8L5nBAv8ozsicHSv5xDly2g/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>图、FAT文件系统数据存取示意图</p>
<p>上图中我们假设文件的数据依序写入1-&gt;7-&gt;4-&gt;15号这四个 block 号码中， 但这个文件系统没有办法一口气就知道四个 block 的号码，他得要一个一个的将 block 读出后，才会知道下一个 block 在何处。如果同一个文件数据写入的 block 分散的太过厉害时，则我们的磁盘读取头将无法在磁盘转一圈就读到所有的数据， 因此磁盘就会多转好几圈才能完整的读取到这个文件的内容！</p>
<p>常常会听到所谓的“碎片整理”吧？ 需要碎片整理的原因就是文件写入的 block 太过于离散了，此时文件读取的效能将会变的很差所致。 这个时候可以透过碎片整理将同一个文件所属的 blocks 汇整在一起，这样数据的读取会比较容易啊！ 想当然尔，FAT 的文件系统需要经常的碎片整理一下，那么 Ext2 是否需要磁盘重整呢？</p>
<p>由于 Ext2 是索引式文件系统，基本上不太需要常常进行碎片整理的。但是如果文件系统使用太久， 常常删除/编辑/新增文件时，那么还是可能会造成文件数据太过于离散的问题，此时或许会需要进行重整一下的。不过，老实说，鸟哥倒是没有在 Linux 操作系统上面进行过 Ext2/Ext3 文件系统的碎片整理说！似乎不太需要啦！^_^</p>
<p>可以用ln命令对一个已经存在的文件再建立一个新的连接，而不复制文件的内容。连接有软连接和硬连接之分，软连接又叫符号连接。它们各自的特点是：</p>
<p>硬连接：原文件名和连接文件名都指向相同的物理地址。目录不能有硬连接；硬连接不能跨越文件系统（不能跨越不同的分区）文件在磁盘中只有一个拷贝，节省硬盘空间；</p>
<p>由于删除文件要在同一个索引节点属于唯一的连接时才能成功，因此可以防止不必要的误删除。</p>
<p>符号连接：用ln -s命令建立文件的符号连接符号连接是linux特殊文件的一种，作为一个文件，它的数据是它所连接的文件的路径名。类似windows下的快捷方式。</p>
<p>可以删除原有的文件而保存连接文件，没有防止误删除功能。</p>
<p>这一段的的内容过于抽象，又是节点又是数组的，我已经尽量通俗再通俗了，又不好加例子作演示。大家如果还是云里雾里的话，我也没有什么办法了，只有先记住，日后在实际应用中慢慢体会、理解了。这也是我学习的一个方法吧。</p>
<h3 id="3-6-文件系统在内核中的表示"><a href="#3-6-文件系统在内核中的表示" class="headerlink" title="3.6 文件系统在内核中的表示"></a><strong>3.6 文件系统在内核中的表示</strong></h3><p><strong>内核数据结构</strong></p>
<p>Linux内核的VFS子系统可以图示如下：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/9aPYe0E1fb3DzFFWFib9rGhGy7kGA70lE0SomiaP6IeXYX7pyspBiaMgmHCf0lOhM5PKm0PtBbecPfZd190KG5CiaA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>文件与IO: 每个进程在PCB（Process Control Block）中都保存着一份文件描述符表，文件描述符就是这个表的索引，每个表项都有一个指向已打开文件的指针，现在我们明确一下：已打开的文件在内核中用file结构体表示，文件描述符表中的指针指向file结构体。</p>
<p>在file结构体中维护File Status Flag（file结构体的成员f_flags）和当前读写位置（file结构体的成员f_pos）。在上图中，进程1和进程2都打开同一文件，但是对应不同的file结构体，因此可以有不同的File Status Flag和读写位置。file结构体中比较重要的成员还有f_count，表示引用计数（Reference Count），后面我们会讲到，dup、fork等系统调用会导致多个文件描述符指向同一个file结构体，例如有fd1和fd2都引用同一个file结构体，那么它的引用计数就是2，当close(fd1)时并不会释放file结构体，而只是把引用计数减到1，如果再close(fd2)，引用计数就会减到0同时释放file结构体，这才真的关闭了文件。</p>
<p>每个file结构体都指向一个file_operations结构体，这个结构体的成员都是函数指针，指向实现各种文件操作的内核函数。比如在用户程序中read一个文件描述符，read通过系统调用进入内核，然后找到这个文件描述符所指向的file结构体，找到file结构体所指向的file_operations结构体，调用它的read成员所指向的内核函数以完成用户请求。在用户程序中调用lseek、read、write、ioctl、open等函数，最终都由内核调用file_operations的各成员所指向的内核函数完成用户请求。</p>
<p>file_operations结构体中的release成员用于完成用户程序的close请求，之所以叫release而不叫close是因为它不一定真的关闭文件，而是减少引用计数，只有引用计数减到0才关闭文件。对于同一个文件系统上打开的常规文件来说，read、write等文件操作的步骤和方法应该是一样的，调用的函数应该是相同的，所以图中的三个打开文件的file结构体指向同一个file_operations结构体。如果打开一个字符设备文件，那么它的read、write操作肯定和常规文件不一样，不是读写磁盘的数据块而是读写硬件设备，所以file结构体应该指向不同的file_operations结构体，其中的各种文件操作函数由该设备的驱动程序实现。</p>
<p>每个file结构体都有一个指向dentry结构体的指针，“dentry”是directory entry（目录项）的缩写。我们传给open、stat等函数的参数的是一个路径，例如/home/akaedu/a，需要根据路径找到文件的inode。为了减少读盘次数，内核缓存了目录的树状结构，称为dentry cache，其中每个节点是一个dentry结构体，只要沿着路径各部分的dentry搜索即可，从根目录/找到home目录，然后找到akaedu目录，然后找到文件a。dentry cache只保存最近访问过的目录项，如果要找的目录项在cache中没有，就要从磁盘读到内存中。</p>
<p>每个dentry结构体都有一个指针指向inode结构体。inode结构体保存着从磁盘inode读上来的信息。在上图的例子中，有两个dentry，分别表示/home/akaedu/a和/home/akaedu/b，它们都指向同一个inode，说明这两个文件互为硬链接。inode结构体中保存着从磁盘分区的inode读上来信息，例如所有者、文件大小、文件类型和权限位等。每个inode结构体都有一个指向inode_operations结构体的指针，后者也是一组函数指针指向一些完成文件目录操作的内核函数。</p>
<p>和file_operations不同，inode_operations所指向的不是针对某一个文件进行操作的函数，而是影响文件和目录布局的函数，例如添加删除文件和目录、跟踪符号链接等等，属于同一文件系统的各inode结构体可以指向同一个inode_operations结构体。</p>
<p>inode结构体有一个指向super_block结构体的指针。super_block结构体保存着从磁盘分区的超级块读上来的信息，例如文件系统类型、块大小等。super_block结构体的s_root成员是一个指向dentry的指针，表示这个文件系统的根目录被mount到哪里，在上图的例子中这个分区被mount到/home目录下。</p>
<p>file、dentry、inode、super_block这几个结构体组成了VFS的核心概念。对于ext2文件系统来说，在磁盘存储布局上也有inode和超级块的概念，所以很容易和VFS中的概念建立对应关系。而另外一些文件系统格式来自非UNIX系统（例如Windows的FAT32、NTFS），可能没有inode或超级块这样的概念，但为了能mount到Linux系统，也只好在驱动程序中硬凑一下，在Linux下看FAT32和NTFS分区会发现权限位是错的，所有文件都是rwxrwxrwx，因为它们本来就没有inode和权限位的概念，这是硬凑出来的。</p>
<h3 id="3-6-挂载文件系统"><a href="#3-6-挂载文件系统" class="headerlink" title="3.6  挂载文件系统"></a><strong>3.6  挂载文件系统</strong></h3><p>linux系统中每个分区都是一个文件系统，都有自己的目录层次结构。linux会将这些分属不同分区的、单独的文件系统按一定的方式形成一个系统的总的目录层次结构。这里所说的“按一定方式”就是指的挂载。</p>
<p>将一个文件系统的顶层目录挂到另一个文件系统的子目录上，使它们成为一个整体，称为挂载。把该子目录称为挂载点.</p>
<p>例如要读取硬盘中的一个格式化好的分区、光盘或软件等设备时，必须先把这些设备对应到某个目录上，而这个目录就称为“挂载点（mount point）”，这样才可以读取这些设备。挂载后将物理分区细节屏蔽掉，用户只有统一的逻辑概念。所有的东西都是文件。</p>
<p><strong>注意：</strong>1、挂载点必须是一个目录。</p>
<p>2、一个分区挂载在一个已存在的目录上，这个目录可以不为空，但挂载后这个目录下以前的内容将不可用。</p>
<p>对于其他操作系统建立的文件系统的挂载也是这样。但是需要理解的是：光盘、软盘、其他操作系统使用的文件系统的格式与linux使用的文件系统格式是不一样的。光盘是ISO9660；软盘是fat16或ext2；windows NT是fat16、NTFS；windows98是fat16、fat32；windows2000和windowsXP是fat16、fat32、 NTFS。挂载前要了解linux是否支持所要挂载的文件系统格式。</p>
<p>挂载时使用mount命令，其格式：mount [-参数] [设备名称] [挂载点]<br>其中常用的参数有</p>
<p>-t 指定设备的文件系统类型（什么提到的文件类型）<br>-o 指定挂载文件系统时的选项。有些也可用在/etc/fstab中。常用的有</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">codepage&#x3D;XXX 代码页  </span><br><span class="line">iocharset&#x3D;XXX 字符集   ro 以只读方式挂载   rw 以读写方式挂载   nouser 使一般用户无法挂载   user 可以让一般用户挂载设备</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<p><strong>1、挂载windows的文件系统：</strong></p>
<p>1）首先我们使用sudo fdisk -l查看挂载的设备，例如最下面有：/dev/hda5<br>2）mkdir创建一个目录，这里的目录是作为挂在目录，就是你要把E盘挂到这个目录下：mk /mnt/winc<br>3）windows和linux使用的不是一个文件系统，一般情况下linux不挂载windows文件系统，所以要你手动mount：<br># mount -t vfat /dev/hda5 /mnt/winc  （ -t vfat指出这里的文件系统fat32）<br>现在就可以进入/mnt/winc等目录读写这些文件了。</p>
<p><strong>2、挂载光盘：# mk /mnt/cdrom</strong></p>
<p># mount -t iso9660 /dev/cdrom /mnt/cdrom (关盘的名字一般都是cdrom，这条命令一般都通用)</p>
<p>3、虚拟机共享文件夹：例如在VirtualBox下，主机是Windows，Ubuntu是Guest。共分三步：</p>
<p>1). 首先要安装虚拟电脑工具包：在VirtualBox的菜单里选择”设备”-&gt;”安装虚拟电脑工具包”，你会发现在Ubuntu桌面上多出一个光盘图标，这张光盘默认被自动加载到了文件夹/media/cdom0，而且/cdrom自动指向这个文件夹。默认设置下文件管理器会自动打开这张光盘，可以看到里面有个”VBoxLinuxAdditions.run”文件。打开一个命令行终端，依次输入”cd /cdrom”和”sudo sh ./VBoxLinuxAdditions.run”，不含双引号，开始安装工具包。安装完毕，会用英文提示要重启Ubuntu，建议立刻重启。重启后，比较明显的变化是鼠标是共享模式，并且剪贴板也和Windows共享了。如果有这些变化，说明虚拟电脑工具包已经装成功。</p>
<p>2). 下一步设置共享文件夹。</p>
<p>在共享文件夹设置窗口中，单击右侧的”添加一个共享文件夹”，路径选择你想要共享的Windows文件夹，共享名任取一个自己喜欢的，比如”myshare”，选项read-only是指是否只允许ubuntu读这个文件夹，请根据需要选择这个选项。</p>
<p>3). 在ubuntu下挂载这个共享文件夹:sudo mount -t vboxsf myshare /media/share<br>其中”myshare”是之前取的共享文件夹的名字，”/media/share”是要挂载到的目标文件.</p>
<h3 id="3-7-自动挂载windows分区"><a href="#3-7-自动挂载windows分区" class="headerlink" title="3.7  自动挂载windows分区"></a><strong>3.7  自动挂载windows分区</strong></h3><p>每次开机访问windows分区都要运行mount命令显然太烦琐，为什么访问其他的linux分区不用使用mount命令呢？</p>
<p>其实，每次开机时，linux自动将需要挂载的linux分区挂载上了。那么我们是不是可以设定让linux在启动的时候也挂载我们希望挂载的分区，如windows分区，以实现文件系统的自动挂载呢？</p>
<p>这是完全可以的。在/etc目录下有个fstab文件，它里面列出了linux开机时自动挂载的文件系统的列表。我的/etc/fstab文件如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> 　&#x2F;dev&#x2F;hda2 &#x2F; ext3 defaults 1 1      　　</span><br><span class="line">  　&#x2F;dev&#x2F;hda1 &#x2F;boot ext3 defaults 1 2      　　</span><br><span class="line">  　none &#x2F;dev&#x2F;pts devpts gid&#x3D;5,mode&#x3D;620 0 0      　　</span><br><span class="line">  　none &#x2F;proc proc defaults 0 0      　　</span><br><span class="line">  　none &#x2F;dev&#x2F;shm tmpfs defaults 0 0      　　</span><br><span class="line">  　&#x2F;dev&#x2F;hda3 swap swap defaults 0 0      　　</span><br><span class="line">  　&#x2F;dev&#x2F;cdrom &#x2F;mnt&#x2F;cdrom iso9660 noauto,codepage&#x3D;936,iocharset&#x3D;gb2312 0 0      　　</span><br><span class="line">  　&#x2F;dev&#x2F;fd0 &#x2F;mnt&#x2F;floppy auto noauto,owner,kudzu 0 0      　　</span><br><span class="line">  　&#x2F;dev&#x2F;hdb1 &#x2F;mnt&#x2F;winc vfat defaults,codepage&#x3D;936,iocharset&#x3D;cp936 0 0      　　</span><br><span class="line">  　&#x2F;dev&#x2F;hda5 &#x2F;mnt&#x2F;wind vfat defaults,codepage&#x3D;936,iocharset&#x3D;cp936 0 0</span><br></pre></td></tr></table></figure>

<p>在/etc/fstab文件里，第一列是挂载的文件系统的设备名，第二列是挂载点，第三列是挂载的文件系统类型，第四列是挂载的选项，选项间用逗号分隔。第五六列不知道是什么意思，还望高手指点。</p>
<p>在最后两行是我手工添加的windows下的C；D盘，加了codepage=936和iocharset=cp936参数以支持中文文件名。参数defaults实际上包含了一组默认参数：</p>
<p>rw 以可读写模式挂载<br>suid 开启用户ID和群组ID设置位<br>dev 可解读文件系统上的字符或区块设备<br>exec 可执行二进制文件<br>auto 自动挂载<br>nouser 使一般用户无法挂载<br>async 以非同步方式执行文件系统的输入输出操作</p>
<p>大家可以看到在这个列表里，光驱和软驱是不自动挂载的，参数设置为noauto。（如果你非要设成自动挂载，你要确保每次开机时你的光驱和软驱里都要有盘，呵呵。)</p>
<h3 id="3-8-软连接、硬链接"><a href="#3-8-软连接、硬链接" class="headerlink" title="3.8 .软连接、硬链接"></a><strong>3.8 .软连接、硬链接</strong></h3><p>可以用ln命令对一个已经存在的文件再建立一个新的连接，而不复制文件的内容。连接有软连接和硬连接之分，软连接又叫符号连接。它们各自的特点是：</p>
<p>硬连接：是给文件一个副本，原文件名和连接文件名都指向相同的物理地址。目录不能有硬连接；硬连接不能跨越文件系统（不能跨越不同的分区）文件在磁盘中只有一个拷贝，节省硬盘空间；</p>
<p>修改其中一个，与其连接的文件同时被修改。如果删除其中任意一个其余的文件将不受影响。</p>
<p>由于删除文件要在同一个索引节点属于唯一的连接时才能成功，因此可以防止不必要的误删除。</p>
<p>符号连接（软连接）：用ln -s命令建立文件的符号连接符号连接是linux特殊文件的一种，作为一个文件，它的数据是它所连接的文件的路径名。类似windows下的快捷方式。</p>
<p>当然删除这个连接，也不会影响到源文件，但对连接文件的使用、引用都是直接调用源文件的。</p>
<p>具体关系可以看下图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/9aPYe0E1fb3DzFFWFib9rGhGy7kGA70lESwS1gbZe2qh6ZHTNxCZOUxJ0sfniaYcPpsJCicWdxOL44FibCvjAcwoDw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>图5：软链接和硬链接</p>
<p>从图上可以看出硬链接和软链接的区别：</p>
<blockquote>
<p>1：硬链接原文件和新文件的inode编号一致。而软链接不一样。</p>
<p>2：对原文件删除，会导致软链接不可用，而硬链接不受影响。</p>
<p>3：对原文件的修改，软、硬链接文件内容也一样的修改，因为都是指向同一个文件内容的。</p>
</blockquote>
<h3 id="3-9-文件目录管理命令"><a href="#3-9-文件目录管理命令" class="headerlink" title="3.9.文件目录管理命令"></a><strong>3.9.文件目录管理命令</strong></h3><p>磁盘和文件空间 ：fdisk df du</p>
<p>文件目录与管理：cd pwd mkdir rmdir ls cp rm mv</p>
<p>查看文件内容 cat、tac、more、less、head 、tail</p>
<p>文件目录与权限 ：chmod chown chgrp umask</p>
<p>文件查找：which、whereis、locate、find、find</p>
<h1 id="-3"><a href="#-3" class="headerlink" title=""></a></h1><p><img src="https://mmbiz.qpic.cn/mmbiz_png/iblTYUnF9yPPAFqPibv6Siadtw5kYIvianGuggAAZcL0nicTqibicKG1MUJG8Nvic9BVDaXuJSlRZquoQJjNkNgglBRAxA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>四、linux 应用</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/1OKdYEbfJSc6gicBpKXLM0OehXMoaLEVciciaZtGq2EVOCnYxayTAq4iat0n7tpp67RLQyAwnJ704cic8UPyaYhQicRg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>标准的Linux系统一般都有一套都有称为应用程序的程序集，它包括文本编辑器、编程语言、X Window、办公套件、Internet工具和数据库等。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/iblTYUnF9yPPAFqPibv6Siadtw5kYIvianGuggAAZcL0nicTqibicKG1MUJG8Nvic9BVDaXuJSlRZquoQJjNkNgglBRAxA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>五、linux内核参数优化</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/1OKdYEbfJSc6gicBpKXLM0OehXMoaLEVciciaZtGq2EVOCnYxayTAq4iat0n7tpp67RLQyAwnJ704cic8UPyaYhQicRg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>内核参数是用户和系统内核之间交互的一个接口，通过这个接口，用户可以在系统运行的同时动态更新内核配置，而这些内核参数是通过Linux Proc文件系统存在的。因此，可以通过调整Proc文件系统达到优化Linux性能的目的。</p>
<h1 id="VMware安装centos"><a href="#VMware安装centos" class="headerlink" title="VMware安装centos"></a>VMware安装centos</h1><p><a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/">http://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/</a></p>
<p>DVD是基本版本（推荐使用这个）</p>
<p>Everything是所有</p>
<p>minial是最小的。后面那个数字是大小。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2021/04/07/14.1.linux/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-20.测试" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/07/20.%E6%B5%8B%E8%AF%95/">测试</a>
    </h1>
  

        
        <a href="/2021/04/07/20.%E6%B5%8B%E8%AF%95/" class="archive-article-date">
  	<time datetime="2021-04-07T11:42:18.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2021-04-07</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>测试</p>
<p>首先会根据需求文档编写测试用例，用于指导如何测试，以及那些输入条件预期得到什么结果（需求文档，测试用例文档）</p>
<p>\1. UI测试：这是最基础的测试步骤，主要是按照需求文档，点击页面，看各个页面是否正确打开，是否与需求一致</p>
<p>\2. 白盒测试：此项主要是开发人员的自测，因为此项需要知道代码内部的逻辑，对照需求文档测试各个条件分支是否如预期的执行</p>
<p>\3. 黑盒测试：主要是测试人员完成的，此项不需要知道程序代码的内部逻辑，只需要关注输入条件，得到的输出结果是否与需求文档和测试用例相符合</p>
<p>\4. 边界条件测试：主要是测试各种边界值的情况，比如，只能输入正数的场景，如果输入0、或者负数是否会有相关提示</p>
<p>\5. 兼容性测试：按照需求文档的要求，需要兼容的操作系统平台或者浏览器种类和版本，都需要测试</p>
<p>\6. 性能测试：此项主要是通过测试工具，编写测试脚本，录制测试步骤，让测试工具模拟大数据量，多用户并发的操作，看看系统是否能够应付得了</p>
<p>\7. 用户交付测试：这是最后一个测试步骤了，主要是用户按照业务场景来模拟测试了，测试通过之后，就可以交互试用了</p>
<p>灰度测试，就是在某项产品或应用正式发布前，选择特定人群试用，逐步扩大其试用者数量，以便及时发现和纠正其中的问题，由“灰”到“黑”</p>
<p>基本测试的时候注意：</p>
<p>\1. 正确数据</p>
<p>\2. 错误数据</p>
<p>\3. 边界数据</p>
<p>//写测试类的时候，注意测试类中只调用，不创建方法。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2021/04/07/20.%E6%B5%8B%E8%AF%95/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-13.1.mybatis" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/07/13.1.mybatis/">mybatis</a>
    </h1>
  

        
        <a href="/2021/04/07/13.1.mybatis/" class="archive-article-date">
  	<time datetime="2021-04-07T11:42:08.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2021-04-07</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>框架一般都是有配置文件的，看官网文档最好。</p>
<p>Mybatis的学习：<a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/getting-started.html">https://mybatis.org/mybatis-3/zh/getting-started.html</a></p>
<p>一、简介</p>
<ol>
<li><p>基础：JDBC/Mysql/java基础/Maven/Junit</p>
</li>
<li><p>本来是aoache的一个开源项目ibatis，现在存于github</p>
</li>
</ol>
<p>MyBatis 是一款优秀的<strong>持久层框架</strong></p>
<p>它支持自定义 SQL、存储过程以及高级映射</p>
<p>MyBatis 免除了几乎所有的 JDBC 代码以及设置参数和获取结果集的工作</p>
<p>MyBatis 可以通过简单的 XML 或注解来配置和映射原始类型、接口和 Java POJO（Plain Old Java Objects，普通老式 Java 对象）为数据库中的记录。</p>
<ol start="3">
<li><p>maven仓库下载/github下载</p>
</li>
<li><p>持久化</p>
</li>
</ol>
<p>数据持久化：持久化就是将程序的数据在持久状态和瞬时状态转化的过程</p>
<p>内存：断电即失、价格昂贵，因为有一些对象不能丢掉，所以需要持久化。</p>
<p>持久化：数据库（JDBC）、io文件持久化</p>
<ol start="5">
<li>持久层</li>
</ol>
<p>Dao层/Service层/Controller层</p>
<p>完成持久化工作的代码，层界限十分明显。</p>
<ol start="6">
<li>MyBatis的存在意义：</li>
</ol>
<p>方便，更容易上手，灵活</p>
<p>传统的JDBC代码太复杂，需要简化。Mybatis是一个框架，可以自动化生成</p>
<p>将数据存入到数据库中，sql和代码分离，提高了可维护性；提供映射标签，支持对象和数据库的orm字段关系对应；提供对象关系映射标签，支持对象关系组件维护；提供xml标签，支持编写sql。</p>
<p>二、写一个程序</p>
<p>思路：搭建环境–导入mybatis–编写代码–测试</p>
<p>1.mysql中创建数据库资源</p>
<p>2.idea中新建一个普通的maven项目</p>
<p>3.删除src目录（以后只需要在父工程下创建module就会继承父工程的所有maven依赖）</p>
<p>4.导入maven依赖：mysql/mybatis/junit</p>
<p>5.创建一个新的module。</p>
<p>（每个基于 MyBatis 的应用都是以一个 SqlSessionFactory 的实例为核心的。SqlSessionFactory 的实例可以通过 SqlSessionFactoryBuilder 获得。而 SqlSessionFactoryBuilder 则可以从 XML 配置文件或一个预先配置的 Configuration 实例来构建出 SqlSessionFactory 实例。有了 SqlSessionFactory，我们可以从中获得 SqlSession 的实例。SqlSession 提供了在数据库执行 SQL 命令所需的所有方法。可以通过 SqlSession 实例来直接执行已映射的 SQL 语句。）</p>
<p>在新module下的resource下新建一个xml配置文件，在官网上找到相关的配置复制进去，environments中可以配置多个环境。配置的url可以连接到数据库中查找，？后可以添加相关的配置，&amp;需要用&amp;；转义。（中间不要加中文注释）    </p>
<p>例如：<code>jdbc:mysql://127.0.0.1:3306/jsh_erp?useUnicode=true&amp;characterEncoding=utf-8&amp;useCursorFetch=true&amp;defaultFetchSize=500&amp;allowMultiQueries=true&amp;rewriteBatchedStatements=true&amp;useSSL=false</code></p>
<p>也可以不使用 XML 构建 SqlSessionFactory</p>
<p>6.创建一个utils工具类（查看官方文档有具体方法）</p>
<p>静态初始化模块sqlSessionFactory，静态方法得到SqlSession</p>
<ol start="7">
<li>编写代码：</li>
</ol>
<p>以前：实体类pojo/Dao接口/接口实现类</p>
<p>现在：接口实现类由原来的UserDaoImpl转变为一个Mapper配置文件</p>
<p>8.测试：</p>
<p>可能存在的错误：</p>
<p>在MapperRegistry中，类型接口是未知的（每一个Mapper.xml都需要在Mybatis核心配置文件中注册，这里的路径是/  不能是.）</p>
<p>在maven的pom.xml中Build中配置resources，防止我们的资源导出失败的问题</p>
<p>绑定的接口错误：namespace中的包名要和Dao/Mapper接口中的名字一致（必须要用.  不能用/）</p>
<p>方法名不对：id就是对应namespace中的方法名</p>
<p>返回类型不对：resultType是sql语句执行的返回值</p>
<p>参数类型：parameterType</p>
<p>标签不要匹配错误</p>
<p>NullPointerException空指针异常是因为sqlSessionFactory搞了两个</p>
<p>输出的xml文件中存在乱码问题：设置为UTF-8</p>
<p>最后用junit测试</p>
<p>三、CRUD</p>
<p>#{} 相当于是占位符   全限定名 别名</p>
<p>#{} 是 占位符 ：动态解析 -&gt; 预编译 -&gt; 执行    #{} 对应的变量会自动加上单引号  #{}  能防止sql 注入  #{} 默认值 arg0、arg1、arg2  或 0、 1</p>
<p>${} 是 拼接符 ：动态解析 -&gt; 编译 -&gt; 执行  ${} 对应的变量不会加上单引号  ${}  不能防止sql 注入  ${} 默认值param1、param2、param3</p>
<p>使用：</p>
<p>1.能用 #{} 的地方就用 #{}，尽量少用 ${}<br>2.表名作参数，或者order by 排序时用 ${}<br>3.传参时参数使用@Param(“”)注解，@Param注解的作用是给参数命名，参数命名后就能根据名字得到参数值（相当于又加了一层密），正确的将参数传入sql语句中（一般通过#{}的方式，${}会有sql注入的问题）。如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Role selectById(@Param(&quot;id&quot;) String id);</span><br><span class="line">List&lt;Role&gt; selectByNameAndOrgId(@Param(&quot;name&quot;) String name, @Param(&quot;orgId&quot;) String orgId);</span><br></pre></td></tr></table></figure>



<p>增删改需要提交事务：sqlSession.commit(); </p>
<p>参数为int可以不用写</p>
<p>当报错的时候，读错要从后往前读</p>
<p>万能的Map：如果实体类中的属性有很多个，或者数据库的表/字段/参数过多时，可能直接传对象的属性不现实。所以可以使用map随意制造参数，通过键值对来传递（相当于是再new一个map，然后put参数，参数值，调用时候直接传map。会自动获取map参数对应的而参数值）。</p>
<p>Map传递参数，直接再sql中取出key即可。parameterType=“map”</p>
<p>对象传递参数，直接再sql中取对象的属性即可。parameterType=“object”</p>
<p>只有一个基本类型参数的情况下，可以直接再sql中取到。</p>
<p>多个参数可以用map，也可以用注解。</p>
<p>模糊查询：拼接参数的时候，防止sql注入的问题</p>
<p>1.java代码执行的时候，#{value} 参数中传递通配符 %*%</p>
<p>2.在sql拼接中使用通配符“%”+#{value}+“%”</p>
<p>四、配置解析</p>
<p>1.核心配置文件</p>
<p>Mybatis-config.xml（官方建议取这个名字）</p>
<p>configuration（配置）</p>
<p>properties（属性）</p>
<p>settings（设置）</p>
<p>typeAliases（类型别名）</p>
<p>typeHandlers（类型处理器）</p>
<p>objectFactory（对象工厂）</p>
<h3 id="plugins（插件）"><a href="#plugins（插件）" class="headerlink" title="plugins（插件）"></a>plugins（插件）</h3><p>介绍可以参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/wuyuxing24/article/details/89343951">https://blog.csdn.net/wuyuxing24/article/details/89343951</a></p>
<p>MyBatis 允许你在映射语句执行过程中（这个过程就是sqlsession）的某一点进行拦截调用。默认情况下，MyBatis 允许使用插件来拦截的方法调用包括：</p>
<ul>
<li>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)</li>
<li>ParameterHandler (getParameterObject, setParameters)</li>
<li>ResultSetHandler (handleResultSets, handleOutputParameters)</li>
<li>StatementHandler (prepare, parameterize, batch, update, query)</li>
</ul>
<p>通过 MyBatis 提供的强大机制，使用插件是非常简单的，只需实现 Interceptor 接口，并指定想要拦截的方法签名即可</p>
<p>利用插件可以完成 分页，动态填入update_by,update_time,create_by,create_time,del_flag字段，拦截sql语句使增删改功能不生效 等功能。</p>
<p>例子：拦截sql语句使增删改功能不生效</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>     <span class="comment">//将拦截器注册进spring</span></span><br><span class="line"><span class="meta">@Intercepts(@Signature(type = Executor.class, method = &quot;update&quot;, args = &#123;MappedStatement.class, Object.class&#125;))</span> <span class="comment">//method可以指定拦截器拦截的类型：update和quere</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PermissionSql</span> <span class="keyword">implements</span> <span class="title">Interceptor</span> </span>&#123;  <span class="comment">//必须实现Interceptor接口才能完成拦截器的功能</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Invocation invocation)</span> <span class="keyword">throws</span> Throwable </span>&#123;<span class="comment">//拦截器的逻辑在这个方法里写</span></span><br><span class="line">        Object[] args = invocation.getArgs();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; args.length; i++) &#123;</span><br><span class="line">            Object arg = args[i];</span><br><span class="line">            String className = arg.getClass().getName();</span><br><span class="line">            System.out.println(i + <span class="string">&quot; 参数类型：&quot;</span> + className);</span><br><span class="line">            <span class="keyword">if</span> (arg <span class="keyword">instanceof</span> MappedStatement) &#123;</span><br><span class="line">                MappedStatement ms = (MappedStatement) arg;</span><br><span class="line">                SqlCommandType sqlCommandType = ms.getSqlCommandType();</span><br><span class="line">                System.out.println(<span class="string">&quot;操作类型是：&quot;</span> + sqlCommandType.toString());</span><br><span class="line">                <span class="keyword">if</span> (Constant.VIRTUAL_OPENID.contains(UserUtil.getCurrentOpenid()) &amp;&amp; (sqlCommandType == SqlCommandType.INSERT || sqlCommandType == SqlCommandType.UPDATE || sqlCommandType == SqlCommandType.DELETE)) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;不执行&quot;</span> + sqlCommandType.toString() + <span class="string">&quot;语句&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">//拦截的返回值为Interger类型，所以直接返回设置为return 0</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> invocation.proceed();<span class="comment">//不拦截返回invocation.proceed()</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">plugin</span><span class="params">(Object target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Plugin.wrap(target, <span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setProperties</span><span class="params">(Properties properties)</span> </span>&#123;<span class="comment">//这个方法里可以将拦截的sql语句设置自定义值</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>给数据模型的一些通用操作属性（如：创建人、创建时间、修改人、修改时间等）自动赋值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 拦截器作用：给各实体对象在增加、修改时，自动添加操作属性信息。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Intercepts(&#123;@Signature(type = Executor.class, method = &quot;update&quot;, args = &#123;MappedStatement.class, Object.class &#125;) &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OpeInfoInterceptor</span> <span class="keyword">implements</span> <span class="title">Interceptor</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Invocation invocation)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        Object[] args = invocation.getArgs();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;-----------参数拦截---------------------------------------------------&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;02 当前线程ID:&quot;</span>+Thread.currentThread().getId());</span><br><span class="line">        <span class="comment">//遍历处理所有参数，update方法有两个参数，参见Executor类中的update()方法。</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;args.length;i++)&#123;</span><br><span class="line">            Object arg=args[i];</span><br><span class="line">            String className=arg.getClass().getName();</span><br><span class="line">            System.out.println(i + <span class="string">&quot; 参数类型：&quot;</span>+className);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//第一个参数处理。根据它判断是否给“操作属性”赋值。</span></span><br><span class="line">            <span class="keyword">if</span>(arg <span class="keyword">instanceof</span> MappedStatement)&#123;<span class="comment">//如果是第一个参数 MappedStatement</span></span><br><span class="line">                MappedStatement ms = (MappedStatement)arg;</span><br><span class="line">                SqlCommandType sqlCommandType = ms.getSqlCommandType();</span><br><span class="line">                System.out.println(<span class="string">&quot;操作类型：&quot;</span>+sqlCommandType);</span><br><span class="line">                <span class="keyword">if</span>(sqlCommandType == SqlCommandType.INSERT || sqlCommandType==SqlCommandType.UPDATE)&#123;</span><br><span class="line">                    <span class="comment">//如果是“增加”或“更新”操作，则继续进行默认操作信息赋值。否则，则退出</span></span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//第二个参数处理。（只有第二个程序才能跑到这）</span></span><br><span class="line">            <span class="keyword">if</span> (arg <span class="keyword">instanceof</span> Map)&#123;<span class="comment">//如果是map，有两种情况：（1）使用@Param多参数传入，由Mybatis包装成map。（2）原始传入Map</span></span><br><span class="line">                System.out.println(<span class="string">&quot;这是一个包装过的类型!&quot;</span>);</span><br><span class="line">                Map map=(Map)arg;</span><br><span class="line">                <span class="keyword">for</span> (Object obj : map.values())&#123;</span><br><span class="line">                    setProperty(obj);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span>&#123;<span class="comment">//原始参数传入</span></span><br><span class="line">                setProperty(arg);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> invocation.proceed();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 为对象的操作属性赋值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> obj</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setProperty</span><span class="params">(Object obj)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//<span class="doctag">TODO:</span> 根据需要，将相关属性赋上默认值</span></span><br><span class="line">            BeanUtils.setProperty(obj, <span class="string">&quot;createrUsername&quot;</span>, <span class="string">&quot;张三&quot;</span>);</span><br><span class="line">            BeanUtils.setProperty(obj, <span class="string">&quot;createDT&quot;</span>, <span class="keyword">new</span> Date());</span><br><span class="line">        &#125;<span class="keyword">catch</span> (IllegalAccessException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">plugin</span><span class="params">(Object target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Plugin.wrap(target, <span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>分页例子参考这篇文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/liang0000zai/article/details/102862284">https://blog.csdn.net/liang0000zai/article/details/102862284</a></p>
<p>environments（环境配置）</p>
<p>environment（环境变量）</p>
<p>T    ransactionManager（事务管理器）</p>
<p>dataSource（数据源）</p>
<p>databaseIdProvider（数据库厂商标识）</p>
<p>mappers（映射器）</p>
<h3 id="sqlsession"><a href="#sqlsession" class="headerlink" title="sqlsession"></a>sqlsession</h3><p>SqlSession是Mybatis最重要的构建之一，可以简单的认为Mybatis一系列的配置目的是生成类似 JDBC生成的Connection对象的SqlSession对象，这样才能与数据库开启“沟通”，通过SqlSession可以实现增删改查（当然现在更加推荐是使用Mapper接口形式）</p>
<p> SqlSessionInterceptor 是 SqlSessionTemplate 的内部类，目的只有一个，就是处理多个 session 的db操作！</p>
<p>所有请求都被 invoke() 拦截,从而做相应处理：</p>
<ol>
<li><p>进入请求，先生成一个新的sqlSession，为本次db操作做准备；</p>
</li>
<li><p>通过反射调用请求进来的方法，将 sqlSession 回调，进行复杂查询及结果映射；</p>
</li>
<li><p>如果需要立即提交事务，do it；</p>
</li>
<li><p>如果出现异常，包装异常信息，重新抛出；</p>
</li>
<li><p>操作完成后，关闭本次session；</p>
</li>
</ol>
<p> sqlSession 单例，并不会影响具体的db操作控制，所以不用担心session的线程安全问题</p>
<h3 id="sql语句的where问题"><a href="#sql语句的where问题" class="headerlink" title="sql语句的where问题"></a>sql语句的where问题</h3><p>where后面加&lt; if &gt;的标签：</p>
<p>​    如果if存在的话，会直接连and，导致出现 where and 的错误语句</p>
<p>​    如果if不存在的话，会直接多出来where，导致错误语句</p>
<p> 1.给where 后面加上1=1，以后的条件都可以正常and  </p>
<p> 2.mybatis 使用where 标签将所有的查询条件包括在内。<br>mybatis 就会将where标签后面第一个and 去掉（where只会去掉第一个多出来的and 或者  or）</p>
<p>where 1=0： where 后面跟一个永远不可能成立的条件1&lt;0 ， 1=0，1=2 这条sql语句结果不会返回任何数据，只有表结构，可用于快速建表</p>
<h3 id="sql语句的模糊查询字符串拼接"><a href="#sql语句的模糊查询字符串拼接" class="headerlink" title="sql语句的模糊查询字符串拼接"></a>sql语句的模糊查询字符串拼接</h3><p>1.利用concat进行拼接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT max(gateway_num) from gateway WHERE gateway_num LIKE  concat(&#x27;%&#x27;,#&#123;num&#125;,&#x27;%&#x27;)</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>这条语句的返回值是gateway_num这一列的最大值。如果需要返回这一行的值：</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> gateway <span class="keyword">WHERE</span> gateway_num <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">max</span>(gateway_num) <span class="keyword">from</span> gateway <span class="keyword">WHERE</span> gateway_num <span class="keyword">LIKE</span>  concat(&quot;GFYD&quot;,<span class="string">&#x27;%&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>2.动态sql中的bind（未测试）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">List<span class="tag">&lt;<span class="name">Hospital</span>&gt;</span> getHospitalLike(@Param(&quot;selectword&quot;) String selectword);</span><br><span class="line"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getHospitalLike&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.hand.hand.domain.Hospital&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bind</span> <span class="attr">name</span>=<span class="string">&quot;bindselectword&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#x27;%&#x27;+selectword+&#x27;%&#x27;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bind</span>&gt;</span></span><br><span class="line">     SELECT *</span><br><span class="line">     FROM hospital</span><br><span class="line">     <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;selectword!=null&quot;</span>&gt;</span></span><br><span class="line">     where hid=cast(#&#123;selectword&#125; as signed INTEGER ) OR  hname like #&#123;bindselectword&#125;</span><br><span class="line">     OR  grade like #&#123;bindselectword&#125;</span><br><span class="line">     <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>


      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">mybatis</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2021/04/07/13.1.mybatis/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-12.1.spring" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/07/12.1.spring/">spring</a>
    </h1>
  

        
        <a href="/2021/04/07/12.1.spring/" class="archive-article-date">
  	<time datetime="2021-04-07T11:42:00.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2021-04-07</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Spring 就像一个大家族，有众多衍生产品例如 Boot，Security，JPA等等。但他们的基础都是Spring 的 IOC 和 AOP，IOC提供了依赖注入的容器，而AOP解决了面向切面的编程，然后在此两者的基础上实现了其他衍生产品的高级功能。</p>
<p>Spring MVC是基于 Servlet 的一个 MVC 框架，主要解决 WEB 开发的问题;</p>
<p>而Spring Boot 是基于Spring的一套快速开发整合包，Spring Boot遵循的也是约定优于配置原则,它的目的在于实现自动配置，降低项目搭建的复杂度;</p>
<p>Spring Cloud是一系列框架的有序集合。它利用Spring Boot的开发便利性巧妙地简化了分布式系统基础设施的开发，如服务发现注册、配置中心、消息总线、负载均衡、断路器、数据监控等，都可以用Spring Boot的开发风格做到一键启动和部署。</p>
<p>Spring是一个轻量级的**控制反转(IoC)<strong>和</strong>面向切面(AOP)**的容器框架。</p>
<p>Spring是一个开源框架，Spring是于2003 年兴起的一个轻量级的Java 开发框架，由Rod Johnson 在其著作Expert One-On-One J2EE Development and Design中阐述的部分理念和原型衍生而来。它是为了解决企业应用开发的复杂性而创建的。框架的主要优势之一就是其分层架构，分层架构允许使用者选择使用哪一个组件，同时为 J2EE 应用程序开发提供集成的框架。Spring使用基本的JavaBean来完成以前只可能由EJB完成的事情。然而，Spring的用途不仅限于服务器端的开发。从简单性、可测试性和松耦合的角度而言，任何Java应用都可以从Spring中受益。Spring的核心是控制反转（IoC）和面向切面（AOP）。简单来说，Spring是一个分层的JavaSE/EE full-stack(一站式) 轻量级开源框架。</p>
<h3 id="初衷"><a href="#初衷" class="headerlink" title="初衷"></a>初衷</h3><p>1、JAVA EE开发应该更加简单。</p>
<p>2、使用接口而不是使用类，是更好的编程习惯。Spring将使用接口的复杂度几乎降低到了零。</p>
<p>3、为JavaBean提供了一个更好的应用配置框架。</p>
<p>4、更多地强调面向对象的设计，而不是现行的技术如JAVA EE。</p>
<p>5、尽量减少不必要的异常捕捉。</p>
<p>6、使应用程序更加容易测试。</p>
<h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><p>1、可以令人方便愉快的使用Spring。</p>
<p>2、应用程序代码并不依赖于Spring APIs。</p>
<p>3、Spring不和现有的解决方案竞争，而是致力于将它们融合在一起。</p>
<h3 id="基本组成"><a href="#基本组成" class="headerlink" title="基本组成"></a>基本组成</h3><p>1、最完善的轻量级核心框架。</p>
<p>2、通用的事务管理抽象层。</p>
<p>3、JDBC抽象层。</p>
<p>4、集成了Toplink, Hibernate, JDO, and iBATIS SQL Maps。</p>
<p>5、AOP功能。</p>
<p>6、灵活的MVC Web应用框架。</p>
<h3 id="发展"><a href="#发展" class="headerlink" title="发展"></a>发展</h3><p>Spring框架几乎涉及到了Java企业级服务开发的所有方面，也几乎针对所有开发常用的模式、中间件、数据库进行了整合适配。</p>
<p>当我们写一个业务把逻辑写死写出来是比较容易的，但是把这个逻辑提取成模式进而打包成一个框架来给大家使用，这是比较难的。因为我们只有经历过足够多的场景后才能提取出普适的功能框架，大部分人才能用上，而且我们需要针对核心功能开放出可配置的部分，满足小部分人进一步定制和扩展功能的需要。</p>
<p>Spring框架经历了几个阶段：</p>
<p>1.第一个阶段推出的Core、Security、Data是把单体应用开发服务好。不仅仅提供了便捷的数据库访问、Web MVC等必要功能，而且通过AOP、IOC两大利器让我们的程序内在能够做到低耦合可扩展。</p>
<p>2.第二个阶段推出的Boot的意义不仅仅是加速了开发效率而且能让我们的程序从可用变为好用，应用程序核心业务逻辑可能只有70%的工作量，要让程序在线上跑的愉快还有30%的监控日志打点等工作量需要去做。</p>
<p>3.第三个阶段推出的Cloud的意义在于推动了微服务架构的落地。让不具备开发微服务基础套件的小型互联网公司也能享受到免费的开箱即用的微服务解决方案。其实很多人不是看了微服务的架构思想去寻找解决方案，而是了解到了Spring Cloud才去了解微服务思想从而落地的。</p>
<p>4.目前属于第四个阶段，大力发展Cloud Dataflow（云数据流）+容器。Dataflow的思想是不管是做实时消息处理的服务还是临时运行的任务，都可以认为是服务的组件，如果可以有一套DSL来定义这些组件之间的交互方式，然后在容器中进行自由组合、部署、伸缩，那么架构会非常灵活。下图是Dataflow管理界面的一个示意图。</p>
<p>Spring的发展可以看到互联网架构的发展，Spring给我们带来相当多的技术启发，从软件设计模式的启发慢慢到了架构的启发，甚至我觉得Spring是为Java开发打造了架构风格的模板，接下去Spring继续发展2到3年有望成为架构标准</p>
<p><img src="/12.1.spring/image-20210922142605980.png" alt="image-20210922142605980"></p>
<p>在Spring4.x中增加了新的特性：如果类只提供了一个带参数的构造方法，则不需要对对其内部的属性写@Autowired注解，Spring会自动为你注入属性。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查看spring的版本</span></span><br><span class="line">String springVersion = SpringVersion.getVersion();</span><br><span class="line">String springBootVersion = SpringBootVersion.getVersion();</span><br><span class="line">System.out.println(springVersion);</span><br><span class="line">System.out.println(springBootVersion);</span><br></pre></td></tr></table></figure>

<p>只要用了spring框架，肯定到处都是@Autowired。4.3之后的功能，如果只有一个构造方法，自动用这个构造方法注入配合lombok的@RequiredArgsConstructor使用体验很好：</p>
<p>我们平时开发中的bean大部分都不写构造函数，系统默认一个无参构造函数，这就符合这一条件。</p>
<p><img src="/12.1.spring/20191018160134977.png" alt="![在这里插入图片描述](https://img-blog.csdnimg.cn/2019101816003785.png"></p>
<p>此时helloService已经注入了，但是有些人会说以前加个@Autowired就行了，现在还要加个构造方法，更麻烦了，这时可以使用lombok插件，类上加@AllArgsConstructor就行了。</p>
<p><img src="/12.1.spring/20191018160429867.png" alt="在这里插入图片描述"></p>
<p>在编写代码的时候，使用@Autowired注解是，发现IDE报的一个警告，如下：</p>
<p><img src="/12.1.spring/20190606170140759.jpg" alt="img"> </p>
<p>Spring Team recommends “Always use constructor based dependency injection in your beans. Always use assertions for mandatory dependencies”.</p>
<p>翻译：</p>
<p>Spring建议”总是在您的bean中使用构造函数建立依赖注入。总是使用断言强制依赖”。</p>
<p>这段代码警告原来的写法是：</p>
<p>@Autowired<br>private EnterpriseDbService service;<br>建议后写成下面的样子：</p>
<p>private final EnterpriseDbService service;<br>@Autowired<br>public EnterpriseDbController(EnterpriseDbService service) {<br> this.service = service;<br>}<br>奇怪，为何会有这样的建议。</p>
<p>我们知道：@Autowired 可以对成员变量、方法以及构造函数进行注释。那么对成员变量和构造函数进行注释又有什么区别呢？</p>
<p>@Autowired注入bean，相当于在配置文件中配置bean，并且使用setter注入。而对构造函数进行注释，就相当于是使用构造函数进行依赖注入了吧。莫非是这两种注入方法的不同。</p>
<p>以下是：@Autowired和构造方法执行的顺序解析</p>
<p>先看一段代码，下面的代码能运行成功吗？</p>
<p>@Autowired<br>private User user;<br>private String school;<br>public UserAccountServiceImpl(){<br> this.school = user.getSchool();<br>}<br>答案是不能。</p>
<p>因为Java类会先执行构造方法，然后再给注解了@Autowired 的user注入值，所以在执行构造方法的时候，就会报错。</p>
<p>报错信息可能会像下面：</p>
<p>Exception in thread “main” org.springframework.beans.factory.BeanCreationException: Error creating bean with name ‘…’ defined in file [….class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate […]: Constructor threw exception; nested exception is java.lang.NullPointerException<br>报错信息说：创建Bean时出错，出错原因是实例化bean失败，因为bean时构造方法出错，在构造方法里抛出了空指针异常。</p>
<p>解决办法是，使用构造器注入，如下：</p>
<p>private User user;<br>private String school;<br>@Autowired<br>public UserAccountServiceImpl(User user){<br> this.user = user;<br> this.school = user.getSchool();<br>}<br>可以看出，使用构造器注入的方法，可以明确成员变量的加载顺序。</p>
<p>PS：Java变量的初始化顺序为：静态变量或静态语句块–&gt;实例变量或初始化语句块–&gt;构造方法–&gt;@Autowired</p>
<p>@Autowired和构造方法执行的顺序解析</p>
<p>先看一段代码，下面的代码能运行成功吗？</p>
<p> @Autowired<br>    private User user;<br>    private String school;</p>
<pre><code>public UserAccountServiceImpl()&#123;
    this.school = user.getSchool();
&#125;
</code></pre>
<p>答案是不能。因为Java类会先执行构造方法，然后再给注解了@Autowired 的user注入值，所以在执行构造方法的时候，就会报错。<br>报错信息可能会像下面：</p>
<p>Exception in thread “main” org.springframework.beans.factory.BeanCreationException: Error creating bean with name ‘…’ defined in file [….class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate […]: Constructor threw exception; nested exception is java.lang.NullPointerException</p>
<p>报错信息说：创建Bean时出错，出错原因是实例化bean失败，因为bean时构造方法出错，在构造方法里抛出了空指针异常。</p>
<p>解决办法是，使用构造器注入，如下：</p>
<p> private User user;<br>    private String school;</p>
<pre><code>@Autowired
public UserAccountServiceImpl(User user)&#123;
    this.user = user;
    this.school = user.getSchool();
&#125;
</code></pre>
<p>那么最开始Spring建议，为何要将成员变量加上final类型呢？</p>
<p>网上有解释如下：spring配置默认的bean的scope是singleton，也就是启动后一直有。通过设置bean的scope属性为prototype来声明该对象为动态创建。但是，如果你的service本身是singleton，注入只执行一次。</p>
<p>@Autowired本身就是单例模式，只会在程序启动时执行一次，即使不定义final也不会初始化第二次，所以这个final是没有意义的吧。</p>
<p>可能是为了防止，在程序运行的时候，又执行了一遍构造函数；</p>
<p>或者是更容易让人理解的意思，加上final只会在程序启动的时候初始化一次，并且在程序运行的时候不会再改变。</p>
<h3 id="Autowired"><a href="#Autowired" class="headerlink" title="@Autowired"></a>@Autowired</h3><p>@Autowired 注释可以在 setter 方法中被用于自动连接 bean，就像 @Autowired 注释，容器，一个属性或者任意命名的可能带有多个参数的方法。</p>
<p>可以在属性中使用 @Autowired 注释来除去 setter 方法。当时使用 为自动连接属性传递的时候，Spring 会将这些传递过来的值或者引用自动分配给那些属性</p>
<h3 id="Component"><a href="#Component" class="headerlink" title="@Component"></a>@Component</h3><p>踩到一个坑，有一个接口，在这个接口的实现类里，需要用到@Autowired注解，一时大意，没有在实现类上加上@Component注解，导致了Spring报错，找不到这个类</p>
<p>一旦使用关于Spring的注解出现在类里，例如我在实现类中用到了@Autowired注解，被注解的这个类是从Spring容器中取出来的，那调用的实现类也需要被Spring容器管理，加上@Component</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;conversionImpl&quot;)</span></span><br><span class="line"><span class="comment">//其实默认的spring中的Bean id 为 conversionImpl(首字母小写)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConversionImpl</span> <span class="keyword">implements</span> <span class="title">Conversion</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisClient redisClient;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>介绍</p>
<p>开发中难免会遇到这个这个注解@Component</p>
<p>@Controller 控制器（注入服务）<br> 用于标注控制层，相当于struts中的action层</p>
<p>@Service 服务（注入dao）<br> 用于标注服务层，主要用来进行业务的逻辑处理</p>
<p>@Repository（实现dao访问）<br> 用于标注数据访问层，也可以说用于标注数据访问组件，即DAO组件</p>
<p>@Component （把普通pojo实例化到spring容器中，相当于配置文件中的 ）</p>
<p>泛指各种组件，就是说当我们的类不属于各种归类的时候（不属于@Controller、@Services等的时候），我们就可以使用@Component来标注这个类。</p>
<h3 id="ExceptionHandler"><a href="#ExceptionHandler" class="headerlink" title="@ExceptionHandler"></a>@ExceptionHandler</h3><ol>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/lvbinbin2yujie/p/10574812.html#type1">异常处理方式一. @ExceptionHandler</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/lvbinbin2yujie/p/10574812.html#type2">异常处理方式二. 实现HandlerExceptionResolver接口</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/lvbinbin2yujie/p/10574812.html#type3">异常处理方式三. @ControllerAdvice+@ExceptionHandler</a></li>
</ol>
<p>spring的启动</p>
<p>Spring 是一个控制反转依赖管理的容器，作为 Java Web 的开发人员，基本没有不熟悉 Spring 技术栈的，尽管在依赖注入领域，Java Web 领域不乏其他优秀的框架，如 google 开源的依赖管理框架 guice，如 Jersey web 框架等。但 Spring 已经是 Java Web 领域使用最多，应用最广泛的 Java 框架。</p>
<p>此文将专注讲解如何在 Spring 容器启动时实现我们自己想要实现的逻辑。我们时常会遇到在 Spring 启动的时候必须完成一些初始化的操作，如创建定时任务，创建连接池等。</p>
<p>本文将介绍以下几种 Spring 启动监听方式：</p>
<ul>
<li>Bean 构造函数方式</li>
<li>使用 @PostConstruct 注解</li>
<li>实现 InitializingBean 接口</li>
<li>监听 ApplicationListener 事件</li>
<li>使用 Constructor 注入方式</li>
<li>实现 SpringBoot 的 CommandLineRunner 接口</li>
<li>SmartLifecycle 机制</li>
</ul>
<h2 id="spring装填bean"><a href="#spring装填bean" class="headerlink" title="spring装填bean"></a>spring装填bean</h2><p>我们知道如果我们要在一个类使用<a target="_blank" rel="noopener" href="http://lib.csdn.net/base/javaee">spring</a>提供的bean对象，我们需要把这个类注入到spring容器中，交给spring容器进行管理，但是在实际当中，我们往往会碰到在一个普通的<a target="_blank" rel="noopener" href="http://lib.csdn.net/base/javase">Java</a>类中，想直接使用spring提供的其他对象或者说有一些不需要交给spring管理，但是需要用到spring里的一些对象。如果这是spring框架的独立应用程序，我们通过</p>
<p>ApplicationContext ac = new FileSystemXmlApplicationContext(“applicationContext.xml”);<br>ac.getBean(“beanId”); </p>
<p>这样的方式就可以很轻易的获取我们所需要的对象。</p>
<p>但是往往我们所做的都是Web Application，这时我们启动spring容器是通过在web.xml文件中配置，这样就不适合使用上面的方式在普通类去获取对象了，因为这样做就相当于加载了两次spring容器，而我们想是否可以通过在启动web服务器的时候，就把Application放在某一个类中，我们通过这个类在获取，这样就可以在普通类获取spring bean对象了，让我们接着往下看</p>
<p><strong>普通类调用Spring bean对象:</strong></p>
<p>可以参考：<a target="_blank" rel="noopener" href="http://412887952-qq-com.iteye.com/blog/1479445">http://412887952-qq-com.iteye.com/blog/1479445</a></p>
<p>这里有更多这方面的介绍，比较详细</p>
<p>下面介绍在springboot中是如何使用的</p>
<p><strong>1.在Spring Boot可以扫描的包下</strong></p>
<p><strong>写的工具类为SpringUtil，实现ApplicationContextAware接口，并加入Component注解，让spring扫描到该bean</strong></p>
<p>springutil:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">package me.shijunjie.util;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.BeansException;</span><br><span class="line">import org.springframework.context.ApplicationContext;</span><br><span class="line">import org.springframework.context.ApplicationContextAware;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public class SpringUtil implements ApplicationContextAware &#123;</span><br><span class="line"></span><br><span class="line">    private static ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123;</span><br><span class="line">        if(SpringUtil.applicationContext &#x3D;&#x3D; null) &#123;</span><br><span class="line">            SpringUtil.applicationContext &#x3D; applicationContext;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;---------------------------------------------------------------------&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;---------------------------------------------------------------------&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;---------------me.shijunjie.util.SpringUtil------------------------------------------------------&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;ApplicationContext配置成功,在普通类可以通过调用SpringUtils.getAppContext()获取applicationContext对象,applicationContext&#x3D;&quot;+SpringUtil.applicationContext+&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;---------------------------------------------------------------------&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;获取applicationContext</span><br><span class="line">    public static ApplicationContext getApplicationContext() &#123;</span><br><span class="line">        return applicationContext;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;通过name获取 Bean.</span><br><span class="line">    public static Object getBean(String name)&#123;</span><br><span class="line">        return getApplicationContext().getBean(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;通过class获取Bean.</span><br><span class="line">    public static &lt;T&gt; T getBean(Class&lt;T&gt; clazz)&#123;</span><br><span class="line">        return getApplicationContext().getBean(clazz);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;通过name,以及Clazz返回指定的Bean</span><br><span class="line">    public static &lt;T&gt; T getBean(String name,Class&lt;T&gt; clazz)&#123;</span><br><span class="line">        return getApplicationContext().getBean(name, clazz);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>为了测试，我们再启动的时候先通过代码方式给spring容器中注入一个bean，入下所示</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package me.shijunjie.config;</span><br><span class="line"></span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line">import me.shijunjie.entity.Demo2;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">public class BeanConfig &#123;</span><br><span class="line">    @Bean(name&#x3D;&quot;testDemo&quot;)</span><br><span class="line">    public Demo2 generateDemo() &#123;</span><br><span class="line">        Demo2 demo &#x3D; new Demo2();</span><br><span class="line">        demo.setId(12345);</span><br><span class="line">        demo.setName(&quot;test&quot;);</span><br><span class="line">        return demo;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>然后我们编写测试controller，并从刚才写的springutil中获取这个bean</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package me.shijunjie.controller;</span><br><span class="line"></span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line">import me.shijunjie.util.SpringUtil;</span><br><span class="line"></span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;&#x2F;application&quot;)</span><br><span class="line">public class TestApplicationController &#123;</span><br><span class="line">    </span><br><span class="line">    @RequestMapping(&quot;&#x2F;test1&quot;)</span><br><span class="line">    public Object testSpringUtil1() &#123;</span><br><span class="line">        return SpringUtil.getBean(&quot;testDemo&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>测试</p>
<p>启动web应用，打开浏览器输入<a target="_blank" rel="noopener" href="http://localhost:8080/application/test1%EF%BC%8C%E6%B5%8B%E8%AF%95%E6%88%90%E5%8A%9F">http://localhost:8080/application/test1，测试成功</a></p>
<p><img src="https://images2015.cnblogs.com/blog/1097735/201703/1097735-20170302105956954-82157382.png" alt="img"></p>
<p><strong>2 不在Spring Boot的扫描包下方式一</strong></p>
<p>这种情况处理起来也很简单，先编写SpringUtil类，同样需要实现接口：ApplicationContextAware，具体编码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">package me.shijunjie.util;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.BeansException;</span><br><span class="line">import org.springframework.context.ApplicationContext;</span><br><span class="line">import org.springframework.context.ApplicationContextAware;</span><br><span class="line"></span><br><span class="line">public class SpringUtil2 implements ApplicationContextAware &#123;</span><br><span class="line"></span><br><span class="line">    private static ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException &#123;</span><br><span class="line">        if(SpringUtil2.applicationContext &#x3D;&#x3D; null) &#123;</span><br><span class="line">            SpringUtil2.applicationContext &#x3D; applicationContext;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;---------------------------------------------------------------------&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;---------------------------------------------------------------------&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;---------------me.shijunjie.util.SpringUtil------------------------------------------------------&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;ApplicationContext配置成功,在普通类可以通过调用SpringUtils.getAppContext()获取applicationContext对象,applicationContext&#x3D;&quot;+SpringUtil2.applicationContext+&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;---------------------------------------------------------------------&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;获取applicationContext</span><br><span class="line">    public static ApplicationContext getApplicationContext() &#123;</span><br><span class="line">        return applicationContext;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;通过name获取 Bean.</span><br><span class="line">    public static Object getBean(String name)&#123;</span><br><span class="line">        return getApplicationContext().getBean(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;通过class获取Bean.</span><br><span class="line">    public static &lt;T&gt; T getBean(Class&lt;T&gt; clazz)&#123;</span><br><span class="line">        return getApplicationContext().getBean(clazz);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;通过name,以及Clazz返回指定的Bean</span><br><span class="line">    public static &lt;T&gt; T getBean(String name,Class&lt;T&gt; clazz)&#123;</span><br><span class="line">        return getApplicationContext().getBean(name, clazz);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用@Bean注解，在App.java类中将SpringUtil注解进</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package me.shijunjie.controller;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.boot.context.web.SpringBootServletInitializer;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.ComponentScan;</span><br><span class="line">import org.springframework.scheduling.annotation.EnableScheduling;</span><br><span class="line"></span><br><span class="line">import me.shijunjie.util.SpringUtil2;</span><br><span class="line"></span><br><span class="line">@ComponentScan(basePackages&#x3D;&#123;&quot;me.shijunjie&quot;&#125;) &#x2F;&#x2F; 扫描该包路径下的所有spring组件</span><br><span class="line">&#x2F;*@EnableJpaRepositories(&quot;me.shijunjie.dao&quot;) &#x2F;&#x2F; JPA扫描该包路径下的Repositorie</span><br><span class="line">*&#x2F;&#x2F;*@EntityScan(&quot;me.shijunjie.entity&quot;) &#x2F;&#x2F; 扫描实体类</span><br><span class="line">*&#x2F;@SpringBootApplication</span><br><span class="line">@EnableScheduling</span><br><span class="line">public class App extends SpringBootServletInitializer&#123;</span><br><span class="line">    @Bean</span><br><span class="line">    public SpringUtil2 getSpringUtil2() &#123;</span><br><span class="line">        return new SpringUtil2();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(App.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试（使用热部署的需要重启服务器）</p>
<p>启动web应用，打开浏览器输入<a target="_blank" rel="noopener" href="http://localhost:8080/application/test2%EF%BC%8C%E6%B5%8B%E8%AF%95%E6%88%90%E5%8A%9F">http://localhost:8080/application/test2，测试成功</a></p>
<p><img src="https://images2015.cnblogs.com/blog/1097735/201703/1097735-20170302110921157-936863400.png" alt="img"></p>
<p>除此以外，也可以在<a href="mailto:主要是在App.java中使用@Import">App.java</a>中使用@Import进行导入。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package me.shijunjie.controller;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">import org.springframework.boot.context.web.SpringBootServletInitializer;</span><br><span class="line">import org.springframework.context.annotation.ComponentScan;</span><br><span class="line">import org.springframework.context.annotation.Import;</span><br><span class="line">import org.springframework.scheduling.annotation.EnableScheduling;</span><br><span class="line"></span><br><span class="line">import me.shijunjie.util.SpringUtil2;</span><br><span class="line"></span><br><span class="line">@ComponentScan(basePackages&#x3D;&#123;&quot;me.shijunjie&quot;&#125;) &#x2F;&#x2F; 扫描该包路径下的所有spring组件</span><br><span class="line">&#x2F;*@EnableJpaRepositories(&quot;me.shijunjie.dao&quot;) &#x2F;&#x2F; JPA扫描该包路径下的Repositorie</span><br><span class="line">*&#x2F;&#x2F;*@EntityScan(&quot;me.shijunjie.entity&quot;) &#x2F;&#x2F; 扫描实体类</span><br><span class="line">*&#x2F;@SpringBootApplication</span><br><span class="line">@EnableScheduling</span><br><span class="line">@Import(SpringUtil2.class)</span><br><span class="line">public class App extends SpringBootServletInitializer&#123;</span><br><span class="line">    &#x2F;*@Bean</span><br><span class="line">    public SpringUtil2 getSpringUtil2() &#123;</span><br><span class="line">        return new SpringUtil2();</span><br><span class="line">    &#125;*&#x2F;</span><br><span class="line">    </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(App.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>跑出结果和上面相同</p>
<h2 id="原始构造函数"><a href="#原始构造函数" class="headerlink" title="原始构造函数"></a>原始构造函数</h2><p>如果没有 Spring 容器，不依赖于 Spring 的实现，回归 Java 类实现本身，我们可以在静态代码块，在类构造函数中实现相应的逻辑，Java 类的初始化顺序依次是<code>静态变量</code> &gt; <code>静态代码块</code> &gt; <code>全局变量</code> &gt; <code>初始化代码块</code> &gt; <code>构造器</code>。</p>
<p>比如，Log4j 的初始化，就是在 <code>LogManager</code> 的静态代码块中实现的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">static &#123;</span><br><span class="line"></span><br><span class="line">    Hierarchy h &#x3D; new Hierarchy(new RootLogger((Level) Level.DEBUG));</span><br><span class="line">    repositorySelector &#x3D; new DefaultRepositorySelector(h);</span><br><span class="line"></span><br><span class="line">    String override &#x3D;OptionConverter.getSystemProperty(DEFAULT_INIT_OVERRIDE_KEY,null);</span><br><span class="line"></span><br><span class="line">    if(override &#x3D;&#x3D; null || &quot;false&quot;.equalsIgnoreCase(override)) &#123;</span><br><span class="line">          String configurationOptionStr &#x3D; OptionConverter.getSystemProperty(DEFAULT_CONFIGURATION_KEY, null);</span><br><span class="line">          String configuratorClassName &#x3D; OptionConverter.getSystemProperty(CONFIGURATOR_CLASS_KEY, null);</span><br><span class="line"></span><br><span class="line">          URL url &#x3D; null;</span><br><span class="line"></span><br><span class="line">          if(configurationOptionStr &#x3D;&#x3D; null) &#123;</span><br><span class="line">            url &#x3D; Loader.getResource(DEFAULT_XML_CONFIGURATION_FILE);</span><br><span class="line">            if(url &#x3D;&#x3D; null) &#123;</span><br><span class="line">              url &#x3D; Loader.getResource(DEFAULT_CONFIGURATION_FILE);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">              url &#x3D; new URL(configurationOptionStr);</span><br><span class="line">            &#125; catch (MalformedURLException ex) &#123;</span><br><span class="line">              url &#x3D; Loader.getResource(configurationOptionStr);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          if(url !&#x3D; null) &#123;</span><br><span class="line">            LogLog.debug(&quot;Using URL [&quot;+url+&quot;] for automatic log4j configuration.&quot;);</span><br><span class="line">            try &#123;</span><br><span class="line">                OptionConverter.selectAndConfigure(url, configuratorClassName,LogManager.getLoggerRepository());</span><br><span class="line">            &#125; catch (NoClassDefFoundError e) &#123;</span><br><span class="line">                LogLog.warn(&quot;Error during default initialization&quot;, e);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">              LogLog.debug(&quot;Could not find resource: [&quot;+configurationOptionStr+&quot;].&quot;);</span><br><span class="line">          &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">            LogLog.debug(&quot;Default initialization of overridden by &quot; +  DEFAULT_INIT_OVERRIDE_KEY + &quot;property.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>比如在构造函数中实现相应的逻辑：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class CustomBean &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private Environment env;</span><br><span class="line"></span><br><span class="line">    public CustomBean() &#123;</span><br><span class="line">        env.getActiveProfiles();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里考验一下各位，上面的代码是否可以正常运行。—— 不行，构造函数中的<code>env</code>将会发生<code>NullPointException</code>异常。这是因为在 Spring 中将先初始化 Bean，也就是会先调用类的构造函数，然后才注入成员变量依赖的 Bean（<code>@Autowired</code>和<code>@Resource</code>注解修饰的成员变量），注意<code>@Value</code>等注解的配置的注入也是在构造函数之后。</p>
<h2 id="PostConstruct"><a href="#PostConstruct" class="headerlink" title="@PostConstruct"></a>@PostConstruct</h2><p>在 Spring 中，我们可以使用<code>@PostConstruct</code>在 Bean 初始化之后实现相应的初始化逻辑，<code>@PostConstruct</code>修饰的方法将在 Bean 初始化完成之后执行，此时 Bean 的依赖也已经注入完成，因此可以在方法中调用注入的依赖 Bean。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class CustomBean &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private Environment env;</span><br><span class="line"></span><br><span class="line">    @PostConstruce</span><br><span class="line">    public void init() &#123;</span><br><span class="line">        env.getActiveProfiles();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>与<code>@PostConstruct</code>相对应的，如果想在 Bean 注销时完成一些清扫工作，如关闭线程池等，可以使用<code>@PreDestroy</code>注解：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class CustomBean &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private ExecutorService executor &#x3D; Executors.newFixedThreadPool(1)</span><br><span class="line"></span><br><span class="line">    @PreDestroy</span><br><span class="line">    public void destroy() &#123;</span><br><span class="line">        env.getActiveProfiles();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="InitializingBean"><a href="#InitializingBean" class="headerlink" title="InitializingBean"></a>InitializingBean</h2><p>实现 Spring 的<code>InitializingBean</code>接口同样可以实现以上在 Bean 初始化完成之后执行相应逻辑的功能，实现<code>InitializingBean</code>接口，在<code>afterPropertiesSet</code>方法中实现逻辑：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class CustomBean implements InitializingBean &#123;</span><br><span class="line"></span><br><span class="line">    private static final Logger LOG</span><br><span class="line">      &#x3D; Logger.getLogger(InitializingBeanExampleBean.class);</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private Environment environment;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void afterPropertiesSet() throws Exception &#123;</span><br><span class="line">        LOG.info(environment.getDefaultProfiles());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ApplicationListener"><a href="#ApplicationListener" class="headerlink" title="ApplicationListener"></a>ApplicationListener</h2><p>我们可以在 Spring 容器初始化的时候实现我们想要的初始化逻辑。这时我们就可以使用到 Spring 的初始化事件。Spring 有一套完整的事件机制，在 Spring 启动的时候，Spring 容器本身预设了很多事件，在 Spring 初始化的整个过程中在相应的节点触发相应的事件，我们可以通过监听这些事件来实现我们的初始化逻辑。Spring 的事件实现如下：</p>
<ul>
<li>ApplicationEvent，事件对象，由 ApplicationContext 发布，不同的实现类代表不同的事件类型。</li>
<li>ApplicationListener，监听对象，任何实现了此接口的 Bean 都会收到相应的事件通知。实现了 ApplicationListener 接口之后，需要实现方法 onApplicationEvent()，在容器将所有的 Bean 都初始化完成之后，就会执行该方法。</li>
</ul>
<p>与 Spring Context 生命周期相关的几个事件有以下几个：</p>
<ul>
<li>ApplicationStartingEvent: 这个事件在 Spring Boot 应用运行开始时，且进行任何处理之前发送（除了监听器和初始化器注册之外）。</li>
<li>ContextRefreshedEvent: ApplicationContext 被初始化或刷新时，该事件被发布。这也可以在 ConfigurableApplicationContext 接口中使用 refresh() 方法来发生。</li>
<li>ContextStartedEvent: 当使用 ConfigurableApplicationContext 接口中的 start() 方法启动 ApplicationContext 时，该事件被触发。你可以查询你的数据库，或者你可以在接受到这个事件后重启任何停止的应用程序。</li>
<li>ApplicationReadyEvent: 这个事件在任何 application/ command-line runners 调用之后发送。</li>
<li>ContextClosedEvent: 当使用 ConfigurableApplicationContext 接口中的 close() 方法关闭 ApplicationContext 时，该事件被触发。一个已关闭的上下文到达生命周期末端；它不能被刷新或重启。</li>
<li>ContextStoppedEvent: Spring 最后完成的事件。</li>
</ul>
<p>因此，如果我们想在 Spring 启动的时候实现一些相应的逻辑，可以找到 Spring 启动过程中符合我们需要的事件，通过监听相应的事件来完成我们的逻辑：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@Slf4j</span><br><span class="line">public class StartupApplicationListenerExample implements ApplicationListener&lt;ContextRefreshedEvent&gt; &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onApplicationEvent(ContextRefreshedEvent event) &#123;</span><br><span class="line">        log.info(&quot;Subject ContextRefreshedEvent&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>除了通过实现<code>ApplicationListener</code>接口来监听相应的事件，Spring 的事件机制也实现了通过<code>@EventListener</code>注解来监听相对应事件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@Slf4j</span><br><span class="line">public class StartupApplicationListenerExample &#123;</span><br><span class="line"></span><br><span class="line">    @EventListener</span><br><span class="line">    public void onApplicationEvent(ContextRefreshedEvent event) &#123;</span><br><span class="line">        log.info(&quot;Subject ContextRefreshedEvent&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Spring Event 是一套完善的进程内事件发布订阅机制，我们除了用来监听 Spring 内置的事件，也可以使用 Spring Event 实现自定义的事件发布订阅功能。</p>
<h2 id="Constructor-注入"><a href="#Constructor-注入" class="headerlink" title="Constructor 注入"></a>Constructor 注入</h2><p>在学习 Spring 的注入机制的时候，我们都知道 Spring 可以通过构造函数、Setter 和反射成员变量注入等方式。上面我们在成员变量上通过<code>@Autoware</code>注解注入依赖 Bean，但是在 Bean 的构造函数函数中却无法使用到注入的 Bean（因为 Bean 还未注入），其实我们也是使用 Spring 的构造函数注入方式， 这也是 Spring 推荐的注入机制（在我们使用 IDEA 的时候，如果没有关闭相应的代码 Warning 机制，会发现在成员变量上的<code>@Autoware</code>是黄色的，也就是 idea 不建议的代码）。Spring 更推荐构造函数注入的方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@Slf4j</span><br><span class="line">public class ConstructorBean &#123;</span><br><span class="line"></span><br><span class="line">    private final Environment environment;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    public LogicInConstructorExampleBean(Environment environment) &#123;</span><br><span class="line">        this.environment &#x3D; environment;</span><br><span class="line">        log.info(Arrays.asList(environment.getDefaultProfiles()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h2 id="CommandLineRunner"><a href="#CommandLineRunner" class="headerlink" title="CommandLineRunner"></a>CommandLineRunner</h2><p>如果我们的项目使用的是 Spring Boot，那么可以使用 Spring Boot 提供的 <code>CommandLineRunner</code> 接口来实现初始化逻辑，Spring Boot 将在启动初始化完成之后调用实现了<code>CommandLineRunner</code>的接口的<code>run</code>方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@Slf4j</span><br><span class="line">public class CommandLineAppStartupRunner implements CommandLineRunner &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run(String...args) throws Exception &#123;</span><br><span class="line">        log.info(&quot;Increment counter&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>并且，多个<code>CommandLineRunner</code>实现，可以通过<code>@Order</code>来控制它们的执行顺序。</p>
<h2 id="SmartLifecycle"><a href="#SmartLifecycle" class="headerlink" title="SmartLifecycle"></a>SmartLifecycle</h2><p>还有一种更高级的方法来实现我们的逻辑。这可以 Spring 高级开发必备技能哦。SmartLifecycle 不仅仅能在初始化后执行一个逻辑，还能再关闭前执行一个逻辑，并且也可以控制多个 <code>SmartLifecycle</code> 的执行顺序，就像这个类名表示的一样，这是一个智能的生命周期管理接口。</p>
<ul>
<li>start()：bean 初始化完毕后，该方法会被执行。</li>
<li>stop()：容器关闭后，spring 容器发现当前对象实现了 SmartLifecycle，就调用 stop(Runnable)， 如果只是实现了 Lifecycle，就调用 stop()。</li>
<li>isRunning：当前状态，用来判你的断组件是否在运行。</li>
<li>getPhase：控制多个 SmartLifecycle 的回调顺序的，返回值越小越靠前执行 start() 方法，越靠后执行 stop() 方法。</li>
<li>isAutoStartup()：start 方法被执行前先看此方法返回值，返回 false 就不执行 start 方法了。</li>
<li>stop(Runnable)：容器关闭后，spring 容器发现当前对象实现了 SmartLifecycle，就调用 stop(Runnable)， 如果只是实现了 Lifecycle，就调用 stop()。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class SmartLifecycleExample implements SmartLifecycle &#123;</span><br><span class="line"></span><br><span class="line">    private boolean isRunning &#x3D; false;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void start() &#123;</span><br><span class="line">        System.out.println(&quot;start&quot;);</span><br><span class="line">        isRunning &#x3D; true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int getPhase() &#123;</span><br><span class="line">        &#x2F;&#x2F; 默认为 0</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean isAutoStartup() &#123;</span><br><span class="line">        &#x2F;&#x2F; 默认为 false</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean isRunning() &#123;</span><br><span class="line">        &#x2F;&#x2F; 默认返回 false</span><br><span class="line">        return isRunning;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void stop(Runnable callback) &#123;</span><br><span class="line">        System.out.println(&quot;stop(Runnable)&quot;);</span><br><span class="line">        callback.run();</span><br><span class="line">        isRunning &#x3D; false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void stop() &#123;</span><br><span class="line">        System.out.println(&quot;stop&quot;);</span><br><span class="line"></span><br><span class="line">        isRunning &#x3D; false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Spring-Aspect、-Before、-After-注解实现-AOP-切面功能"><a href="#Spring-Aspect、-Before、-After-注解实现-AOP-切面功能" class="headerlink" title="Spring @Aspect、@Before、@After 注解实现 AOP 切面功能"></a>Spring @Aspect、@Before、@After 注解实现 AOP 切面功能</h2><p>Spring AOP 注解概述<br>1、Spring 的 AOP 功能除了在配置文件中配置一大堆的配置，比如切入点、表达式、通知等等以外，使用注解的方式更为方便快捷，特别是 Spring boot 出现以后，基本不再使用原先的 beans.xml 等配置文件了，而都推荐注解编程。</p>
<table>
<thead>
<tr>
<th>@Aspect</th>
<th>切面声明，标注在类、接口（包括注解类型）或枚举上。</th>
</tr>
</thead>
<tbody><tr>
<td>@Pointcut</td>
<td>切入点声明，即切入到哪些目标类的目标方法。<br />value 属性指定切入点表达式，默认为 “”，用于被通知注解引用，这样通知注解只需要关联此切入点声明即可，无需再重复写切入点表达式</td>
</tr>
<tr>
<td>@Before</td>
<td>前置通知, 在目标方法(切入点)执行之前执行。<br />value 属性绑定通知的切入点表达式，可以关联切入点声明，也可以直接设置切入点表达式<br />注意：如果在此回调方法中抛出异常，则目标方法不会再执行，会继续执行后置通知 -&gt; 异常通知。</td>
</tr>
<tr>
<td>@After</td>
<td>后置通知, 在目标方法(切入点)执行之后执行</td>
</tr>
<tr>
<td>@AfterReturning</td>
<td>返回通知, 在目标方法(切入点)返回结果之后执行，在 @After 的后面执行<br />pointcut 属性绑定通知的切入点表达式，优先级高于 value，默认为 “”</td>
</tr>
<tr>
<td>@AfterThrowing</td>
<td>异常通知, 在方法抛出异常之后执行, 意味着跳过返回通知<br />pointcut 属性绑定通知的切入点表达式，优先级高于 value，默认为 “”<br />注意：如果目标方法自己 try-catch 了异常，而没有继续往外抛，则不会进入此回调函数</td>
</tr>
<tr>
<td>@Around</td>
<td>环绕通知：目标方法执行前后分别执行一些代码，类似拦截器，可以控制目标方法是否继续执行。<br />通常用于统计方法耗时，参数校验等等操作。<br />环绕通知早于前置通知，晚于返回通知</td>
</tr>
<tr>
<td>2、上面这些 AOP 注解都是位于如下所示的 aspectjweaver 依赖中：</td>
<td></td>
</tr>
</tbody></table>
<p><img src="/12.1.spring/20200822102819511.png" alt="img"></p>
<p>3、对于习惯了 Spring 全家桶编程的人来说，并不是需要直接引入 aspectjweaver 依赖，因为 spring-boot-starter-aop 组件默认已经引用了 aspectjweaver 来实现  AOP 功能。换句话说 Spring 的 AOP 功能就是依赖的 aspectjweaver ！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- https:&#x2F;&#x2F;mvnrepository.com&#x2F;artifact&#x2F;org.springframework.boot&#x2F;spring-boot-starter-aop --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-aop&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.1.4.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">&lt;dependency&gt;    </span><br></pre></td></tr></table></figure>

<p>@Aspect 快速入门<br>1、@Aspect 常见用于记录日志、异常集中处理、权限验证、Web 参数校验、事务处理等等</p>
<p>2、要想把一个类变成切面类，只需3步：</p>
<p>1）在类上使用 @Aspect 注解使之成为切面类</p>
<p>2）切面类需要交由 Sprign 容器管理，所以类上还需要有 @Service、@Repository、@Controller、@Component  等注解<br>2）在切面类中自定义方法接收通知</p>
<p>3、AOP 的含义就不再累述了，下面直接上示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br></pre></td><td class="code"><pre><span class="line">import org.apache.commons.lang3.time.StopWatch;</span><br><span class="line">import org.aspectj.lang.JoinPoint;</span><br><span class="line">import org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line">import org.aspectj.lang.Signature;</span><br><span class="line">import org.aspectj.lang.annotation.*;</span><br><span class="line">import org.aspectj.lang.reflect.SourceLocation;</span><br><span class="line">import org.slf4j.Logger;</span><br><span class="line">import org.slf4j.LoggerFactory;</span><br><span class="line">import org.springframework.core.annotation.Order;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line">import java.util.Arrays;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"></span><br><span class="line"> * 切面注解 Aspect 使用入门</span><br><span class="line"></span><br><span class="line"> * 1、@Aspect：声明本类为切面类</span><br><span class="line"></span><br><span class="line"> * 2、@Component：将本类交由 Spring 容器管理</span><br><span class="line"></span><br><span class="line"> * 3、@Order：指定切入执行顺序，数值越小，切面执行顺序越靠前，默认为 Integer.MAX_VALUE</span><br><span class="line">   *</span><br><span class="line"></span><br><span class="line"> * @author wangMaoXiong</span><br><span class="line"></span><br><span class="line"> * @version 1.0</span><br><span class="line"></span><br><span class="line"> * @date 2020&#x2F;8&#x2F;20 19:22</span><br><span class="line">   *&#x2F;</span><br><span class="line">   @Aspect</span><br><span class="line">   @Order(value &#x3D; 999)</span><br><span class="line">   @Component</span><br><span class="line">   public class AspectHelloWorld &#123;</span><br><span class="line">   private static final Logger LOG &#x3D; LoggerFactory.getLogger(AspectHelloWorld.class);</span><br><span class="line"></span><br><span class="line">   &#x2F;**</span><br><span class="line"></span><br><span class="line">    * @Pointcut ：切入点声明，即切入到哪些目标方法。value 属性指定切入点表达式，默认为 &quot;&quot;。</span><br><span class="line"></span><br><span class="line">    * 用于被下面的通知注解引用，这样通知注解只需要关联此切入点声明即可，无需再重复写切入点表达式</span><br><span class="line"></span><br><span class="line">    * &lt;p&gt;</span><br><span class="line"></span><br><span class="line">    * 切入点表达式常用格式举例如下：</span><br><span class="line"></span><br><span class="line">    * - * com.wmx.aspect.EmpService.*(..))：表示 com.wmx.aspect.EmpService 类中的任意方法</span><br><span class="line"></span><br><span class="line">    * - * com.wmx.aspect.*.*(..))：表示 com.wmx.aspect 包(不含子包)下任意类中的任意方法</span><br><span class="line"></span><br><span class="line">    * - * com.wmx.aspect..*.*(..))：表示 com.wmx.aspect 包及其子包下任意类中的任意方法</span><br><span class="line"></span><br><span class="line">    * &lt;&#x2F;p&gt;</span><br><span class="line"></span><br><span class="line">    * value 的 execution 可以有多个，使用 || 隔开.</span><br><span class="line">      *&#x2F;</span><br><span class="line">      @Pointcut(value &#x3D;</span><br><span class="line">          &quot;execution(* com.wmx.hb.controller.DeptController.*(..)) &quot; +</span><br><span class="line">                  &quot;|| execution(* com.wmx.hb.controller.EmpController.*(..))&quot;)</span><br><span class="line">      private void aspectPointcut() &#123;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   &#x2F;**</span><br><span class="line"></span><br><span class="line">    * 前置通知：目标方法执行之前执行以下方法体的内容。</span><br><span class="line"></span><br><span class="line">    * value：绑定通知的切入点表达式。可以关联切入点声明，也可以直接设置切入点表达式</span><br><span class="line"></span><br><span class="line">    * &lt;br&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    * * @param joinPoint：提供对连接点处可用状态和有关它的静态信息的反射访问&lt;br&#x2F;&gt; &lt;p&gt;</span><br><span class="line"></span><br><span class="line">    * * * Object[] getArgs()：返回此连接点处（目标方法）的参数，目标方法无参数时，返回空数组</span><br><span class="line"></span><br><span class="line">    * * * Signature getSignature()：返回连接点处的签名。</span><br><span class="line"></span><br><span class="line">    * * * Object getTarget()：返回目标对象</span><br><span class="line"></span><br><span class="line">    * * * Object getThis()：返回当前正在执行的对象</span><br><span class="line"></span><br><span class="line">    * * * StaticPart getStaticPart()：返回一个封装此连接点的静态部分的对象。</span><br><span class="line"></span><br><span class="line">    * * * SourceLocation getSourceLocation()：返回与连接点对应的源位置</span><br><span class="line"></span><br><span class="line">    * * * String toLongString()：返回连接点的扩展字符串表示形式。</span><br><span class="line"></span><br><span class="line">    * * * String toShortString()：返回连接点的缩写字符串表示形式。</span><br><span class="line"></span><br><span class="line">    * * * String getKind()：返回表示连接点类型的字符串</span><br><span class="line"></span><br><span class="line">    * * * &lt;&#x2F;p&gt;</span><br><span class="line">          *&#x2F;</span><br><span class="line">          @Before(value &#x3D; &quot;aspectPointcut()&quot;)</span><br><span class="line">          public void aspectBefore(JoinPoint joinPoint) &#123;</span><br><span class="line">          Object[] args &#x3D; joinPoint.getArgs();</span><br><span class="line">          Signature signature &#x3D; joinPoint.getSignature();</span><br><span class="line">          Object target &#x3D; joinPoint.getTarget();</span><br><span class="line">          Object aThis &#x3D; joinPoint.getThis();</span><br><span class="line">          JoinPoint.StaticPart staticPart &#x3D; joinPoint.getStaticPart();</span><br><span class="line">          SourceLocation sourceLocation &#x3D; joinPoint.getSourceLocation();</span><br><span class="line">          String longString &#x3D; joinPoint.toLongString();</span><br><span class="line">          String shortString &#x3D; joinPoint.toShortString();</span><br><span class="line"></span><br><span class="line">        LOG.debug(&quot;【前置通知】&quot; +</span><br><span class="line">                        &quot;args&#x3D;&#123;&#125;,signature&#x3D;&#123;&#125;,target&#x3D;&#123;&#125;,aThis&#x3D;&#123;&#125;,staticPart&#x3D;&#123;&#125;,&quot; +</span><br><span class="line">                        &quot;sourceLocation&#x3D;&#123;&#125;,longString&#x3D;&#123;&#125;,shortString&#x3D;&#123;&#125;&quot;</span><br><span class="line">                , Arrays.asList(args), signature, target, aThis, staticPart, sourceLocation, longString, shortString);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">   &#x2F;**</span><br><span class="line"></span><br><span class="line">    * 后置通知：目标方法执行之后执行以下方法体的内容，不管目标方法是否发生异常。</span><br><span class="line">    * value：绑定通知的切入点表达式。可以关联切入点声明，也可以直接设置切入点表达式</span><br><span class="line">      *&#x2F;</span><br><span class="line">      @After(value &#x3D; &quot;aspectPointcut()&quot;)</span><br><span class="line">      public void aspectAfter(JoinPoint joinPoint) &#123;</span><br><span class="line">      LOG.debug(&quot;【后置通知】kind&#x3D;&#123;&#125;&quot;, joinPoint.getKind());</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">   &#x2F;**</span><br><span class="line"></span><br><span class="line">    * 返回通知：目标方法返回后执行以下代码</span><br><span class="line">    * value 属性：绑定通知的切入点表达式。可以关联切入点声明，也可以直接设置切入点表达式</span><br><span class="line">    * pointcut 属性：绑定通知的切入点表达式，优先级高于 value，默认为 &quot;&quot;</span><br><span class="line">    * returning 属性：通知签名中要将返回值绑定到的参数的名称，默认为 &quot;&quot;</span><br><span class="line">      *</span><br><span class="line">    * @param joinPoint ：提供对连接点处可用状态和有关它的静态信息的反射访问</span><br><span class="line">    * @param result    ：目标方法返回的值，参数名称与 returning 属性值一致。无返回值时，这里 result 会为 null.</span><br><span class="line">      *&#x2F;</span><br><span class="line">      @AfterReturning(pointcut &#x3D; &quot;aspectPointcut()&quot;, returning &#x3D; &quot;result&quot;)</span><br><span class="line">      public void aspectAfterReturning(JoinPoint joinPoint, Object result) &#123;</span><br><span class="line">      LOG.debug(&quot;【返回通知】,shortString&#x3D;&#123;&#125;,result&#x3D;&quot;, joinPoint.toShortString(), result);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">   &#x2F;**</span><br><span class="line"></span><br><span class="line">    * 异常通知：目标方法发生异常的时候执行以下代码，此时返回通知不会再触发</span><br><span class="line">    * value 属性：绑定通知的切入点表达式。可以关联切入点声明，也可以直接设置切入点表达式</span><br><span class="line">    * pointcut 属性：绑定通知的切入点表达式，优先级高于 value，默认为 &quot;&quot;</span><br><span class="line">    * throwing 属性：与方法中的异常参数名称一致，</span><br><span class="line">      *</span><br><span class="line">    * @param ex：捕获的异常对象，名称与 throwing 属性值一致</span><br><span class="line">      *&#x2F;</span><br><span class="line">      @AfterThrowing(pointcut &#x3D; &quot;aspectPointcut()&quot;, throwing &#x3D; &quot;ex&quot;)</span><br><span class="line">      public void aspectAfterThrowing(JoinPoint jp, Exception ex) &#123;</span><br><span class="line">      String methodName &#x3D; jp.getSignature().getName();</span><br><span class="line">      if (ex instanceof ArithmeticException) &#123;</span><br><span class="line">          LOG.error(&quot;【异常通知】&quot; + methodName + &quot;方法算术异常（ArithmeticException）：&quot; + ex.getMessage());</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">          LOG.error(&quot;【异常通知】&quot; + methodName + &quot;方法异常：&quot; + ex.getMessage());</span><br><span class="line">      &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">   &#x2F;**</span><br><span class="line"></span><br><span class="line">    * 环绕通知</span><br><span class="line"></span><br><span class="line">    * 1、@Around 的 value 属性：绑定通知的切入点表达式。可以关联切入点声明，也可以直接设置切入点表达式</span><br><span class="line"></span><br><span class="line">    * 2、Object ProceedingJoinPoint.proceed(Object[] args) 方法：继续下一个通知或目标方法调用，返回处理结果，如果目标方法发生异常，则 proceed 会抛异常.</span><br><span class="line"></span><br><span class="line">    * 3、假如目标方法是控制层接口，则本方法的异常捕获与否都不会影响目标方法的事务回滚</span><br><span class="line"></span><br><span class="line">    * 4、假如目标方法是控制层接口，本方法 try-catch 了异常后没有继续往外抛，则全局异常处理 @RestControllerAdvice 中不会再触发</span><br><span class="line">      *</span><br><span class="line"></span><br><span class="line">    * @param joinPoint</span><br><span class="line"></span><br><span class="line">    * @return</span><br><span class="line"></span><br><span class="line">    * @throws Throwable</span><br><span class="line">      *&#x2F;</span><br><span class="line">      @Around(value &#x3D; &quot;aspectPointcut()&quot;)</span><br><span class="line">      public Object handleControllerMethod(ProceedingJoinPoint joinPoint) throws Throwable &#123;</span><br><span class="line">      this.checkRequestParam(joinPoint);</span><br><span class="line"></span><br><span class="line">      StopWatch stopWatch &#x3D; StopWatch.createStarted();</span><br><span class="line">      LOG.debug(&quot;【环绕通知】执行接口开始，方法&#x3D;&#123;&#125;，参数&#x3D;&#123;&#125; &quot;, joinPoint.getSignature(), Arrays.asList(joinPoint.getArgs()).toString());</span><br><span class="line">      &#x2F;&#x2F;继续下一个通知或目标方法调用，返回处理结果，如果目标方法发生异常，则 proceed 会抛异常.</span><br><span class="line">      &#x2F;&#x2F;如果在调用目标方法或者下一个切面通知前抛出异常，则不会再继续往后走.</span><br><span class="line">      Object proceed &#x3D; joinPoint.proceed(joinPoint.getArgs());</span><br><span class="line"></span><br><span class="line">      stopWatch.stop();</span><br><span class="line">      long watchTime &#x3D; stopWatch.getTime();</span><br><span class="line">      LOG.debug(&quot;【环绕通知】执行接口结束，方法&#x3D;&#123;&#125;, 返回值&#x3D;&#123;&#125;,耗时&#x3D;&#123;&#125; (毫秒)&quot;, joinPoint.getSignature(), proceed, watchTime);</span><br><span class="line">      return proceed;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">   &#x2F;**</span><br><span class="line"></span><br><span class="line">    * 参数校验，防止 SQL 注入</span><br><span class="line">      *</span><br><span class="line">    * @param joinPoint</span><br><span class="line">      *&#x2F;</span><br><span class="line">      private void checkRequestParam(ProceedingJoinPoint joinPoint) &#123;</span><br><span class="line">      Object[] args &#x3D; joinPoint.getArgs();</span><br><span class="line">      if (args &#x3D;&#x3D; null || args.length &lt;&#x3D; 0) &#123;</span><br><span class="line">          return;</span><br><span class="line">      &#125;</span><br><span class="line">      String params &#x3D; Arrays.toString(joinPoint.getArgs()).toUpperCase();</span><br><span class="line">      String[] keywords &#x3D; &#123;&quot;DELETE &quot;, &quot;UPDATE &quot;, &quot;SELECT &quot;, &quot;INSERT &quot;, &quot;SET &quot;, &quot;SUBSTR(&quot;, &quot;COUNT(&quot;, &quot;DROP &quot;,</span><br><span class="line">              &quot;TRUNCATE &quot;, &quot;INTO &quot;, &quot;DECLARE &quot;, &quot;EXEC &quot;, &quot;EXECUTE &quot;, &quot; AND &quot;, &quot; OR &quot;, &quot;--&quot;&#125;;</span><br><span class="line">      for (String keyword : keywords) &#123;</span><br><span class="line">          if (params.contains(keyword)) &#123;</span><br><span class="line">              LOG.warn(&quot;参数存在SQL注入风险，其中包含非法字符 &#123;&#125;.&quot;, keyword);</span><br><span class="line">              throw new RuntimeException(&quot;参数存在SQL注入风险：params&#x3D;&quot; + params);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/12.1.spring/20200822112024130.gif" alt="img"></p>
<p>如上所示在不修改原来业务层代码的基础上，就可以使用 AOP 功能，在目标方法执行前后或者异常时都能捕获然后执行。</p>
<p>execution 切点表达式<br>1、@Pointcut 切入点声明注解，以及所有的通知注解都可以通过 value 属性或者 pointcut 属性指定切入点表达式。</p>
<p>2、切入点表达式通过 execution 函数匹配连接点，语法：execution([方法修饰符]  返回类型  方法路径(参数类型) [异常类型])</p>
<p>3、切入点表达式的写法比较灵活，比如：* 号表示任意一个，.. 表示任意多个，还可以使用 &amp;&amp;、||、! 进行逻辑运算.实际开发中常用：</p>
<table>
<thead>
<tr>
<th>execution(* com.wmx.aspect.EmpServiceImpl.findEmpById(Integer))</th>
<th>匹配 com.wmx.aspect.EmpService 类中的 findEmpById 方法，且带有一个 Integer 类型参数。</th>
</tr>
</thead>
<tbody><tr>
<td>execution(* com.wmx.aspect.EmpServiceImpl.findEmpById(*))</td>
<td>匹配 com.wmx.aspect.EmpService 类中的 findEmpById 方法，且带有一个任意类型参数。</td>
</tr>
<tr>
<td>execution(* com.wmx.aspect.EmpServiceImpl.findEmpById(..))</td>
<td>匹配 com.wmx.aspect.EmpService 类中的 findEmpById 方法，参数不限</td>
</tr>
<tr>
<td>execution(* grp.basic3.se.service.SEBasAgencyService3.editAgencyInfo(..)) || execution(* grp.basic3.se.service.SEBasAgencyService3.adjustAgencyInfo(..))</td>
<td>匹配 editAgencyInfo 方法或者 adjustAgencyInfo 方法</td>
</tr>
<tr>
<td>execution(* com.wmx.aspect.EmpService.*(..))</td>
<td>匹配 com.wmx.aspect.EmpService 类中的任意方法</td>
</tr>
<tr>
<td>execution(* com.wmx.aspect.<em>.</em>(..))</td>
<td>匹配 com.wmx.aspect 包(不含子包)下任意类中的任意方法</td>
</tr>
<tr>
<td>execution(* com.wmx.aspect..<em>.</em>(..))</td>
<td>匹配 com.wmx.aspect 包及其子包下任意类中的任意方法</td>
</tr>
<tr>
<td>execution(* grp.pm..<em>Controller.</em>(..))</td>
<td>匹配 grp.pm 包下任意子孙包中以 “Controller” 结尾的类中的所有方法</td>
</tr>
</tbody></table>
<ul>
<li>execution：用于匹配方法执行的连接点；</li>
<li>within：用于匹配指定类型内的方法执行；</li>
<li>this：用于匹配当前AOP代理对象类型的执行方法；注意是AOP代理对象的类型匹配，这样就可能包括引入接口也类型匹配；    </li>
<li>target：用于匹配当前目标对象类型的执行方法；注意是目标对象的类型匹配，这样就不包括引入接口也类型匹配；</li>
<li>args：用于匹配当前执行的方法传入的参数为指定类型的执行方法；</li>
<li>@within：用于匹配所以持有指定注解类型内的方法；</li>
<li>@target：用于匹配当前目标对象类型的执行方法，其中目标对象持有指定的注解；</li>
<li>@args：用于匹配当前执行的方法传入的参数持有指定注解的执行；</li>
<li>@annotation：用于匹配当前执行方法持有指定注解的方法；</li>
</ul>
<h2 id="SpEL表达式"><a href="#SpEL表达式" class="headerlink" title="SpEL表达式"></a><strong>SpEL表达式</strong></h2><p>SpEL（Spring Expression Language），即Spring表达式语言，是比JSP的EL更强大的一种表达式语言</p>
<p>它可以在运行时查询和操作数据，尤其是数组列表型数据，因此可以缩减代码量，优化代码结构</p>
<p>SpEL有三种用法，一种是在注解@Value中；一种是XML配置；最后一种是在代码块中使用Expression</p>
<p>1.@Value</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;@Value能修饰成员变量和方法形参</span><br><span class="line">&#x2F;&#x2F;#&#123;&#125;内就是表达式的内容</span><br><span class="line">@Value(&quot;#&#123;表达式&#125;&quot;)</span><br><span class="line">public String arg;</span><br></pre></td></tr></table></figure>

<p>2.<bean>配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id&#x3D;&quot;xxx&quot; class&#x3D;&quot;com.java.XXXXX.xx&quot;&gt;</span><br><span class="line">    &lt;!-- 同@Value,#&#123;&#125;内是表达式的值，可放在property或constructor-arg内 --&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;arg&quot; value&#x3D;&quot;#&#123;表达式&#125;&quot;&gt;</span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>代码块中使用</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.expression.Expression;</span><br><span class="line">import org.springframework.expression.ExpressionParser;</span><br><span class="line">import org.springframework.expression.spel.standard.SpelExpressionParser;</span><br><span class="line">import org.springframework.expression.spel.support.StandardEvaluationContext;</span><br><span class="line"> </span><br><span class="line">public class SpELTest &#123;</span><br><span class="line"> </span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;创建ExpressionParser解析表达式</span><br><span class="line">        ExpressionParser parser &#x3D; new SpelExpressionParser();</span><br><span class="line">        &#x2F;&#x2F;表达式放置</span><br><span class="line">        Expression exp &#x3D; parser.parseExpression(&quot;表达式&quot;);</span><br><span class="line">        &#x2F;&#x2F;执行表达式，默认容器是spring本身的容器：ApplicationContext</span><br><span class="line">        Object value &#x3D; exp.getValue();</span><br><span class="line">        </span><br><span class="line">        &#x2F;**如果使用其他的容器，则用下面的方法*&#x2F;</span><br><span class="line">        &#x2F;&#x2F;创建一个虚拟的容器EvaluationContext</span><br><span class="line">        StandardEvaluationContext ctx &#x3D; new StandardEvaluationContext();</span><br><span class="line">        &#x2F;&#x2F;向容器内添加bean</span><br><span class="line">        BeanA beanA &#x3D; new BeanA();</span><br><span class="line">        ctx.setVariable(&quot;bean_id&quot;, beanA);</span><br><span class="line">        </span><br><span class="line">        &#x2F;&#x2F;setRootObject并非必须；一个EvaluationContext只能有一个RootObject，引用它的属性时，可以不加前缀</span><br><span class="line">        ctx.setRootObject(XXX);</span><br><span class="line">        </span><br><span class="line">        &#x2F;&#x2F;getValue有参数ctx，从新的容器中根据SpEL表达式获取所需的值</span><br><span class="line">        Object value &#x3D; exp.getValue(ctx);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.#{…}和${…}</p>
<ul>
<li>#{…} 用于执行SpEl表达式，并将内容赋值给属性</li>
<li>${…} 主要用于加载外部属性文件中的值</li>
<li>#{…} 和${…} 可以混合使用，但是必须<code>#&#123;&#125;外面，$&#123;&#125;在里面</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 如果属性文件没有spelDefault.value，则会报错</span><br><span class="line">   &#x2F;&#x2F;  @Value(&quot;$&#123;spelDefault.value&#125;&quot;)</span><br><span class="line">   &#x2F;&#x2F;  private String spelDefault2;</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F; 使用default.value设置值，如果不存在则使用默认值</span><br><span class="line">   @Value(&quot;$&#123;spelDefault.value:127.0.0.1&#125;&quot;)</span><br><span class="line">   private String spelDefault;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; SpEL：调用字符串Hello World的concat方法</span><br><span class="line">@Value(&quot;#&#123;&#39;Hello World&#39;.concat(&#39;!&#39;)&#125;&quot;)</span><br><span class="line">private String helloWorld;</span><br><span class="line"> </span><br><span class="line">&#x2F;&#x2F; SpEL: 调用字符串的getBytes方法，然后调用length属性</span><br><span class="line">@Value(&quot;#&#123;&#39;Hello World&#39;.bytes.length&#125;&quot;)</span><br><span class="line">private String helloWorldbytes;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$&#123;...&#125;和#&#123;...&#125;可以混合使用，如下文代码执行顺序：通过$&#123;server.name&#125;从属性文件中获取值并进行替换，然后就变成了 执行SpEL表达式&#123;‘server1,server2,server3’.split(‘,’)&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;&#x2F; SpEL: 传入一个字符串，根据&quot;,&quot;切分后插入列表中， #&#123;&#125;和$&#123;&#125;配置使用(注意单引号，注意不能反过来$&#123;&#125;在外面，#&#123;&#125;在里面)</span><br><span class="line">    @Value(&quot;#&#123;&#39;$&#123;server.name&#125;&#39;.split(&#39;,&#39;)&#125;&quot;)</span><br><span class="line">    private List&lt;String&gt; servers;</span><br><span class="line">    </span><br><span class="line">	&#x2F;&#x2F; SpEL: 注意不能反过来$&#123;&#125;在外面，#&#123;&#125;在里面，这个会执行失败</span><br><span class="line">    @Value(&quot;$&#123;#&#123;&#39;HelloWorld&#39;.concat(&#39;_&#39;)&#125;&#125;&quot;)</span><br><span class="line">    private List&lt;String&gt; servers2;    </span><br><span class="line">因为spring执行$&#123;&#125;是时机要早于#&#123;&#125;。在本例中，Spring会尝试从属性中查找#&#123;‘HelloWorld’.concat(‘_’)&#125;，那么肯定找不到，由上文已知如果找不到，然后报错。所以$&#123;&#125;在外面，#&#123;&#125;在里面是非法操作    </span><br></pre></td></tr></table></figure>


      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">spring</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2021/04/07/12.1.spring/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-8.6.VUE" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/07/8.6.VUE/">VUE</a>
    </h1>
  

        
        <a href="/2021/04/07/8.6.VUE/" class="archive-article-date">
  	<time datetime="2021-04-07T11:41:51.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2021-04-07</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="VUE简介"><a href="#VUE简介" class="headerlink" title="VUE简介"></a>VUE简介</h1><p>Vue.js（读音 /vjuː/, 类似于 view） 是一套构建用户界面的渐进式框架。</p>
<p>Vue 只关注视图层， 采用自底向上增量开发的设计。</p>
<p>Vue 的目标是通过尽可能简单的 API 实现响应的数据绑定和组合的视图组件。</p>
<h1 id="VUE安装"><a href="#VUE安装" class="headerlink" title="VUE安装"></a>VUE安装</h1><h2 id="1-独立版本"><a href="#1-独立版本" class="headerlink" title="1.独立版本"></a>1.独立版本</h2><p>我们可以在 Vue.js 的官网上直接下载最新版本, 并用 <code>&lt;script&gt;</code> 标签引入。</p>
<h2 id="2-使用-CDN-方法"><a href="#2-使用-CDN-方法" class="headerlink" title="2.使用 CDN 方法"></a>2.使用 CDN 方法</h2><p>以下推荐国外比较稳定的两个 CDN，国内还没发现哪一家比较好，目前还是建议下载到本地。</p>
<ul>
<li><strong>Staticfile CDN（国内）</strong> : <a target="_blank" rel="noopener" href="https://cdn.staticfile.org/vue/3.0.5/vue.global.js">https://cdn.staticfile.org/vue/3.0.5/vue.global.js</a></li>
<li><strong>unpkg</strong>：<a target="_blank" rel="noopener" href="https://unpkg.com/vue@next">https://unpkg.com/vue@next</a>, 会保持和 npm 发布的最新的版本一致。</li>
<li><strong>cdnjs</strong> : <a target="_blank" rel="noopener" href="https://cdnjs.cloudflare.com/ajax/libs/vue/3.0.5/vue.global.js">https://cdnjs.cloudflare.com/ajax/libs/vue/3.0.5/vue.global.js</a></li>
</ul>
<h2 id="3-NPM-方法"><a href="#3-NPM-方法" class="headerlink" title="3.NPM 方法"></a>3.NPM 方法</h2><p>因为需要使用 npm 安装 Vue CLI，而 npm 是集成在 Node.js 中的，所以第一步我们需要安装 Node.js。在官网下载安装完node.js后，查看node版本。同时npm也安装好了</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看版本</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm -v</span></span><br><span class="line">2.3.0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将 npm 更新至最新版本</span></span><br><span class="line">npm -g install npm</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">安装cnpm</span></span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 升级或安装 cnpm</span></span><br><span class="line">npm install cnpm -g</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">升级 npm</span></span><br><span class="line">cnpm install npm -g</span><br></pre></td></tr></table></figure>

<p>在用 Vue.js 构建大型应用时推荐使用 cnpm 安装，cnpm 能很好地和 Webpack 或 Browserify 模块打包器配合使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 最新稳定版</span><br><span class="line">$ cnpm install vue@next</span><br></pre></td></tr></table></figure>

<p>命令行工具</p>
<p>Vue.js 提供一个官方命令行工具，可用于快速搭建大型单页应用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 全局安装 vue-cli</span><br><span class="line">$ cnpm install -g @vue&#x2F;cli</span><br><span class="line">npm install -g vue-cli</span><br><span class="line"></span><br><span class="line"># 安装完后查看版本</span><br><span class="line">$ vue --version</span><br><span class="line">@vue&#x2F;cli 4.5.11</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>vue-cli 3.x 和 vue-cli 2.x 使用了相同的 vue 命令，如果你之前已经安装了 vue-cli 2.x，它会被替换为 Vue-cli 3.x。</p>
<p>安装 @vue/cli-int：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm i -g @vue&#x2F;cli-init</span><br></pre></td></tr></table></figure>





<p>node版本</p>
<p>npm版本</p>
<p>vue版本</p>
<p>vue-cli版本</p>
<p>前端版本会有不兼容问题</p>
<p>注意：Vue.js 不支持 IE8 及其以下 IE 版本。</p>
<h2 id="4-安装yarn"><a href="#4-安装yarn" class="headerlink" title="4.安装yarn"></a>4.安装yarn</h2><p>1.使用msi安装：</p>
<p>首先进入yarn的官网 <a target="_blank" rel="noopener" href="https://yarn.bootcss.com/docs/install/#windows-stable%EF%BC%8C%E7%84%B6%E5%90%8E%E9%80%89%E6%8B%A9%E7%A8%B3%E5%AE%9A%E7%89%88%E8%BF%9B%E8%A1%8C%E4%B8%8B%E8%BD%BD%E3%80%82%E7%84%B6%E5%90%8E%E5%8F%8C%E5%87%BB%E5%AE%89%E8%A3%85%E5%8D%B3%E5%8F%AF">https://yarn.bootcss.com/docs/install/#windows-stable，然后选择稳定版进行下载。然后双击安装即可</a></p>
<p>2.通过npm命令进行安装：</p>
<p>执行命令<code>npm install yarn -g</code> （后面的可选参数-g，g代表global全局安装的意思）的安装语句时，会将安装的模块安装到C:\Users\用户名\AppData\Roaming\npm路径中。</p>
<p>yarn和npm都是包管理工具，但是yarn是崭新的，经过重新设计的npm客户端，于2016年10月发布，相比于npm，yarn在运行速度上有显著的提升，安装时间变少，功能上也有很多改进</p>
<h1 id="创建VUE项目"><a href="#创建VUE项目" class="headerlink" title="创建VUE项目"></a>创建VUE项目</h1><h3 id="直接使用命令行构建项目"><a href="#直接使用命令行构建项目" class="headerlink" title="直接使用命令行构建项目"></a>直接使用命令行构建项目</h3><p>1.新建一个文件夹，自行选择位置。</p>
<p>2.文件夹里打开cmd，输入 <code>vue init webpack 项目名字</code>  （这里 webpack 是以 webpack 为模板指生成项目，还可以替换为 pwa、simple 等参数）</p>
<p>接下来会让你确认项目名字，描述，作者，build，是否安装vue-router（选是Y），是否安装es-lint（代码质量）</p>
<p>3.可以看到文件夹里生成了VUE项目</p>
<p>4.在项目里打开命令行，执行命令 <code>npm run dev</code></p>
<h3 id="使用webstorm"><a href="#使用webstorm" class="headerlink" title="使用webstorm"></a>使用webstorm</h3><p>按步骤新建项目。可以在控制台上输入命令。也可以在package.json 文件上点击右键，选择 show npm scripts，双击命令运行。也可以在右上角选择npm命令运行。</p>
<h1 id="VUE的文件"><a href="#VUE的文件" class="headerlink" title="VUE的文件"></a>VUE的文件</h1><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">vue-cource // 项目名称</span><br><span class="line">    |__ node_modules // 项目中的node依赖包</span><br><span class="line">    |__ public // public文件夹放公共文件</span><br><span class="line">    |    |__ favicon.ico // 标签栏的小图标</span><br><span class="line">    |    |__ index.html // 模板文件，最后打包后的index.html模板就是这个文件</span><br><span class="line">    |    </span><br><span class="line">    |__ src // 项目主文件</span><br><span class="line">    |    |__ api // api文件夹，项目的接口js文件都可以写在这里</span><br><span class="line">    |    |__ assets // 静态资源（图片、字体图标文件）</span><br><span class="line">    |    |    |__ img // 图片文件夹</span><br><span class="line">    |    |    |__ font // 字体图标文件夹</span><br><span class="line">    |    |</span><br><span class="line">    |    |__ components // 组件</span><br><span class="line">    |    |__ config // 项目的配置（全局变量js文件）</span><br><span class="line">    |    |    |__ index.js     </span><br><span class="line">    |    |</span><br><span class="line">    |    |__ directive // vue的自定义指令文件夹</span><br><span class="line">    |    |    |__ index.js     </span><br><span class="line">    |    |</span><br><span class="line">    |    |__ lib // 全局方法放在这里</span><br><span class="line">    |    |    |__ util.js // 与业务结合的工具方法</span><br><span class="line">    |    |    |__ tools.js // 与业务无关的工具方法(例如日期转换时间戳方法)</span><br><span class="line">    |    |</span><br><span class="line">    |    |__ mock // 模拟数据文件夹</span><br><span class="line">    |    |    |__ index.js</span><br><span class="line">    |    |</span><br><span class="line">    |    |__ router // 路由文件夹</span><br><span class="line">    |    |    |__ index.js // 路由配置文件</span><br><span class="line">    |    |    |__ router.js // 拆分出来的routes数组</span><br><span class="line">    |    |__ store // Vuex配置文件夹</span><br><span class="line">    |    |    |__ module          // 模块文件夹</span><br><span class="line">    |    |    |__ plugin          // Vuex插件文件夹</span><br><span class="line">    |    |    |__ actions.js      // 异步调用接口方法都写在这里</span><br><span class="line">    |    |    |__ getters.js      // Vuex的计算属性都写在这里</span><br><span class="line">    |    |    |__ index.js        // Vuex主要配置管理文件</span><br><span class="line">    |    |    |__ mutations.js    // Vuex中的修改state的方法，都写在这里</span><br><span class="line">    |    |    |__ state.js        // Vuex的变量文件夹</span><br><span class="line">    |    |</span><br><span class="line">    |    |__ views // 页面都写在这个文件夹中</span><br><span class="line">    |    |__ App.vue // 基础组件。项目入口文件，我们也可以直接将组件写这里，而不使用 components 目录。</span><br><span class="line">    |    |__ main.js // 项目入口文件（项目引入全局插件都在这里引入）项目的核心文件</span><br><span class="line">    |    </span><br><span class="line">    |__ .browserslistrc // 浏览器兼容</span><br><span class="line">    |__ .editorconfig // 编译器配置文件</span><br><span class="line">    |__ .eslintrc.js // 配置ESlint规则文件</span><br><span class="line">    |__ .gitignore // git提交的忽略文件</span><br><span class="line">    |__ babel.config.js // babel的配置文件，babel可以将es6、es7等等装换成es5兼容的代码</span><br><span class="line">    |__ package-lock.json // 锁定安装时的包的版本号，并且需要上传到git，以保证其他人在npm install时大家的依赖能保证一致</span><br><span class="line">    |__ package.json // 项目名称、项目版本、项目描述、项目运行的一些脚本（依赖）</span><br><span class="line">    |__ postcss.config.js // css自动补充一些兼容性代码的配置（-webkit-、-moz-、-ms-之类的）</span><br><span class="line">    |__ README.en.md // 英文版项目说明</span><br><span class="line">    |__ README.md // 中文版项目说明</span><br><span class="line">    |__ vue.config.js // 配置文件</span><br></pre></td></tr></table></figure>

<h3 id="public-index-html"><a href="#public-index-html" class="headerlink" title="public/index.html"></a>public/index.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- built files will be auto injected --&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>就是一个普普通通的 html 文件，让它不平凡的是 <code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code> ，下面有一行注释，构建的文件将会被自动注入，也就是说我们编写的其它的内容都将在这个 div 中展示。</p>
<p>还有不普通的一点是，整个项目只有这一个 html 文件，所以这是一个 单页面应用，当我们打开这个应用，表面上可以有很多页面，实际上它们都只不过在一个 div 中。</p>
<h3 id="src-App-vue"><a href="#src-App-vue" class="headerlink" title="src/App.vue"></a>src/App.vue</h3><p>这个文件称为“根组件”，因为其它的组件又都包含在这个组件中</p>
<p>vue 文件是一种自定义文件类型，在结构上类似 html，一个 .vue 文件即是一个 vue 组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span> <span class="attr">v-wechat-title</span>=<span class="string">&quot;$route.meta.title&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">router-view</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">&#x27;App&#x27;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">	<span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">		-webkit-<span class="attribute">font</span>-smoothing: antialiased;</span></span><br><span class="line"><span class="css">		<span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">		<span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">		<span class="attribute">font-family</span>: <span class="string">&#x27;PingFang SC&#x27;</span>;</span></span><br><span class="line"><span class="css">		<span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	#app &#123;</span><br><span class="line"><span class="css">		<span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line">	&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这里的<code>&lt;div id=&quot;app&quot;&gt;</code>,<code>id=app</code> 只是跟下面的 css 对应.</p>
<script>标签里的内容即该组件的脚本，也就是 js 代码，export default 是 ES6 的语法，意思是将这个组件整体导出，之后就可以使用 import 导入组件了。大括号里的内容是这个组件的相关属性

`<router-view/>`，是一个容器，名字叫“路由视图”，意思是当前路由（ URL）指向的内容将显示在这个容器中。也就是说，其它的组件即使拥有自己的路由（URL，需要在 router 文件夹的 index.js 文件里定义），也只不过表面上是一个单独的页面，实际上只是在根组件 App.vue 中。

### src/main.js

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line">import App from &#39;.&#x2F;App&#39;</span><br><span class="line">import router from &#39;.&#x2F;router&#39;</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip &#x3D; false</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 设置反向代理，前端请求默认发送到 http:&#x2F;&#x2F;localhost:8443&#x2F;api</span><br><span class="line">var axios &#x3D; require(&#39;axios&#39;)</span><br><span class="line">axios.defaults.baseURL &#x3D; &#39;http:&#x2F;&#x2F;localhost:8443&#x2F;api&#39;</span><br><span class="line">&#x2F;&#x2F; 全局注册，之后可在其他组件中通过 this.$axios 发送数据</span><br><span class="line">Vue.prototype.$axios &#x3D; axios</span><br><span class="line">Vue.config.productionTip &#x3D; false</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;* eslint-disable no-new *&#x2F;</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  el: &#39;#app&#39;,</span><br><span class="line">  router,</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  template: &#39;&lt;App&#x2F;&gt;&#39;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

没有分号（;），因为是 ES6 的语法，不这么写反而会提示错误，也可以把 es-lint 改了或者关了

最上面 import 了几个模块，其中 vue 模块在 node_modules 中，App 即 App.vue 里定义的组件，router 即 router 文件夹里定义的路由。

Vue.config.productionTip = false ,作用是阻止vue 在启动时生成生产提示。如果没有这行代码，或者设置为true，控制台就会多出这么一段代码：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">You are running Vue in development mode.</span><br><span class="line">Make sure to turn on production mode when deploying for production.</span><br></pre></td></tr></table></figure>

在这个 js 文件中，我们创建了一个 Vue 对象（实例），el 属性提供一个在页面上已存在的 DOM 元素作为 Vue 对象的挂载目标，router 代表该对象包含 Vue Router，并使用项目中定义的路由。components 表示该对象包含的 Vue 组件，template 是用一个字符串模板作为 Vue 实例的标识使用，类似于定义一个 html 标签。



### **src/config/index.js**

**当前项目的配置**

**config/index.js**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export default&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

上面使用 **ES6** 的 **模块** 导出一个对象，如果有 **全局变量** 都可以写在这里，在需要用到的地方直接这么写：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import  config  from  &#39;@&#x2F;config&#39;  &#x2F;&#x2F; nodejs就会自动找到他下面的index.js文件</span><br></pre></td></tr></table></figure>

或者这样也可以找到这个 **index** 文件，

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import  config  from  &#39;@&#x2F;config&#x2F;index&#39; </span><br></pre></td></tr></table></figure>



### src/router

分为**正常路由结构** 和 **封装好的路由结构**

**正常路由**：创建项目初始化路由 会在 src文件夹 下生成一个 router.js 文件。

**router.js**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line">import Router from &#39;vue-router&#39;</span><br><span class="line">import  Home  from  &#39;.&#x2F;views&#x2F;Home&#39;</span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line">export default new Router(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#39;&#x2F;&#39;,</span><br><span class="line">    name: &#39;home&#39;,</span><br><span class="line">    component: Home</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#39;&#x2F;about&#39;,</span><br><span class="line">    name: &#39;about&#39;,</span><br><span class="line">    &#x2F;&#x2F; route level code-splitting</span><br><span class="line">    &#x2F;&#x2F; this generates a separate chunk (about.[hash].js) for this route</span><br><span class="line">    &#x2F;&#x2F; which is lazy-loaded when the route is visited.</span><br><span class="line">    component: () &#x3D;&gt; import(&#x2F;* webpackChunkName: &quot;about&quot; *&#x2F; &#39;.&#x2F;views&#x2F;About.vue&#39;)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

这种只是 **简单的路由（搭建项目初始化自动生成的路由文件）** ，如果以后 **复杂** 起来会**难以维护**。

**封装路由**

1. 在 **src目录** 下创建一个 **router文件夹** ，这里的思想是把 **routes数组** 拆分成一个 **单独的js文件**，这样看着简洁也**方便维护**。

![img](https://img.kancloud.cn/76/ee/76ee106ff5e570f4235eba358b6cbb6c_348x87.png)

1. **router文件夹**

**index.js**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line">import Router from &#39;vue-router&#39;</span><br><span class="line">import routes from &#39;.&#x2F;router&#39;</span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line">export default new Router(&#123;</span><br><span class="line">  routes &#x2F;&#x2F; 这里使用ES6的简写写法，正常应该是这样写&#39;routes : routes &#39;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

**router.js**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import  Home  from  &#39;@&#x2F;views&#x2F;Home&#39;</span><br><span class="line"></span><br><span class="line">export default [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#39;&#x2F;&#39;,</span><br><span class="line">    name: &#39;home&#39;,</span><br><span class="line">    component: Home</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#39;&#x2F;about&#39;,</span><br><span class="line">    name: &#39;about&#39;,</span><br><span class="line">    &#x2F;&#x2F; route level code-splitting</span><br><span class="line">    &#x2F;&#x2F; this generates a separate chunk (about.[hash].js) for this route</span><br><span class="line">    &#x2F;&#x2F; which is lazy-loaded when the route is visited.</span><br><span class="line">    component: () &#x3D;&gt; import(&#x2F;* webpackChunkName: &quot;about&quot; *&#x2F; &#39;@&#x2F;views&#x2F;About.vue&#39;)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

### src/store

分为**正常vuex结构** 和 **封装好的vuex结构**

**正常vuex**

**创建项目** 初始化路由会在 **src文件夹** 下生成一个 **store.js** 文件。

**store.js**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line">import Vuex from &#39;vuex&#39;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

这种结构 **看似简单** ，后期项目 **维护麻烦** 。

**封装vuex**

**封装后** 的结构，在 **src目录** 下创建一个 **store文件夹**

![img](https://img.kancloud.cn/cd/c3/cdc31f614c6e19e0bbb0d9f705b05276_351x185.png)

module文件夹

首先讲一下为什么会有 **module文件夹** ，因为项目如果有 **好多vuex的状态** ，如果都写在 **sore.js** 中，看起来会 **杂乱无章** ，都不知道哪个 **vuex** 的 **状态** 是哪个 **模块** 中使用的，所以有了 **module文件夹** ，例如我有一个 **user模块** 我只需要在 **module文件夹** 中创建一个 **user.js**

**user.js**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const state &#x3D; &#123;</span><br><span class="line">    &#x2F;&#x2F;</span><br><span class="line">&#125;</span><br><span class="line">const mutations &#x3D; &#123;</span><br><span class="line">    &#x2F;&#x2F;</span><br><span class="line">&#125;</span><br><span class="line">const actions &#x3D; &#123;</span><br><span class="line">    &#x2F;&#x2F;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    state,</span><br><span class="line">    mutations,</span><br><span class="line">    actions</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

使用时只需要在 **store文件夹** 下的 **index.js** 中这样 **引入** 即可：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line">import Vuex from &#39;vuex&#39;</span><br><span class="line">import state from &#39;.&#x2F;state&#39; &#x2F;&#x2F; state.js文件可以不写.js结尾，这样写也会自动找到state.js文件</span><br><span class="line">import mutations from &#39;.&#x2F;mutations&#39;</span><br><span class="line">import actions from &#39;.&#x2F;actions&#39;</span><br><span class="line">import user from &#39;.&#x2F;module&#x2F;user&#39; &#x2F;&#x2F; 引入模块文件</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  state,  &#x2F;&#x2F; ES6对象简写的形式，state: state 等同与 state</span><br><span class="line">  mutations,</span><br><span class="line">  actions,</span><br><span class="line">  modules: &#123; &#x2F;&#x2F; 模块引用</span><br><span class="line">    user</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

**plugin文件夹**

**plugin文件夹** 是存放 **Vuex插件** 的文件夹，假如我们这里有个持久化插件

**plugin/saveiInLocal.js**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 持久化储存插件：这个函数会在每次store实例初始化时调用。刷新浏览器后第一次要做的操作可以定义在这里</span><br><span class="line"> * @param store </span><br><span class="line"> *&#x2F;</span><br><span class="line">export default store &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; 如果本地存储了state，就把这个stateJSON字符串转换成对象，替换到当前store实例的state</span><br><span class="line">    if(localStorage.state) store.replaceState(JSON.parse(localStorage.state))</span><br><span class="line">    store.subscribe((mutation, state) &#x3D;&gt; &#123;</span><br><span class="line">        &#x2F;&#x2F; 提交commit提交mutation之后执行这里，把state转换成JSON字符串储存到localStorage的state中</span><br><span class="line">        localStorage.state &#x3D; JSON.stringify(state)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

**actions.js**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const actions &#x3D; &#123;</span><br><span class="line">    &#x2F;&#x2F;</span><br><span class="line">&#125;</span><br><span class="line">export default actions</span><br></pre></td></tr></table></figure>

**index.js**

**index.js** 属于 **根级别的Vuex** 可以用来管理 **根级别** 的 **actions** 、 **state** 、 **mutations** 、 **getters** ，同样可以管理 **模块（module）** 中的 **actions** 、 **state** 、 **mutations**、 **getter**。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line">import Vuex from &#39;vuex&#39;</span><br><span class="line">import state from &#39;.&#x2F;state&#39; &#x2F;&#x2F; state.js文件可以不写.js结尾，这样写也会自动找到state.js文件</span><br><span class="line">import getters from &#39;.&#x2F;getters&#39;</span><br><span class="line">import mutations from &#39;.&#x2F;mutations&#39;</span><br><span class="line">import actions from &#39;.&#x2F;actions&#39;</span><br><span class="line">import user from &#39;.&#x2F;module&#x2F;user&#39; &#x2F;&#x2F; 引入模块文件</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  state,  &#x2F;&#x2F; ES6对象简写的形式，state: state 等同与 state</span><br><span class="line">  getters,</span><br><span class="line">  mutations,</span><br><span class="line">  actions,</span><br><span class="line">  modules: &#123; &#x2F;&#x2F; 模块引用</span><br><span class="line">    user</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

**mutations.js**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const mutations &#x3D; &#123;</span><br><span class="line">    &#x2F;&#x2F; </span><br><span class="line">&#125;</span><br><span class="line">export default mutations</span><br></pre></td></tr></table></figure>

**state.js**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const state &#x3D; &#123;</span><br><span class="line">    &#x2F;&#x2F; 状态写这里</span><br><span class="line">&#125;</span><br><span class="line">export default state</span><br></pre></td></tr></table></figure>

**getters.js**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const getters &#x3D; &#123;</span><br><span class="line">    &#x2F;&#x2F; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default getters</span><br></pre></td></tr></table></figure>



### package.json

**package.json** 文件主要是 **项目名称** 、 **项目版本** 、 **项目描述** 、 **项目运行的一些脚本（依赖）**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;vue-cource&quot;, &#x2F;&#x2F; 项目名称</span><br><span class="line">  &quot;version&quot;: &quot;0.1.0&quot;, &#x2F;&#x2F; 项目版本</span><br><span class="line">  &quot;private&quot;: true,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;serve&quot;: &quot;vue-cli-service serve&quot;, &#x2F;&#x2F; 运行指令 默认是development</span><br><span class="line">    &quot;build&quot;: &quot;vue-cli-service build&quot;, &#x2F;&#x2F; 打包指令 默认是production</span><br><span class="line">    &quot;lint&quot;: &quot;vue-cli-service lint&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;dependencies&quot;: &#123; &#x2F;&#x2F; 项目打包后用到的依赖（运行依赖）</span><br><span class="line">    &quot;core-js&quot;: &quot;^2.6.5&quot;,</span><br><span class="line">    &quot;vue&quot;: &quot;^2.6.10&quot;,</span><br><span class="line">    &quot;vue-router&quot;: &quot;^3.0.3&quot;,</span><br><span class="line">    &quot;vuex&quot;: &quot;^3.0.1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;devDependencies&quot;: &#123; &#x2F;&#x2F; 开发阶段用到的依赖（开发依赖）</span><br><span class="line">    &quot;@vue&#x2F;cli-plugin-babel&quot;: &quot;^3.10.0&quot;,</span><br><span class="line">    &quot;@vue&#x2F;cli-plugin-eslint&quot;: &quot;^3.10.0&quot;,</span><br><span class="line">    &quot;@vue&#x2F;cli-service&quot;: &quot;^3.10.0&quot;,</span><br><span class="line">    &quot;@vue&#x2F;eslint-config-standard&quot;: &quot;^4.0.0&quot;,</span><br><span class="line">    &quot;babel-eslint&quot;: &quot;^10.0.1&quot;,</span><br><span class="line">    &quot;eslint&quot;: &quot;^5.16.0&quot;,</span><br><span class="line">    &quot;eslint-plugin-vue&quot;: &quot;^5.0.0&quot;,</span><br><span class="line">    &quot;node-sass&quot;: &quot;^4.9.0&quot;,</span><br><span class="line">    &quot;sass-loader&quot;: &quot;^7.1.0&quot;,</span><br><span class="line">    &quot;vue-template-compiler&quot;: &quot;^2.6.10&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





### vue.config.js

**vue.config.js** 是 **vue** 的 **配置文件**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 引入nodejs的path模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> resolve = <span class="function"><span class="params">dir</span> =&gt;</span> path.join(__dirname, dir) <span class="comment">// resolve方法用来加载路径</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> BASE_URL = process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;/iview-admin/&#x27;</span> : <span class="string">&#x27;/&#x27;</span> </span><br><span class="line"><span class="comment">// 判断当前为开发环境还是打包环境, &#x27;/&#x27;意思是代表指定在域名的根目录下，如果要指定到iview-admin下就这样写&#x27;/iview-admin/&#x27;, production为生产坏境，development为开发环境</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  lintOnSave: <span class="literal">false</span>,                          <span class="comment">// 取消每次保存时都进行一次&#x27; ESLint &#x27;检测</span></span><br><span class="line">  publicPath: BASE_URL,                       <span class="comment">// 项目的基本路径,vuecli2.0时打包经常静态文件找不到，就是需要配置这个属性为&#x27;./&#x27;</span></span><br><span class="line">  chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;                   <span class="comment">// 配置Webpack</span></span><br><span class="line">    config.resolve.alias</span><br><span class="line">    .set(<span class="string">&#x27;@&#x27;</span>, resolve(<span class="string">&#x27;src&#x27;</span>))                 <span class="comment">// 引入文件时候“ @ ”符号就代表src</span></span><br><span class="line">    .set(<span class="string">&#x27;_c&#x27;</span>, resolve(<span class="string">&#x27;src/components&#x27;</span>))     <span class="comment">// 引入组件文件夹中的文件就可以用“ _c ”代替src/components</span></span><br><span class="line">  &#125;,</span><br><span class="line">  productionSourceMap: <span class="literal">false</span>,                 <span class="comment">// 打包时不生成.map文件，会减少打包体积，同时加快打包速度</span></span><br><span class="line">  devServer: &#123;                                <span class="comment">// 跨域有2种解决方案： 1. 在后端的header中配置， 2. 使用devServer来配置代理解决跨域</span></span><br><span class="line">    proxy: &#123;<span class="comment">// 这里写需要代理的URL,这里会告诉开发服务器，将任何未知请求匹配不到静态文件的请求，都代理到这个URL来满足跨域</span></span><br><span class="line">			<span class="string">&#x27;/api&#x27;</span>: &#123;<span class="comment">//api是为了把前端路由和后端路由区分开，没前缀的是前端路由，有前缀的是后端路由</span></span><br><span class="line">				target:process.env.VUE_APP_API_URL, <span class="comment">//这里后台的地址模拟的;应该填写你们真实的后台接口</span></span><br><span class="line">				changOrigin: <span class="literal">true</span>, <span class="comment">//允许跨域</span></span><br><span class="line">				pathRewrite: &#123;</span><br><span class="line">					<span class="comment">// &#x27;^/api&#x27;: &#x27;/api&#x27;</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





# ESLint

ESLint是个管理代码风格的工具 统一代码风格 在多人协作的项目都会用到



# VUEX

当我们的应用遇到多个组件共享状态时，会需要多个组件依赖于同一状态抑或是来自不同视图的行为需要变更同一状态。以前的解决办法：

**a.将数据以及操作数据的行为都定义在父组件;**

**b.将数据以及操作数据的行为传递给需要的各个子组件(有可能需要多级传递)**

传参的方法对于多层嵌套的组件将会非常繁琐，并且对于兄弟组件间的状态传递无能为力。在搭建下面页面时，你可能会对 vue 组件之间的通信感到崩溃 ，特别是非父子组件之间通信。此时就应该使用vuex，轻松可以搞定组件间通信问题。

![组件间通信](https://user-gold-cdn.xitu.io/2018/5/23/1638b38a08088b12?w=1194&h=486&f=png&s=133255)

Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。这里的关键在于集中式存储管理。**简单来说,对 vue 应用中多个组件的共享状态进行集中式的管理(读/写)**。

原理

![img](8.6.VUE/1656f2b9277ece19)

Vuex实现了一个单向数据流，在全局拥有一个State存放数据，当组件要更改State中的数据时，必须通过Mutation进行，Mutation同时提供了订阅者模式供外部插件调用获取State数据的更新。而当所有异步操作(常见于调用后端接口异步获取更新数据)或批量的同步操作需要走Action，但Action也是无法直接修改State的，还是需要通过Mutation来修改State的数据。最后，根据State的变化，渲染到视图上。

#### 2.简要介绍各模块在流程中的主要功能：

- Vue Components：Vue组件。HTML页面上，负责接收用户操作等交互行为，执行dispatch方法触发对应action进行回应。
- dispatch：操作行为触发方法，是唯一能执行action的方法。
- actions：**操作行为处理模块,由组件中的`$store.dispatch('action 名称', data1)`来触发。然后由commit()来触发mutation的调用 , 间接更新 state**。负责处理Vue Components接收到的所有交互行为。包含同步/异步操作，支持多个同名方法，按照注册的顺序依次触发。向后台API请求的操作就在这个模块中进行，包括触发其他action以及提交mutation的操作。该模块提供了Promise的封装，以支持action的链式触发。
- commit：状态改变提交操作方法。对mutation进行提交，是唯一能执行mutation的方法。
- mutations：**状态改变操作方法，由actions中的`commit('mutation 名称')`来触发**。是Vuex修改state的唯一推荐方法。该方法只能进行同步操作，且方法名只能全局唯一。操作之中会有一些hook暴露出来，以进行state的监控等。
- state：页面状态管理容器对象。集中存储Vue components中data对象的零散数据，全局唯一，以进行统一的状态管理。页面显示所需的数据从该对象中进行读取，利用Vue的细粒度数据响应机制来进行高效的状态更新。
- getters：state对象读取方法。图中没有单独列出该模块，应该被包含在了render中，Vue Components通过该方法读取全局state对象。



如果您的应用够简单，您最好不要使用 Vuex,因为使用 Vuex 可能是繁琐冗余的。一个简单的 [global event bus](https://cn.vuejs.org/v2/guide/components.html#非父子组件通信) 就足够您所需了。但是，**如果您需要构建一个中大型单页应用，您很可能会考虑如何更好地在组件外部管理状态，Vuex 将会成为自然而然的选择。**






每一个 **Vuex** 应用的核心就是 **store（仓库）** 。**store** 基本上就是一个 **容器** ，它包含着你的 **应用中大部分的状态 (state)** 。**Vuex** 和 **单纯的全局对象** 有以下 **两点不同**：

1. **Vuex** 的 **状态** 存储是 **响应式** 的。当 **Vue 组件** 从 **store** 中 **读取状态** 的时候，若 **store** 中的**状态发生变化** ，那么 **相应的组件也会得到更新** 。
2. 你 **不能直接改变 store 中的状态**。改变 **store** 中的 **状态** 的 **唯一途径就是通过mutation** 。这样使得我们可以方便地跟踪每一个状态的变化，从而让我们能够实现一些工具帮助我们更好地了解我们的应用。

## Bus

**Vuex** 适合 **大型复杂项目** 中使用，进行 **状态管理**，我们的项目如果不是很复杂可以使用 **Bus** 来满足需求。

## state 与 getter

![img](https://img.kancloud.cn/b3/f9/b3f994c71d894b582bae15b4a1df8ebb_701x551.png)

上图就是 **Vuex** 状态管理的 **流程** ，在 **Vue Components（组件）** 里可以触发一个 **Actions（Actions里可以做异步接口请求）** ， **请求完成** 后触发一个 **Mutations** ，通过 **Mutations** 修改 **State** 的状态值，**State** 修改之后会触发 **vue组件视图的渲染** 。

**getters从表面是获得的意思，可以把他看作在获取数据之前进行的一种再编辑,相当于对数据的一个过滤和加工**。getters就像计算属性一样，getter 的返回值会根据它的依赖被缓存起来，且只有当它的依赖值发生了改变才会被重新计算。



## mutation 与 action / module

![img](https://img.kancloud.cn/b3/f9/b3f994c71d894b582bae15b4a1df8ebb_701x551.png)

上图是 **Vuex** 状态管理的 **流程**，描述了从 **Vue Components（组件）** 执行 **异步操作** 的一个 **环形流程** ，实际上如果 **没有异步操作的需求** 就不用走 **Actions** 的这个步骤， **2种操作（同步、异步操作）** 的流程如下：

1. **异步操作**： **Vue Components（组件）** > **Actions（请求接口操作写这里）** > **Mutations（接口成功返回值后在这里修改State的值）** > **State状态更新** > **Vue Components（组件）视图更新**
2. **同步操作** ： **Vue Components（组件）** > **Mutations（修改State的值）** > **State状态更新** > **Vue Components（组件）视图更新**



actions和上面的Mutations功能基本一样，不同点是，**actions是异步的改变state状态，而Mutations是同步改变状态**。

同步的意义在于这样每一个 mutation 执行完成后都可以对应到一个新的状态（和 reducer 一样），这样 devtools 就可以打个 snapshot 存下来，然后就可以随便 time-travel 了。如果你开着 devtool 调用一个异步的 action，你可以清楚地看到它所调用的 mutation 是何时被记录下来的，并且可以立刻查看它们对应的状态----尤雨溪







# AJAX

**Ajax** 用来 **请求后端接口** 并且 **取得返回数据** ， 在 **Vue** 中 使用的是 **Vue** 官方推荐的 **axios** 库来作为 **异步接口请求** 的工具

**跨域** 是受到 **浏览器** 的 **同源策略** 的影响，在一些情况下是 **不允许通信的** 。

在下面表格中列出了 **跨域** 的案例：

| URL                                                         | 说明                           | 是否允许通信                            |
| :---------------------------------------------------------- | :----------------------------- | :-------------------------------------- |
| http://www.d.com/d.js <br />http://www.d.com/w.js           | 同一域名下                     | 允许                                    |
| http://www.d.com/lab/a.js <br />http://www.d.com/src/b.js   | 同一域名下不同文件夹           | 允许                                    |
| http://www.d.com:3333/a.js <br />http://www.d.com:4444/b.js | 同一域名不同端口               | 不允许                                  |
| http://www.d.com/a.js <br />http://46.33.22.44/b.js         | **域名和域名对应 IP**          | 不允许                                  |
| http://www.d.com/a.js <br />http://scipt.d.com/b.js         | 主域相同，子域不同             | 不允许                                  |
| http://www.d.com/a.js <br />http://d.com/b.js               | 同一域名，不同二级域名（同上） | 不允许（cookie 这种情况下也不允许访问） |
| http://www.d.com/a.js <br />http://www.v.com/b.js           | 不同域名                       | 不允许                                  |

### 前端解决跨域

**前端** 需要在 **vue.config.js** 文件中通过 **devServer** 中的 **proxy** 来 **配置代理** 。

**原理** ：我们在 **本地开发** 的时候，通过 **vueServe** 起一个 **本地的开发服务** ，这个 **服务的地址** 一般是 **localhost** ， **端口** 一般是 **8080** ，如果我们在 **本地起一个 node 服务** ，那么它的 **端口** 肯定是跟我们的 **前端服务的端口** 是不一样的，刚才在 上面表格中讲过 **同一域名不同端口** 也是 **存在跨域问题** ，是 **不在同一个域下** ，这个时候 **调用接口** 的话，受到 **同源策略** 影响，是 **无法调取成功** 的，我们可以用 **proxy** 来 **设置代理** ， **它会把我们所有的接口，代理到目标URL下** ，比如接口是 **/api/getUserInfo** ，我们 **设置代理** 是 **[http://localhost:4000](http://localhost:4000/)** ，这样的话请求的接口就会被代理到 **[http://localhost:4000](http://localhost:4000/)** 下，代理后请求接口时的**URL** ： **http://localhost:4000/#/api/getUserInfo** ， 例子如下：

**vue.config.js**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">// 引入nodejs的path模块</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> resolve = <span class="function"><span class="params">dir</span> =&gt;</span> path.join(__dirname, dir) <span class="comment">// resolve方法用来加载路径</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> BASE_URL = process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;/iview-admin/&#x27;</span> : <span class="string">&#x27;/&#x27;</span> <span class="comment">// 判断当前为开发环境还是打包环境, &#x27;/&#x27;意思是代表指定在域名的根目录下，如果要指定到iview-admin下就这样写&#x27;/iview-admin/&#x27;, production为生产坏境，development为开发环境</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  lintOnSave: <span class="literal">false</span>,                          <span class="comment">// 取消每次保存时都进行一次&#x27; ESLint &#x27;检测</span></span><br><span class="line">  publicPath: BASE_URL,                       <span class="comment">// 项目的基本路径,vuecli2.0时打包经常静态文件找不到，就是需要配置这个属性为&#x27;./&#x27;</span></span><br><span class="line">  chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;                   <span class="comment">// 配置Webpack</span></span><br><span class="line">    config.resolve.alias</span><br><span class="line">    .set(<span class="string">&#x27;@&#x27;</span>, resolve(<span class="string">&#x27;src&#x27;</span>))                 <span class="comment">// 引入文件时候“ @ ”符号就代表src</span></span><br><span class="line">    .set(<span class="string">&#x27;_c&#x27;</span>, resolve(<span class="string">&#x27;src/components&#x27;</span>))     <span class="comment">// 引入组件文件夹中的文件就可以用“ _c ”代替src/components</span></span><br><span class="line">  &#125;,</span><br><span class="line">  productionSourceMap: <span class="literal">false</span>,                 <span class="comment">// 打包时不生成.map文件，会减少打包体积，同时加快打包速度</span></span><br><span class="line">  devServer: &#123;                                <span class="comment">// 跨域有2种解决方案： 1. 在后端的header中配置， 2. 使用devServer来配置代理解决跨域</span></span><br><span class="line">    proxy: <span class="string">&#x27;http://localhost:4000&#x27;</span>            <span class="comment">// 这里写需要代理的URL,这里会告诉开发服务器，将任何未知请求匹配不到静态文件的请求，都代理到这个URL来满足跨域</span></span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

这里的代理的 **URL地址** 以及 **端口号** 一定要与服务端 **一致** 。

### 注意

1. **前端配置代理** 只是在 **开发环境（develop）** 好用，便于开发，在 **生产环境（prod）** 还是 **需要由服务端解决跨域** 。

2. 这里需要注意，如果在 **前端配置代理** ，需要在 **src/config/index.js（接下来的axios封装中用到了这个文件）** 中添加一个 **逻辑判断** 如下：

   **src/config/index.js**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 如果当前是生产环境用生产环境地址，如果是开发环境并且在vue.config.js中配置了代理，就用空字符串【&#39;&#39;】，如果未配置代理就用开发环境地址</span><br><span class="line">export const baseURL&#x3D; process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;production&#39; ? &#39;http:&#x2F;&#x2F;production.com&#39; : &#39;http:&#x2F;&#x2F;develop.com&#39;</span><br></pre></td></tr></table></figure>

### 后端解决跨域

如果不在 **设置代理** ，可以在 **后端设置header** 来 **解决跨域问题** ，这里 **后端** 用的是 **nodejs** ，在**express（nodejs的框架）** 里使用 **app.all** 为 **所有请求** 都添加这 **3 个 header** 即可。

**app.js**

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createError = <span class="built_in">require</span>(<span class="string">&#x27;http-errors&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;colors&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> cookieParser = <span class="built_in">require</span>(<span class="string">&#x27;cookie-parser&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> logger = <span class="built_in">require</span>(<span class="string">&#x27;morgan&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> indexRouter = <span class="built_in">require</span>(<span class="string">&#x27;./routes/index&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> usersRouter = <span class="built_in">require</span>(<span class="string">&#x27;./routes/users&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">// view engine setup</span></span><br><span class="line">app.set(<span class="string">&#x27;views&#x27;</span>, path.join(__dirname, <span class="string">&#x27;views&#x27;</span>))</span><br><span class="line">app.set(<span class="string">&#x27;view engine&#x27;</span>, <span class="string">&#x27;jade&#x27;</span>)</span><br><span class="line"></span><br><span class="line">app.use(logger(<span class="string">&#x27;dev&#x27;</span>))</span><br><span class="line">app.use(express.json())</span><br><span class="line">app.use(express.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line">app.use(cookieParser())</span><br><span class="line">app.use(express.static(path.join(__dirname, <span class="string">&#x27;public&#x27;</span>)))</span><br><span class="line"></span><br><span class="line">app.all(<span class="string">&#x27;*&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123; <span class="comment">// 设置header</span></span><br><span class="line">	res.header(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">	res.header(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>, <span class="string">&#x27;X-Requested-With,Content-Type&#x27;</span>)</span><br><span class="line">	res.header(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>,<span class="string">&#x27;PUT,POST,GET,DELETE,OPTIONS&#x27;</span>)</span><br><span class="line">	next()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">&#x27;/&#x27;</span>, indexRouter)</span><br><span class="line">app.use(<span class="string">&#x27;/users&#x27;</span>, usersRouter)</span><br><span class="line"></span><br><span class="line"><span class="comment">// catch 404 and forward to error handler</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">	next(createError(<span class="number">404</span>))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// error handler</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">err, req, res, next</span>) </span>&#123;</span><br><span class="line">	<span class="comment">// set locals, only providing error in development</span></span><br><span class="line">	res.locals.message = err.message</span><br><span class="line">	res.locals.error = req.app.get(<span class="string">&#x27;env&#x27;</span>) === <span class="string">&#x27;development&#x27;</span> ? err : &#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// render the error page</span></span><br><span class="line">	res.status(err.status || <span class="number">500</span>)</span><br><span class="line">	res.render(<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = app</span><br></pre></td></tr></table></figure>

## 封装axios

1. 首先在 **src文件夹** 下的 **lib文件夹** 中创建 **axios.js**

   **src/lib/axios.js**

   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; baseURL &#125; <span class="keyword">from</span> <span class="string">&#x27;@/config&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getToken &#125; <span class="keyword">from</span> <span class="string">&#x27;@/lib/util&#x27;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpRequest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">baseUrl = baseURL</span>)</span>&#123; <span class="comment">// baseUrl = baseURL 是ES6的默认值写法等同于 baseUrl = baseUrl || baseURL</span></span><br><span class="line">        <span class="built_in">this</span>.baseUrl = baseUrl <span class="comment">// this指向创建的实例，当你使用new HttpRequest创建实例时候，它会把this中定义的变量返回给你</span></span><br><span class="line">        <span class="built_in">this</span>.queue = &#123;&#125; <span class="comment">// 创建队列，每次请求都会向里面添加一个key:value，请求成功后就会去掉这个key:value，直到this.queue中没有属性值时，loading关闭</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 默认options配置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="title">getInsideConfig</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> config = &#123;</span><br><span class="line">            baseURL: <span class="built_in">this</span>.baseUrl,</span><br><span class="line">            headers: &#123;</span><br><span class="line">                <span class="comment">// </span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> config</span><br><span class="line">    &#125;</span><br><span class="line">    distroy (url) &#123;</span><br><span class="line">        <span class="keyword">delete</span> <span class="built_in">this</span>.queue[url]</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">Object</span>.keys(<span class="built_in">this</span>.queue).length) &#123;</span><br><span class="line">          <span class="comment">// Spin.hide()</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 拦截器</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;Object&#125;</span> <span class="variable">instance</span></span> - 通过axios创建的实例</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;String&#125;</span> <span class="variable">url</span></span> - 接口地址</span></span><br><span class="line"><span class="comment">     */</span>    </span><br><span class="line">    <span class="function"><span class="title">interceptors</span>(<span class="params">instance, url</span>)</span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 请求拦截器</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> <span class="variable">config</span></span> - 请求前的控制</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> <span class="variable">error</span></span> - 出现错误的时候会提供一个错误信息</span></span><br><span class="line"><span class="comment">         */</span>    </span><br><span class="line">        instance.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 添加全局的Lodaing...</span></span><br><span class="line">            <span class="keyword">if</span>(!<span class="built_in">Object</span>.keys(<span class="built_in">this</span>.queue).length)&#123;</span><br><span class="line">                <span class="comment">// Spin.show()</span></span><br><span class="line">            &#125; </span><br><span class="line">            <span class="built_in">this</span>.queue[url] = <span class="literal">true</span></span><br><span class="line">            config.headers[<span class="string">&#x27;Authorization&#x27;</span>] = getToken()</span><br><span class="line">            <span class="keyword">return</span> config</span><br><span class="line">        &#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 响应拦截器</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> <span class="variable">res</span></span> - 服务端返回的东西</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param <span class="type">&#123;Function&#125;</span> <span class="variable">error</span></span> - 出现错误的时候会提供一个错误信息</span></span><br><span class="line"><span class="comment">         */</span>            </span><br><span class="line">        instance.interceptors.response.use(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.distroy(url) <span class="comment">// 关闭全局的Lodaing...</span></span><br><span class="line">            <span class="keyword">const</span> &#123; data &#125; = res</span><br><span class="line">            <span class="keyword">return</span> data</span><br><span class="line">        &#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.distroy(url) <span class="comment">// 关闭全局的Lodaing...</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error.response.data)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">request</span>(<span class="params">options</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> instance = axios.create()</span><br><span class="line">        options = <span class="built_in">Object</span>.assign(<span class="built_in">this</span>.getInsideConfig(), options) <span class="comment">//  Object.assign会将2个对象合并成1个对象，相同属性值会被后者覆盖</span></span><br><span class="line">        <span class="built_in">this</span>.interceptors(instance, options.url) <span class="comment">// 拦截器</span></span><br><span class="line">        <span class="keyword">return</span> instance(options)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> HttpRequest</span><br></pre></td></tr></table></figure>

   **constructor方法** 是 **每一个类必须有的方法** ，如果我们不定义这个 **constructor方法** ， **class类** 会默认添加一个 **空的constructor方法（例如：constructor(){}）** ，在 **constructor方法** 中可以 **接收传入的参数** ， 在我们 **创建实例 new HttpRequest('参数')** 时候可以 **在括号内传入参数** ， 然后我们可以在 **constructor方法** 中 **对参数做一些操作** 。

2. 上面把 **baseUrl** 抽离到了 **config文件夹** 里的 **index.js 全局变量** 中

   **src/config/index.js**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 如果当前是生产环境用生产环境地址，如果是开发环境并且在vue.config.js中配置了代理，就用空字符串【&#39;&#39;】，如果未配置代理就用开发环境地址</span><br><span class="line">export const baseURL&#x3D; process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;production&#39; ? &#39;http:&#x2F;&#x2F;production.com&#39; : &#39;http:&#x2F;&#x2F;develop.com&#39;</span><br></pre></td></tr></table></figure>

### 使用方法

1. 在 **api文件夹** 中创建 **index.js**

   **src/api/index.js**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import HttpRequest from &#39;@&#x2F;lib&#x2F;axios&#39;</span><br><span class="line">const axios &#x3D; new HttpRequest()</span><br><span class="line">export default axios</span><br></pre></td></tr></table></figure>

   在使用时候：我们创建一个储存用户接口的 **uesr.js** 文件

   **src/api/user.js**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import axios from &#39;.&#x2F;index&#39;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 获取用户信息接口</span><br><span class="line">export const getUserInfo &#x3D; (&#123; userId &#125;) &#x3D;&gt; &#123;</span><br><span class="line">    return axios.request(&#123;</span><br><span class="line">        url: &#39;&#x2F;getUserInfo&#39;,</span><br><span class="line">        method: &#39;post&#39;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            userId</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

   然后在 **Home.vue** 页面组件中这样 **调用接口**

   **Home.vue**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click&#x3D;&quot;getInfo&quot;&gt;请求数据&lt;&#x2F;button&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; getUserInfo &#125; from &#39;@&#x2F;api&#x2F;user&#39;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getInfo()&#123;</span><br><span class="line">      getUserInfo(&#123; userId: 21 &#125;).then(res &#x3D;&gt; &#123;</span><br><span class="line">        console.log(res)</span><br><span class="line">      &#125;).catch(err &#x3D;&gt; &#123;</span><br><span class="line">        console.log(err)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>



ajax.js`中配置了axios.defaults.headers.post["Content-Type"] = "application/x-www-form-urlencoded;charset=UTF-8";`

在jquery的ajax中，如果没加contentType:"application/json"，那么data就应该对应的是json对象，反之，如果加了contentType:"application/json"，那么ajax发送的就必须是字符串

contentType参数指定的是浏览器将发送什么样类型的编码

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">text&#x2F;html ： HTML格式</span><br><span class="line"></span><br><span class="line">    text&#x2F;plain ：纯文本格式      </span><br><span class="line"></span><br><span class="line">    text&#x2F;xml ：  XML格式</span><br><span class="line"></span><br><span class="line">    mage&#x2F;gif ：gif图片</span><br><span class="line"></span><br><span class="line">    image&#x2F;jpeg ：jpg图片格式 </span><br><span class="line"></span><br><span class="line">    image&#x2F;png：png图片格式</span><br><span class="line"></span><br><span class="line">    application&#x2F;json  ：json数据格式</span><br><span class="line"></span><br><span class="line">    application&#x2F;pdf   ：pdf格式  </span><br><span class="line"></span><br><span class="line">    application&#x2F;octet-stream ： 二进制流数据</span><br></pre></td></tr></table></figure>

不指定contentType则代表为默认的application/x-www-form-urlencoded（表单）类型，这种类型有一个好处，它可以支持很多种情况，并能配合查询字符串（key1=value1&key2=vlaue2）的形式发送到服务器。而且这种默认类型可以很好地配合参数processData（默认为true，可以不用管他），该参数为true的时候，开启自动转化功能，**只要是一个合法对象**，都能将该对象**自动地转化成查询字符串**的形式

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data: &#123; &quot;username&quot; : &quot;ccc&quot; &#125; ,  &#x2F;&#x2F;查询字符串的映射形式（即对象），在默认模式下提交时会自动地转化成查询字符串</span><br><span class="line"> data: &quot;username&#x3D;ccc&quot;,   &#x2F;&#x2F;查询字符串形式</span><br></pre></td></tr></table></figure>

指定了contentType : "application/json"后，data就只能是字符串而且必须是json字符串了，首先你指定json格式，那提交格式肯定与json有关，再一个，因为你指定了"application/json"就意味着你放弃了"application/x-www-form-urlencoded"这种默认模式，默认模式虽可以自动地转化对象，不见得"application/json"这种格式就会自动帮你转，而事实证明，它确实不会帮你自动转

@RequestBody这个注解就是专门用来处理**非默认模式**下的请求的。该注解会提取你传过来的**json字符串**(注意是**json字符串**,不是查询字符串)，并将提取到的信息绑定到对象中

有些  关键的属性在Mvc层中反射失败，会导致其他所有属性都为null：比如joindate对应的pojo是Date，本来input框里的值是 Thu Dec 30 00:00:00 CST 1999 ，传到后台用Date接收，但是显然格式不对，于是Date合成出了错，然后坑爹的就来了，因为这个特殊的属性反射失败，Mvc层就将请求打回去然后导致浏览器报错400 bad request ，从而导致其他所有属性都为null。最后把joindate属性注释掉，后台什么属性的值都收到了

总结：在"application/json"的时候，ajax请求对跨域支持似乎不好，默认模式下的ajax成功跨域请求一旦改成了"application/json"就会报跨域请求的错，需要用@RequestBody在请求的参数中才能正常。

在非特殊情况下会有些更倾向application/x-www-form-urlencoded了，**跨域问题**既没有application/json那么多，安全问题也不像application/json那样会有一定概率被一些植入**恶意的回调代码**，而且能**很方便的传输和接受**复杂而又多重嵌套的对象

要调用别人的接口，那么就很可能要指定application/json格式，因为接口提供方就是这么规定的，json的数据格式**传输时带宽会更小**，尤其是在传输数组时，如果数组元素很多，那么application/json传输的数据量就会比application/x-www-form-urlencoded**要少很多**，同时，json的解析速度也会更快



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">在请求或响应被 then 或 <span class="keyword">catch</span> 处理前拦截它们。</span><br><span class="line"><span class="comment">// axios 配置</span></span><br><span class="line">axios.defaults.timeout = <span class="number">10000</span>; <span class="comment">// 设置请求超时为10秒</span></span><br><span class="line">axios.defaults.baseURL = <span class="string">&#x27;/api&#x27;</span>; <span class="comment">// 默认请求地址前都加/api</span></span><br><span class="line">axios.defaults.headers.post[<span class="string">&quot;Content-Type&quot;</span>] = <span class="string">&quot;application/x-www-form-urlencoded;charset=UTF-8&quot;</span>; <span class="comment">// 请求头的设置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置跨域携带用户凭证</span></span><br><span class="line"><span class="comment">//axios.defaults.withCredentials = true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">    (config) =&gt; &#123;</span><br><span class="line">        <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">        Toast.loading(&#123;</span><br><span class="line">            message: <span class="string">&quot;加载中...&quot;</span>,</span><br><span class="line">            loadingType: <span class="string">&quot;spinner&quot;</span>,</span><br><span class="line">            forbidClick: <span class="literal">true</span>,</span><br><span class="line">            duration: <span class="number">0</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">const</span> openid = <span class="built_in">localStorage</span>.getItem(<span class="string">&quot;openid&quot;</span>);</span><br><span class="line">        config.headers[<span class="string">&quot;openid&quot;</span>] = openid;</span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">    &#125;,</span><br><span class="line">    (error) =&gt; &#123;</span><br><span class="line">        <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">        Toast.clear();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;请求出错&quot;</span> + error)</span><br><span class="line">        <span class="built_in">window</span>.location.href = <span class="string">&#x27;http://elinktech.cn/#/error&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加响应拦截器</span></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">    (res) =&gt; &#123;</span><br><span class="line">        <span class="comment">// 对响应数据做点什么</span></span><br><span class="line">        Toast.clear(); <span class="comment">//在网络不好时清除加载中</span></span><br><span class="line">        <span class="keyword">const</span> responseCode = res.status;</span><br><span class="line">        <span class="comment">// 拦截器配置</span></span><br><span class="line">        <span class="keyword">if</span> (responseCode === <span class="number">200</span>) &#123;</span><br><span class="line">           </span><br><span class="line">            <span class="keyword">if</span> (res.data.code === -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&quot;返回出错了&quot;</span> + res)</span><br><span class="line">                <span class="built_in">window</span>.location.href = <span class="string">&#x27;http://elinktech.cn/#/error&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(&#123;</span><br><span class="line">                ok: <span class="literal">true</span>,</span><br><span class="line">                data: res.data,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Toast.fail(&#123;</span><br><span class="line">                message: <span class="string">&quot;服务器开小差了，请稍后重试&quot;</span>,</span><br><span class="line">                duration: <span class="number">3000</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    (error) =&gt; &#123;</span><br><span class="line">        <span class="comment">// 对响应错误做点什么</span></span><br><span class="line">        Toast.clear();</span><br><span class="line">        <span class="keyword">if</span> (error.response?.data?.code === <span class="number">401</span>) &#123;</span><br><span class="line">            <span class="comment">//  localStorage.removeItem(&quot;token&quot;);</span></span><br><span class="line">            <span class="comment">// localStorage.removeItem(&quot;userId&quot;);</span></span><br><span class="line">            <span class="comment">// window.location.reload();</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 请求失败</span></span><br><span class="line">        Toast.fail(&#123;</span><br><span class="line">            message: <span class="string">&quot;请求超时！&quot;</span>,</span><br><span class="line">            duration: <span class="number">3000</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;返回出错&quot;</span> + error)</span><br><span class="line">        <span class="built_in">window</span>.location.href = <span class="string">&#x27;http://elinktech.cn/#/error&#x27;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



# 渲染函数（render函数）

在 **Vue** 中使用 **渲染函数** 来 **创建视图模板** ，并且会讲解 **JSX** 的 **语法** ，同时会补充2个内容，第一是 **函数式组件** ，第二是 **作用域插槽** 。

## render函数

**render函数** ：可以用 **函数的方式** 渲染 **dom元素** 到页面中。

下面会讲解2种使用场景：

1. 在 **main.js** 中如何使用
2. 在 **.vue** 文件中使用

### render函数在main.js中使用

**src/main.js**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line">import App from &#39;.&#x2F;App.vue&#39; &#x2F;&#x2F; app组件</span><br><span class="line">import router from &#39;.&#x2F;router&#39;</span><br><span class="line">import store from &#39;.&#x2F;store&#39;</span><br><span class="line">import &#39;.&#x2F;plugins&#x2F;element.js&#39;</span><br><span class="line">import Bus from &#39;.&#x2F;lib&#x2F;bus&#39; &#x2F;&#x2F; 引入Bus</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip &#x3D; false</span><br><span class="line">Vue.prototype.$bus &#x3D; Bus &#x2F;&#x2F; 挂载Bus到Vue原型链（全局挂载Bus）</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: h &#x3D;&gt; h(App) &#x2F;&#x2F; 渲染app组件</span><br><span class="line">&#125;).$mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>

我们首先在 **main.js** 中学习 **render函数** ， **render** 的 **属性值** 是一个 **回调函数** ，它的参数可以用括号包裹起来，例如这样： **render: (h) => h(App)** ，如果 **只有一个参数就可以不用括号包裹** ， **h这个参数是一个方法** ，这个方法能 **创建一个虚拟节点** ，**这个函数 return 返回一个结果** 。

| 方法名                              | 参数                                                         | 是否必填 |
| :---------------------------------- | :----------------------------------------------------------- | :------- |
| **render函数：render: h => h(App)** | **h函数的第1个参数**：**要渲染的组件，或者一个标签字符串，或者也可以是一个函数** | **是**   |
|                                     | **h函数的第2个参数**： 该参数是一个 **配置对象**，可以 **通过该对象给元素设置属性** ，例如 **div** 标签的 **id、class 等等** | **否**   |
|                                     | **h函数的第3个参数**：该 **参数可以是字符串或者数组**，主要作用是 **给元素添加内容** | **否**   |

1. **h函数的参数1**

   **说明** ： **第1个参数** 是用来传入 **元素标签** 或者 **组件** 。

   1.1. **传入组件** ：**main.js** 中 **h函数** 默认传入的是 **app.vue页面组件**，所以就会 **渲染该组件** ，下面引入之前封装的 **CountTo 组件**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#39;vue&#39;</span><br><span class="line">import App from &#39;.&#x2F;App.vue&#39;</span><br><span class="line">import router from &#39;.&#x2F;router&#39;</span><br><span class="line">import store from &#39;.&#x2F;store&#39;</span><br><span class="line">import &#39;.&#x2F;plugins&#x2F;element.js&#39;</span><br><span class="line">import Bus from &#39;.&#x2F;lib&#x2F;bus&#39;</span><br><span class="line">import CountTo from &#39;_c&#x2F;count-to&#39; &#x2F;&#x2F; 引入CountTo 组件</span><br><span class="line"></span><br><span class="line">Vue.config.productionTip &#x3D; false</span><br><span class="line">Vue.prototype.$bus &#x3D; Bus</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: h &#x3D;&gt; h(CountTo, &#123;</span><br><span class="line">    &#x2F;&#x2F; &#39;class&#39;: &#39;count-to&#39;, &#x2F;&#x2F; 给组件最外层盒子添加class类名</span><br><span class="line">    &#x2F;&#x2F; 或者这样写</span><br><span class="line">    &#x2F;&#x2F; &#39;class&#39;: [&#39;count-to&#39;, true ? &#39;count-to2&#39; : &#39;&#39;], </span><br><span class="line">    &#x2F;&#x2F; 或者这样写</span><br><span class="line">    &#39;class&#39;: &#123;</span><br><span class="line">      &#39;count-to&#39;: true,</span><br><span class="line">      &#39;count-to2&#39;: 1 &#x3D;&#x3D;&#x3D; 1,</span><br><span class="line">    &#125;, </span><br><span class="line">    attrs: &#123;&#125;, &#x2F;&#x2F; 定义属性id等等</span><br><span class="line">    style: &#123;&#125;, &#x2F;&#x2F; 定义样式</span><br><span class="line">    props: &#123; &#x2F;&#x2F; 添加属性 这里可以理解为就是&lt;count-to :endValue&#x3D;&quot;100&quot;&#x2F;&gt;</span><br><span class="line">      endValue: 100</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; domProps: &#123; &#x2F;&#x2F; dom的一些属性</span><br><span class="line">    &#x2F;&#x2F;   innerHTML: &#39;11&#39; &#x2F;&#x2F; 可以设置标签的一些内容</span><br><span class="line">    &#x2F;&#x2F; &#125;,</span><br><span class="line">    on: &#123; &#x2F;&#x2F; 添加事件</span><br><span class="line">      &#39;on-animation-end&#39;: (val) &#x3D;&gt; &#123; &#x2F;&#x2F; 事件名</span><br><span class="line">        console.log(val)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    nativeOn: &#123; &#x2F;&#x2F; 组件内没有定义click事件时，给组件最外层元素绑定一个click事件</span><br><span class="line">      &#39;click&#39;: () &#x3D;&gt; &#123;</span><br><span class="line">        console.log(&#39;click&#39;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    directives: [], &#x2F;&#x2F; 可以定义自定义指令</span><br><span class="line">    scopedSlots: &#123;&#125;,</span><br><span class="line">    slot: &#39;&#39;, &#x2F;&#x2F; 插槽</span><br><span class="line">    key: &#39;&#39;, &#x2F;&#x2F; 设置一个值让每个组件的key不相等</span><br><span class="line">    ref: &#39;&#39; &#x2F;&#x2F; ref</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;).$mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>

   1.2. **传入字符串** ：也可以像下面写，这样页面中就 **渲染** 出一个 **div标签** 。

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: h &#x3D;&gt; h(&#39;div&#39;)</span><br><span class="line">&#125;).$mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>

   1.3. **传入函数** ：

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let func &#x3D; ()&#x3D;&gt; &#39;h3&#39;</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: h &#x3D;&gt; h(func())</span><br><span class="line">&#125;).$mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>

2. **h函数的参数2**

   **说明** ： **h函数** 的 **第2个参数是个对象** ，用来 **定义元素的一些属性** 。

   2.1. **给元素设置属性** ：

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: h &#x3D;&gt; h(&#39;div&#39;, &#123;</span><br><span class="line">    attrs: &#123; &#x2F;&#x2F; 添加属性</span><br><span class="line">      id: &#39;box&#39;</span><br><span class="line">    &#125;,</span><br><span class="line">    style: &#123; &#x2F;&#x2F; 添加样式</span><br><span class="line">      color: &#39;red&#39;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;).$mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>

3. **h函数的参数3**

   **说明** ： **h函数的第3个参数可以是字符串或者数组** ，用来 **定义元素的内容** 。

   3.1. **传入字符串**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: h &#x3D;&gt; h(&#39;div&#39;, &#123;</span><br><span class="line">    attrs: &#123; &#x2F;&#x2F; 添加属性</span><br><span class="line">      id: &#39;box&#39;</span><br><span class="line">    &#125;,</span><br><span class="line">    style: &#123; &#x2F;&#x2F; 添加样式</span><br><span class="line">      color: &#39;red&#39;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, &#39;我是div的内容&#39;)</span><br><span class="line">&#125;).$mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>

   **如果不设置样式可以直接忽略h函数的第2个参数** , 直接写内容

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: h &#x3D;&gt; h(&#39;div&#39;, &#39;123&#39;)</span><br><span class="line">&#125;).$mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>

   3.2. **传入数组**

   如果想让内容是 **多个标签** ，就需要 **传入数组**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: h &#x3D;&gt; h(&#39;div&#39;, [</span><br><span class="line">    h(&#39;span&#39;, &#39;111&#39;),</span><br><span class="line">    h(&#39;span&#39;, &#39;222&#39;)</span><br><span class="line">  ])</span><br><span class="line">&#125;).$mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>

   3.3. **循环传入标签**

   如果想实现一个类似 **v-for** 的效果，首先先看 **正常循环列表写法**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;ul @click&#x3D;&quot;handleClick&quot;&gt;</span><br><span class="line">        &lt;li @click.stop&#x3D;&quot;handleClick&quot; v-for&#x3D;&quot;(item, index) in list&quot; :key&#x3D;&quot;&#96;list_item_$&#123;index&#125;&#96;&quot;&gt;&#123;&#123; item.name &#125;&#125; &lt;&#x2F;li&gt;</span><br><span class="line">    &lt;&#x2F;ul&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default&#123;</span><br><span class="line">        data()&#123;</span><br><span class="line">            return&#123;</span><br><span class="line">                list: [</span><br><span class="line">                    &#123;name: &#39;小明&#39;&#125;,</span><br><span class="line">                    &#123;name: &#39;小黑&#39;&#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            handleClick(event)&#123;</span><br><span class="line">                console.log(event)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

   接下来使用 **render函数** 实现上面的 **循环列表跟点击事件**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 点击事件</span><br><span class="line">const handleClick &#x3D; event &#x3D;&gt; &#123;</span><br><span class="line">  console.log(event)</span><br><span class="line">  event.stopPropagation()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 数据</span><br><span class="line">let list &#x3D; [</span><br><span class="line">  &#123;name: &#39;小明&#39;&#125;,</span><br><span class="line">  &#123;name: &#39;小黑&#39;&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 循环生成li</span><br><span class="line">const getLiEleArr &#x3D; (h) &#x3D;&gt; &#123;</span><br><span class="line">  return list.map((item, index) &#x3D;&gt; h(&#39;li&#39;, &#123;</span><br><span class="line">    on: &#123;</span><br><span class="line">      &#39;click&#39;: handleClick</span><br><span class="line">    &#125;,</span><br><span class="line">    key: &#96;list_item_$&#123;index&#125;&#96;</span><br><span class="line">  &#125;, item.name))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 最终渲染</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: h &#x3D;&gt; h(&#39;div&#39;,[</span><br><span class="line">    h(&#39;ul&#39;, &#123;</span><br><span class="line">      on: &#123;</span><br><span class="line">        &#39;click&#39;: handleClick</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, getLiEleArr(h))</span><br><span class="line">  ])</span><br><span class="line">&#125;).$mount(&#39;#app&#39;)</span><br></pre></td></tr></table></figure>

### render函数在.vue中使用

有时 **即使你封装好了组件，但是想根据自己的方式去定制组件内的元素以及内容**，这时候就需要 **给组件传入一个render函数**

1. **父组件**

   首先在 **路由列表** 的 **路由对象** 中添加新创建的 **render-page** 页面配置路由

   **src/router/router.js**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">export default [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#39;&#x2F;render-page&#39;,</span><br><span class="line">    name: &#39;&#x2F;render_page&#39;,</span><br><span class="line">    component: () &#x3D;&gt; import(&#39;@&#x2F;views&#x2F;render-page&#39;)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

   然后在 **src/views/render-page.vue** 页面 **引入list组件**

   **src/views/render-page.vue**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;list :list&#x3D;&quot;list&quot; :render&#x3D;&quot;renderFunc&quot;&gt;&lt;&#x2F;list&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import List from &#39;_c&#x2F;list&#39;</span><br><span class="line"></span><br><span class="line">export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            list: [ &#x2F;&#x2F; 数据</span><br><span class="line">                &#123;name: &#39;小明&#39;&#125;,</span><br><span class="line">                &#123;name: &#39;小黑&#39;&#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        List</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        renderFunc(h, name)&#123; &#x2F;&#x2F; 自定义render函数渲染自己想要的dom节点内容</span><br><span class="line">            return h(&#39;i&#39;, &#123;</span><br><span class="line">                style: &#123;</span><br><span class="line">                    color: &#39;pink&#39;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, name)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

2. **子组件**

   **src/components/list/list.vue**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">      &lt;li v-for&#x3D;&quot;(item, index) in list&quot; :key&#x3D;&quot;&#96;item_$&#123;index&#125;&#96;&quot;&gt;</span><br><span class="line">          &lt;!-- 如果未传入render函数就span标签内容 --&gt;</span><br><span class="line">          &lt;span v-if&#x3D;&quot;!render&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">          </span><br><span class="line">          &lt;!-- 如果传入了render函数，就使用render函数自定义dom的节点来渲染 --&gt;</span><br><span class="line">          &lt;render-dom v-else :render-func&#x3D;&quot;render&quot; :name&#x3D;&quot;item.name&quot;&gt;&lt;&#x2F;render-dom&gt;</span><br><span class="line">      &lt;&#x2F;li&gt;</span><br><span class="line">  &lt;&#x2F;ul&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">&#x2F;&#x2F; 引入函数式组件</span><br><span class="line">import RenderDom from &#39;_c&#x2F;render-dom&#39;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    name: &#39;List&#39;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        RenderDom &#x2F;&#x2F; 注册函数式组件</span><br><span class="line">    &#125;,</span><br><span class="line">    props: &#123;</span><br><span class="line">        list: &#123; &#x2F;&#x2F; 列表内容</span><br><span class="line">            type: Array,</span><br><span class="line">            default: () &#x3D;&gt; []</span><br><span class="line">        &#125;,</span><br><span class="line">        render: &#123; &#x2F;&#x2F; render 函数</span><br><span class="line">            type: Function,</span><br><span class="line">            default: () &#x3D;&gt; &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

   定义一个 **index.js 方便父组件引用**

   **src/components/list/index.js**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import List from &#39;.&#x2F;list.vue&#39;</span><br><span class="line">export default List</span><br></pre></td></tr></table></figure>

   在上面的组件中使用到了 **函数式组件** ，这里写的 **函数式组件** 就是使用 **reder函数 自定义一些想要的标签** 然后 **return** 返回一个 **虚拟节点** ， **最终渲染在使用函数式组件的地方** ，**函数式组件详解看下方的文档介绍**。

   **src/components/render-dom.js**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">    functional: true,</span><br><span class="line">    props: &#123;</span><br><span class="line">        name: String, &#x2F;&#x2F; 组件渲染的文字内容</span><br><span class="line">        renderFunc: Function &#x2F;&#x2F; 传入的render函数</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * render渲染函数</span><br><span class="line">     * @param &#123;Function&#125; h - render函数的回调方法，用于生成dom节点</span><br><span class="line">     * @param &#123;Object&#125; ctx - 指代当前的这个对象</span><br><span class="line">     *&#x2F;</span><br><span class="line">    render: (h, ctx) &#x3D;&gt; &#123;</span><br><span class="line">        return ctx.props.renderFunc(h, ctx.props.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

## 函数式组件

**函数式组件** ： **只给它传入数据，它不做任何响应式的操作， 不监听传递给它的状态** ，这个组件 **没有生命周期和钩子函数**，它 **只是作为一个接收参数的函数** ， 当 **functional 设置为 true** 时候，证明 **它是一个没有状态的组件，也没有实例，就是一个对象** ， 当 **把这个对象引入到其他页面，当做一个组件去使用的时候，vue会把它做一个处理，会把 【render函数】里面逻辑返回的【虚拟节点】做一个渲染** 。

**src/components/render-dom.js**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">    functional: true,</span><br><span class="line">    props: &#123;</span><br><span class="line">        name: String, &#x2F;&#x2F; 组件渲染的文字内容</span><br><span class="line">        renderFunc: Function &#x2F;&#x2F; 传入的render函数</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * render渲染函数</span><br><span class="line">     * @param &#123;Function&#125; h - render函数的回调方法，用于生成dom节点</span><br><span class="line">     * @param &#123;Object&#125; ctx - 指代当前的这个对象</span><br><span class="line">     *&#x2F;</span><br><span class="line">    render: (h, ctx) &#x3D;&gt; &#123;</span><br><span class="line">        return ctx.props.renderFunc(h, ctx.props.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

## JSX

**JSX** ：**JSX** 最先是 **react** 提出的， **通过一种形式，在 js 里面写 html 标签，还有一些特定的语法** ，最后会把这个 **字符串** 转译成 **js** ，去用 **render函数** 来做渲染。

### JSX渲染标签字符串

1. **父组件**

   **src/views/render-page.vue**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;list :list&#x3D;&quot;list&quot; :render&#x3D;&quot;renderFunc&quot;&gt;&lt;&#x2F;list&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import List from &#39;_c&#x2F;list&#39;</span><br><span class="line"></span><br><span class="line">export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            list: [ &#x2F;&#x2F; 数据</span><br><span class="line">                &#123;name: &#39;小明&#39;&#125;,</span><br><span class="line">                &#123;name: &#39;小黑&#39;&#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        List</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        renderFunc(h, name)&#123; &#x2F;&#x2F; 自定义render函数渲染自己想要的dom节点内容</span><br><span class="line">            &#x2F;**</span><br><span class="line">             * render函数方式</span><br><span class="line">             *&#x2F;</span><br><span class="line">            &#x2F;&#x2F; return h(&#39;i&#39;, &#123;</span><br><span class="line">            &#x2F;&#x2F;     style: &#123;</span><br><span class="line">            &#x2F;&#x2F;         color: &#39;pink&#39;</span><br><span class="line">            &#x2F;&#x2F;     &#125;</span><br><span class="line">            &#x2F;&#x2F; &#125;, name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#x2F;**</span><br><span class="line">             * JSX方式</span><br><span class="line">             * JSX与template模板对比</span><br><span class="line">             *   style:</span><br><span class="line">             *      template的标签中写法:style&#x3D;&quot;&#123; color: &#39;pink&#39; &#125;&quot;</span><br><span class="line">             *      JSX写法:style&#x3D;&#123;&#123;color: &#39;pink&#39;&#125;&#125;</span><br><span class="line">             *      JSX中style不需要添加双引号，属性都需要用&#123;&#125;包裹</span><br><span class="line">             * </span><br><span class="line">             *   事件:</span><br><span class="line">             *      template的标签中写法v-click&#x3D;&quot;handleClick&quot; 或者 @click&#x3D;&quot;handleClick&quot;</span><br><span class="line">             *      JSX写法on-click&#x3D;&#123; this.handleClick &#125;</span><br><span class="line">             *&#x2F;</span><br><span class="line">            return (</span><br><span class="line">                &lt;i on-click&#x3D;&#123; this.handleClick &#125; style&#x3D;&#123;&#123;color: &#39;pink&#39;&#125;&#125;&gt;&#123; name &#125;&lt;&#x2F;i&gt; </span><br><span class="line">            )</span><br><span class="line">        &#125;,</span><br><span class="line">        handleClick(event)&#123;</span><br><span class="line">            console.log(event)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

   使用 **JSX** 时 **render函数** 的 **形参必须是 h** ，不可以改成其他的（例如 **createElement**）。以上代码中引入的 **List组件** 在上面的 **render函数** 文档中有写过，在此处就不再过多陈述。

### JSX渲染组件

1. **父组件**

   **src/views/render-page.vue**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;list :list&#x3D;&quot;list&quot; :render&#x3D;&quot;renderFunc&quot;&gt;&lt;&#x2F;list&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import List from &#39;_c&#x2F;list&#39;</span><br><span class="line">import CountTo from &#39;_c&#x2F;count-to&#39; &#x2F;&#x2F; 引入组件</span><br><span class="line"></span><br><span class="line">export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            list: [ &#x2F;&#x2F; 数据</span><br><span class="line">                &#123; number: 100 &#125;,</span><br><span class="line">                &#123; number: 45 &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        List</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        renderFunc(h, number)&#123; &#x2F;&#x2F; 自定义render函数渲染自己想要的dom节点内容</span><br><span class="line">            return (</span><br><span class="line">                &#x2F;**</span><br><span class="line">                 * 这里可以引入组件进行渲染，而且不用在components对象中注册</span><br><span class="line">                 * 事件分为2种：原生事件、自定义事件</span><br><span class="line">                 *  html标签：支持原生事件</span><br><span class="line">                 *  组件：支持原生事件(给下面的CountTo组件绑定一个原生click事件,就相当于给组件内的最外层元素绑定了一个click事件，</span><br><span class="line">                 *  写法：nativeOn-事件名称&#x3D;&#123;方法&#125;)、</span><br><span class="line">                 *  自定义事件(写法：on-自定义事件名称&#x3D;&#123;方法&#125;)</span><br><span class="line">                 *  template模板中的事件修饰符在JSX跟render函数中用到需要看文档</span><br><span class="line">                 * *&#x2F; </span><br><span class="line">                &lt;CountTo nativeOn-click&#x3D;&#123;this.handleClick&#125; on-on-animation-end&#x3D;&#123;this.handleEnd&#125; endValue&#x3D;&#123;number&#125; style&#x3D;&#123;&#123;color: &#39;pink&#39;&#125;&#125;&gt;&lt;&#x2F;CountTo&gt; </span><br><span class="line">            )</span><br><span class="line">        &#125;,</span><br><span class="line">        handleClick(event)&#123;</span><br><span class="line">            console.log(event)</span><br><span class="line">        &#125;,</span><br><span class="line">        handleEnd()&#123;</span><br><span class="line">            console.log(&#39;end!&#39;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

   父组件中引入的 **[CountTo组件](https://www.kancloud.cn/wangjiachong/vue_notes/1971966)**

2. **子组件**

   **src/components/list.vue**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">      &lt;li @mousemove&#x3D;&quot;handleMove&quot; v-for&#x3D;&quot;(item, index) in list&quot; :key&#x3D;&quot;&#96;item_$&#123;index&#125;&#96;&quot;&gt;</span><br><span class="line">          &lt;!-- 如果未传入render函数就span标签内容 --&gt;</span><br><span class="line">          &lt;span v-if&#x3D;&quot;!render&quot;&gt;&#123;&#123; item.number &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">          </span><br><span class="line">          &lt;!-- 如果传入了render函数，就使用render函数自定义dom的节点来渲染 --&gt;</span><br><span class="line">          &lt;render-dom v-else :render-func&#x3D;&quot;render&quot; :number&#x3D;&quot;item.number&quot;&gt;&lt;&#x2F;render-dom&gt;</span><br><span class="line">      &lt;&#x2F;li&gt;</span><br><span class="line">  &lt;&#x2F;ul&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">&#x2F;&#x2F; 引入函数式组件</span><br><span class="line">import RenderDom from &#39;_c&#x2F;render-dom&#39;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    name: &#39;List&#39;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        RenderDom &#x2F;&#x2F; 注册函数式组件</span><br><span class="line">    &#125;,</span><br><span class="line">    props: &#123;</span><br><span class="line">        list: &#123; &#x2F;&#x2F; 列表内容</span><br><span class="line">            type: Array,</span><br><span class="line">            default: () &#x3D;&gt; []</span><br><span class="line">        &#125;,</span><br><span class="line">        render: &#123; &#x2F;&#x2F; render 函数</span><br><span class="line">            type: Function,</span><br><span class="line">            default: () &#x3D;&gt; &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        handleMove(event)&#123;</span><br><span class="line">            &#x2F;&#x2F; 阻止默认行为（文字不可以选中复制）</span><br><span class="line">            event.preventDefault()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

   **list组件** 对应的 **index.js**，用于 **父组件方便引用**

   **src/components/list/index.js**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import List from &#39;.&#x2F;list.vue&#39;</span><br><span class="line">export default List</span><br></pre></td></tr></table></figure>

   **子组件** 中用到的 **函数式组件 render-dom.js**

   **src/components/render-dom.js**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">    functional: true,</span><br><span class="line">    props: &#123;</span><br><span class="line">        number: Number, &#x2F;&#x2F; 组件渲染的文字内容</span><br><span class="line">        renderFunc: Function &#x2F;&#x2F; 传入的render函数</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * render渲染函数</span><br><span class="line">     * @param &#123;Function&#125; h - render函数的回调方法，用于生成dom节点</span><br><span class="line">     * @param &#123;Object&#125; ctx - 指代当前的这个对象</span><br><span class="line">     *&#x2F;</span><br><span class="line">    render: (h, ctx) &#x3D;&gt; &#123;</span><br><span class="line">        return ctx.props.renderFunc(h, ctx.props.number)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

## 作用域插槽

**定制组件内的元素以及内容** ，用 **render函数** 以及 **JSX** 都比较繁琐，接下来用 **作用域插槽** 来实现这个需求。

1. **父组件**

   **src/views/render-page.vue**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;list :list&#x3D;&quot;list&quot;&gt;</span><br><span class="line">            &lt;h3 slot&#x3D;&quot;aa&quot;&gt;我是小明&lt;&#x2F;h3&gt;</span><br><span class="line">            &lt;coun-to slot-scope&#x3D;&quot;count&quot; :end-value&#x3D;&quot;count.number&quot;&gt;&lt;&#x2F;coun-to&gt;</span><br><span class="line">        &lt;&#x2F;list&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import List from &#39;_c&#x2F;list&#39;</span><br><span class="line">import CounTo from &#39;_c&#x2F;count-to&#39; &#x2F;&#x2F; 引入组件</span><br><span class="line"></span><br><span class="line">export default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">            list: [ &#x2F;&#x2F; 数据</span><br><span class="line">                &#123; number: 100 &#125;,</span><br><span class="line">                &#123; number: 45 &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        List,</span><br><span class="line">        CounTo</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

2. **子组件**

   **src/components/list.vue**

   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">      &lt;li v-for&#x3D;&quot;(item, index) in list&quot; :key&#x3D;&quot;&#96;item_$&#123;index&#125;&#96;&quot;&gt;</span><br><span class="line">            &lt;!-- 默认插槽 --&gt;</span><br><span class="line">            &lt;!-- &lt;slot&gt;&lt;&#x2F;slot&gt; --&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &lt;!-- 具名插槽 --&gt;</span><br><span class="line">            &lt;slot name&#x3D;&quot;aa&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">        </span><br><span class="line">            &lt;!-- 作用域插槽 --&gt;</span><br><span class="line">            &lt;slot :number&#x3D;&quot;item.number&quot;&gt;&lt;&#x2F;slot&gt;</span><br><span class="line">      &lt;&#x2F;li&gt;</span><br><span class="line">  &lt;&#x2F;ul&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &#39;List&#39;,</span><br><span class="line">    props: &#123;</span><br><span class="line">        list: &#123; &#x2F;&#x2F; 列表内容</span><br><span class="line">            type: Array,</span><br><span class="line">            default: () &#x3D;&gt; []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

3. **插槽总结**

   3.1 **匿名插槽** 应用场景：**组件内** 只需要一个 **插槽** 的情况，可以使用 **匿名插槽** 。

   3.2 **具名插槽** 应用场景：**组件内** 需要多个 **插槽** 的情况，可以使用 **具名插槽** 。

   3.3 **作用域插槽**应用场景：**父组件插槽插入的内容中** 使用到了 **组件内的数据** 。



# render: h => h(App)

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//createElement就是h,一个形参，没有具体意义，可以随意改变书写</span></span><br><span class="line">render:(<span class="function"><span class="keyword">function</span>(<span class="params">createElement</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> createElement(App);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

render是一个方法，自带一个形参createElement，这个参数也是一个方法，是用来创建vue 节点的，也就是html模板的，然后渲染(render)到指定的节点上



# VUE的配置



# VUE的路由：Vue Router

vue-router中经常会操作的两个对象route和router两个

## $route对象

表示当前的路由信息，包含了当前 URL 解析得到的信息。包含当前的路径，参数，query对象等

**1.**  **$route.path**   字符串，对应当前路由的路径，总是解析为绝对路径，如"/foo/bar"。

  **2.**  **$route.params**   一个 key/value 对象，包含了 动态片段 和 全匹配片段，   如果没有路由参数，就是一个空对象。

  **3.**  **$route.query**   一个 key/value 对象，表示 URL 查询参数。   例如，对于路径 /foo?user=1，则有$route.query.user == 1，   如果没有查询参数，则是个空对象。

  **4.**  **$route.hash**   当前路由的hash值 (不带#) ，如果没有 hash 值，则为空字符串。锚点*

  **5.**  **$route.fullPath**   完成解析后的 URL，包含查询参数和hash的完整路径。

  **6.**  **$route.matched**   数组，包含当前匹配的路径中所包含的所有片段所对应的配置参数对象。

  **7.**  **$route.name**  当前路径名字

  **8.**  **$route.meta** 路由元信息

  导航钩子的参数：

  router.beforeEach((to,from, next)=>{//to 和from都是 路由信息对象,后面使用路由的钩子函数就容易理解了})

## **$router对象**

$router对象是全局路由的实例，是router构造方法的实例

**路由实例方法：**

#### **1、push**

  1.字符串this.$router.push('home')

2. 对象this.$router.push({path:'home'})

3. 命名的路由this.$router.push({name:'user',params:{userId:123}}) 

  4.带查询参数，变成 /register?plan=123this.$router.push({path:'register',query:{plan:'123'}})

  push方法其实和`<router-link :to="...">`是等同的。

  注意：push方法的跳转会向 history 栈添加一个新的记录，当我们点击浏览器的返回按钮时可以看到之前的页面。

使用name，必须使用params，刷新页面，参数会丢失。而使用path，必须使用query，刷新页面不会丢失参数。

#### **2、go**

   页面路由跳转 

   前进或者后退this.$router.go(-1) // 后退

#### 3、replace

  push方法会向 history 栈添加一个新的记录，而replace方法是替换当前的页面，

  不会向 history 栈添加一个新的记录

#### 4.一般使用replace来做404页面

  this.$router.replace('/')

  配置路由时path有时候会加 '/' 有时候不加,以'/'开头的会被当作根路径，就不会一直嵌套之前的路径。

$router对象是全局路由的实例，是router构造方法的实例。



**Vue Router** 是 **Vue** 官方提供的 **路由管理器** ，可以进行 **路由跳转**，以及 **页面之间跳转时传值**，以及 **路由拦截** 等等操作



这里的路由并不是指我们平时所说的硬件路由器，**这里的路由就是SPA（单页应用）的路径管理器**。再通俗的说，vue-router就是[WebApp](https://coding.imooc.com/?c=webapp)的链接路径管理系统。
vue-router是Vue.js官方的路由插件，它和vue.js是深度集成的，适合用于构建单页面应用。vue的单页面应用是基于路由和组件的，路由用于设定访问路径，并将路径和组件映射起来。传统的页面应用，是用一些超链接来实现页面切换和跳转的。在vue-router单页面应用中，则是路径之间的切换，也就是组件的切换。**路由模块的本质 就是建立起url和页面之间的映射关系**。

至于我们为啥不能用a标签，这是因为用Vue做的都是单页应用（**当你的项目准备打包时，运行`npm run build`时，就会生成dist文件夹，这里面只有静态资源和一个index.html页面**），所以你写的`<a></a>`标签是不起作用的，你必须使用vue-router来进行管理。


实现原理

SPA(single page application):单一页面应用程序，只有一个完整的页面；它在加载页面时，不会加载整个页面，而是只更新某个指定的容器中内容。**单页面应用(SPA)的核心之一是: 更新视图而不重新请求页面**;vue-router在实现单页面前端路由时，提供了两种方式：Hash模式和History模式；根据mode参数来决定采用哪一种方式。

#### 1、Hash模式：

**vue-router 默认 hash 模式 —— 使用 URL 的 hash 来模拟一个完整的 URL，于是当 URL 改变时，页面不会重新加载。** hash（#）是URL 的锚点，代表的是网页中的一个位置，单单改变#后的部分，浏览器只会滚动到相应位置，不会重新加载网页，也就是说 #是用来指导浏览器动作的，对服务器端完全无用，HTTP请求中也不会不包括#；同时每一次改变#后的部分，都会在浏览器的访问历史中增加一个记录，使用”后退”按钮，就可以回到上一个位置；所以说**Hash模式通过锚点值的改变，根据不同的值，渲染指定DOM位置的不同数据**

vue Router的跳转问题，就是如果引入了vue-router，例如给一个这样的链接https:www.app/index.html，但是真正在浏览器中输入后执行的时候就变成了 https:www.app/index.html#/

引入了vue-router，引入vue-router后，再点开链接的时候，会自动加上#/，因为vue-router是根据锚点来进行定位的,也就是根据hash值来跳转的（单页面应用）。只要程序中引入了vue-router，跳转的时候会自动加上#/的

#### 2、History模式：

由于hash模式会在url中自带#，如果不想要很丑的 hash，我们可以用路由的 history 模式，只需要在配置路由规则时，加入"mode: 'history'",这种模式充分利用 history.pushState API 来完成 URL 跳转而无须重新加载页面。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;main.js文件中</span><br><span class="line">const router &#x3D; new VueRouter(&#123;</span><br><span class="line">  mode: &#39;history&#39;,</span><br><span class="line">  routes: [...]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

当你使用 history 模式时，URL 就像正常的 url，例如 http://yoursite.com/user/id，比较好看！
不过这种模式要玩好，还需要后台配置支持。因为我们的应用是个单页客户端应用，如果后台没有正确的配置，当用户在浏览器直接访问 http://oursite.com/user/id 就会返回 404，这就不好看了。
所以呢，**你要在服务端增加一个覆盖所有情况的候选资源：如果 URL 匹配不到任何静态资源，则应该返回同一个 index.html 页面，这个页面就是你 app 依赖的页面。**

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export const routes &#x3D; [ </span><br><span class="line"> &#123;path: &quot;&#x2F;&quot;, name: &quot;homeLink&quot;, component:Home&#125;</span><br><span class="line"> &#123;path: &quot;&#x2F;register&quot;, name: &quot;registerLink&quot;, component: Register&#125;,</span><br><span class="line"> &#123;path: &quot;&#x2F;login&quot;, name: &quot;loginLink&quot;, component: Login&#125;,</span><br><span class="line"> &#123;path: &quot;*&quot;, redirect: &quot;&#x2F;&quot;&#125;]</span><br></pre></td></tr></table></figure>

此处就设置如果URL输入错误或者是URL 匹配不到任何静态资源，就自动跳到到Home页面

#### 3、使用路由模块来实现页面跳转的方式

方式1：直接修改地址栏

方式2：this.$router.push(‘路由地址’)

方式3：`<router-link to="路由地址"></router-link>`










一、验证用户身份

大部分项目，除了登录页、重置密码页、用户协议页以外，页面都需要验证用户身份进行访问。使用 Vue Router 可以配合后端进行双重验证

给需要验证的路由对象添加 meta 字段，里面自定义一个代表验证的字段

（登录）验证身份方法：

1、给需要验证的路由对象添加 meta 字段，里面自定义一个代表验证的字段：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">const router &#x3D; new VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: &#39;&#x2F;foo&#39;,</span><br><span class="line">	  name:&#39;foo&#39;,</span><br><span class="line">      component: Foo,</span><br><span class="line">      children: [</span><br><span class="line">        &#123;</span><br><span class="line">          path: &#39;bar&#39;,</span><br><span class="line">          component: Bar,</span><br><span class="line">          meta: &#123; </span><br><span class="line">              requiresAuth: true &#x2F;&#x2F; 添加该字段，表示进入这个路由是需要登录的</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

2、在全局导航钩子里验证 requiresAuth 字段：

注意事项：

- 使用 beforeEach 在路由变化前验证。验证原理是在跳转前，访问目标路由对象的 requiresAuth 字段判断是否需要验证用户身份，如为是，检测是否有保存用户信息（即用户登录成功后前端保存的信息，例如 token）
- 每个路由都有一个 $route.matched 数组，包含当前路由的父级路由对象和当前路由对象，在组件中可以通过 this.$route.matched 访问
- beforeEach 的 to 参数即目标路由对象 $route，to.matched 即是它的路由数组
- 因此，使用 some 方法，只要路由数组里的任意路由对象需要验证身份，即进行验证
- 验证成功跳转正确页面；失败则跳到登录页，将目标地址附在 url 的 query 里，登录成功就跳转到目标地址

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach((to, from, next) &#x3D;&gt; &#123;</span><br><span class="line">  if (to.matched.some(record &#x3D;&gt; record.meta.requiresAuth)) &#123;</span><br><span class="line">    if (!auth.loggedIn()) &#123;  &#x2F;&#x2F; 没登录</span><br><span class="line">      next(&#123;</span><br><span class="line">        path: &#39;&#x2F;login&#39;,</span><br><span class="line">        query: &#123; redirect: to.fullPath &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      next()  &#x2F;&#x2F; 确保一定要调用 next()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    next() &#x2F;&#x2F; 确保一定要调用 next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

3、拦截 http 请求，验证用户身份

为了防止本地保存的 token 过期，需要拦截 http 请求，为每次请求头加上 token ，然后拦截 http 响应，根据响应内容判断是否需要跳回登录页面重新登录。使用 axios 的方法如下：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; http request 拦截器</span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">    config &#x3D;&gt; &#123;</span><br><span class="line">        if (auth.loggedIn()) &#123; &#x2F;&#x2F; 判断是否存在token，如果存在的话，则每个http header都加上token</span><br><span class="line">            config.headers.Authorization &#x3D; &#96;token $&#123;auth.loggedIn()&#125;&#96;;</span><br><span class="line">        &#125;</span><br><span class="line">        return config;</span><br><span class="line">    &#125;,</span><br><span class="line">    err &#x3D;&gt; &#123;</span><br><span class="line">        return Promise.reject(err);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; http response 拦截器</span><br><span class="line"></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">    response &#x3D;&gt; &#123;</span><br><span class="line">        return response;</span><br><span class="line">    &#125;,</span><br><span class="line">    error &#x3D;&gt; &#123;</span><br><span class="line">        if (error.response) &#123;</span><br><span class="line">            switch (error.response.status) &#123;</span><br><span class="line">                case 401:</span><br><span class="line">                    &#x2F;&#x2F; Unauthorized</span><br><span class="line">                    &#x2F;&#x2F; 返回 401 清除token信息并跳转到登录页面</span><br><span class="line">                    auth.clear();</span><br><span class="line">                    router.replace(&#123;</span><br><span class="line">                        path: &#39;login&#39;,</span><br><span class="line">                        query: &#123;</span><br><span class="line">                            redirect: router.currentRoute.fullPath</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return Promise.reject(error.response.data) &#x2F;&#x2F; 返回接口返回的错误信息</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

二、定义用户权限能访问的页面

前端查看权限，也是配合后端进行某些页面的隐藏显示功能。一般应用于综合的办公系统，由 IT 部分配账号，不同部门的人只能看到自己负责的内容，例如行政部不会看到财务数据页面。

实现方法：

1. 与后端商定每个用户角色对应的 level 级别，以数值表示
2. 前端路由每个页面的 meta 对象添加 level 字段，值为数组，里面是有权限访问页面的 level 数值
3. 登录成功，后台返回用户 token 的同时，返回其所属的 level 字段
4. 组件代码比较目标页面的 level 与用户 level，只显示包含在目标 level 数组里的页面
5. 全局导航钩子 beforeEach 里比较目标页面的 level 与用户 level，包含在目标 level 数组里则正确跳转，反之取消跳转并提示权限不足

> 上面第5步是为了防止用户直接在浏览器输入目标地址

三、其他内容控制

可以控制显示路由固定的搭配，例如某个路由地址的 title 是固定的字符串、固定的欢迎语、固定的 favicon 等。在组件里通过 this.$route.meta.xxx 访问。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const router &#x3D; new VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: &#39;&#x2F;foo&#39;,</span><br><span class="line">      component: Foo,</span><br><span class="line">      children: [</span><br><span class="line">        &#123;</span><br><span class="line">          path: &#39;bar&#39;,</span><br><span class="line">          component: Bar,</span><br><span class="line">          meta: &#123; </span><br><span class="line">              title: &#39;标题&#39;,</span><br><span class="line">              message: &#39;欢迎您&#39;,</span><br><span class="line">              requiresAuth: true &#x2F;&#x2F; 添加该字段，表示进入这个路由是需要登录的</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



动态路由匹配是用于把某种模式匹配到的所有路由，全都映射到同个组件。通过给路由路径一个变量，即变成动态路由，把变化的内容赋值给变量即可。

例如文章详情页是一个组件，只有一个路由，从文章列表页点进来，变化的只是文章 id 而已。将其赋予给设定的变量，然后通过在组件里 watch $route 或者使用 beforeRouteUpdate 导航守卫监测路由变化，传递新的文章 id 获取文章详情即可。在组件里，可以通过`this.$route.params.xx`获取当前文章 id。

一个路由地址可以设置多个变量，适合有分叉情况的内容。例如 path: '/params/:foo/:bar'

> 从文章列表页点进来即传递路由变量，有三种方法：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">（1）&lt;router-link to&#x3D;&quot;&#x2F;params&#x2F;list&#x2F;1&quot;&gt;跳转到 &#x2F;params&#x2F;list&#x2F;1&lt;&#x2F;router-link&gt;&#96;</span><br><span class="line">（2）this.$router.push(&#123; name: &#39;articles&#39;, params: &#123; foo: &#39;list&#39;, bar: 1 &#125; &#125;)&#96;</span><br><span class="line">（3）this.$router.push(&#123; path: &#39;&#x2F;params&#x2F;list&#x2F;1&#39; &#125;) &#x2F;&#x2F; path 不能与 params 同时使用</span><br></pre></td></tr></table></figure>



高级匹配模式

这里主要研究的是动态路由匹配的高级匹配模式，以达到合并差异不大的路由、减少路由数量的目的。

高级匹配即结合简单的正则匹配方法，给予路由更多的限制和操作空间。

1、可选路由参数

路由参数可选，添加与否都对应同一个组件。可以在组件里使用 v-if / v-show 结合 $route.params.xx 展现不同的内容

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; a param can be made optional by adding &quot;?&quot;</span><br><span class="line">&#123; path: &#39;&#x2F;optional-params&#x2F;:foo?&#39; &#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 这两个链接都对应同个组件</span><br><span class="line">&lt;li&gt;&lt;router-link to&#x3D;&quot;&#x2F;optional-params&quot;&gt;&#x2F;optional-params&lt;&#x2F;router-link&gt;&lt;&#x2F;li&gt;</span><br><span class="line">&lt;li&gt;&lt;router-link to&#x3D;&quot;&#x2F;optional-params&#x2F;foo&quot;&gt;&#x2F;optional-params&#x2F;foo&lt;&#x2F;router-link&gt;&lt;&#x2F;li&gt;</span><br></pre></td></tr></table></figure>

2、精确匹配参数

只有参数通过正则匹配，完全符合格式，才能会跳转。例如只有参数是数字/手机号才允许跳转。适用于对第三方不规范格式的数据进行筛选。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; a param can be followed by a regex pattern in parens</span><br><span class="line">&#x2F;&#x2F; this route will only be matched if :id is all numbers</span><br><span class="line">&#123; path: &#39;&#x2F;params-with-regex&#x2F;:id(\\d+)&#39; &#125;</span><br><span class="line">&#x2F;&#x2F; 只匹配数字</span><br><span class="line">&lt;li&gt;&lt;router-link to&#x3D;&quot;&#x2F;params-with-regex&#x2F;123&quot;&gt;&#x2F;params-with-regex&#x2F;123&lt;&#x2F;router-link&gt;&lt;&#x2F;li&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 只匹配手机号</span><br><span class="line">&#123; path: &#39;&#x2F;params-with-regex&#x2F;:id(^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]&#123;8&#125;$)&#39; &#125;</span><br><span class="line">&lt;li&gt;&lt;router-link to&#x3D;&quot;&#x2F;params-with-regex&#x2F;13800138000&quot;&gt;&#x2F;params-with-regex&#x2F;13800138000&lt;&#x2F;router-link&gt;&lt;&#x2F;li&gt;</span><br></pre></td></tr></table></figure>

3、匹配任意参数

不对参数格式、数量进行限制，任意参数都可。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; asterisk can match anything</span><br><span class="line">&#123; path: &#39;&#x2F;asterisk&#x2F;*&#39; &#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 这两个都是同一组件</span><br><span class="line">&lt;li&gt;&lt;router-link to&#x3D;&quot;&#x2F;asterisk&#x2F;foo&quot;&gt;&#x2F;asterisk&#x2F;foo&lt;&#x2F;router-link&gt;&lt;&#x2F;li&gt;</span><br><span class="line">&lt;li&gt;&lt;router-link to&#x3D;&quot;&#x2F;asterisk&#x2F;foo&#x2F;bar&quot;&gt;&#x2F;asterisk&#x2F;foo&#x2F;bar&lt;&#x2F;router-link&gt;&lt;&#x2F;li&gt;</span><br></pre></td></tr></table></figure>

4、部分可选参数

结合可选路由参数与多路由参数，其中一部分参数可选。适用于分叉情况下不确定参数数量的情况。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; make part of the path optional by wrapping with parens and add &quot;?&quot;</span><br><span class="line">&#123; path: &#39;&#x2F;optional-group&#x2F;(foo&#x2F;)?bar&#39; &#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 这两个都是同一组件</span><br><span class="line">&lt;li&gt;&lt;router-link to&#x3D;&quot;&#x2F;optional-group&#x2F;bar&quot;&gt;&#x2F;optional-group&#x2F;bar&lt;&#x2F;router-link&gt;&lt;&#x2F;li&gt;</span><br><span class="line">&lt;li&gt;&lt;router-link to&#x3D;&quot;&#x2F;optional-group&#x2F;foo&#x2F;bar&quot;&gt;&#x2F;optional-group&#x2F;foo&#x2F;bar&lt;&#x2F;router-link&gt;&lt;&#x2F;li&gt;</span><br></pre></td></tr></table></figure>





### 路由的跳转

1、router-link （声明式路由）

 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1. 不带参数</span><br><span class="line">   <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;home&#x27;&#125;&quot;</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;path:&#x27;/home&#x27;&#125;&quot;</span>&gt;</span> //name,path都行, 建议用name  </span><br><span class="line">   // 注意：router-link中链接如果是&#x27;/&#x27;开始就是从根路由开始，如果开始不带&#x27;/&#x27;，则从当前路由开始。</span><br><span class="line"></span><br><span class="line">2.带参数</span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;home&#x27;, params: &#123;id:1&#125;&#125;&quot;</span>&gt;</span>  </span><br><span class="line">// params传参数 (类似post)</span><br><span class="line">// 路由配置 path: &quot;/home/:id&quot; 或者 path: &quot;/home:id&quot; </span><br><span class="line">// 不配置path ,第一次可请求,刷新页面id会消失</span><br><span class="line">// 配置path,刷新页面id会保留</span><br><span class="line"></span><br><span class="line">// html 取参  $route.params.id</span><br><span class="line">// script 取参  this.$route.params.id</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name:&#x27;home&#x27;, query: &#123;id:1&#125;&#125;&quot;</span>&gt;</span> </span><br></pre></td></tr></table></figure>

  

   2、router.push(编程式路由)

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 字符串</span><br><span class="line">router.push(&#39;home&#39;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 对象</span><br><span class="line">router.push(&#123; path: &#39;home&#39; &#125;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 命名的路由</span><br><span class="line">router.push(&#123; name: &#39;user&#39;, params: &#123; userId: &#39;123&#39; &#125;&#125;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 带查询参数，变成 &#x2F;register?plan&#x3D;private</span><br><span class="line">router.push(&#123; path: &#39;register&#39;, query: &#123; plan: &#39;private&#39; &#125;&#125;)</span><br></pre></td></tr></table></figure>

注意：如果提供了 path，params 会被忽略，上述例子中的 query 并不属于这种情况。取而代之的是下面例子的做法，你需要提供路由的 name 或手写完整的带有参数的 path：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const userId &#x3D; &#39;123&#39;</span><br><span class="line">router.push(&#123; name: &#39;user&#39;, params: &#123; userId &#125;&#125;) &#x2F;&#x2F; -&gt; &#x2F;user&#x2F;123</span><br><span class="line">router.push(&#123; path: &#96;&#x2F;user&#x2F;$&#123;userId&#125;&#96; &#125;) &#x2F;&#x2F; -&gt; &#x2F;user&#x2F;123</span><br><span class="line">&#x2F;&#x2F; 这里的 params 不生效</span><br><span class="line">router.push(&#123; path: &#39;&#x2F;user&#39;, params: &#123; userId &#125;&#125;) &#x2F;&#x2F; -&gt; &#x2F;user</span><br></pre></td></tr></table></figure>

3、this.$router.push() (函数里面调用)

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">1.  不带参数</span><br><span class="line"></span><br><span class="line">this.$router.push(&#39;&#x2F;home&#39;)</span><br><span class="line">this.$router.push(&#123;name:&#39;home&#39;&#125;)</span><br><span class="line">this.$router.push(&#123;path:&#39;&#x2F;home&#39;&#125;)</span><br><span class="line"></span><br><span class="line">2. query传参 </span><br><span class="line"></span><br><span class="line">this.$router.push(&#123;name:&#39;home&#39;,query: &#123;id:&#39;1&#39;&#125;&#125;)</span><br><span class="line">this.$router.push(&#123;path:&#39;&#x2F;home&#39;,query: &#123;id:&#39;1&#39;&#125;&#125;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; html 取参  $route.query.id</span><br><span class="line">&#x2F;&#x2F; script 取参  this.$route.query.id</span><br><span class="line"></span><br><span class="line">3. params传参</span><br><span class="line"></span><br><span class="line">this.$router.push(&#123;name:&#39;home&#39;,params: &#123;id:&#39;1&#39;&#125;&#125;)  &#x2F;&#x2F; 只能用 name</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 路由配置 path: &quot;&#x2F;home&#x2F;:id&quot; 或者 path: &quot;&#x2F;home:id&quot; ,</span><br><span class="line">&#x2F;&#x2F; 不配置path ,第一次可请求,刷新页面id会消失</span><br><span class="line">&#x2F;&#x2F; 配置path,刷新页面id会保留</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; html 取参  $route.params.id</span><br><span class="line">&#x2F;&#x2F; script 取参  this.$route.params.id</span><br><span class="line"></span><br><span class="line">4. query和params区别</span><br><span class="line">   query类似 get, 跳转之后页面 url后面会拼接参数,类似?id&#x3D;1, 非重要性的可以这样传, 密码之类还是用params刷新页面id还在</span><br><span class="line"></span><br><span class="line">params类似 post, 跳转之后页面 url后面不会拼接参数 , 但是刷新页面id 会消失</span><br></pre></td></tr></table></figure>

   

4. this.$router.replace() (用法同上,push)

5. this.$router.go(n) ()


  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">this.$router.go(n)</span><br><span class="line">   向前或者向后跳转n个页面，n可为正整数或负整数</span><br></pre></td></tr></table></figure>

  

  ps : 区别

  this.$router.push
  跳转到指定url路径，并想history栈中添加一个记录，点击后退会返回到上一个页面
  this.$router.replace
  跳转到指定url路径，但是history栈中不会有记录，点击返回会跳转到上上个页面 (就是直接替换了当前页面)

  this.$router.go(n)
  向前或者向后跳转n个页面，n可为正整数或负整数

  

注意：获取路由上面的参数，用的是$route，后面没有r
params是路由的一部分,必须要有。query是拼接在url后面的参数，没有也没关系。
params一旦设置在路由，params就是路由的一部分，如果这个路由有params传参，但是在跳转的时候没有传这个参数，会导致跳转失败或者页面会没有内容。
params、query不设置也可以传参，但是params不设置的时候，刷新页面或者返回参数会丢失，

两者都可以传递参数，区别是什么？
query 传参配置的是path，而params传参配置的是name，在params中配置path无效
query在路由配置不需要设置参数，而params必须设置
query传递的参数会显示在地址栏中
params传参刷新会无效，但是query会保存传递过来的值，刷新不变



**Vue router的query对象里的值的问题**

在使用 $router.push() 时，如果使用了query，则可以在跳转后从query中获取到对应的参数。如果传的是字符串自然没问题，但是如果传的其他类型的数据，在跳转之后是正常的，而跳转之后再刷新一遍页面的话，query里面的属性的值都会变成字符串。例如：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$router.push(&#123; name:&#39;product&#39;, query: &#123;canSee: false&#125; &#125;);</span><br></pre></td></tr></table></figure>

　　最初跳转之后，this.$route.query.canSee打印的值是Boolean类型的。然后刷新一下，值就变成了String类型了。个人猜测是因为刷新后query的值是直接从页面URL中取的，而在页面URL上的参数的类型只能是字符串类型。

**解决方法**：

　　1. 在传值之前把要传的参数单独放到一个对象里，在放到query里面，然后进行JSON.stringify()处理，到了目标页面后再进行JSON.parse()处理，还原对象。这种方法的好处是可以一次性处理多个参数，而且适用度高，建议使用这种方法。

　　2. 传值前不做处理，到了目标页面后再单独对原本为非字符串的数据进行JSON.parse()处理。缺点是字符串类型的数据不能如此处理，要确保该数据不是字符串类型的。局限性大，不推荐适用。



### vue项目中跳转到外部链接方法

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;goPage(&#x27;http://www.chao99.top&#x27;)&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    goPage (url) &#123;</span><br><span class="line">            window.location.href = url</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

如果用.push的路由跳转，会在路径外面再加一个基本的url导致出错，例如本地项目：会在外部链接前面加上了http://localhost:8080/#/

一定要注意, 外部链接要加上 http:// , 不然跳转还是当前域名下



## VUE的图片路径

一般都是通过相对路径取到图片然后加载

官方文档没有存放静态的asset 文件了 ,静态现在存放在public 的里面. 但是在public里面去创建一个img 的文件,去放置图片,依然不可以. 

所以 三种办法里面 只有require 使用vuecli3 ,

1、在模板中直接引入图片资源（这种一般是@ 或者./ 去引入）

2、将图片资源放在static文件夹下

3、图片资源在assets文件夹下，data中必须用require加载，否则会当成字符串来处理
(我自己目前就是放在assets 里面. 因为是本地上传的 在做假数据的时候准备做一个预览,或者说以后的默认图片就是它了)
第二种，只要给图片放在static文件夹下即可：原因如下

这里在使用vuecli脚手脚构建工具，目录下会生成一个static目录，表示的是静态目录，推荐大家将img 存放在这个目录下，那么在webpack编译以后，依旧是可以获取到这个目录下的路径，这样就解决了路径不符而导致图片加载不出来的问题！当然项目中用的一般都是绝对路径，少数图片的话，这种方式挺好
但是 重点: vuecli3 没有static 啊!!!



# VUE的模板语法

Vue 使用了基于 HTML 的模板语法，允许开发者声明式地将 DOM 绑定至底层 Vue 实例的数据。

Vue 的核心是一个允许你采用简洁的模板语法来声明式的将数据渲染进 DOM 的系统。

结合响应系统，在应用状态改变时， Vue 能够智能地计算出重新渲染组件的最小代价并应用到 DOM 操作上



### 插值

#### 文本

数据绑定最常见的形式就是使用 `{ {...} }`（双大括号）的文本插值：

##### 文本插值

`<div id="app">   <p></p> </div>`

`{ {...} }` 标签的内容将会被替代为对应组件实例中 **message** 属性的值，如果 **message** 属性的值发生了改变，`{ {...} }` 标签内容也会更新。

如果不想改变标签的内容，可以通过使用 **v-once** 指令执行一次性地插值，当数据改变时，插值处的内容不会更新。

`<span v-once>这个将不会改变: { { message } }</span>`

##### Html

使用 v-html 指令用于输出 html 代码：

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">v-html 指令</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>使用双大括号的文本插值: &#123;&#123; rawHtml &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>使用 v-html 指令: <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-html</span>=<span class="string">&quot;rawHtml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> RenderHtmlApp = &#123;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">      rawHtml: &#x27;<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span>这里会显示红色！<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#x27;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="javascript">Vue.createApp(RenderHtmlApp).mount(<span class="string">&#x27;#example1&#x27;</span>)</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

##### 属性

HTML 属性中的值应使用 v-bind 指令。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:id&#x3D;&quot;dynamicId&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

对于布尔属性，常规值为 true 或 false，如果属性值为 null 或 undefined，则该属性不会显示出来。

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button v-bind:disabled&#x3D;&quot;isButtonDisabled&quot;&gt;按钮&lt;&#x2F;button&gt;</span><br></pre></td></tr></table></figure>

以上代码中如果 isButtonDisabled 的值是 null 或 undefined，则 disabled 属性甚至不会被包含在渲染出来的 `<button> `元素中。

以下实例判断 use 的值，如果为 true 使用 class1 类的样式，否则不使用该类：

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">v-bind 指令</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;r1&quot;</span>&gt;</span>修改颜色<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;use&quot;</span> <span class="attr">id</span>=<span class="string">&quot;r1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;&#123;&#x27;class1&#x27;: use&#125;&quot;</span>&gt;</span></span><br><span class="line">    v-bind:class 指令</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> app = &#123;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      use: <span class="literal">false</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="javascript">Vue.createApp(app).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

##### 表达式

Vue.js 都提供了完全的 JavaScript 表达式支持。

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">JavaScript 表达式</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;5+5&#125;&#125;<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    &#123;&#123; ok ? &#x27;YES&#x27; : &#x27;NO&#x27; &#125;&#125;<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    &#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:id</span>=<span class="string">&quot;&#x27;list-&#x27; + id&quot;</span>&gt;</span>菜鸟教程<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> HelloVueApp = &#123;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      ok: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">      message: <span class="string">&#x27;RUNOOB!!&#x27;</span>,</span></span><br><span class="line">      id: 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="javascript">Vue.createApp(HelloVueApp).mount(<span class="string">&#x27;#hello-vue&#x27;</span>)</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

表达式会在当前活动实例的数据作用域下作为 JavaScript 被解析。有个限制就是，每个绑定都只能包含单个表达式，所以下面的例子都不会生效:

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--  这是语句，不是表达式：--&gt;</span><br><span class="line">&#123;&#123; var a &#x3D; 1 &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- 流控制也不会生效，请使用三元表达式 --&gt;</span><br><span class="line">&#123;&#123; if (ok) &#123; return message &#125; &#125;&#125;</span><br></pre></td></tr></table></figure>

### 指令

指令是带有 v- 前缀的特殊属性。

指令用于在表达式的值改变时，将某些行为应用到 DOM 上。如下例子：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">    &lt;p v-if&#x3D;&quot;seen&quot;&gt;现在你看到我了&lt;&#x2F;p&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script&gt;</span><br><span class="line">const app &#x3D; &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      seen: true  &#x2F;* 改为false，信息就无法显示 *&#x2F;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">Vue.createApp(app).mount(&#39;#app&#39;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

这里， v-if 指令将根据表达式 seen 的值( true 或 false )来决定是否插入 p 元素。

另外还有其它很多指令，每个都有特殊的功能。例如，v-for 指令可以绑定数组的数据来渲染一个项目列表：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">  &lt;ol&gt;</span><br><span class="line">    &lt;li v-for&#x3D;&quot;site in sites&quot;&gt;</span><br><span class="line">      &#123;&#123; site.text &#125;&#125;</span><br><span class="line">    &lt;&#x2F;li&gt;</span><br><span class="line">  &lt;&#x2F;ol&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">const app &#x3D; &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      sites: [</span><br><span class="line">        &#123; text: &#39;Google&#39; &#125;,</span><br><span class="line">        &#123; text: &#39;Runoob&#39; &#125;,</span><br><span class="line">        &#123; text: &#39;Taobao&#39; &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Vue.createApp(app).mount(&#39;#app&#39;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

##### 参数

参数在指令后以冒号指明。例如， v-bind 指令被用来响应地更新 HTML 属性：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">    &lt;p&gt;&lt;a v-bind:href&#x3D;&quot;url&quot;&gt;菜鸟教程&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script&gt;</span><br><span class="line">const HelloVueApp &#x3D; &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      url: &#39;https:&#x2F;&#x2F;www.runoob.com&#39;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">Vue.createApp(HelloVueApp).mount(&#39;#app&#39;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

在这里 href 是参数，告知 v-bind 指令将该元素的 href 属性与表达式 url 的值绑定。

另一个例子是 v-on 指令，它用于监听 DOM 事件：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 完整语法 --&gt;</span><br><span class="line">&lt;a v-on:click&#x3D;&quot;doSomething&quot;&gt; ... &lt;&#x2F;a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 缩写 --&gt;</span><br><span class="line">&lt;a @click&#x3D;&quot;doSomething&quot;&gt; ... &lt;&#x2F;a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 动态参数的缩写 (2.6.0+) --&gt;</span><br><span class="line">&lt;a @[event]&#x3D;&quot;doSomething&quot;&gt; ... &lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>

在这里参数是监听的事件名。

##### 修饰符

修饰符是以半角句号 **.** 指明的特殊后缀，用于指出一个指令应该以特殊方式绑定。例如，**.prevent** 修饰符告诉 **v-on** 指令对于触发的事件调用 **event.preventDefault()**：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;form v-on:submit.prevent&#x3D;&quot;onSubmit&quot;&gt;&lt;&#x2F;form&gt;</span><br></pre></td></tr></table></figure>

### 用户输入

在 input 输入框中我们可以使用 v-model 指令来实现双向数据绑定：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">双向数据绑定</span><br><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;input v-model&#x3D;&quot;message&quot;&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script&gt;</span><br><span class="line">const app &#x3D; &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &#39;Runoob!&#39;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">Vue.createApp(app).mount(&#39;#app&#39;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

**v-model** 指令用来在 input、select、textarea、checkbox、radio 等表单控件元素上创建双向数据绑定，根据表单上的值，自动更新绑定的元素的值。

按钮的事件我们可以使用 v-on 监听事件，并对用户的输入进行响应。

以下实例在用户点击按钮后对字符串进行反转操作：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">字符串反转</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Vue 测试实例 - 菜鸟教程(runoob.com)&lt;&#x2F;title&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;vue@next&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">    &lt;button v-on:click&#x3D;&quot;reverseMessage&quot;&gt;反转字符串&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script&gt;</span><br><span class="line">const app &#x3D; &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &#39;Runoob!&#39;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    reverseMessage() &#123;</span><br><span class="line">      this.message &#x3D; this.message</span><br><span class="line">        .split(&#39;&#39;)</span><br><span class="line">        .reverse()</span><br><span class="line">        .join(&#39;&#39;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">Vue.createApp(app).mount(&#39;#app&#39;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

### 缩写

#### v-bind 缩写

Vue.js 为两个最为常用的指令提供了特别的缩写：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 完整语法 --&gt;</span><br><span class="line">&lt;a v-bind:href&#x3D;&quot;url&quot;&gt;&lt;&#x2F;a&gt;</span><br><span class="line">&lt;!-- 缩写 --&gt;</span><br><span class="line">&lt;a :href&#x3D;&quot;url&quot;&gt;&lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>

#### v-on 缩写

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 完整语法 --&gt;</span><br><span class="line">&lt;a v-on:click&#x3D;&quot;doSomething&quot;&gt;&lt;&#x2F;a&gt;</span><br><span class="line">&lt;!-- 缩写 --&gt;</span><br><span class="line">&lt;a @click&#x3D;&quot;doSomething&quot;&gt;&lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>

# VUE的条件语句



# VUE的循环语句



# VUE的组件



# VUE的计算属性



# VUE的监听属性



# VUE的样式绑定



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;vue根据绑定值判断应用具体的哪个css样式</span><br><span class="line">&lt;div :class&#x3D;&quot;from?&#39;loginShop&#39;:&#39;loginOperating&#39;&quot;&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>



# VUE的事件处理

### VUE的方法

方法名: async function () {}

async 方法名() {}



# VUE中用到的一些关键字

### let、var和const

ECMAScript是一个国际通过的标准化脚本语言。JavaScript由ECMAScript和DOM、BOM三者组成。可以简单理解为：ECMAScript是JavaScript的语言规范，JavaScript是ECMAScript的实现和扩展。

1. var定义的变量，没有块的概念，可以跨块访问, 不能跨函数访问。可以修改，如果不初始化会输出undefined，不会报错
2. let定义的变量，只能在块作用域里访问，不能跨块访问，也不能跨函数访问。不可在声明之前调用，必须先定义再使用，否则会报错。不能定义同名变量。
3. const用来定义常量，使用时必须初始化(即必须赋值)，只能在块作用域里访问，而且不能修改。const仅保证指针不发生改变，修改对象的属性不会改变对象的指针，所以是被允许的。也就是说const定义的引用类型只要指针不发生改变，其他的不论如何改变都是允许的。

**let和const属于局部变量，不会出现变量提升的情况，全局定义的let和const变量，不属于顶层变量，不属于window的属性**。let和const不允许重复声明，let和const不会绑定全局作用域

变量提升：可以在变量定义前使用定义过的变量。

暂时性死区（TDZ）：在运行流程进入作用域创建变量，到变量可以被访问之间的这一段时间，就称之为暂时死区。常见于：let、const、import、class、typeof等

**let和const定义的变量都会被提升，但是不会被初始化，不能被引用**



### fullPath和path

- $route.fullPath

  - type: `string`
    The full resolved URL including query and hash.

- $route.path

  - type: `string`
    A string that equals the path of the current route, always resolved as an absolute path. e.g. “/foo/bar”.

fullPath能缓存路由跳转后面携带的参数，刷新后依旧存在， 在PC端能起作用

而 path则不能缓存路由跳转后面携带的参数，所以path  能在`只有两层数据结构的`移动端起作用
   原因：

一般，移动端App 只能往里面走，表面和切换的页面是第一层， 点击功能按钮进去的是第二层。
这种层级的关系其实 是具有跳转作用，所以在第一层获取的数据，与第二层来回切换没问题。但是你第二层到第三层一来回切换，路由跳转携带的参数就丢失了。

fullPath匹配路由，path匹配路径。

例如：

路由是：`/path/one`
真正路径是：`/path/true`

那么此时path为`/path/true`，而fullPath为`/path/one`



### this和that

在Vue中this始终指向Vue，但axios中this为undefined

![这里写图片描述](https://img-blog.csdn.net/20171102210352732?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzAzNzgyMjk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

若需要赋值给变量用以渲染数据，可以通过=>函数，这时this为Vue

![这里写图片描述](https://img-blog.csdn.net/20171102210527538?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzAzNzgyMjk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

或者可以直接通过： 
let that = this 
将this保存在that中，再在函数中使用that均可 



个人理解：一般情况下，this就是此vue的页面，可以调用此页面的函数。但是涉及到异步axios时，this没有指向了。需要（）=>{}，在{}里this才会指代vue。

如果不使用（）=>{}方法，可以进行双向绑定：let that = this  ，将this保存在that中，再在函数中使用that均就可以了



async和await分别表示异步和等待，语义更加明确



解决异步调用：从最早的回调函数，到 Promise 对象，再到 Generator 函数，再到async





### return

return不论是什么，都是直接返回，即使是语句或者函数也不会执行的！是函数就返回该函数！

下面从一个例子来加深对return用法的理解：

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getTable</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(‘xxxx’)</span><br><span class="line">      .then(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123; <span class="keyword">return</span> res.data.result.info &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

在axios和ajax中经常会用到return，从上面的代码可以看到有两个return，每个return的作用都需要理解：

第一个return后面跟的是axios配置，这个return就是将整个axios返回出来；

第二个return是在axios请求成功后将响应数据返回出来，即第二个return就是将axios异步请求的数据返回出来。



函数中有ajax和axios调用的有异步和同步，是异步的话里面如果有return，在函数外层（函数是指getTable()）调用的时候会取不到数据，除非换成同步。如果想异步取到数据，就需要在函数外层也加个return，相当于把ajax或者axios 整个配置返回出来，返回出来的数据格式是[object,promise]，所以函数执行获得的数据格式就是[object,promise]，然后使用.then()的形式将里面返回的数据拿出来!

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"> getTable().then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;<span class="built_in">this</span>.tableData = res&#125;) <span class="comment">//此出先调用getTable()拿到axios的数据，然后在.then()出来结果</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

此段代码的目的是将axios异步请求的结果返回出来，因为是异步所以不能直接在axios里return数据，所以需要在axios外层也加个return，这样就可以拿到了。









### set：this.$set

由于JavaScript的限制，Vue不能检测以下变动的数组,页面不会刷新：

1.当你利用索引值直接设置一个项时。`vm.items[indexOfItem]=newValue`

2.当你修改数组的长度时。`vm.items.length=newLength`

使用Vue.set、vm.$set()或者数组的splice方法。使数值改变后，页面进行刷新后的效果展示

注：$set()方法调用时，页面会全部更新一遍



# VUE定义全局变量

在项目中，经常会复用一些变量和函数，比如用户的登录token，用户信息等。这时需要将它们设为全局，全局变量和全局函数之间有一些相通之处。

## 定义全局变量

原理：使用模块（.js或.vue文件）来管理全局变量，最后使用`export`暴露出去 （最好导出的格式为对象，方便在其他地方调用），当其它地方需要使用时，用`import`导入该模块

1、使用全局变量专用模块，挂载到main.js文件上面

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">全局变量模块Global.vue定义如下：</span><br><span class="line"><span class="keyword">const</span> token=<span class="string">&#x27;12345678&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> userStatus=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    token, <span class="comment">// 用户token身份</span></span><br><span class="line">    userStatus <span class="comment">// 用户登录状态</span></span><br><span class="line">&#125;</span><br><span class="line">模块里的变量用<span class="keyword">export</span>暴露出去，当其它地方需要使用时，引入模块便可。</span><br><span class="line"></span><br><span class="line">使用全局变量：</span><br><span class="line"><span class="keyword">import</span> <span class="built_in">global</span> <span class="keyword">from</span> <span class="string">&#x27;../../components/Global&#x27;</span><span class="comment">//引用模块进来</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">         token:<span class="built_in">global</span>.token,<span class="comment">//将全局变量赋值到data里面</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

2、全局变量模块挂载到Vue.prototype上

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Global.vue文件同上，在项目入口的main.js里配置：</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="built_in">global</span> <span class="keyword">from</span> <span class="string">&#x27;../../components/Global&#x27;</span></span><br><span class="line">Vue.prototype.GLOBAL = <span class="built_in">global</span></span><br><span class="line">挂载之后，在需要引用全局变量的模块处，不需再导入全局变量模块，而是直接用<span class="built_in">this</span>就可以引用了，如下:</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">     token: <span class="built_in">this</span>.GLOBAL.token,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

方法一跟方法二的主要区别是，方法二全局只需要导入一次就可以，简单方便。

3、使用vuex定义全局变量

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Vuex是一个专为Vue.js应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态。因此可以存放着全局量。</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js文件里定义vuex</span></span><br><span class="line"><span class="keyword">import</span> state <span class="keyword">from</span> <span class="string">&#x27;./state&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  actions,</span><br><span class="line">  getters,</span><br><span class="line">  mutations,</span><br><span class="line">  state,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// state.js里面存放全局变量，并且暴露出去</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  token：<span class="string">&#x27;12345678&#x27;</span>,</span><br><span class="line">  language: <span class="string">&#x27;en&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> state</span><br><span class="line"></span><br><span class="line">使用的时候，在需要引用全局变量的模块处直接使用<span class="built_in">this</span>.$store调用</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">      <span class="function"><span class="title">getInternation</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.$store.state.language === <span class="string">&#x27;en&#x27;</span>) &#123;</span><br><span class="line">          <span class="built_in">this</span>.internation = <span class="number">2</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">this</span>.$store.state.language === <span class="string">&#x27;zh_CN&#x27;</span>) &#123;</span><br><span class="line">          <span class="built_in">this</span>.internation = <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

因为Vuex有点繁琐，有点杀鸡用牛刀的感觉。因此认为并没有必要使用它。

## 定义全局函数

原理：在main.js里面通过Vue.prototype将函数挂载到Vue实例上面，通过this.函数名，来运行函数。

1、在main.js文件直接定义方法

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">简单的函数可以直接写在main.js文件里定义。</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将方法挂载到vue原型上</span></span><br><span class="line">Vue.prototype.changeData = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(<span class="string">&#x27;执行成功&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">使用的时候组件里直接调用。</span><br><span class="line"></span><br><span class="line"><span class="comment">//直接通过this运行函数，这里this是vue实例对象</span></span><br><span class="line"><span class="built_in">this</span>.changeData();</span><br></pre></td></tr></table></figure>

2、使用全局函数专用模块，挂载到main.js上面

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">base.js文件，文件位置可以放在跟main.js同一级，方便引用（这点可以依据个人习惯决定）。</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.install = <span class="function"><span class="keyword">function</span> (<span class="params">Vue, options</span>) </span>&#123;</span><br><span class="line">    Vue.prototype.changeData = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">&#x27;执行成功&#x27;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">main.js引入并使用。</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> base <span class="keyword">from</span> <span class="string">&#x27;./base&#x27;</span></span><br><span class="line">Vue.use(base);</span><br><span class="line">所有的组件里就可以调用该函数。</span><br><span class="line"></span><br><span class="line"><span class="built_in">this</span>.changeData();</span><br></pre></td></tr></table></figure>



# VUE的生命周期

生命周期：

​    beforecreate : 一般使用场景是在加 loading事件 的时候
​    created ：处于loading结束后，还做一些初始化，实现函数自执行（data数据已经初始化，但是DOM结构渲染完成，组件没有加载）
​    beforemount：处于组件创建完成，但未开始执行操作
​    mounted (安装)：处于发起后端请求，获取数据，配合路由钩子执行操作（DOM渲染完成，组件挂载完成 ）
​    beforeupdate、updated：处于数据更新的前后
​    beforeDestroy：当前组件还在的时候，想删除组件
​    destroyed ：当前组件已被销毁，清空相关内容

![clipboard.png](8.6.VUE/aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2ltZy9iVjlSR1A_dz0xMjAwJmg9MzAzOQ)

created 与 mounted 的区别

created:在模板渲染成html前调用，即通常初始化某些属性值，然后再渲染成视图。
mounted:在模板渲染成html后调用，通常是初始化页面完成后，再对html的dom节点进行一些需要的操作。

mounted 与 methods 的区别

mounted 是生命周期方法之一，会在对应生命周期时执行。

methods 是Vue实例对象上绑定的方法，供当前Vue组件作用域内使用，未调用不会执行，只执行逻辑，返回值可有可无。

computed 与 watched 的区别

computed 是计算属性，也可以理解为一个方法。其中计算的结果如果不发生改变就不会触发，且必须返回一个值并在DOM中绑定的才能取得值。他可以自动获取数据的改变。

watched 属性是手动定义的所需监听的值，不同的数据可以在其中多次定义监听值，这时会消耗一定性能，他并不能像computed那样自动改变。



activated 生命周期在keep-alive 组件激活时调用（在挂载后和更新前被调用的）。被`<keep-alive>`包裹的组件其会被缓存

服务器端渲染期间不调用该生命周期

通常和deactivated周期一起使用

`<keep-alive>`包裹动态组件的时候，会缓存不活动的组件实例，而不是摧毁他们。其是一个抽象的组件，自身不会渲染一个DOM元素，也不会出现在父组件链中。

activated()函数就是一个页面激活后的钩子函数，一进入页面就触发；

所以当我们运用了组件缓存时，如果想每次切换都发送一次请求的话，需要把请求函数写在activated中，而写在created或mounted中其只会在首次加载该组件的时候起作用

按自己的话说：actived相当于是一个缓存，当为false的时候，相当于没有actived，不会起任何作用。当为true时，第一次加载时会执行created，mounted，actived函数，当之后再执行的时候，不会执行created，mounted，只会执行actived

keep-alive组件除了actived，还有deactived函数钩子：

actived是keep-alive组件激活时使用

deactived是keep-alive组件停用时调用

使用：

1.在router中设置需要缓存的组件

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">meta: &#123;</span><br><span class="line">        keepAlive : true </span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>

2.`<keep-alive>`包裹需要缓存组件

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--app.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">        &lt;!--需要缓存组件--&gt;</span><br><span class="line">        &lt;keep-alive&gt;</span><br><span class="line">            &lt;!--router-view组件是一个 functional 组件，渲染路径匹配到的视图组件--&gt;</span><br><span class="line">          &lt;router-view v-if&#x3D;&quot;$route.meta.keepAlive&quot;&gt;&lt;&#x2F;router-view&gt;</span><br><span class="line">        &lt;&#x2F;keep-alive&gt;</span><br><span class="line">        &lt;!--不需要缓存组件--&gt;</span><br><span class="line">        &lt;router-view v-if&#x3D;&quot;!$route.meta.keepAlive&quot;&gt;&lt;&#x2F;router-view&gt;</span><br><span class="line">        &lt;moduleFooter&gt;&lt;&#x2F;moduleFooter&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>

3.vue页面使用：第一次进入，钩子的触发顺序created-> mounted-> activated，退出时触发deactivated。当再次进入（前进或者后退）时，只触发activated
4.还可以动态控制是否缓存组件，代码如下：

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">beforeRouteLeave</span>(<span class="params">to, <span class="keyword">from</span>, next</span>)</span> &#123;</span><br><span class="line">  <span class="comment">// 设置下一个路由的 meta</span></span><br><span class="line">  to.meta.keepAlive = <span class="literal">false</span>; <span class="comment">// 不缓存，即刷新</span></span><br><span class="line">  next();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



# `==`和`===`的区别

1`==`'1';这个等式是成立的；
1`===`'1';这个等式是不成立的。
`==`只判断数值，`===`既判断数值，也判断类型。



# 对象的拷贝

Object.assign()对象的拷贝

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Object.assign() 方法用于将所有可枚举属性的值从一个或多个源对象复制到目标对象。它将返回目标对象。</span><br><span class="line">Object.assign(target, ...sources)    【target：目标对象】，【souce：源对象（可多个）】</span><br><span class="line">举个栗子：</span><br><span class="line">const object1 &#x3D; &#123;</span><br><span class="line">  a: 1,</span><br><span class="line">  b: 2,</span><br><span class="line">  c: 3</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const object2 &#x3D; Object.assign(&#123;c: 4, d: 5&#125;, object1);</span><br><span class="line"></span><br><span class="line">console.log(object2.c, object2.d);</span><br><span class="line">console.log(object1)  &#x2F;&#x2F; &#123; a: 1, b: 2, c: 3 &#125;</span><br><span class="line">console.log(object2)  &#x2F;&#x2F; &#123; c: 3, d: 5, a: 1, b: 2 &#125;</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line">1.如果目标对象中的属性具有相同的键，则属性将被源对象中的属性覆盖。后面的源对象的属性将类似地覆盖前面的源对象的属性</span><br><span class="line">2.Object.assign 方法只会拷贝源对象自身的并且可枚举的属性到目标对象。该方法使用源对象的[[Get]]和目标</span><br><span class="line">对象的[[Set]]，所以它会调用相关 getter 和 setter。因此，它分配属性，而不仅仅是复制或定义新的属性。如</span><br><span class="line">果合并源包含getter，这可能使其不适合将新属性合并到原型中。为了将属性定义（包括其可枚举性）复制到</span><br><span class="line">原型，应使用Object.getOwnPropertyDescriptor()和Object.defineProperty() 。</span><br></pre></td></tr></table></figure>

Object.assign()对象的深拷贝

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">针对深拷贝，需要使用其他办法，因为 Object.assign()拷贝的是属性值。假如源对象的属性值是一个对象的引用，那么它也只指向那个引用。</span><br><span class="line">let obj1 &#x3D; &#123; a: 0 , b: &#123; c: 0&#125;&#125;; </span><br><span class="line">let obj2 &#x3D; Object.assign(&#123;&#125;, obj1); </span><br><span class="line">console.log(JSON.stringify(obj2)); &#x2F;&#x2F; &#123; a: 0, b: &#123; c: 0&#125;&#125; </span><br><span class="line"></span><br><span class="line">obj1.a &#x3D; 1; </span><br><span class="line">console.log(JSON.stringify(obj1)); &#x2F;&#x2F; &#123; a: 1, b: &#123; c: 0&#125;&#125; </span><br><span class="line">console.log(JSON.stringify(obj2)); &#x2F;&#x2F; &#123; a: 0, b: &#123; c: 0&#125;&#125; </span><br><span class="line"></span><br><span class="line">obj2.a &#x3D; 2; </span><br><span class="line">console.log(JSON.stringify(obj1)); &#x2F;&#x2F; &#123; a: 1, b: &#123; c: 0&#125;&#125; </span><br><span class="line">console.log(JSON.stringify(obj2)); &#x2F;&#x2F; &#123; a: 2, b: &#123; c: 0&#125;&#125;</span><br><span class="line"> </span><br><span class="line">obj2.b.c &#x3D; 3; </span><br><span class="line">console.log(JSON.stringify(obj1)); &#x2F;&#x2F; &#123; a: 1, b: &#123; c: 3&#125;&#125; </span><br><span class="line">console.log(JSON.stringify(obj2)); &#x2F;&#x2F; &#123; a: 2, b: &#123; c: 3&#125;&#125; </span><br><span class="line">最后一次赋值的时候，b是值是对象的引用，只要修改任意一个，其他的也会受影响</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Deep Clone （深拷贝）</span><br><span class="line">obj1 &#x3D; &#123; a: 0 , b: &#123; c: 0&#125;&#125;; </span><br><span class="line">let obj3 &#x3D; JSON.parse(JSON.stringify(obj1)); </span><br><span class="line">obj1.a &#x3D; 4; </span><br><span class="line">obj1.b.c &#x3D; 4; </span><br><span class="line">console.log(JSON.stringify(obj3)); &#x2F;&#x2F; &#123; a: 0, b: &#123; c: 0&#125;&#125;</span><br></pre></td></tr></table></figure>

对象的合并

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const o1 &#x3D; &#123; a: 1 &#125;;</span><br><span class="line">const o2 &#x3D; &#123; b: 2 &#125;;</span><br><span class="line">const o3 &#x3D; &#123; c: 3 &#125;;</span><br><span class="line"></span><br><span class="line">const obj &#x3D; Object.assign(o1, o2, o3);</span><br><span class="line">console.log(obj); &#x2F;&#x2F; &#123; a: 1, b: 2, c: 3 &#125;</span><br><span class="line">console.log(o1);  &#x2F;&#x2F; &#123; a: 1, b: 2, c: 3 &#125;, 注意目标对象自身也会改变。</span><br><span class="line">其实就是对象的拷贝，o1就是目标对象，后面的是源对象，后面的属性等会拷贝到目标对象</span><br></pre></td></tr></table></figure>

合并具有相同属性的对象

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const o1 &#x3D; &#123; a: 1, b: 1, c: 1 &#125;;</span><br><span class="line">const o2 &#x3D; &#123; b: 2, c: 2 &#125;;</span><br><span class="line">const o3 &#x3D; &#123; c: 3 &#125;;</span><br><span class="line"></span><br><span class="line">const obj &#x3D; Object.assign(&#123;&#125;, o1, o2, o3);</span><br><span class="line">console.log(obj); &#x2F;&#x2F; &#123; a: 1, b: 2, c: 3 &#125;</span><br><span class="line">1.属性被后续参数中具有相同属性的其他对象覆盖。</span><br><span class="line">2.目标对象的属性与源对象的属性相同，源的会覆盖目标的属性</span><br></pre></td></tr></table></figure>

继承属性和不可枚举属性是不能拷贝

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const obj &#x3D; Object.create(&#123;foo: 1&#125;, &#123; &#x2F;&#x2F; foo 是个继承属性。</span><br><span class="line">    bar: &#123;</span><br><span class="line">        value: 2  &#x2F;&#x2F; bar 是个不可枚举属性。</span><br><span class="line">    &#125;,</span><br><span class="line">    baz: &#123;</span><br><span class="line">        value: 3,</span><br><span class="line">        enumerable: true  &#x2F;&#x2F; baz 是个自身可枚举属性。</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">创建对象时，如果没有设置enumerable的值，默认为false（不可枚举属性），设置为true，则为可枚举属性</span><br><span class="line">const copy &#x3D; Object.assign(&#123;&#125;, obj);</span><br><span class="line">console.log(copy); &#x2F;&#x2F; &#123; baz: 3 &#125;</span><br></pre></td></tr></table></figure>

原始类型会被包装为对象

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const v1 &#x3D; &quot;abc&quot;;</span><br><span class="line">const v2 &#x3D; true;</span><br><span class="line">const v3 &#x3D; 10;</span><br><span class="line">const v4 &#x3D; Symbol(&quot;foo&quot;)</span><br><span class="line"></span><br><span class="line">const obj &#x3D; Object.assign(&#123;&#125;, v1, null, v2, undefined, v3, v4); </span><br><span class="line">&#x2F;&#x2F; 原始类型会被包装，null 和 undefined 会被忽略。</span><br><span class="line">&#x2F;&#x2F; 注意，只有字符串的包装对象才可能有自身可枚举属性。</span><br><span class="line">console.log(obj); &#x2F;&#x2F; &#123; &quot;0&quot;: &quot;a&quot;, &quot;1&quot;: &quot;b&quot;, &quot;2&quot;: &quot;c&quot; &#125;</span><br></pre></td></tr></table></figure>

异常会打断后续拷贝任务

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const target &#x3D; Object.defineProperty(&#123;&#125;, &quot;foo&quot;, &#123;</span><br><span class="line">    value: 1,</span><br><span class="line">    writable: false</span><br><span class="line">&#125;); &#x2F;&#x2F; target 的 foo 属性是个只读属性。</span><br><span class="line"></span><br><span class="line">Object.assign(target, &#123;bar: 2&#125;, &#123;foo2: 3, foo: 3, foo3: 3&#125;, &#123;baz: 4&#125;);</span><br><span class="line">&#x2F;&#x2F; TypeError: &quot;foo&quot; is read-only</span><br><span class="line">&#x2F;&#x2F; 注意这个异常是在拷贝第二个源对象的第二个属性时发生的。</span><br><span class="line"></span><br><span class="line">console.log(target.bar);  &#x2F;&#x2F; 2，说明第一个源对象拷贝成功了。</span><br><span class="line">console.log(target.foo2); &#x2F;&#x2F; 3，说明第二个源对象的第一个属性也拷贝成功了。</span><br><span class="line">console.log(target.foo);  &#x2F;&#x2F; 1，只读属性不能被覆盖，所以第二个源对象的第二个属性拷贝失败了。</span><br><span class="line">console.log(target.foo3); &#x2F;&#x2F; undefined，异常之后 assign 方法就退出了，第三个属性是不会被拷贝到的。</span><br><span class="line">console.log(target.baz);  &#x2F;&#x2F; undefined，第三个源对象更是不会被拷贝到的。</span><br></pre></td></tr></table></figure>



# rules方法

用于前端校验数据，校验表单，可以用rules模块





# 关于VUE的data里的数据问题

Vue 不允许在已经创建的实例上动态添加新的根级响应式属性。也就是说创建过后，data中不允许添加根数据

## 1. 对对象处理

- Vue可以检测到对象属性的修改，不能检测到对象属性的添加和删除，也就是说这种方式处理后，vue不能检察到数据变化，不能进行渲染更新，Vue可以使用Vue.set 和 Vue.delete实现

1. **Vue.set**
   Vue.set 方法用于设置对象的属性，它可以解决 Vue 无法检测添加属性的限制，语法格式如下：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.set( target, key, value )</span><br></pre></td></tr></table></figure>

1. **Vue.delete**
   Vue.delete 用于删除动态添加的属性 语法格式：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.delete( target, key )</span><br></pre></td></tr></table></figure>

## 2. 对数组的处理

- vue中的被包装的观察数组能够触发视图更新
- 有push(),pop(),shift(),unshift(),splice(),sort(),reverse()
- 不能检测到下面数组变化：
  1）直接用索引设置属性，如 vm.item[0] = { }
  2）修改数组长度，如vm.items.length = 0
- 用$set
  Vue 包含一组观察数组的变异方法，它们将会触发视图更新，包含以下方法：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">push() 接收任意数量的参数，把它们逐个添加到数组末尾，并返回修改后数组的长度</span><br><span class="line">pop() 从数组末尾移除最后一项，减少数组的length值，然后返回移除的项</span><br><span class="line">shift() 移除数组中的第一个项并返回该项，同时数组的长度减1</span><br><span class="line">unshift() 在数组前端添加任意个项并返回新数组长度</span><br><span class="line">splice() 删除原数组的一部分成员，并可以在被删除的位置添加入新的数组成员</span><br><span class="line">sort() 调用每个数组项的toString()方法，然后比较得到的字符串排序，返回经过排序之后的数组</span><br><span class="line">reverse() 用于反转数组的顺序，返回经过排序之后的数组</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var app &#x3D; new Vue(&#123;</span><br><span class="line">  el: &#39;#app&#39;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    items: [</span><br><span class="line">      &#123;message: &#39;Foo&#39; &#125;,</span><br><span class="line">      &#123;message: &#39;Bar&#39; &#125;,</span><br><span class="line">      &#123;message: &#39;Baz&#39; &#125;</span><br><span class="line">    ],</span><br><span class="line">    addValue:&#123;message:&#39;zyb&#39;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    push()&#123;</span><br><span class="line">      this.items.push(this.addValue)</span><br><span class="line">    &#125;,</span><br><span class="line">    pop()&#123;</span><br><span class="line">      this.items.pop()</span><br><span class="line">    &#125;,</span><br><span class="line">    shift()&#123;</span><br><span class="line">      this.items.shift()</span><br><span class="line">    &#125;,</span><br><span class="line">    unshift()&#123;</span><br><span class="line">      this.items.unshift(this.addValue)</span><br><span class="line">    &#125;,</span><br><span class="line">    splice()&#123;</span><br><span class="line">      this.items.splice(0,1)</span><br><span class="line">    &#125;,</span><br><span class="line">    sort()&#123;</span><br><span class="line">     this.items.sort()</span><br><span class="line">    &#125;,</span><br><span class="line">    reverse()&#123;</span><br><span class="line">      this.items.reverse()</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

### 变异方法与非变异方法

变异方法(mutation method)，顾名思义，会改变被这些方法调用的原始数组。相比之下，也有非变异(non-mutating method)方法，例如：map(), filter(), concat(), slice() 。这些不会改变原始数组，但总是返回一个新数组。当使用非变异方法时，可以用新数组替换旧数组。同样页面会重新渲染
以下两种方式都可以实现和vm.items[indexOfItem]=newValue相同的效果， 同时也将触发状态更新

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">concat() 先创建当前数组一个副本，然后将接收到的参数添加到这个副本的末尾，最后返回新构建的数组。</span><br><span class="line">slice() 基于当前数组中一个或多个项创建一个新数组，接受一个或两个参数，即要返回项的起始和结束位置，最后返回新数组。</span><br><span class="line">map() 对数组的每一项运行给定函数，返回每次函数调用的结果组成的数组、</span><br><span class="line">filter() 对数组中的每一项运行给定函数，该函数会返回true的项组成的数组</span><br></pre></td></tr></table></figure>

## 3.注意

$set()方法更新时，页面会全部更新一遍，包括其他数据
某个数据更新，会更新渲染所有数据



# 刷新页面

1、this.$router.go(0)

这种方法页面会一瞬间的白屏，体验不是很好，虽然只是一行代码的事

2、location.reload()

这种也是一样，画面一闪，效果总不是很好

3、跳转空白页再跳回原页面

在需要页面刷新的地方写上：this.$router.push('/emptyPage')，跳转到一个空白页。在emptyPage.vue里beforeRouteEnter 钩子里控制页面跳转，从而达到刷新的效果

beforeRouteEnter (to, from, next) {
   next(vm => {
    vm.$router.replace(from.path)
   })
}。

这种画面虽不会一闪，但是能看见路由快速变化。

4、控制`<router-view>`的显示隐藏

默认`<router-view v-if="isRouterAlive" />`isRouterAlive肯定是true，在需要刷新的时候把这个值设为false，接着再重新设为true：

this.isRouterAlive = false
this.$nextTick(function () {
 this.isRouterAlive = true
})
这种方法从画面上是看不出破绽的。也可以搭配provide、inject使用。例如：

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"> &lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">  &lt;router-view v-if&#x3D;&quot;isRouterAlive&quot;&gt;&lt;&#x2F;router-view&gt;</span><br><span class="line"> &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"> export default &#123;</span><br><span class="line">  name: &#39;app&#39;,</span><br><span class="line">  provide()&#123;</span><br><span class="line">    return&#123;</span><br><span class="line">      reload:this.reload</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  data()&#123;</span><br><span class="line">    return&#123;</span><br><span class="line">      isRouterAlive:true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    reload()&#123;</span><br><span class="line">      this.isRouterAlive &#x3D;false;</span><br><span class="line">      this.$nextTick(function()&#123;</span><br><span class="line">        this.isRouterAlive&#x3D;true</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>


然后在需要刷新的页面引入依赖：inject: ['reload'],

在需要执行的地方直接调用方法即可：this.reload()。

我的业务需求是在home里，页面右上角，在我的里面点击修改个人资料成功后，页面1就要刷新一下，如果是在app里面搭配provide、inject这样用的话，会出现一个问题，就是所有的弹窗以及menu部分就都不见了。还没有找到为什么，，

后来发现，我的需求不通过刷新页面也可以解决，就是利用VUE组件通信，监听事件发生，然后重新调一下获取数据的接口就行。

也就是说：

1、给Vue的原型上添加一个bus属性

main.js：Vue.prototype.$bus = new Vue()

2、home页面进行修改个人资料操作时触发事件，

home.vue： changeProfile （） {this.$bus.$emit('change')}

3、页面1里监听如果执行了操作，就调取页面1需要重新加载的数据接口。

mounted () {
 this.$bus.$on('change', ()=> {
  this.doSomething()
 })
},
对于我的需求来说，页面刷新的第四种方法和利用组件通信都能解决我的问题，前者更简单后者更专业，也更强大




# VUE项目的运行

1.先加载依赖包：控制台直接输入` npm install`

也可以webstorm软件进去右下角会出现一个` npm install`，直接点击

install的意思是安装前端用到的依赖包，运行之后，会生成一个node_modules文件。

2.本地运行项目可以控制台执行命令: `npm run serve`代表执行本地运行项目，此时运行的端口号默认为8080，后端的接口配置为.env.development（测试环境）文件下的端口号。

也可以使用webstorm自带的工具：右上角选“+”，找到npm，在npm的edit界面：Command设置为`run`，Scripts为 ` serve`，（记得选当前文件的package.json）默认端口号为8080，也可以在Environment里自己写，port=XXXX（端口号自己随便设置）

![image-20210412195648588](C:\Users\swx\AppData\Roaming\Typora\typora-user-images\image-20210412195648588.png)

运行后出现localhost：8080一般就成功了。

3.打包时控制台输入命令：`npm run build`，代表打包，完成后会生成一个dist文件夹，就是打包后的项目，部署到服务器即发布成功。build会执行.env.production（生产环境）下的配置

dist文件夹：

css文件夹下的.css文件是项目要用到的css文件,当你做webpack打包的时候，会把所有的css样式打包到这里
css文件夹下的.css.map文件是一个Source map文件，Source map就是一个信息文件，里面储存着位置信息。也就是说，转换后的代码的每一个位置，所对应的转换前的位置。目的是帮助我们调试被压缩过的css代码，只是方便我们开发的时候做调试使用。
js文件夹下的.js.map依然是Source map文件，方便我们开发时调试js代码使用。
app.js文件里放的是项目中各个页面的逻辑代码
manifest.js文件可以理解为webpack打包生成的一个配置文件，我们一般不需要关心它
vendor.js放的是各个页面各个组件公用的一些代码
index.html使我们前端代码入口的一个html文件




      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">node.js</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">npm</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">vue</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2021/04/07/8.6.VUE/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-2.1.Typora使用快捷键" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/07/2.1.Typora%E4%BD%BF%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/">Typora使用快捷键</a>
    </h1>
  

        
        <a href="/2021/04/07/2.1.Typora%E4%BD%BF%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/" class="archive-article-date">
  	<time datetime="2021-04-07T11:04:13.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2021-04-07</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h1><table>
<thead>
<tr>
<th align="left">快捷键</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="left">#+空格</td>
<td align="left">标题（几个#就是几级标题）</td>
</tr>
<tr>
<td align="left">ctrl+数字</td>
<td align="left">数字是几就是几级标题</td>
</tr>
<tr>
<td align="left">```+代码格式英文</td>
<td align="left">相应的代码块</td>
</tr>
<tr>
<td align="left">Ctrl+Shift+K</td>
<td align="left">插入代码块(```xxx)</td>
</tr>
<tr>
<td align="left">左下角启用源代码格式</td>
<td align="left">加```可以修改代码块的位置</td>
</tr>
<tr>
<td align="left">Ctrl + /</td>
<td align="left">源代码模式</td>
</tr>
<tr>
<td align="left">``中间放要引用的东西</td>
<td align="left">相应的代码片</td>
</tr>
<tr>
<td align="left">Ctrl+Shift+`</td>
<td align="left">插入代码片(<code>xxx</code>)</td>
</tr>
<tr>
<td align="left">—</td>
<td align="left">分隔符</td>
</tr>
<tr>
<td align="left">-+空格</td>
<td align="left">例举的圆点</td>
</tr>
<tr>
<td align="left">ctrl+b</td>
<td align="left">加粗</td>
</tr>
<tr>
<td align="left">Ctrl+U</td>
<td align="left">下划线</td>
</tr>
<tr>
<td align="left">Ctrl+I</td>
<td align="left">倾斜</td>
</tr>
<tr>
<td align="left">Ctrl+[</td>
<td align="left">减少缩进</td>
</tr>
<tr>
<td align="left">Ctrl + Shift + V</td>
<td align="left">粘贴为纯文本</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">ctrl+t</td>
<td align="left">插入一个表格</td>
</tr>
<tr>
<td align="left">表格里ctrl+回车</td>
<td align="left">下面新加一行</td>
</tr>
<tr>
<td align="left">Ctrl + Shift + Backspace</td>
<td align="left">删除行（在表中）</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h3><table>
<thead>
<tr>
<th align="left">功能</th>
<th align="left">热键（Windows / Linux）</th>
<th align="left">热键（macOS）</th>
</tr>
</thead>
<tbody><tr>
<td align="left">新</td>
<td align="left">Ctrl + N.</td>
<td align="left">Command + N.</td>
</tr>
<tr>
<td align="left">新窗户</td>
<td align="left">Ctrl + Shift + N.</td>
<td align="left">Command + Shift + N.</td>
</tr>
<tr>
<td align="left">打开</td>
<td align="left">Ctrl + O.</td>
<td align="left">Command + O.</td>
</tr>
<tr>
<td align="left">快速打开</td>
<td align="left">Ctrl + P.</td>
<td align="left">Command + Shift + O.</td>
</tr>
<tr>
<td align="left">重新打开已关闭的文件</td>
<td align="left">Ctrl + Shift + T.</td>
<td align="left">Command + Shift + T.</td>
</tr>
<tr>
<td align="left">另存为/重复</td>
<td align="left">Ctrl + Shift + S.</td>
<td align="left">Command + Shift + S.</td>
</tr>
<tr>
<td align="left">偏爱/偏好设置</td>
<td align="left">Ctrl +，</td>
<td align="left">Command +，</td>
</tr>
<tr>
<td align="left">关</td>
<td align="left">Ctrl + W</td>
<td align="left">Command + W</td>
</tr>
</tbody></table>
<h3 id="编辑"><a href="#编辑" class="headerlink" title="编辑"></a>编辑</h3><table>
<thead>
<tr>
<th align="left">功能</th>
<th align="left">热键（Windows / Linux）</th>
<th align="left">热键（macOS）</th>
</tr>
</thead>
<tbody><tr>
<td align="left">新段落</td>
<td align="left">输入</td>
<td align="left">输入</td>
</tr>
<tr>
<td align="left">新队</td>
<td align="left">Shift + Enter</td>
<td align="left">Shift + Enter</td>
</tr>
<tr>
<td align="left">复制为Markdown</td>
<td align="left">Ctrl + Shift + C.</td>
<td align="left">Command + Shift + C.</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left">Command + Shift + V.</td>
</tr>
<tr>
<td align="left">全选</td>
<td align="left">Ctrl + A.</td>
<td align="left">Command + A.</td>
</tr>
<tr>
<td align="left">选择行/句子 选择行（在表格中）</td>
<td align="left">Ctrl + L.</td>
<td align="left">Command + L.</td>
</tr>
<tr>
<td align="left">选择样式范围 选择单元格（在表格中）</td>
<td align="left">Ctrl + E.</td>
<td align="left">Command + E.</td>
</tr>
<tr>
<td align="left">选择Word</td>
<td align="left">Ctrl + D.</td>
<td align="left">Command + D.</td>
</tr>
<tr>
<td align="left">删除Word</td>
<td align="left">Ctrl + Shift + D.</td>
<td align="left">Command + Shift + D.</td>
</tr>
<tr>
<td align="left">跳到顶部</td>
<td align="left">Ctrl + Home</td>
<td align="left">Command +↑</td>
</tr>
<tr>
<td align="left">跳转到选择</td>
<td align="left">Ctrl + J</td>
<td align="left">Command + J</td>
</tr>
<tr>
<td align="left">跳到Buttom</td>
<td align="left">Ctrl + End</td>
<td align="left">Command +↓</td>
</tr>
<tr>
<td align="left">找</td>
<td align="left">Ctrl + F.</td>
<td align="left">Command + F.</td>
</tr>
<tr>
<td align="left">找下一个</td>
<td align="left">F3 /回车</td>
<td align="left">Command + G / Enter</td>
</tr>
<tr>
<td align="left">找到上一个</td>
<td align="left">Shift + F3 / Shift + Enter</td>
<td align="left">Command + Shift + G / Shift + Enter</td>
</tr>
<tr>
<td align="left">更换</td>
<td align="left">Ctrl + H.</td>
<td align="left">Command + H.</td>
</tr>
</tbody></table>
<h3 id="段"><a href="#段" class="headerlink" title="段"></a>段</h3><table>
<thead>
<tr>
<th align="left">功能</th>
<th align="left">热键（Windows / Linux）</th>
<th align="left">热键（macOS）</th>
</tr>
</thead>
<tbody><tr>
<td align="left">段</td>
<td align="left">Ctrl + 0</td>
<td align="left">命令+ 0</td>
</tr>
<tr>
<td align="left">提高标题级别</td>
<td align="left">Ctrl + =</td>
<td align="left">命令+ =</td>
</tr>
<tr>
<td align="left">降低标题级别</td>
<td align="left">Ctrl + -</td>
<td align="left">命令+ -</td>
</tr>
<tr>
<td align="left">表</td>
<td align="left">Ctrl + T.</td>
<td align="left">Command + Option + T.</td>
</tr>
<tr>
<td align="left">代码围栏</td>
<td align="left">Ctrl + Shift + K.</td>
<td align="left">Command + Option + C.</td>
</tr>
<tr>
<td align="left">数学块</td>
<td align="left">Ctrl + Shift + M.</td>
<td align="left">Command + Option + B.</td>
</tr>
<tr>
<td align="left">引用</td>
<td align="left">Ctrl + Shift + Q.</td>
<td align="left">Command + Option + Q.</td>
</tr>
<tr>
<td align="left">订购清单</td>
<td align="left">Ctrl + Shift + [</td>
<td align="left">Command + Option + O.</td>
</tr>
<tr>
<td align="left">无序列表</td>
<td align="left">Ctrl + Shift +]</td>
<td align="left">Command + Option + U.</td>
</tr>
<tr>
<td align="left">减少缩进</td>
<td align="left">Ctrl +] / Shift + Tab</td>
<td align="left">Command +] / Shift + Tab</td>
</tr>
</tbody></table>
<h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><table>
<thead>
<tr>
<th align="left">功能</th>
<th align="left">热键（Windows / Linux）</th>
<th align="left">热键（macOS）</th>
</tr>
</thead>
<tbody><tr>
<td align="left">罢工</td>
<td align="left">Alt + Shift + 5</td>
<td align="left">Control + Shift +`</td>
</tr>
<tr>
<td align="left">超链接</td>
<td align="left">Ctrl + K.</td>
<td align="left">Command + K.</td>
</tr>
<tr>
<td align="left">图片</td>
<td align="left">Ctrl + Shift + I</td>
<td align="left">Command + Control + I</td>
</tr>
<tr>
<td align="left">清除格式</td>
<td align="left">Ctrl + \</td>
<td align="left">命令+</td>
</tr>
</tbody></table>
<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><table>
<thead>
<tr>
<th align="left">功能</th>
<th align="left">热键（Windows / Linux）</th>
<th align="left">热键（macOS）</th>
</tr>
</thead>
<tbody><tr>
<td align="left">切换补充工具栏</td>
<td align="left">Ctrl + Shift + L.</td>
<td align="left">Command + Shift + L.</td>
</tr>
<tr>
<td align="left">大纲</td>
<td align="left">Ctrl + Shift + 1</td>
<td align="left">Command + Control + 1</td>
</tr>
<tr>
<td align="left">用品</td>
<td align="left">Ctrl + Shift + 2</td>
<td align="left">Command + Control + 2</td>
</tr>
<tr>
<td align="left">文件树</td>
<td align="left">Ctrl + Shift + 3</td>
<td align="left">Command + Control + 3</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Fouus模式</td>
<td align="left">F8</td>
<td align="left">F8</td>
</tr>
<tr>
<td align="left">打字机模式</td>
<td align="left">F9</td>
<td align="left">F9</td>
</tr>
<tr>
<td align="left">Toggler全屏</td>
<td align="left">F11</td>
<td align="left">Command + Option + F.</td>
</tr>
<tr>
<td align="left">真实大小</td>
<td align="left">Ctrl + Shift + 0</td>
<td align="left"><em>（不支持）</em></td>
</tr>
<tr>
<td align="left">放大</td>
<td align="left">Ctrl + Shift + =</td>
<td align="left"><em>（不支持）</em></td>
</tr>
<tr>
<td align="left">缩小</td>
<td align="left">Ctrl + Shift + -</td>
<td align="left"><em>（不支持）</em></td>
</tr>
<tr>
<td align="left">在打开的Documnets之间切换</td>
<td align="left">Ctrl + Tab</td>
<td align="left">命令+`</td>
</tr>
<tr>
<td align="left">切换DevTools</td>
<td align="left">Ctrl + Shift + I</td>
<td align="left">-</td>
</tr>
</tbody></table>
<p>基本功能快捷键</p>
<p>字体操作快捷键<br>功能    快捷键</p>
<p>删除线    Alt+Shift+5</p>
<p>插入功能快键键<br>功能    快键键<br>插入图片(本地图片可直接拖入)    Ctrl+Shift+I</p>
<p>插入有序列表    Ctrl+Shift+[<br>插入无序列表    Ctrl+Shift+]<br>插入超链接    Ctrl+K</p>
<p>插入公式块    Ctrl+Shift+M<br>插入引用块    Ctrl+Shift+Q</p>
<p>标题段落快捷键<br>MarkDown支持六级标题，可以使用Ctrl+数字 指定不同层次的标题和段落</p>
<p>功能    快捷键<br>段落（正文）    Ctrl+0</p>
<p>提升标题级别    Ctrl+‘+’<br>降低标题级别    Ctrl+‘-’</p>
<p>功能    快捷键</p>
<p>上移该行    Alt+↑<br>下移该行    Alt+↓<br>左移该列    Win键+←<br>右移该列    Win键+→<br>删除该行    Ctrl+退格键(BackSpace)<br>左右移动表格列的快捷键与WinDows系统自带的快捷键冲突，导致失效</p>
<p>删除行快捷键，不知道为什么没有生效</p>
<p>视图操作快捷键<br>侧边栏<br>功能    快捷键<br>大纲视图    Ctrl+Shift+1<br>文件列表视图    Ctrl+Shift+2<br>文件树视图<br>显示/隐藏侧边栏<br>放大视图    Ctrl+Shift+‘+’<br>缩小视图    Ctrl+Shift+‘-’<br>恢复原来大小视图    Ctrl+Shift+9</p>
<p>编辑模式<br>功能    快捷键<br>源代码模式    Ctrl+/<br>专注模式(当前编辑行为黑，其他行为灰色)    F8<br>打字机模式(光标始终在屏幕中央位置)    F9<br>其他<br>功能    快捷键<br>全屏    F11<br>应用内窗口切换    Ctrl+Tab<br>开发者工具    Shift+F12</p>
<p>搜索扩展快捷键<br>功能    快捷键</p>
<p>替换    Ctrl+H<br>查找下一个    F3<br>查找上一个    Shift+F3</p>
<p>基本操作快键键<br>选择操作<br>功能    快捷键<br>全选    Ctrl+A<br>选择当前行/句    Ctrl+L<br>选择当前格式文本    Ctrl+E<br>选择当前单词    Ctrl+D<br>删除当前单词    Ctrl+Shift+D</p>
<p>跳转操作<br>功能    快捷键<br>跳转到文首    Ctrl+Home<br>跳转到所选内容    Ctrl+J<br>跳转到文末    Ctrl+End</p>
<p>粘贴复制操作<br>功能    快捷键</p>
<p>复制为MarkDown标记语法    Ctrl+Shift+C<br>粘贴为纯文本    Ctrl+Shift+V</p>
<p>文件操作<br>功能    快捷键<br>新建    Ctrl+N<br>新建窗口(在Windows中，这两个作用一样)    Ctrl+Shift+N<br>打开文件    Ctrl+O<br>快速打开(在最近打开中打开)    Ctrl+P</p>
<p>偏好设置    Ctrl+，<br>关闭    Ctrl+W<br>重新打开关闭的文件    Ctrl+Shift+T</p>
<p>其他<br>功能    快捷键<br>清楚样式    Ctrl+<br>增加缩进    Ctrl+]</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">Typora</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">快捷键</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2021/04/07/2.1.Typora%E4%BD%BF%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-10.3.项目编写文档" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/07/10.3.%E9%A1%B9%E7%9B%AE%E7%BC%96%E5%86%99%E6%96%87%E6%A1%A3/">编写文档</a>
    </h1>
  

        
        <a href="/2021/04/07/10.3.%E9%A1%B9%E7%9B%AE%E7%BC%96%E5%86%99%E6%96%87%E6%A1%A3/" class="archive-article-date">
  	<time datetime="2021-04-07T08:57:29.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2021-04-07</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>项目开发过程中为了增加程序的可读性和程序的健壮性， 方便后期程序的调试和维护，所以需要在开发过程中统一技术规范，一般会在项目初期确定好相关文档作为这一统一的规范。不同公司会对文档做不同要求，划不同的分类，但一般来说大致可以分为需求文档、接口文档、流程图（可以单独作为一份文件可以作为附件附在文档中）、变更文件等。</p>
<h1 id="需求文档"><a href="#需求文档" class="headerlink" title="需求文档"></a>需求文档</h1><p>在项目启动之后，项目的目标已经明确了，那么就要开始着手干活了，但是在干活之前，需要对整个项目分析透彻。</p>
<p>首先，开发人员要有随意转换身份的意识和能力。</p>
<p>1.明确产品功能</p>
<p>在分析业务时，站在用户的角度上，思考要做的产品能实现什么功能。把所有的功能点列出来！</p>
<p>2.分析某一功能点的流程</p>
<p>在罗列了所有的功能之后，需要站在开发者的角度分析每一个功能点，考虑从客户端到后台操作数据库的整个流程，可以从是什么、为什么、在哪、怎么做、谁来做、做完如何反馈、反馈给谁、上传到哪、服务器用什么数据库、数据库需要什么表、表里有什么字段、每个字段的属性及意义等等。</p>
<p>比如，我要要做一个软件中个人头像上传的功能，首先明确我做的是上传功能；为什么要上传？因为个人资料需要头像；怎么做上传？通过网络I/O实现；这个功能在什么位置？软件有个个人中心模块，个人中心里有个个人信息子模块，在这个模块里可以上传头像；谁上传？已经登录的用户；上传完之后如何反馈？弹窗提示上传成功；反馈给谁？客户端已登录的用户；上传到哪？服务器上；用什么数据库？MySQL;需要什么表？（存到）用户表；表里有什么字段？用户信息的基本字段；每个字段的属性及意义？略。在思考完这些问题之后，可以把一个功能点串成一条完整的从前端到数据库的线。</p>
<p>3.整合各个功能点–明确分工</p>
<p>在串完所有的功能点之后，站在一个高一层次的角度，把每个功能点之间的联系理清楚，按照相互的联系分工合作，优化其中的细节问题。</p>
<p>4.撰写需求文档</p>
<p>分工完成之后，按照第二步分析的内容，每个人把自己负责的功能整理成文档，最后合并文档，作为统一的需求文档。</p>
<p>5.绘制业务流程图</p>
<p>需求文档确定之后，绘制整个项目的业务流程图，这时候的流程图只需要包含前端的业务流程，后台实现的流程图不需要在需求文档中体现，而是放在后面的接口文档中。</p>
<h1 id="接口文档"><a href="#接口文档" class="headerlink" title="接口文档"></a>接口文档</h1><p>不同公司对接口文档的要求也不尽相同，但包括的内容却是大同小异的。封面、标题、审批页、修订历史以及格式字体等等是次要内容，主要内容包括：</p>
<p>1.请求地址</p>
<p>需要哪个线上地址就写哪个。注意不要犯低级错误，比如写错某个字母或者大小写问题。</p>
<p>2.接口信息</p>
<p>说明请求方式，是POST还是GET。</p>
<p>3.功能描述</p>
<p>清晰地描述接口功能，要求言简意赅，不要写太多废话，也不要遗漏任何细节。</p>
<p>4.接口参数说明</p>
<p>声明参数的名称，严格要求与调用一致，包括大小写；</p>
<p>简单说明参数的含义；</p>
<p>参数的数据类型，是string 、int 还是long等（例如参数为@RequestParam(“appKey”)  String appKey,  @RequestParam(“randomId”)  Integer randomId）；</p>
<p>备注部分，说明参数值是需要哪个公司提供，并详细说明参数怎么生成的，例如时间戳，是哪个时间段的；参数是否必填，一些参数是必须要有的，有些是可选参数，一定要注意写清晰。</p>
<p>5.返回值说明</p>
<p>有一个模板返回值，并说明每个返回参数的意义。提供一个真实的调用接口，真实的返回值。</p>
<p>6.接口调用限制</p>
<p>为了安全，双方采用一个一致的加密算法，保证接口调用的安全。</p>
<p>7.文档维护</p>
<p>文档维护时，修改内容部分需要有修改人、修改日期、版本号的信息。</p>
<h1 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h1><p>流程图可以单独作为一份文件，也可以作为附件附在对应的文档中，具体执行按要求来。</p>
<p>1.业务流程图</p>
<p>2.程序结构图</p>
<p>3.程序流程图</p>
<h1 id="变更文件"><a href="#变更文件" class="headerlink" title="变更文件"></a>变更文件</h1><p>在开发过程中如果出现与预期计划、文档不一致的地方，则视为发生变更，此时大致需要提供以下信息：</p>
<p>1.版本历史（版本号、基本信息）</p>
<p>2.变更前现状</p>
<p>3.变更内容</p>
<p>4.影响评估</p>
<p>5.审批</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2021/04/07/10.3.%E9%A1%B9%E7%9B%AE%E7%BC%96%E5%86%99%E6%96%87%E6%A1%A3/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-5.2.MySQL进阶" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/06/5.2.MySQL%E8%BF%9B%E9%98%B6/">MySQL</a>
    </h1>
  

        
        <a href="/2021/04/06/5.2.MySQL%E8%BF%9B%E9%98%B6/" class="archive-article-date">
  	<time datetime="2021-04-06T11:43:51.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2021-04-06</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><p>索引，类似书籍的目录，可以根据目录的某个页码立即找到对应的内容。</p>
<p>索引的优点：1. 天生排序。2. 快速查找。<br>索引的缺点：1. 占用空间。2. 降低更新表的速度。</p>
<p>注意点：小表使用全表扫描更快，中大表才使用索引。超级大表索引基本无效。</p>
<p>索引从实现上说，分成 2 种：聚集索引和辅助索引（也叫二级索引或者非聚集索引）</p>
<p>从功能上说，分为 6 种：普通索引，唯一索引，主键索引，复合索引，外键索引，全文索引。</p>
<p>详细说说 6 种索引：</p>
<p>1、普通索引：最基本的索引，没有任何约束。<br>2、唯一索引：与普通索引类似，但具有唯一性约束。<br>3、主键索引：<strong>特殊的唯一索引，不允许有空值</strong>。<br>4、复合索引：将多个列组合在一起创建索引，可以覆盖多个列。<br>5、外键索引：只有InnoDB类型的表才可以使用外键索引，保证数据的一致性、完整性和实现级联操作。<br>6、全文索引：MySQL 自带的全文索引只能用于 InnoDB、MyISAM ，并且只能对英文进行全文检索，一般使用全文索引引擎（ES，Solr）。</p>
<ul>
<li><code>注意：主键就是唯一索引，但是唯一索引不一定是主键，唯一索引可以为空，但是空值只能有一个，主键不能为空。</code></li>
</ul>
<p>另外，InnoDB 通过主键聚簇数据，如果没有定义主键且没有定义聚集索引， MySql 会选择一个唯一的非空索引代替，如果没有这样的索引，会隐式定义个 6 字节的主键作为聚簇索引，用户不能查看或访问。</p>
<p>简单点说：</p>
<ol>
<li>设置主键时，会自动生成一个唯一索引，如果<strong>之前</strong>没有聚集索引，那么主键就是聚集索引。</li>
<li>没有设置主键时，会选择一个不为空的唯一索引作为聚集索引，如果还没有，那就生成一个隐式的 6 字节的索引。</li>
</ol>
<p>MySql 将数据按照页来存储，默认一页为 16kb，当你在查询时，不会只加载某一条数据，而是将这个数据所在的页都加载到 pageCache 中，这个其实和 OS 的就近访问原理类似。</p>
<p>MySql 的索引使用 B+ 树结构。在说 B+ 树之前，先说说 B 树，B 树是一个多路平衡查找树，相较于普通的二叉树，不会发生极度不平衡的状况，同时也是多路的。</p>
<p>B 树的特点是：他会将数据也保存在非页子节点。</p>
<p>看图可知：</p>
<p><img src="https://pic1.zhimg.com/80/v2-05f597852f53aef1e74cc2f5b5ba4d10_720w.png" alt="img"></p>
<p>而这个特点会导致非页子节点不能存储大量的索引。</p>
<p>而 B+ Tree 就是针对这个对 B tree 做了优化。如下图所示：</p>
<p><img src="https://pic2.zhimg.com/80/v2-b5a1c7f34e65044a08cdb213f55295fd_720w.png" alt="img"></p>
<p>我们看到，B+ Tree 将所有的 data 数据都保存到了叶子节点中，非也子节点只保存索引和指针。</p>
<p>我们假设一个非页子节点是 16kb，每个索引，即主键是 bigint，即 8b，指针为 8b。那么每页能存储大约 1000 个索引（16kb/ 8b + 8b）.</p>
<p>而一颗 3 层的 B+树能够存储多少索引呢？如下图：</p>
<p><img src="https://pic3.zhimg.com/80/v2-38209d49a486354414b2358f2e88558a_720w.png" alt="img"></p>
<p>大约能够存储 10 亿个索引。通常 B+ 树的高度在 2-4 层，由于 MySql 在运行时，根节点是常驻内存的，因此每次查找只需要大约 2 -3 次 IO。可以说，B+ 树的设计，就是根据机械磁盘的特性来进行设计的。</p>
<p>知道了索引的设计，我们能够知道另外一些信息：</p>
<ol>
<li>MySql 的主键不能太大，如果使用 UUID 这种，将会浪费 B+ 树的非叶子节点。</li>
<li>MySql 的主键最好是自增的，如果使用 UUID 这种，每次插入都会调整 B+树，从而导致页分裂，严重影响性能。</li>
</ol>
<p>那么，如果项目中使用了分库分表，我们通常都会需要一个主键进行 sharding，那怎么办呢？在实现上，我们可以保留自增主键，而逻辑主键用来作为唯一索引即可。</p>
<h1 id="锁"><a href="#锁" class="headerlink" title="锁"></a>锁</h1><h3 id="2-锁机制"><a href="#2-锁机制" class="headerlink" title="2. 锁机制"></a>2. 锁机制</h3><p>关于 Mysql 的锁，各种概念就会喷涌而出，事实上，锁有好几种维度，我们来解释一下。</p>
<h3 id="1-类型维度"><a href="#1-类型维度" class="headerlink" title="1. 类型维度"></a>1. 类型维度</h3><ul>
<li><p>共享锁（读锁 / S 锁）</p>
</li>
<li><p>排它锁（写锁 / X 锁）<br>类型细分：</p>
</li>
<li><ul>
<li>意向共享锁</li>
<li>意向排他（互斥）锁</li>
</ul>
</li>
</ul>
<ul>
<li>悲观锁（使用锁，即 for update）</li>
<li>乐观锁（使用版本号字段，类似 CAS 机制，即用户自己控制。缺点：并发很高的时候，多了很多无用的重试）</li>
</ul>
<h3 id="2-锁的粒度（粒度维度）"><a href="#2-锁的粒度（粒度维度）" class="headerlink" title="2. 锁的粒度（粒度维度）"></a>2. 锁的粒度（粒度维度）</h3><ul>
<li>表锁</li>
<li>页锁（Mysql BerkeleyDB 引擎）</li>
<li>行锁（InnoDB）</li>
</ul>
<h3 id="3-锁的算法（算法维度）"><a href="#3-锁的算法（算法维度）" class="headerlink" title="3. 锁的算法（算法维度）"></a>3. 锁的算法（算法维度）</h3><ul>
<li>Record Lock（单行记录）</li>
<li>Gap Lock（间隙锁，锁定一个范围，但不包含锁定记录）</li>
<li>Next-Key Lock（Record Lock + Gap Lock，锁定一个范围，并且锁定记录本身， MySql 防止幻读，就是使用此锁实现）</li>
</ul>
<h3 id="4-默认的读操作，上锁吗？"><a href="#4-默认的读操作，上锁吗？" class="headerlink" title="4. 默认的读操作，上锁吗？"></a>4. 默认的读操作，上锁吗？</h3><ul>
<li>默认是 MVCC 机制（“一致性非锁定读”）保证 RR 级别的隔离正确性，是不上锁的。</li>
</ul>
<p>可以选择手动上锁：select xxxx for update (排他锁); select xxxx lock in share mode(共享锁)，称之为“一致性锁定读”。</p>
<p>使用锁之后，就能在 RR 级别下，避免幻读。当然，默认的 MVCC 读，也能避免幻读。</p>
<p>既然 RR 能够防止幻读，那么，SERIALIZABLE 有啥用呢？</p>
<p>防止丢失更新。例如下图：</p>
<p><img src="https://pic1.zhimg.com/80/v2-1917d61efc5d3ab35029004d3eae7dc8_720w.png" alt="img"></p>
<p>这个时候，我们必须使用 SERIALIZABLE 级别进行串行读取。</p>
<p>最后，行锁的实现原理就是锁住聚集索引，如果你查询的时候，没有正确地击中索引，MySql 优化器将会抛弃行锁，使用表锁。</p>
<h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><p>事务是数据库永恒不变的话题， ACID：原子性，一致性，隔离性，持久性。</p>
<p>四个特性，最重要的就是一致性。而<strong>一致性</strong>（（由DBMS的<strong>完整性子系统</strong>执行测试任务））由原子性，隔离性，持久性来保证。</p>
<ul>
<li>原子性由 Undo log 保证。Undo Log 会保存每次变更之前的记录，从而在发生错误时进行回滚。（由DBMS的<strong>事务管理子系统</strong>来实现）</li>
<li>隔离性由 MVCC 和 Lock 保证。这个后面说。（由DBMS的<strong>并发控制子系统</strong>来实现）</li>
<li>持久性由 Redo Log 保证。每次真正修改数据之前，都会将记录写到 Redo Log 中，只有 Redo Log 写入成功，才会真正的写入到 B+ 树中，如果提交之前断电，就可以通过 Redo Log 恢复记录。（由DBMS的<strong>恢复管理子系统</strong>来实现）</li>
</ul>
<p>然后再说隔离性。</p>
<p>隔离级别：</p>
<ol>
<li>未提交读（RU）</li>
<li>已提交读（RC）</li>
<li>可重复读（RR）</li>
<li>串行化（serializable）</li>
</ol>
<p>每个级别都会解决不同的问题，通常是3 个问题：脏读，不可重复读，幻读。一张经典的图：</p>
<p><img src="https://pic2.zhimg.com/80/v2-e4a89f7012dd6511edd7d970ffd0f659_720w.png" alt="img"></p>
<p>这里有个注意点，关于幻读，在数据库规范里，RR 级别会导致幻读，但是，由于 Mysql 的优化，MySql 的 RR 级别不会导致幻读：在使用默认的 select 时，MySql 使用 MVCC 机制保证不会幻读；你也可以使用锁，在使用锁时，例如 for update（X 锁），lock in share mode（S 锁），MySql 会使用 Next-Key Lock 来保证不会发生幻读。前者称为快照读，后者称为当前读。</p>
<p>原理剖析：</p>
<ul>
<li>RU 发生脏读的原因：RU 原理是对每个更新语句的行记录进行加锁，而不是对整个事务进行加锁，所以会发生脏读。而 RC 和 RR 会对整个事务加锁。</li>
<li>RC 不能重复读的原因：RC 每次执行 SQL 语句都会生成一个新的 Read View，每次读到的都是不同的。而 RR 的事务从始至终都是使用同一个 Read View。</li>
<li>RR 不会发生幻读的原因： 上面说过了。</li>
</ul>
<p>那 RR 和 Serializble 有什么区别呢？答：丢失更新。本文关于锁的部分已经提到。</p>
<p>MVCC 介绍：全称多版本并发控制。</p>
<p>innoDB 每个聚集索引都有 4 个隐藏字段，分别是主键（RowID），最近更改的事务 ID（MVCC 核心），Undo Log 的指针（隔离核心），索引删除标记（当删除时，不会立即删除，而是打标记，然后异步删除）；</p>
<p>本质上，MVCC 就是用 Undo Log 链表实现。</p>
<p>MVCC 的实现方式：事务以排它锁的方式修改原始数据，把修改前的数据存放于 Undo Log，通过回滚指针与数据关联，如果修改成功，什么都不做，如果修改失败，则恢复 Undo Log 中的数据。</p>
<p>多说一句，通常我们认为 MVCC 是类似乐观锁的方式，即使用版本号，而实际上，innoDB 不是这么实现的。当然，这不影响我们使用 MySql。</p>
<h1 id="事务-1"><a href="#事务-1" class="headerlink" title="事务"></a>事务</h1><p>事务：指的是逻辑上的一组操作，组成这组操作的各个逻辑单元，要么全都成功，要么全都失败。</p>
<p>开启事务：start transaction;</p>
<p>提交事务：commit;</p>
<p>回滚事务：rollback; //恢复到事务开启之前的状态（也相当于提交了事务）</p>
<p>事务的特性：</p>
<p>原子性：事务的不可分割，组成事务的各个逻辑单元不可分割。</p>
<p>一致性：事务执行的前后，数据完整性保持一致。（总和前后相等）</p>
<p>隔离性：事务执行不应该受到其他事务的干扰。</p>
<p>持久性：事务一旦结束，数据就持久化到数据库中。</p>
<p>如果不考虑隔离性（一个事务执行受到其他的事务的干扰），引发一些安全问题，主要体现在读取数据上：</p>
<p>l 脏读：一个事务读到了另一个事务未提交的数据，导致查询结果不一致</p>
<p>l 不可重复读：一个事务读到了另一个事务已经提交的update的数据，导致多次查询结果不一致。</p>
<p>l 虚读/幻读：一个事务读到了另一个事务已经提交的insert的数据，导致多次查询结果不一致。</p>
<p>设置事务的隔离级别：安全性越高的效率越低，一般使用中间两种</p>
<p>read uncommitted（未提交读）：脏读，不可重复读，虚读都有可能发生</p>
<p>read committed（已提交读）：避免脏读。但是不可重复读和虚读是有可能发生</p>
<p>repeatable read（重复读，默认）：避免脏读和不可重复读，但是虚读有可能发生。</p>
<p>serializable（串行化读（一个事务得接着另一个事务执行，禁止并发存在））：避免脏读，不可重复读，虚读。</p>
<p>设置事务的隔离级别： set session transaction isolation level 隔离级别</p>
<p>查看当前的隔离级别：  select @@tx_isolation;</p>
<p>演示脏读：</p>
<p>\1. 开启两个窗口A,B</p>
<p>\2. 设置A窗口的隔离级别为read uncommitted;</p>
<p>\3. 在A，B两个窗口中开启事务</p>
<p>\4. 在B窗口中完成转账的功能，但是不提交事务</p>
<p>\5. 在A窗口中进行查询：查询到已经转账成功了。（这就发生了脏读）</p>
<p>演示不可重复读：</p>
<p>\1. 开启两个窗口A,B</p>
<p>\2. 设置A窗口的隔离级别为read committed;</p>
<p>\3. 分别在两个窗口中开启事务</p>
<p>\4. 在B窗口中完成转账，不提交事务</p>
<p>\5. 在A窗口中进行查询：仍然是未到账（这就避免了脏读）</p>
<p><strong>6.</strong> <em><strong>*在B窗口中提交事务*</strong></em></p>
<p>\7. 在A窗口查询：发现到账了（两次A窗口的查询结果不同，这就是不可重复读）</p>
<p>避免不可重复读：将2中的隔离级别设置为repeatable read；（一个事务中的多次查询结果一致，跳出这个事务才能出现改变后的结果）</p>
<p>（虚读只是概率发生，无法演示）</p>
<p>演示串行化：</p>
<p>\1. 开启两个窗口A,B</p>
<p>\2. 设置A窗口的隔离级别：serializable</p>
<p>\3. 分别在两个窗口中开启事务</p>
<p>\4. 在B窗口中插入一条记录</p>
<p>\5. 在A窗口中进行查询：发现无反应，但是当B窗口提交事务的时候，A窗口会立马输出结果。（说明事务不允许吹袭案并发，A窗口需要等B窗口事务执行完成以后，才会执行A窗口的事务）</p>
<h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><h1 id="解释器explain"><a href="#解释器explain" class="headerlink" title="解释器explain"></a>解释器explain</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+----+-------------+-------+------------+------+---------------+-----+---------+------+------+----------+-------+</span><br><span class="line">| id | select_type | table | partitions | type | possible_keys | key | key_len | ref  | rows | filtered | Extra |</span><br><span class="line">+----+-------------+-------+------------+------+---------------+-----+---------+------+------+----------+-------+</span><br></pre></td></tr></table></figure>

<h3 id="id"><a href="#id" class="headerlink" title="id"></a>id</h3><p>select 查询的序列号，包含一组可以重复的数字，表示查询中执行sql语句的顺序。一般有三种情况：  第一种：id全部相同，sql的执行顺序是由上至下；  第二种：id全部不同，sql的执行顺序是根据id大的优先执行；  第三种：id既存在相同，又存在不同的。先根据id大的优先执行，再根据相同id从上至下的执行。</p>
<h3 id="select-type"><a href="#select-type" class="headerlink" title="select_type"></a>select_type</h3><p>select 查询的类型，主要是用于区别普通查询，联合查询，嵌套的复杂查询  </p>
<p>simple：简单的select 查询，查询中不包含子查询或者union  </p>
<p>primary：查询中若包含任何复杂的子查询，最外层查询则被标记为primary  </p>
<p>subquery：在select或where 列表中包含了子查询  </p>
<p>derived：在from列表中包含的子查询被标记为derived（衍生）MySQL会递归执行这些子查询，把结果放在临时表里。 </p>
<p>union：若第二个select出现在union之后，则被标记为union，若union包含在from子句的子查询中，外层select将被标记为：derived  union </p>
<p>result：从union表获取结果的select</p>
<h3 id="table"><a href="#table" class="headerlink" title="table"></a>table</h3><p>显示这一行的数据是关于哪张表的</p>
<h3 id="partitions"><a href="#partitions" class="headerlink" title="partitions"></a>partitions</h3><p>表所使用的分区，如果要统计十年公司订单的金额，可以把数据分为十个区，每一年代表一个区。这样可以大大的提高查询效率。</p>
<h3 id="type"><a href="#type" class="headerlink" title="type"></a>type</h3><p>这是一个非常重要的参数，连接类型，常见的有：all , index , range , ref , eq_ref , const , system , null 八个级别。  </p>
<p>性能从最优到最差的排序：system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; all  </p>
<p>对java程序员来说，若保证查询至少达到range级别或者最好能达到ref则算是一个优秀而又负责的程序员。 </p>
<p>all：（full table scan）全表扫描无疑是最差，若是百万千万级数据量，全表扫描会非常慢。  </p>
<p>index：（full index scan）全索引文件扫描比all好很多，毕竟从索引树中找数据，比从全表中找数据要快。  </p>
<p>range：只检索给定范围的行，使用索引来匹配行。范围缩小了，当然比全表扫描和全索引文件扫描要快。sql语句中一般会有between，in，&gt;，&lt; 等查询。  </p>
<p>ref：非唯一性索引扫描，本质上也是一种索引访问，返回所有匹配某个单独值的行。比如查询公司所有属于研发团队的同事，匹配的结果是多个并非唯一值。  eq_ref：唯一性索引扫描，对于每个索引键，表中有一条记录与之匹配。比如查询公司的CEO，匹配的结果只可能是一条记录，  </p>
<p>const：表示通过索引一次就可以找到，const用于比较primary key 或者unique索引。因为只匹配一行数据，所以很快，若将主键至于where列表中，MySQL就能将该查询转换为一个常量。  </p>
<p>system：表只有一条记录（等于系统表），这是const类型的特列，平时不会出现，了解即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type中包含的值：</span><br><span class="line">system、const： 可以将查询的变量转为常量. 如id&#x3D;1; id为 主键或唯一键.</span><br><span class="line">eq_ref： 访问索引,返回某单一行的数据.(通常在联接时出现，查询使用的索引为主键或惟一键)</span><br><span class="line">ref： 访问索引,返回某个值的数据.(可以返回多行) 通常使用&#x3D;时发生 </span><br><span class="line">range： 这个连接类型使用索引返回一个范围中的行，比如使用&gt;或&lt;查找东西，并且该字段上建有索引时发生的情况(注:不一定好于index) </span><br><span class="line">index： 以索引的顺序进行全表扫描，优点是不用排序,缺点是还要全表扫描 </span><br><span class="line">ALL： 全表扫描，应该尽量避免</span><br></pre></td></tr></table></figure>

<h3 id="possible-keys"><a href="#possible-keys" class="headerlink" title="possible_keys"></a>possible_keys</h3><p>显示查询语句可能用到的索引(一个或多个或为null)，不一定被查询实际使用。仅供参考使用。如果为空，表示没有可能应用的索引</p>
<h3 id="key"><a href="#key" class="headerlink" title="key"></a>key</h3><p>显示查询语句实际使用的索引。若为null，则表示没有使用索引。</p>
<p>MySQL很少会选择优化不足的索引，此时可以在SELECT语句中使用FORCE INDEX（index_name）来强制使用一个索引或者用IGNORE INDEX（index_name）来强制忽略索引</p>
<h3 id="key-len"><a href="#key-len" class="headerlink" title="key_len"></a>key_len</h3><p>显示索引中使用的字节数，可通过key_len计算查询中使用的索引长度。在不损失精确性的情况下索引长度越短越好。</p>
<p>key_len 显示的值为索引字段的最可能长度，并非实际使用长度，即key_len是根据表定义计算而得，并不是通过表内检索出的。</p>
<h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h3><p>显示索引的哪一列或常量被用于查找索引列上的值。</p>
<h3 id="rows"><a href="#rows" class="headerlink" title="rows"></a>rows</h3><p>根据表统计信息及索引选用情况，大致估算出找到所需的记录所需要读取的行数，值越大越不好。</p>
<h3 id="extra"><a href="#extra" class="headerlink" title="extra"></a>extra</h3><p>关于MySQL如何解析查询的额外信息</p>
<p>Using filesort： 说明MySQL会对数据使用一个外部的索引排序，而不是按照表内的索引顺序进行读取。MySQL中无法利用索引完成的排序操作称为“文件排序” 。出现这个就要立刻优化sql。  </p>
<p>Using temporary： 使用了临时表保存中间结果，MySQL在对查询结果排序时使用临时表。常见于排序 order by 和 分组查询 group by。 出现这个更要立刻优化sql。  </p>
<p>Using index： 表示相应的select 操作中使用了覆盖索引（Covering index），避免访问了表的数据行，效果不错！如果同时出现Using where，表明索引被用来执行索引键值的查找。如果没有同时出现Using where，表示索引用来读取数据而非执行查找动作。  </p>
<p>覆盖索引（Covering Index） ：也叫索引覆盖，就是select 的数据列只用从索引中就能够取得，不必读取数据行，MySQL可以利用索引返回select 列表中的字段，而不必根据索引再次读取数据文件。  </p>
<p>Using index condition： 在5.6版本后加入的新特性，优化器会在索引存在的情况下，通过符合RANGE范围的条数 和 总数的比例来选择是使用索引还是进行全表遍历。  </p>
<p>Using where： 表明使用了where 过滤  </p>
<p>Using join buffer： 表明使用了连接缓存  </p>
<p>impossible where： where 语句的值总是false，不可用，不能用来获取任何元素  </p>
<p>distinct： 优化distinct操作，在找到第一匹配的元组后即停止找同样值的动作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Extra中包含的值：using index： 只用到索引,可以避免访问表，性能很高。 </span><br><span class="line">using where： 使用到where来过滤数据， 不是所有的where clause都要显示using where. 如以&#x3D;方式访问索引。</span><br><span class="line">using tmporary： 用到临时表去处理当前的查询。</span><br><span class="line">using filesort： 用到额外的排序，此时mysql会根据联接类型浏览所有符合条件的记录，并保存排序关键字和行指针，然后排序关键字并按顺序检索行。(当使用order by v1,而没用到索引时,就会使用额外的排序)。</span><br><span class="line">range checked for eache record(index map:N)： 没有好的索引可以使用。Using index for group-by：表明可以在索引中找到分组所需的所有数据，不需要查询实际的表。explain select user_id from t_order group by user_id;</span><br></pre></td></tr></table></figure>

<h3 id="filtered"><a href="#filtered" class="headerlink" title="filtered"></a>filtered</h3><p>一个百分比的值，和rows 列的值一起使用，可以估计出查询执行计划(QEP)中的前一个表的结果集，从而确定join操作的循环次数。小表驱动大表，减轻连接的次数</p>
<p>见到Using temporary和Using filesort，就意味着MySQL根本不能使用索引，结果是检索会很慢，需要优化sql了。</p>
<p>MySQL本身的功能架构分为三个部分，分别是 应用层、逻辑层、物理层，不只是MySQL ，其他大多数数据库产品都是按这种架构来进行划分的。</p>
<ul>
<li>应用层，主要负责与客户端进行交互，建立链接，记住链接状态，返回数据，响应请求，这一层是和客户端打交道的。</li>
<li>逻辑层，主要负责查询处理、事务管理等其他数据库功能处理，以查询为例。</li>
</ul>
<p>​    </p>
<p>首先接收到查询SQL之后，数据库会立即分配一个线程对其进行处理，第一步查询处理器会对SQL查询进行优化，优化后会生成执行计划，然后交由计划执行器来执行。</p>
<p>​    </p>
<p>计划执行器需要访问更底层的事务管理器，存储管理器来操作数据，他们各自的分工各有不同，最终通过调用物理层的文件获取到查询结构信息，将最终结果响应给应用层。</p>
<ul>
<li>物理层，实际物理磁盘上存储的文件，主要有分文数据文件，日志文件。</li>
</ul>
<p>通过上面的描述，生成执行计划是执行一条SQL必不可少的步骤，一条SQL性能的好坏，可以通过查看执行计划很直观的看出来，执行计划提供了各种查询类型与级别，方便我们进行查看以及为作为性能分析的依据。</p>
<p>MySQL为我们提供了 explain 关键字来直观的查看一条SQL的执行计划。</p>
<p>explain显示了MySQL如何使用索引来处理select语句以及连接表，可以帮助选择更好的索引和写出更优化的查询语句。</p>
<p>下面我们使用 explain 做一个查询，如下：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/DmibiaFiaAI4B2X3HLg3LCH4kOawemn0jK92f2UQNa6MzDzMSHF0kiaG8icDGUwjkyq4oZzflDzjhDqiaZXe9CXdhVfA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>查询结构中有12列，理解每一列的含义，对理解执行计划至关重要，下面进行说明。</p>
<p><strong>id</strong></p>
<p>SELECT识别符，这是SELECT的查询序列号。</p>
<p><strong>select_type</strong></p>
<p>SELECT类型,可以为以下任何一种:</p>
<ul>
<li>SIMPLE:简单SELECT(不使用UNION或子查询)</li>
<li>PRIMARY:最外面的SELECT</li>
<li>UNION:UNION中的第二个或后面的SELECT语句</li>
<li>DEPENDENT UNION:UNION中的第二个或后面的SELECT语句,取决于外面的查询</li>
<li>UNION RESULT:UNION 的结果</li>
<li>SUBQUERY:子查询中的第一个SELECT</li>
<li>DEPENDENT SUBQUERY:子查询中的第一个SELECT,取决于外面的查询</li>
<li>DERIVED:导出表的SELECT(FROM子句的子查询)</li>
</ul>
<p><strong>table</strong></p>
<p>输出的行所引用的表</p>
<p><strong>partitions</strong></p>
<p>如果查询是基于分区表的话，显示查询将访问的分区。</p>
<p><strong>type</strong></p>
<p>联接类型。下面给出各种联接类型,按照从最佳类型到最坏类型进行排序:</p>
<ul>
<li>system:表仅有一行(=系统表)。这是const联接类型的一个特例。</li>
<li>const:表最多有一个匹配行,它将在查询开始时被读取。因为仅有一行,在这行的列值可被优化器剩余部分认为是常数。const表很快,因为它们只读取一次!</li>
<li>eq_ref:对于每个来自于前面的表的行组合,从该表中读取一行。这可能是最好的联接类型,除了const类型。</li>
<li>ref:对于每个来自于前面的表的行组合,所有有匹配索引值的行将从这张表中读取。</li>
<li>ref_or_:该联接类型如同ref,但是添加了MySQL可以专门搜索包含NULL值的行。</li>
<li>index_merge:该联接类型表示使用了索引合并优化方法。</li>
<li>unique_subquery:该类型替换了下面形式的IN子查询的ref: value IN (SELECT primary_key FROM single_table WHERE some_expr) unique_subquery是一个索引查找函数,可以完全替换子查询,效率更高。</li>
<li>index_subquery:该联接类型类似于unique_subquery。可以替换IN子查询,但只适合下列形式的子查询中的非唯一索引: value IN (SELECT key_column FROM single_table WHERE some_expr)</li>
<li>range:只检索给定范围的行,使用一个索引来选择行。</li>
<li>index:该联接类型与ALL相同,除了只有索引树被扫描。这通常比ALL快,因为索引文件通常比数据文件小。</li>
<li>ALL:对于每个来自于先前的表的行组合,进行完整的表扫描，说明查询就需要优化了。</li>
</ul>
<p>一般来说，得保证查询至少达到range级别，最好能达到ref。</p>
<p><strong>possible_keys</strong></p>
<p>指出MySQL能使用哪个索引在该表中找到行</p>
<p><strong>key</strong></p>
<p>显示MySQL实际决定使用的键(索引)。如果没有选择索引,键是NULL。</p>
<p><strong>key_len</strong></p>
<p>显示MySQL决定使用的键长度。如果键是NULL,则长度为NULL。在不损失精确性的情况下，长度越短越好</p>
<p><strong>ref</strong></p>
<p>显示使用哪个列或常数与key一起从表中选择行。</p>
<p><strong>rows</strong></p>
<p>显示MySQL认为它执行查询时必须检查的行数。多行之间的数据相乘可以估算要处理的行数。</p>
<p><strong>filtered</strong></p>
<p>显示了通过条件过滤出的行数的百分比估计值。</p>
<p><strong>Extra</strong></p>
<p>该列包含MySQL解决查询的详细信息</p>
<ul>
<li>Distinct:MySQL发现第1个匹配行后,停止为当前的行组合搜索更多的行。</li>
<li>Select tables optimized away MySQL根本没有遍历表或索引就返回数据了，表示已经优化到不能再优化了</li>
<li>Not exists:MySQL能够对查询进行LEFT JOIN优化,发现1个匹配LEFT JOIN标准的行后,不再为前面的的行组合在该表内检查更多的行。</li>
<li>range checked for each record (index map: #):MySQL没有发现好的可以使用的索引,但发现如果来自前面的表的列值已知,可能部分索引可以使用。</li>
<li>Using filesort:MySQL需要额外的一次传递,以找出如何按排序顺序检索行，说明查询就需要优化了。</li>
<li>Using index:从只使用索引树中的信息而不需要进一步搜索读取实际的行来检索表中的列信息。</li>
<li>Using temporary:为了解决查询,MySQL需要创建一个临时表来容纳结果，说明查询就需要优化了。</li>
<li>Using where:WHERE 子句用于限制哪一个行匹配下一个表或发送到客户。</li>
<li>Using sort_union(…), Using union(…), Using intersect(…):这些函数说明如何为index_merge联接类型合并索引扫描。</li>
<li>Using index for group-by:类似于访问表的Using index方式,Using index for group-by表示MySQL发现了一个索引,可以用来查 询GROUP BY或DISTINCT查询的所有列,而不要额外搜索硬盘访问实际的表。</li>
</ul>
<h1 id="mysql添加用户并设置权限"><a href="#mysql添加用户并设置权限" class="headerlink" title="mysql添加用户并设置权限"></a>mysql添加用户并设置权限</h1><p>1.登录本地用户</p>
<p>命令：[root@elk mysql]# mysql -uroot -p123456</p>
<p>登录外网用户（需要注意服务器可能只允许本地登录，需要修改响应的配置文件）</p>
<p>配置文件是/etc/mysql/my.cnf</p>
<p>命令：vim   /etc/mysql/my.cnf</p>
<p>修改bind-address  =127.0.0.1  将其注释掉；//作用是使得不再只允许本地访问</p>
<p>重启mysql：/etc/init.d/mysql restart  </p>
<p>然后登录</p>
<p>2.创建用户</p>
<p>命令：mysql&gt; CREATE USER ‘username’@’host’ IDENTIFIED BY ‘password’;</p>
<p>username:用户名；</p>
<p>host：指定在哪个主机上可以登录，本机可用localhost，%通配所有远程主机；</p>
<p>password：用户登录密码；</p>
<p>3.设置权限</p>
<p>命令：<strong>GRANT ALL PRIVILEGES ON  <em>.</em> TO ‘username’@‘%’ IDENTIFIED BY ‘password’；</strong></p>
<p>刷新权限：FLUSH PRIVILEGES;            #刷新之后才会生效，重启也可以</p>
<p>格式：grant 权限 on 库名.表名 to 用户@登录主机 identified by “用户密码”；*.*代表所有权；</p>
<p>@ 后面是访问的是客户端IP地址（或是 主机名） % 代表任意的客户端，如果填写 localhost 为本地访问（那此用户就不能远程访问该mysql数据库了）</p>
<p>一般情况下，修改MySQL密码，授权，是需要有mysql里的root权限的。 </p>
<p>注：本操作是在WIN命令提示符下，phpMyAdmin同样适用。     </p>
<p>用户：phplamp  用户数据库：phplampDB </p>
<p>1.新建用户。 </p>
<p>//登录MYSQL </p>
<p>@&gt;mysql -u root -p </p>
<p>@&gt;密码 </p>
<p>//创建用户 </p>
<p>mysql&gt; insert into mysql.user(Host,User,Password) values(“localhost”,”phplamp”,password(“1234”)); </p>
<p>//刷新系统权限表 </p>
<p>mysql&gt;flush privileges; </p>
<p>这样就创建了一个名为：phplamp  密码为：1234  的用户。 </p>
<p>然后登录一下。 </p>
<p>mysql&gt;exit; </p>
<p>@&gt;mysql -u phplamp -p </p>
<p>@&gt;输入密码 </p>
<p>mysql&gt;登录成功 </p>
<p>2.为用户授权。 </p>
<p>//登录MYSQL(有ROOT权限)。我以ROOT身份登录. </p>
<p>@&gt;mysql -u root -p </p>
<p>@&gt;密码 </p>
<p>//首先为用户创建一个数据库(phplampDB) </p>
<p>mysql&gt;create database phplampDB; </p>
<p>/授权phplamp用户拥有phplamp数据库的所有权限。 </p>
<p>mysql&gt;<em><em>grant all privileges on phplampDB.</em> to phplamp@localhost identified by ‘1234’;</em>* </p>
<p>//刷新系统权限表 </p>
<p>mysql&gt;flush privileges; </p>
<p>mysql&gt;其它操作 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;* 如果想指定部分权限给一用户，可以这样来写: </span><br><span class="line">mysql&gt;grant select,update on phplampDB.* to phplamp@localhost identified by &#39;1234&#39;; </span><br><span class="line">&#x2F;&#x2F;刷新系统权限表。 </span><br><span class="line">mysql&gt;flush privileges; *&#x2F; </span><br></pre></td></tr></table></figure>

<p>3.删除用户。 </p>
<p>@&gt;mysql -u root -p </p>
<p>@&gt;密码 </p>
<p>mysql&gt;DELETE FROM user WHERE User=”phplamp” and Host=”localhost”; </p>
<p>mysql&gt;flush privileges; </p>
<p>//删除用户的数据库 mysql&gt;drop database phplampDB; </p>
<p>4.修改指定用户密码。 </p>
<p>@&gt;mysql -u root -p </p>
<p>@&gt;密码 </p>
<p>mysql&gt;update mysql.user set password=password(‘新密码’) where User=”phplamp” and Host=”localhost”; </p>
<p>mysql&gt;flush privileges;</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">mysql</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">索引</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">锁</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">事务</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2021/04/06/5.2.MySQL%E8%BF%9B%E9%98%B6/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-8.1.前端概述" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/05/8.1.%E5%89%8D%E7%AB%AF%E6%A6%82%E8%BF%B0/">前端概述</a>
    </h1>
  

        
        <a href="/2021/04/05/8.1.%E5%89%8D%E7%AB%AF%E6%A6%82%E8%BF%B0/" class="archive-article-date">
  	<time datetime="2021-04-05T07:42:57.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2021-04-05</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>网页主要是做前端样式，而现在的前端的框架越来越多：bootstrap，layui，基于Vue的elementui、iview。以前开发网页需要写html代码，css样式和js方法。现在用了框架之后，我们只需要将其中的示例改为自己的信息，将相应的css和js放在对应的路径下即可。</p>
<p>前端适配的问题：在css的样式下</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2021/04/05/8.1.%E5%89%8D%E7%AB%AF%E6%A6%82%E8%BF%B0/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-8.3.网页前端之CSS" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/05/8.3.%E7%BD%91%E9%A1%B5%E5%89%8D%E7%AB%AF%E4%B9%8BCSS/">网页前端之CSS</a>
    </h1>
  

        
        <a href="/2021/04/05/8.3.%E7%BD%91%E9%A1%B5%E5%89%8D%E7%AB%AF%E4%B9%8BCSS/" class="archive-article-date">
  	<time datetime="2021-04-05T05:37:52.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2021-04-05</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>HTML是页面的结构，CSS是美化页面</p>
<p>CSS（Cascading Style Sheets）：层叠样式表  </p>
<p>样式表：存储样式的地方，多个样式</p>
<p>CSS通常称为CSS样式或层叠样式表，主要用于设置HTML页面中的文本内容（字体、大小、对齐方式等），图片的外形（高宽、边框样式、边距等）以及版面的布局等外观显示样式。</p>
<p>作用：修饰HTML页面，更丰富多彩的展示超文本信息</p>
<p>因为HTML在单独使用设置属性会有一定的局限性，所以用CSS样式。</p>
<h1 id="样式类型"><a href="#样式类型" class="headerlink" title="样式类型"></a>样式类型</h1><p>1.行内样式表（内联样式）:<code>&lt;div style=&quot;width:400px;height:200px;background-color:#FFF&quot;&gt;&lt;/div&gt;</code></p>
<p>一般写在标签头部</p>
<p>放置规范：在<code>&lt;style&gt;</code>标签内容体中书写css样式代码<code>&lt;/style&gt;</code>      <code>&lt;style&gt;</code>标签放置在<code>&lt;head&gt;</code>标签之中</p>
<p>格式规范：选择器名称｛属性名1：属性值1； 属性名2：属性值2；……｝</p>
<p>代码规范：属性名和属性值之间是键值对关系    <code>：</code>连接   <code>；</code>结尾  </p>
<p>如果一个属性名有多个值，多个值之间用空格隔开：border:1px solid red;</p>
<p>CSS注释：<code>/*注释内容*/ </code> 等同于java的多行注释</p>
<p>缺点:样式只能操作某一个标签 优点:十分灵活，可以进行细节的调节,更加针对性修改某个标签的样式</p>
<p>2.嵌入式样式表（嵌入样式）:<code>&lt;style type=&quot;text/css&quot;&gt;&lt;/style&gt;</code></p>
<p>一般写在<code>&lt;head&gt;&lt;/head&gt;</code>标签内。可以通过一条语句操作多个标签或类，但是仅限本页面内</p>
<p>3.引用式样式表（外联样式）:<code>&lt;link href=&quot;css文件路径&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</code></p>
<p>​    rel=”stylesheet” 固定值，表示样式表</p>
<p>​    type=”text/css” 固定值，表示css类型</p>
<p>​    href表示css文件位置</p>
<p>(能用引用式样式表的地方就尽量用引用式)<br>一般写在<code>&lt;head&gt;&lt;/head&gt;</code>标签内。(多个HTML文件可以引用一个CSS样式表文件) </p>
<p>优点:占用空间资源少，修改方便，只要修改CSS文件就可以修改多个HTML页面的属性，适合不同页面进行样式复用</p>
<p>CSS注释写法:<code>/* */</code>   HTML注释写法:<code>&lt;!--  --&gt;</code></p>
<p>当三种样式表操作同一元素时，优先级依次为:行内样式表，嵌入式样式表，引用式样式表。 即后出现的先应用。引用式样式表一般放在嵌入式样式表的前面</p>
<h1 id="书写规则"><a href="#书写规则" class="headerlink" title="书写规则"></a>书写规则</h1><p>不要忘记每条属性的“;”结尾<br>如果缺少符号或者书写错误则样式表失效<br>需要单位的值要加上单位，例如:px(像素单位)</p>
<h1 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h1><p>选择器：指定CSS样式作用在哪些HTML标签上</p>
<p>1.标签选择器：HTML标签又名html元素，就是以HTML标签名作为选择器名称。</p>
<p>作用：选择CSS样式代码，对应标签名的标签上。</p>
<p>格式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">标签名｛</span><br><span class="line"></span><br><span class="line"><span class="comment">/*CSS样式代码*/</span></span><br><span class="line"></span><br><span class="line">｝</span><br></pre></td></tr></table></figure>

<p>适用范围：适用于将相同样式，作用在多个同名标签上</p>
<p>2.类选择器：以HTML的类名（class属性值）作为选择器名称</p>
<p>每个HTML标签都有一个class属性，class属性即为类名。</p>
<p>作用：选择CSS样式代码作用于对应类名的HTML标签上。</p>
<p>格式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.类名｛</span><br><span class="line"></span><br><span class="line"><span class="comment">/*CSS样式代码*/</span></span><br><span class="line"></span><br><span class="line">｝</span><br></pre></td></tr></table></figure>

<p>使用范围：适用于将样式一次作用在相同类名的标签上（即使标签名不同）。</p>
<p>3.id选择器：以HTML的id（id属性值）作为选择器名称</p>
<p>每个HTML标签都有一个id属性，这个id属性值必须在本页面是唯一的</p>
<p>作用：选择CSS样式代码作用于某个规定id值的html标签上</p>
<p>格式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#id</span>值｛</span><br><span class="line"></span><br><span class="line"><span class="comment">/*CSS样式代码*/</span></span><br><span class="line"></span><br><span class="line">｝</span><br></pre></td></tr></table></figure>

<p>适用范围：适用于将样式作用某个标签上（更有针对性）</p>
<p>4.属性选择器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a[href&#x3D;&quot;segmentfault.com&quot;]&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5.伪类选择器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">:hover&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6.伪元素选择器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">::before&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7.通配选择器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>所有 CSS 的选择符由上述 7 种基础的选择器或者组合而成，组合的方式有 3 种：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">后代选择符： </span><br><span class="line"><span class="selector-class">.father</span> <span class="selector-class">.child</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">子选择符： </span><br><span class="line"><span class="selector-class">.father</span> &gt; <span class="selector-class">.child</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">相邻选择符: </span><br><span class="line">.bro1 + .bro2&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h1 id="CSS样式的优先级"><a href="#CSS样式的优先级" class="headerlink" title="CSS样式的优先级"></a>CSS样式的优先级</h1><h2 id="CSS-的继承性"><a href="#CSS-的继承性" class="headerlink" title="CSS 的继承性"></a>CSS 的继承性</h2><p>1.最近的祖先样式比其他祖先样式优先级高</p>
<p>2.”直接样式”比”祖先样式”优先级高</p>
<p>（总结就是看最近的元素的样式）</p>
<h2 id="选择器的优先级"><a href="#选择器的优先级" class="headerlink" title="选择器的优先级"></a>选择器的优先级</h2><p>3.优先级关系：内联样式 &gt; ID 选择器 &gt; 类选择器 = 属性选择器 = 伪类选择器 &gt; 标签选择器 = 伪元素选择器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; HTML</span><br><span class="line">&lt;div class&#x3D;&quot;content-class&quot; id&#x3D;&quot;content-id&quot; style&#x3D;&quot;color: black&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; CSS</span><br><span class="line">#content-id &#123;</span><br><span class="line">    color: red;</span><br><span class="line">&#125;</span><br><span class="line">.content-class &#123;</span><br><span class="line">    color: blue;</span><br><span class="line">&#125;</span><br><span class="line">div &#123;</span><br><span class="line">    color: grey;</span><br><span class="line">&#125;</span><br><span class="line">最终的 color 为 black，因为内联样式比其他选择器的优先级高</span><br></pre></td></tr></table></figure>

<p>4.计算选择符中 ID 选择器的个数（a），计算选择符中类选择器、属性选择器以及伪类选择器的个数之和（b），计算选择符中标签选择器和伪元素选择器的个数之和（c）。按 a、b、c 的顺序依次比较大小，大的则优先级高，相等则比较下一个。若最后两个的选择符中 a、b、c 都相等，则按照”就近原则”来判断</p>
<p>如果外部样式表和内部样式表中的样式发生冲突会出现什么情况呢？这与样式表在 HTML 文件中所处的位置有关。样式被应用的位置越在下面则优先级越高，其实这仍然可以用规则 4 来解释</p>
<p>5.属性后插有 <strong>!important</strong> 的属性拥有最高优先级。若同时插有 <strong>!important</strong>，则再利用规则 3、4 判断优先级</p>
<h1 id="px、rpx、em、rem"><a href="#px、rpx、em、rem" class="headerlink" title="px、rpx、em、rem"></a>px、rpx、em、rem</h1><p>PX实际上就是像素，用PX设置字体大小时，比较稳定和精确。但是这种方法存在一个问题，当用户在浏览器中浏览我们制作的Web页面时，如果改变了浏览器的缩放，这时会使用我们的Web页面布局被打破。</p>
<p>rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。如在 iPhone6 上，屏幕宽度为375px，共有750个物理像素，则750rpx = 375px = 750物理像素，1rpx = 0.5px = 1物理像素</p>
<p>EM就是根据基准来缩放字体的大小。EM实质是一个相对值，而非具体的数值。这种技术需要一个参考点，em是相对于父元素的字体属性而计算的，一般都是以<code>&lt;body&gt;</code>的“font-size”为基准。em指字体高，任意浏览器的默认字体高都是16px。其他比如WordPress官方主题Twenntytwelve的基准就是14px=1em。</p>
<p>EM是相对于其父元素来设置字体大小的，这样就会存在一个问题，进行任何元素设置，都有可能需要知道他父元素的大小。而Rem是相对于根元素<code>&lt;html&gt;</code>，这样就意味着，我们只需要在根元素确定一个参考值。</p>
<p>除了IE6-IE8r，其它的浏览器都支持em和rem属性，px是所有浏览器都支持。<br>因此为了浏览器的兼容性，可“px”和“rem”一起使用，用”px”来实现IE6-8下的效果，然后使用“Rem”来实现代浏览器的效果。</p>
<h1 id="CSS样式"><a href="#CSS样式" class="headerlink" title="CSS样式"></a>CSS样式</h1><h2 id="字体属性：-font"><a href="#字体属性：-font" class="headerlink" title="字体属性：(font)"></a>字体属性：(font)</h2><p>样式：</p>
<p>​    color : #999999;   文字颜色</p>
<p>​    font-family : sans-serif;   字体类型  “Courier New”, Courier, monospace, “Times New Roman”, Times, serif, Arial, Helvetica, sans-serif, Verdana</p>
<p>​    font-size:  字体大小 inherit| medium| large| larger| x-large| xx-large| small| smaller| x-small| xx-small |数值  单位：pt，px</p>
<p>​    font-weight:  字体粗细 bold,bolder; (文字粗体）   lighter;(细体) normal;(正常)  100-900</p>
<p>​    font-style:  字体风格  itelic; (文字斜体）  normal;(正常) oblique;(偏斜体)   inherit(继承)</p>
<p>​    letter-spacing :  字间距离  数值|inherit|normal</p>
<p>​    word-spacing: 单词间距  数值|inherit|normal</p>
<p>​    line-height :  设置行高   normal;(正常)   inherit(继承)  数值 单位：PX、PD、EM  </p>
<p>​    text-shadow: 阴影颜色 {16位色值}</p>
<p>​    font-variant: 字体变形  {inherit|normal|small-cps（小字体，小型大写字母） }</p>
<p>​    font-size-adjust:字体变形 {inherit|none}</p>
<p>​    font-stretch:字体 {condensed|expanded|extra-condensed|extra-expanded|inherit|narrower|normal| semi-condensed|semi-expanded|ultra-condensed|ultra-expanded|wider}</p>
<p>修饰：inherit|none|underline|overline|line-through|blink</p>
<p>​    text-decoration:line-through; 加删除线</p>
<p>​    text-decoration: overline; 加顶线（上划线）</p>
<p>​    text-decoration:underline; 加下划线</p>
<p>​    text-decoration:none; 删除链接下划线</p>
<p>​    text-decoration:blink; 闪烁</p>
<p>大小写：</p>
<p>text-transform:inherit|none|capitalize|uppercase|lowercase</p>
<p>​    text-transform : capitalize; 首字大写</p>
<p>​    text-transform : uppercase; 英文大写</p>
<p>​    text-transform : lowercase; 英文小写</p>
<h2 id="背景属性：-background"><a href="#背景属性：-background" class="headerlink" title="背景属性： (background)"></a>背景属性： (background)</h2><p>色彩：</p>
<p>​    background-color:#F5E2EC; 背景颜色  </p>
<p>两种方式：</p>
<p>​    ①英文单词</p>
<p>​    ②颜色代码  格式：#红绿蓝，每一个颜色用两个16进制位数表示  例如：#ff1100 红色ff 绿色11 蓝色00 红色颜色最重，绿色其次，没有蓝色  （数值代表每个颜色的色重）</p>
<p>​    background:transparent; 透视背景</p>
<p>图片：</p>
<p>​    background-image : url(/image/bg.gif); 背景图片  url(URL)|none</p>
<p>重复： inherit|no-repeat|repeat|repeat-x|repeat-y</p>
<p>​    background-repeat : repeat; 重复排列-网页默认</p>
<p>​    background-repeat : no-repeat; 不重复排列</p>
<p>​    background-repeat : repeat-x; 在x轴重复排列</p>
<p>​    background-repeat : repeat-y; 在y轴重复排列</p>
<p>滚动：</p>
<p>​    background-attachment : fixed; 浮水印固定背景   scroll;(滚动)</p>
<p>位置：</p>
<p>​    background-position : 90% 90%; 背景图片x与y轴的位置</p>
<p>​    background-position : top; 向上对齐</p>
<p>​    background-position : buttom; 向下对齐</p>
<p>​    background-position : left; 向左对齐</p>
<p>​    background-position : right; 向右对齐</p>
<p>​    background-position : center; 居中对齐</p>
<p>简写：  背影样式 {background:背景颜色|背景图象|背景重复|背景附件|背景位置}</p>
<p>例： {background:#000 url(..) repeat fixed left top;}</p>
<h2 id="区块属性：-Block"><a href="#区块属性：-Block" class="headerlink" title="区块属性： (Block)"></a>区块属性： (Block)</h2><p>排列方式：</p>
<p>​    text-align:right; 文字右对齐</p>
<p>​    text-align:left; 文字左对齐</p>
<p>​    text-align:center; 文字居中对齐</p>
<p>​    text-align:justify; 文字分散对齐（两端对齐）</p>
<p>​    vertical-align:baseline; 基线</p>
<p>​    vertical-align:top; 垂直向上对齐</p>
<p>​    vertical-align:bottom; 垂直向下对齐</p>
<p>​    vertical-align:middle; 垂直居中对齐</p>
<p>​    vertical-align:text-top; 文字垂直向上对齐</p>
<p>​    vertical-align:text-bottom; 文字垂直向下对齐</p>
<p>​    vertical-align:sub; 下标字</p>
<p>​    vertical-align:super; 上标字</p>
<h2 id="显示属性：（display）"><a href="#显示属性：（display）" class="headerlink" title="显示属性：（display）"></a>显示属性：（display）</h2><p>display属性可以使得元素在行内元素和块元素之间相互转换</p>
<p>格式：  选择器{display:属性值 }</p>
<p>属性值：block：此元素显示为块元素（块元素默认的display属性值）</p>
<p>​    inline：此元素显示为行内元素（行内元素默认的display属性值）</p>
<p>​    none：此元素将被隐藏，不显示，也不占用页面空间</p>
<p>display: 显示  {block;}(块) inline;(内嵌) list-item;(列表项) run-in;(追加部分) compact;(紧凑) marker;(标记) table; inline-table; table-raw-group; table-header-group; table-footer-group; table-raw; table-column-group; table-column; table-cell; table-caption;(表格标题)</p>
<p>​    text-indent: 缩进，段首空格 { 数值px; inherit}</p>
<p>​    white-space: 空格；控制空白  pre;(保留) nowrap;(不换行) normal</p>
<p>​    writing-mode: 书写方式 {lr-tb（从左到右，从上到下）|tb-rl（从上到下，从右到左）}</p>
<p>​    visibility: 是否可见 inherit; visible; hidden;collapse</p>
<p>即使不可见的元素也会占据页面上的空间。使用 “display” 属性来创建不占据页面空间的不可见元素</p>
<p>​    overflow:  当内容溢出元素框时发生的事情</p>
<p>​         visible:默认值。内容不会被修剪，会呈现在元素框之外。</p>
<p>​         hidden:内容会被修剪，并且其余内容是不可见的。</p>
<p>​         scroll:内容会被修剪，但是浏览器会显示滚动条以便查看其余的内容。</p>
<p>​        auto:如果内容被修剪，则浏览器会显示滚动条以便查看其余的内容</p>
<p>​    clip:  (裁切)剪裁绝对定位元素:这个属性用于定义一个剪裁矩形。对于一个绝对定义元素，在这个矩形内的内容才可见。出了这个剪裁区域的内容会根据 overflow 的值来处理。剪裁区域可能比元素的内容区大，也可能比内容区小</p>
<p>​        rect (<em>top</em>, <em>right</em>, <em>bottom</em>, <em>left</em>)</p>
<p>​        auto:默认值。不应用任何剪裁</p>
<h2 id="方框属性：-Box"><a href="#方框属性：-Box" class="headerlink" title="方框属性： (Box)"></a>方框属性： (Box)</h2><p>CSS盒子模型：所有的HTML元素，都可以看作一个四边形，即一个盒子。</p>
<p>用CSS来设置元素盒子的内边距（padding）、边框(border)和外边距(margin)的样式的方式相当于设置盒子的样式，我们称之为盒子模型。</p>
<p>边框：（HTML元素盒子的框体）简写：<code>border:1px solid red;</code></p>
<p>宽度：宽度值： thin|medium|thick|数值   100vh  100%  33rem  3em  window.screen.width </p>
<p>​    width:长度|百分比| auto</p>
<p>​    border-top-width </p>
<p>​    border-right-width </p>
<p>​    border-bottom-width </p>
<p>​    border-left-width</p>
<p>高度：</p>
<p>​    height:数值|auto</p>
<p>颜色：</p>
<p>​    border-color:数值 数值 数值 数值；　数值：分别代表top、right、bottom、left颜色值</p>
<p>风格： </p>
<p>​    border-style:none|hidden|inherit|dashed|solid|double|inset|outset|ridge|groove</p>
<p>漂浮：</p>
<p>​    float:left|right|none</p>
<p>​    通常默认的排版方式，将页面的元素从上到下一一罗列，而实际开发中，需要左右方式进行排版，所以需要使用到浮动属性：float</p>
<p>格式： 选择器{float：属性值；}</p>
<p>常用属性值：none：元素不浮动（默认值）</p>
<p>​    left：元素向左浮动</p>
<p>​    right：元素向右浮动</p>
<p>因为元素设置浮动属性后，会脱离原有文档流（会脱离原有的板式），从而会影响其他元素的样式，所以设置浮动以后，页面样式需要重新调整。</p>
<p>清除：规定元素的哪一侧不允许其他浮动元素</p>
<p>​    clear:none|left|right|both</p>
<p>注：这个规则只能影响使用清除的元素本身，不能影响其他元素。这个元素与float对应</p>
<p>外边距，边界留白：HTML元素边框到其他元素边框的距离</p>
<p>​    margin-top:10px; 上边界</p>
<p>​    margin-right:10px; 右边界值</p>
<p>​    margin-bottom:10px; 下边界值</p>
<p>​    margin-left:10px; 左边界值</p>
<p>通用性设置：margin: 10px;</p>
<p>内边距，补白：HTML元素里的内容体到HTML元素边框的距离</p>
<p>​    padding-top:10px; 上边框留空白</p>
<p>​    padding-right:10px; 右边框留空白</p>
<p>​    padding-bottom:10px; 下边框留空白</p>
<p>​    padding-left:10px; 左边框留空白</p>
<p>通用性设置：padding: 10px;</p>
<h2 id="边框属性：-Border"><a href="#边框属性：-Border" class="headerlink" title="边框属性： (Border)"></a>边框属性： (Border)</h2><p>所有的HTML标签都有边框，默认边框不可见</p>
<p>简写：    格式：宽度 样式 颜色</p>
<p>​    border：width style color; </p>
<p>​    border-top : 1px solid #6699cc; 上框线</p>
<p>​    border-bottom : 1px solid #6699cc; 下框线</p>
<p>​    border-left : 1px solid #6699cc; 左框线</p>
<p>​    border-right : 1px solid #6699cc; 右框线</p>
<p>也可以使用常规的方式 如下:</p>
<p>​    border-top-color : #369 设置上框线top颜色</p>
<p>​    border-top-width :1px设置上框线top宽度</p>
<p>​    border-top-style : solid设置上框线top样式</p>
<p>其他框线样式：</p>
<p>​    solid 实线框</p>
<p>​    dotted 虚线框（点线）</p>
<p>​    double 双线框</p>
<p>​    groove 立体内凸框 (槽线)</p>
<p>​    ridge 立体浮雕框 (脊状)</p>
<p>​    inset 凹框</p>
<p>​    outset 凸框</p>
<p>width：边框的宽度</p>
<p>height：边框的高度（只是边框，不是字体）</p>
<h2 id="列表属性：-List-style"><a href="#列表属性：-List-style" class="headerlink" title="列表属性： (List-style)"></a>列表属性： (List-style)</h2><p>符号列表： disc|circle|square|decimal|lower-roman|upper-roman|lower-alpha|upper-alpha|none</p>
<p>​    list-style-type:none; 不编号</p>
<p>​    list-style-type:decimal; 阿拉伯数字</p>
<p>​    list-style-type:lower-roman; 小写罗马数字</p>
<p>​    list-style-type:upper-roman; 大写罗马数字</p>
<p>​    list-style-type:lower-alpha; 小写英文字母</p>
<p>​    list-style-type:upper-alpha; 大写英文字母</p>
<p>​    list-style-type:disc; 实心圆形符号</p>
<p>​    list-style-type:circle; 空心圆形符号</p>
<p>​    list-style-type:square; 实心方形符</p>
<p>图像：</p>
<p>​    list-style-image:url(/dot.gif); 图片式符号</p>
<p>位置：</p>
<p>​    list-style-position: outside; 凸排</p>
<p>​    list-style-position:inside; 缩进</p>
<h2 id="定位属性：-Position"><a href="#定位属性：-Position" class="headerlink" title="定位属性： (Position)"></a>定位属性： (Position)</h2><p>这个属性定义建立元素布局所用的定位机制。任何元素都可以定位，不过绝对或固定元素会生成一个块级框，而不论该元素本身是什么类型。相对定位元素会相对于它在正常流中的默认位置偏移。</p>
<p>​    position: absolute;   生成绝对定位的元素，相对于 static 定位以外的第一个父元素进行定位。元素的位置通过 “left”, “top”, “right” 以及 “bottom” 属性进行规定。</p>
<p>​    position: fixed;  生成绝对定位的元素，相对于浏览器窗口进行定位。元素的位置通过 “left”, “top”, “right” 以及 “bottom” 属性进行规定</p>
<p>​    position:relative; 生成相对定位的元素，相对于其正常位置进行定位。因此，”left:20” 会向元素的 LEFT 位置添加 20 像素</p>
<p>​    position:static; 默认值。没有定位，元素出现在正常的流中（忽略 top, bottom, left, right 或者 z-index 声明）</p>
<p>​    position:inherit;规定应该从父元素继承 position 属性的值</p>
<p>Z-index仅能在定位元素上奏效，可被用于将在一个元素放置于另一元素之后,拥有更高堆叠顺序的元素总是会处于堆叠顺序较低的元素的前面。</p>
<h2 id="连接属性：（a）"><a href="#连接属性：（a）" class="headerlink" title="连接属性：（a）"></a>连接属性：（a）</h2><p>a /<em>所有超链接</em>/</p>
<p>​    a:link 超链接文字格式</p>
<p>​    a:visited 浏览过的链接文字格式</p>
<p>​    a:active 按下链接的格式</p>
<p>​    a:hover 鼠标转到链接</p>
<p>鼠标光标样式： hand|crosshair|text|wait|move|help|e-resize|nw-resize|w-resize|s-resize|se-resize|sw-resize</p>
<p>​    链接手指 cursor: hand</p>
<p>​    十字体 cursor:crosshair</p>
<p>​    箭头朝下 cursor:s-resize</p>
<p>​    十字箭头 cursor:move</p>
<p>​    箭头朝右 cursor:move</p>
<p>​    加一问号 cursor:help</p>
<p>​    箭头朝左 cursor:w-resize</p>
<p>​    箭头朝上 cursor:n-resize</p>
<p>​    箭头朝右上 cursor:ne-resize</p>
<p>​    箭头朝左上 cursor:nw-resize</p>
<p>​    文字I型 cursor:text</p>
<p>​    箭头斜右下 cursor:se-resize</p>
<p>​    箭头斜左下 cursor:sw-resize</p>
<p>​    漏斗 cursor:wait</p>
<p>​    光标图案(IE6) p {cursor:url(“光标文件名.cur”),text;}</p>
<h2 id="表单属性"><a href="#表单属性" class="headerlink" title="表单属性"></a>表单属性</h2><p>文字方块</p>
<p>按钮</p>
<p>复选框</p>
<p>选择钮</p>
<p>多行文字方块</p>
<p>下拉式菜单 选项1选项2</p>
<h2 id="伪元素-after和-before"><a href="#伪元素-after和-before" class="headerlink" title="伪元素::after和::before"></a>伪元素::after和::before</h2><p>::before和::after匹配一个虚拟元素，主要被用于为当前元素增加装饰性内容的。它显示的内容是其自身的“<code>content</code>”属性，默认是内联元素。</p>
<h2 id="兼容问题-important"><a href="#兼容问题-important" class="headerlink" title="兼容问题!important"></a>兼容问题!important</h2><p>​    CSS中的!important一般都是用于对低版本的除了iE 6 ，用来做hack的，后面缀上了!important的css语句，让浏览器首选执行这个语句，因为css有继承的样式，加上!importanrt可以覆盖父级的样式。 IE6不认识它的，IE7和别的浏览器中可以用，用来处理浏览器的兼容性。</p>
<h2 id="让两个组件变为一行"><a href="#让两个组件变为一行" class="headerlink" title="让两个组件变为一行"></a>让两个组件变为一行</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div align&#x3D;&quot;left&quot; style&#x3D;&quot;float:left&quot;&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;button&quot; id&#x3D;&quot;leftButton&quot; οnclick&#x3D;&quot;login()&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div align&#x3D;&quot;right&quot;&gt;</span><br><span class="line">    &lt;input type&#x3D;&quot;button&quot; id&#x3D;&quot;rightButton&quot; οnclick&#x3D;&quot;cancle()&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>



<h1 id="vue的样式"><a href="#vue的样式" class="headerlink" title="vue的样式"></a>vue的样式</h1><h3 id="lt-style-scoped-gt"><a href="#lt-style-scoped-gt" class="headerlink" title="&lt;style scoped&gt;"></a><code>&lt;style scoped&gt;</code></h3><p>在vue中，我们为了避免父组件的样式影响到子组件的样式，会在style中加<code>&lt;style scoped&gt;</code>，这样父组件中如果有跟子组件相同的class名称或者使用选择器的时候，就不会影响到子组件的样式。</p>
<h3 id="deep-gt-gt-gt"><a href="#deep-gt-gt-gt" class="headerlink" title="/deep/    &gt;&gt;&gt;"></a>/deep/    &gt;&gt;&gt;</h3><p>vue组件中，在style设置为scoped的时候，里面在写样式对子组件是不生效的，如果想让某些样式对所有子组件都生效，可以使用 /deep/ 深度选择器</p>
<p>把 /deep/ 换成 &gt;&gt;&gt;，也可以达到同样的效果</p>
<h3 id="lang-”scss”"><a href="#lang-”scss”" class="headerlink" title="lang=”scss”"></a>lang=”scss”</h3><p>SCSS是一种CSS预处理语言。定义了一种新的专门的编程语言，编译后形成正常的css文件，为css增加一些编程特性，无需考虑浏览器的兼容性（完全兼容css3），让css更加简洁、适应性更强，可读性更佳，更易于代码的维护等诸多好处。CSS预处理语言有SCSS (SASS) 和LESS、POSTCSS</p>
<p>SCSS和SASS有什么区别：</p>
<p>· 文件扩展名不同，文件后缀分别是“.scss”和“.sass”</p>
<p>· sass是以严格缩进语法规则来编写代码的，不包括大括号和分号，而scss的语法和css书写语法类似；</p>
<p>· scss是sass3.0引入的语法，可以理解scss是sass的一个升级版本，是一种SCSS-like语言，弥补了sass和css之间的鸿沟；</p>
<p>注释分为三种：/* */css中显示，//css中不显示，/<em>重要注释!</em>/压缩不会被删掉</p>
<p>@import 命令导入外部sass、scss、css文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt; style lang &#x3D; &quot;scss&quot; &gt;</span><br><span class="line">@import &#39;.&#x2F;test.scss&#39; ; &#x2F;&#x2F;导入外部scss文件</span><br><span class="line">.myText &#123;</span><br><span class="line">   border : 1px solid red ;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F; style &gt;</span><br></pre></td></tr></table></figure>

<p>声明变量：语法是：$+变量名+：+变量值；</p>
<p><code>$color : red ; //声明变量 $color</code></p>
<p>默认变量只需要在变量值后加上 !default , 用来设置默认值 ，对默认变量进行重新声明可以实现覆盖默认值；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$color : red !default ; &#x2F;&#x2F;声明默认变量 $color</span><br><span class="line">$color : purple ; &#x2F;&#x2F;根据需求覆盖默认变量</span><br><span class="line">.father01 &#123;</span><br><span class="line">   color : $color ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>区分全局变量和局部变量</p>
<p>全局变量是元素外声明的变量，局部变量是在元素里声明的变量，重复声明时局部变量会覆盖全局变量；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$height : 200px ; &#x2F;&#x2F;全局变量声明不在大花括号内</span><br><span class="line">$bgcolor : blue ;</span><br><span class="line">body &#123;</span><br><span class="line">   .father01 &#123;  &#x2F;&#x2F;嵌套</span><br><span class="line">      width : $width ;</span><br><span class="line">      height : $height ;</span><br><span class="line">      $border : 1px solid red ; &#x2F;&#x2F;局部变量是声明在元素内的</span><br><span class="line">      border : $border ;</span><br><span class="line">      $bgcolor : purple ; &#x2F;&#x2F;全局变量和局部变量名一致时，调用局部变量进行覆盖</span><br><span class="line">      background-color : $bgcolor ;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>局部变量值后加上 !global 关键词可以使得局部变量变成全局变量；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">   .father01 &#123;</span><br><span class="line">      width : 200px ;</span><br><span class="line">      height : 200px ;</span><br><span class="line">      $border : 1px solid red !global; &#x2F;&#x2F;使用global关键词将$border变为了全局变量</span><br><span class="line">      border : $border ;</span><br><span class="line">   &#125;</span><br><span class="line">   .father02 &#123;</span><br><span class="line">      width : 300px ;</span><br><span class="line">      height : 300px ;</span><br><span class="line">      border : $border ; &#x2F;&#x2F;使用全局变量</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>·变量嵌套引用：即字符串插值，需要使用 #{} 来进行包裹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$left : left ;</span><br><span class="line">.father02 &#123;</span><br><span class="line">   width : 300px ;</span><br><span class="line">   height : 300px ;</span><br><span class="line">   border : $border ; &#x2F;&#x2F;使用全局变量</span><br><span class="line">border- #&#123;$left&#125; : 2px solid purple ; &#x2F;&#x2F;使用字符串插值之前必须先声明</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>·变量计算</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$left : left ;</span><br><span class="line">.father02 &#123;</span><br><span class="line">   width : 300px ;</span><br><span class="line">   height : 300px ;</span><br><span class="line">   border : $border ; &#x2F;&#x2F;使用全局变量</span><br><span class="line">border- #&#123;$left&#125; : 2px solid purple ; &#x2F;&#x2F;使用字符串插值之前必须先声明</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>·嵌套</p>
<p>  选择器嵌套不多说了</p>
<p>属性嵌套（有相同属性前缀）如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">border:&#123;</span><br><span class="line">   color : red ;</span><br><span class="line">   width : 5px ;</span><br><span class="line">   style : solid ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在嵌套时候可以使用 &amp; 来引用父元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.container &#123;</span><br><span class="line">   &amp; &gt; p &#123;   &#x2F;&#x2F;可以编译成CSS的 .container&gt;p &#123;&#125; 效果</span><br><span class="line">      color : purple ;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>·继承</p>
<p> 继承 .class 使用 @extend</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.container &#123;</span><br><span class="line">   color : purple ;</span><br><span class="line">   border : 2px dashed purple ;</span><br><span class="line">&#125;</span><br><span class="line">.myText &#123;</span><br><span class="line">   @extend .container; &#x2F;&#x2F;这里将继承.container类的所有样式</span><br><span class="line">   font-size : 22px ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>·SCSS占位符 %</p>
<p>使用% 声明的代码块，如果不被@extend调用的话就不会被编译。编译出来的代码会将相同的代码合并在一起，代码变得十分简洁。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">%m5 &#123; background-color : lightblue ;&#125;</span><br><span class="line">.P1 &#123; @extend %m5 ; &#125;</span><br></pre></td></tr></table></figure>

<p>·重复代码块，使用混合@mixin命令定义，以及使用@include调用该mixin</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@mixin normalStyle &#123;</span><br><span class="line">   &#x2F;&#x2F;使用@mixin命令定义可重复使用的代码块</span><br><span class="line">   width : 300px ;</span><br><span class="line">   height : 100px ;</span><br><span class="line">   color : black ;</span><br><span class="line">   background-color : lightblue ;</span><br><span class="line">&#125;</span><br><span class="line">.container &#123;</span><br><span class="line">   @include normalStyle ;</span><br><span class="line">   &#x2F;&#x2F;使用@include 命令引用@mixin定义的代码块</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p> 在使用@mixin和@include时，传入参数和默认值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@mixin normalStyle ( $width , $height , $color , $defaultValue : orange ) &#123;</span><br><span class="line">   width : $width ;</span><br><span class="line">   height : $height ;</span><br><span class="line">   color : $color ;</span><br><span class="line">   background-color : $defaultValue ;</span><br><span class="line">&#125;</span><br><span class="line">.container &#123;</span><br><span class="line">   @include normalStyle ( 300px , 100px , green , lightgray );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>SCSS使用编程式方法 </p>
<p>·条件语句 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.container &#123;</span><br><span class="line">   p &#123;</span><br><span class="line">      @if 1 + 1 &lt; 3 &#123;</span><br><span class="line">         border : 1px solid blue ;</span><br><span class="line">      &#125; @else &#123;</span><br><span class="line">         border : 1 ps dashed palevioletred ;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>·SCSS中的三种循环</p>
<p>1.for循环</p>
<p>在sass中的@for循环有两种方式：</p>
<p>①@for $i from <start> through <end></p>
<p>②@for $i from <start> to <end></p>
<p>其中$i表示变量，start表示开始值，end表示结束值；</p>
<p>through表示包括end这个数值；to表示不包括end这个数值；</p>
<p>2.while循环</p>
<p>只要@while后面的条件为true就会执行，直到表达式值为false时停止循环；</p>
<p>3.each  in循环</p>
<p>就是去遍历一个列表，然后从列表中取出对用值；他的指令形式为：@each $var in <list>($var为变量值，list为sassscript表达式）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;for 循环</span><br><span class="line">@for $i from 1 to 5 &#123;</span><br><span class="line">   .item- #&#123;$i&#125; &#123;</span><br><span class="line">      border : #&#123;$i&#125; px solid ;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;while 循环</span><br><span class="line">$m : 8 ;</span><br><span class="line">@while $m &gt; 0 &#123;</span><br><span class="line">   .items- #&#123;$m&#125; &#123;</span><br><span class="line">      width : 2em * $m ;</span><br><span class="line">   &#125;</span><br><span class="line">   $m : $m - 2 ;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;这里可以对$m进行运算 让它每次都减去2</span><br><span class="line">&#x2F;&#x2F;each 语法</span><br><span class="line">@each $item in class01 , class02 &#123; &#x2F;&#x2F;$item就是遍历了in关键词后面的类名列</span><br><span class="line">   . #&#123;$item&#125; &#123;</span><br><span class="line">      background-color : purple ;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;会编译成 .class01 , .class02 &#123;background-color:purple;&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>·使用@function 自定义函数及使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@function double ( $sn )&#123; &#x2F;&#x2F;SCSS允许自定义函数</span><br><span class="line">   @return $sn * 2 ;</span><br><span class="line">&#125;</span><br><span class="line">.myText &#123;</span><br><span class="line">   border : 1px solid red ;</span><br><span class="line">   width : double ( 200px ); &#x2F;&#x2F;使用在SCSS中自定义的函数</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>·可以直接使用SCSS内置的颜色函数，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.myText &#123;</span><br><span class="line">   color : black ;</span><br><span class="line">   &amp; :hover &#123;</span><br><span class="line">      &#x2F;&#x2F;以下的lighten()、darken()等是SCSS内置的颜色函数</span><br><span class="line">      color : lighten ( #cc3 , 10% ); &#x2F;&#x2F; #d6d65c颜色变浅</span><br><span class="line">      color : darken ( #cc3 , 10% ); &#x2F;&#x2F; #a3a329颜色加深</span><br><span class="line">      color : grayscale ( #cc3 ); &#x2F;&#x2F; #d6d65c</span><br><span class="line">      color : complement ( #cc3 ); &#x2F;&#x2F; #a3a329</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>一、IE边框若显若无，须注意，定是高度设置已忘记；<br>二、浮动产生有缘故，若要父层包含住，紧跟浮动要清除，容器自然显其中；<br>三、三像素文本慢移不必慌，高度设置帮你忙；<br>四、兼容各个浏览须注意，默认设置行高可能是隐患；<br>五、独立清除浮动须铭记，行高设无，高设零，设计效果兼浏览；<br>六、学布局须思路，路随布局原理自然直，轻松驾驭html，流水布局少hack，代码清爽，兼容好，友好引擎喜欢迎。<br>七、所有标签皆有源，只是默认各不同，span是无极，无极生两仪—内联和块级，img较特殊，但也遵法理，其他只是改造各不同，一个*号全归原，层叠样式理须多练习，万物皆规律。<br>八、图片链接排版须小心，图片链接文字链接若对齐，padding和vertical-align:middle要设定，虽差微细倒无妨。<br>九、IE浮动双边距，请用display：inline拘。</p>
<p>css三大特性</p>
<p>层叠性：css样式冲突采取的原则(后者覆盖前者)</p>
<p>继承性：对于部分属性样式会有天生的继承</p>
<p>优先级：选择器优先级算法</p>
<p>选择器</p>
<p>在讲这三个特性之前我们需要来全面了解下选择器。</p>
<p>种类</p>
<p>下面我将选择进行划分为三大部分，对于基本选择器我就不说了，主要讲下伪类选择器，组合选择器及它们各自的使用场景。</p>
<p>基本选择器</p>
<p>类名：.box</p>
<p>标签: div</p>
<p>属性: input[type=“eamil”] | a[href*=“<a href="http://www.beige.world”]">http://www.beige.world”]</a></p>
<p>ID: #box</p>
<p>伪类选择器</p>
<p>结构伪类: :nth-child(n) | :nth-of-type(n) | :hover</p>
<p>伪元素: ::before | ::after</p>
<p>组合选择器</p>
<p>相邻兄弟 A + B</p>
<p>普通兄弟 A ~ B</p>
<p>子选择器 A &gt; B</p>
<p>后代选择器 A B</p>
<p>基本选择器</p>
<p>算了还是讲下属性选择器吧🤔，这个选择器我在项目开发中还是用到过的</p>
<p>直接看例子：</p>
<p>/* 匹配包含title属性的a标签 =&gt; */</p>
<p>a[title] {color: purple;}</p>
<p>/* 存在href属性并且属性值为”<a target="_blank" rel="noopener" href="http://beige.world&quot;的标签*/">http://beige.world&quot;的标签*/</a></p>
<p>/* */</p>
<p>a[href=“<a href="http://beige.world”]">http://beige.world”]</a> {color: green;}</p>
<p>/* 存在href属性并且属性值包含”baidu”的标签*/</p>
<p>/*</p>
<p>*/</p>
<p>a[href*=“baidu”] {font-size: 20px;}</p>
<p>/* 存在id属性并且属性值结尾是”-wrapper”的</p>
<p>标签 */</p>
<p>/*</p>
<p>*/</p>
<p>div[id$=”-wrapper”] {display: flex;}</p>
<p>/* 存在class属性并且属性值包含以空格分隔的”logo”的</p>
<p>元素 */</p>
<p>/*</p>
<p>*/</p>
<p>div[class~=“logo”] { padding: 2px; }</p>
<p>复制代码</p>
<p>伪类选择器</p>
<p>结构伪类</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>先讲这两比较作用类似的：nth-child(n) | nth-of-type(n)</p>
<p>结构</p>
<p>1</p>
<p>a1</p>
<p>b1</p>
<p>a2</p>
<p>b2</p>
<p>3</p>
<p>4</p>
<p>5</p>
<p>复制代码</p>
<p>CSS</p>
<p>// 第一个li =&gt;</p>
<p>1</p>
<p>ul li:first-child { background-color: lightseagreen;}</p>
<p>// 最后一个li =&gt;</p>
<p>5</p>
<p>ul li:last-child { background-color: lightcoral;}</p>
<p>// 第三个li =&gt;</p>
<p>3</p>
<p>ul li:nth-child(3) { background-color: aqua; }</p>
<p>// 第二个li下的第一个div(不是div标签的都不算) =&gt;</p>
<p>b1</p>
<p>ul li:nth-child(2) &gt; div:nth-of-type(1) {background-color: red}</p>
<p>复制代码</p>
<p>它俩的区别</p>
<p>nth-child 选择父元素里面的第几个子元素，不管是第几个类型</p>
<p>nth-of-type 选择指定类型的元素</p>
<p>下面讲讲nth-child()括号中的公式，这个算是这个选择器的亮点了。</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>注意⚠：本质上就是选中第几个子元素</p>
<p>n 可以是数字、关键字、公式</p>
<p>n 如果是数字，就是选中第几个</p>
<p>常见的关键字有 even 偶数、odd 奇数</p>
<p>常见的公式如下(如果 n 是公式，则从 0 开始计算)</p>
<p>但是第 0 个元素或者超出了元素的个数会被忽略</p>
<p>对于这里面的公式平常也用不到太复杂的，我说下我的技巧：nth-child(3n + 3); 这里的n可以看做几个为一组，3可以看做选这组的第几个。</p>
<p>例： nth-child(5n + 3) ：5个为一组，选一组中的第三个。 对于”-“号就表示选择的是前面的。</p>
<p>组合选择器</p>
<p>组合选择器本质上就是通过连接符来对两个选择器进行组合</p>
<p>子选择器 A &gt; B</p>
<p>后代选择器 A B</p>
<p>上面这两我就不说了，相信大家都用烂了。主要说说下面这两个。</p>
<p>相邻兄弟 A + B</p>
<p>普通兄弟 A ~ B</p>
<p>结构</p>
<p>One</p>
<p>Two!</p>
<p>Three</p>
<p>pppp</p>
<p>One2</p>
<p>pppp1</p>
<p>Two2!</p>
<p>pppp2</p>
<p>复制代码</p>
<p>选择器解析</p>
<p>复制代码</p>
<p>好了，在讲完这些选择器之后我们来看看它们的使用场景。</p>
<p>组合选择器可以用于：hover伪类操纵自己包含的子元素及以外的元素。举个例子</p>
<p>元素1</p>
<p>元素2</p>
<p>元素3</p>
<p>元素2</p>
<p>同级元素1</p>
<p>同级元素2</p>
<p>同级元素3</p>
<p>复制代码</p>
<p>#a:hover &gt; #b{…}</p>
<p>#a:hover ~ div{…} // 鼠标停留在a元素的时候让所有同层级元素有某某样式</p>
<p>// 防止选择器层级替换了下面的样式</p>
<p>#a:hover + #c{…} // 鼠标停留在a元素的时候让同层级中的c元素有某某样式</p>
<p>#a:hover + #c &gt; #b{…} // 鼠标停留在a元素的时候让同层级中的c元素下的b元素有某某样式</p>
<p>复制代码</p>
<p>上面这两选择器在做一些特效页的时候应该是会用到的。</p>
<p>综合例子</p>
<p>效果</p>
<p>结构</p>
<p>标题名称</p>
<p>Bei Ge</p>
<p>这里放内容简介，内容简介,这里放内容简介，内容简介,这里放内容简介，内容简介</p>
<p>…</p>
<p>2</p>
<p>3</p>
<p>4</p>
<p>5</p>
<p>复制代码</p>
<p>样式</p>
<p>布局样式</p>
<p>复制代码</p>
<p>定义了一个animation动画</p>
<p>@keyframes textAnimation {<br>/* 0% {<br>transform: translateX(150%);</p>
<p>} */</p>
<p>100% {<br>transform: translateX(0);</p>
<p>}</p>
<p>}</p>
<p>复制代码</p>
<p>悬浮在盒子设置样式</p>
<p>.img-box:hover {<br>transform: scale(1.1);</p>
<p>box-shadow: 2px 2px 13px 3px #ccc;</p>
<p>}</p>
<p>.img-box:hover img {<br>opacity: .5;</p>
<p>}</p>
<p>.img-box:hover .cover h3 {<br>opacity: 1;</p>
<p>}</p>
<p>.img-box:hover p {<br>animation: textAnimation .6s ease-out forwards;</p>
<p>/* forwards让动画停留在最后一帧 */</p>
<p>}</p>
<p>.img-box:hover .cover .handle {<br>bottom: 5px;</p>
<p>}</p>
<p>.enter-box:hover ~ .img-box {<br>background-color: transparent;</p>
<p>color: wheat;</p>
<p>}</p>
<p>.enter-box:hover + .img-box {<br>color: red;</p>
<p>}</p>
<p>复制代码</p>
<p>上面这个例子有些还没有讲，但是相信大家之前也都学过，后文中也会说。主要会说些细节方面的东西。</p>
<p>flex(弹性布局)</p>
<p>transform: translate3D rodate3D</p>
<p>animation(设定动画)</p>
<p>3D or 透视(perspective)</p>
<p>这里需要注意在使用伪类Hover的注意点，在使用他影响子级元素的时候尽量将选择器写全。例：</p>
<p>先看下效果😗</p>
<p>上面的效果相信大家都能写出来，所以我要讲的肯定不是怎么去实现这个效果，我要说下使用Hover时的一些细节。</p>
<p>结构比较简单</p>
<p>flex类名用于布局实现重置和水平居中，box: 绿色盒子;center: 紫色盒子 inner: 橙黄色盒子</p>
<p>复制代码</p>
<p>我们用了一个:hover让鼠标虚浮的时候让盒子变红</p>
<p>.box:hover div {<br>background-color: red;</p>
<p>}</p>
<p>复制代码</p>
<p>这里有一个问题不知道大家想过没有，为什么我这段代码只让center盒子变红了，inner为什么没有变红呢???</p>
<p>展开查看</p>
<p>因为CSS选择器的优先级!复制代码</p>
<p>我们在实现的时候一般都会像下面这样写吧，这个时候使用伪类选择器改变元素样式的时候就要注意选择器优先级的问题了。</p>
<p>.box .center {<br>width: 150px;</p>
<p>height: 150px;</p>
<p>background-color: blueviolet;</p>
<p>}</p>
<p>.box .center .inner {<br>width: 100px;</p>
<p>height: 100px;</p>
<p>background-color: coral;</p>
<p>}</p>
<p>复制代码</p>
<p>这段代码的优先级比 .box .center高，所以他也就只能覆盖它了。</p>
<p>.box:hover div {<br>background-color: red;</p>
<p>}</p>
<p>复制代码</p>
<p>相信我们很多人如果在写鼠标悬浮大盒子让最里面的inner盒子变色的时候，都会这么写吧：</p>
<p>.box:hover .inner {<br>background-color: red;</p>
<p>}</p>
<p>复制代码</p>
<p>有用吗?没用!</p>
<p>注意⚠: 优先级还是没有.box .center .inner高。</p>
<p>层叠性</p>
<p>所谓层叠性是指多种CSS样式的叠加。是浏览器处理冲突的一个能力,如果一个属性通过两个相同选择器设置到同一个元素上，那么这个时候一个属性就会将另一个属性层叠掉</p>
<p>原则：</p>
<p>样式冲突，遵循的原则是就近原则。 那个样式离着结构近，就执行那个样式。</p>
<p>样式不冲突，不会层叠</p>
<p>CSS层叠性最后的执行口诀： 长江后浪推前浪，前浪死在沙滩上。</p>
<p>复制代码</p>
<p>继承性</p>
<p>：子标签会继承父标签的某些样式，如文本颜色和字号。 想要设置一个可继承的属性，只需将它应用于父元素即可。简单的理解就是： 子承父业</p>
<p>CSS继承性口诀： 龙生龙，凤生凤，老鼠生的孩子会打洞</p>
<p>复制代码</p>
<p>我们恰当地使用继承可以简化代码，降低CSS样式的复杂性。比如有很多后代元素都需要某个样式，可以给父级指定一个，这些孩子继承过来就好了。</p>
<p>注意点：在CSS的继承中不仅仅是儿子可以继承, 只要是后代都可以继承</p>
<p>可继承的属性</p>
<p>控制继承</p>
<p>注意点: 对于天生自带的继承属性我们可以控制它是否需要继承</p>
<p>四个属性</p>
<p>inherit: 被应用属性继承父级的该属性(默认就是该值)</p>
<p>initial初始化，把应用属性初始为它默认的样式，并且排除继承的干扰(默认会继承的属性也不在默认继承，而是表现出没有任何设置时候的默认样式)</p>
<p>unset：意思是恢复其原本的继承方式。对color属性而言，就相当于inherit;而对于诸如border这样默认不继承的属性，就相当于initial。</p>
<p>revert: 效果等同于unset且浏览器支持有限，这里不做演示</p>
<p>效果图</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>演示</p>
<p>Default link color</p>
<p>Inherit the link color</p>
<p>Reset the link color</p>
<p>Unset the link color</p>
<p>复制代码</p>
<p>default中的a标签没有写默认为inherit属性，但是使用了浏览器预设样式表：可以理解为浏览器帮我们为写了个style，其优先级自然就高于其父元素了。</p>
<p>inherit中的a标签在行内写了inherit，于是使用其父(或祖父，etc)元素的颜色值，在这里是绿色;</p>
<p>initial中的a标签使用color属性初始值(黑色), 注意不要混淆属性初始值和浏览器样式表指定值，样式预设表是浏览器事先写好的样式，但是我color默认值就是黑色啊。</p>
<p>unset，意思是恢复其原本的继承方式。对color属性而言，就相当于inherit;而对于诸如border这样默认不继承的属性，就相当于initial。</p>
<p>如果我们需要控制元素所有属性的继承使用all属性</p>
<p>.inherit a {<br>all: initial;</p>
<p>/* 将所有的属性都恢复成默认值(天生继承也不再继承) */</p>
<p>/* 行内设置过的除外：你的层级干不过人家 */</p>
<p>}</p>
<p>复制代码</p>
<p>继承的权重是0</p>
<p>这个不难，但是忽略很容易绕晕。其实，我们修改样式，一定要看该标签有没有被选中。</p>
<p>(1) 如果选中了，那么以上面的公式来计权重。谁大听谁的。(2) 如果没有选中，那么权重是0，因为继承的权重为0.</p>
<p>控制继承在我们封装自己的组件的时候是会用到的，我们在封装组件需要沿用样式，有些默认情况下不可继承父元素的属性：box-sizing，这个其实用的就很多。</p>
<p>优先级</p>
<p>要想了解优先级，肯定得了解选择器;但是选择器非常多的，前面列举的是日常开发用的比较多，其他的你可能一辈子都用不到，这里贴出C1~C4的选择器，感兴趣的同学可以看看。</p>
<p>定义CSS样式时，经常出现两个或更多选择器应用在同一元素上，此时，</p>
<p>选择器相同，则执行层叠性(后者覆盖前者)</p>
<p>选择器不同，就会出现优先级的问题。</p>
<p>权重计算公式</p>
<p>关于CSS权重，我们需要一套计算公式来去计算，这个就是 CSS Specificity(特殊性)</p>
<p>标签选择器计算权重公式</p>
<p>继承或者 *0,0,0,0</p>
<p>每个元素(标签选择器)0,0,0,1</p>
<p>每个类，结构伪类(如:hover),属性选择器[type=“number”]0,0,1,0</p>
<p>每个ID0,1,0,0</p>
<p>每个行内样式 style=””1,0,0,0</p>
<p>h1 + p::first-line0,0,0,3</p>
<p>li &gt; a[href*=“beige.world”] &gt; .inline-warning0,0,2,2</p>
<p>每个!important 重要的∞ 无穷大</p>
<p>值从左到右，左面的最大，一级大于一级，数位之间没有进制，级别之间不可超越。</p>
<p>常用的选择器记法：</p>
<p>行内: 1,0,0,0</p>
<p>#id: 0,1,0,0</p>
<p>.class | :hover | :nth-child(): 0,0,1,0 (:hover这种一个冒号叫结构伪类)</p>
<p>::after | ::before | ::first-line: 0,0,0,1 (这种两冒号的叫伪元素，在书写的时候虽然你可以写一个冒号但是浏览器还是给你补上去了，本质上就是两冒号)</p>
<p>权重叠加</p>
<p>我们经常用组合选择器，是有多个基础选择器组合而成，那么此时，就会出现权重叠加。</p>
<p>就是一个简单的加法计算</p>
<p>div ul li ——&gt; 0,0,0,3</p>
<p>.nav ul li ——&gt; 0,0,1,2</p>
<p>a:hover —–—&gt; 0,0,1,1</p>
<p>.nav a ——&gt; 0,0,1,1</p>
<p>注意⚠: 数位之间没有进制 比如说： 0,0,0,5 + 0,0,0,5 = 0,0,0,10 而不是 0,0, 1, 0， 所以不会存在10个div能赶上一个类选择器的情况。</p>
<p>important适用优先级💡</p>
<p>#id .box div {<br>color: red !important;</p>
<p>}</p>
<p>#id div.box div {<br>color: green !important; // 使用这个选择器中的颜色</p>
<p>}</p>
<p>复制代码</p>
<p>通关答题</p>
<p>下面来几道题，全对才算通过了噢😗</p>
<p>文字</p>
<p>复制代码</p>
<p>什么颜色??</p>
<p>展开查看答案</p>
<p>yellow 上面两选择器的层级都是一样的, 后者覆盖前者 复制代码</p>
<p>试问这行字体是什么颜色的?</p>
<p>复制代码</p>
<p>展开查看答案</p>
<p>blue 复制代码</p>
<p>123</p>
<p>复制代码</p>
<p>展开查看答案</p>
<p>字体：80，有文字阴影，真实内容的宽：290px 高190px复制代码</p>
<p>讲下这最后一题</p>
<p>文字阴影有：因为从父元素中继承到了,字体: 80px;</p>
<p>真实内容宽290px, 高190px</p>
<p>常问的属性flex(弹性布局)</p>
<p>transform: translate3D rodate3D</p>
<p>animation(设定动画)</p>
<p>3D or 透视(perspective)</p>
<p>flex</p>
<p>flex布局相信大家也都用烂了，用来让盒子垂直和水平居中好用的一批</p>
<p>父项常用属性</p>
<p>flex-direction：设置主轴的方向</p>
<p>justify-content：设置主轴上的子元素排列方式</p>
<p>flex-wrap：设置子元素是否换行</p>
<p>align-content：设置侧轴上的子元素的排列方式(多行)</p>
<p>align-items：设置侧轴上的子元素排列方式(单行)</p>
<p>flex-flow：复合属性，相当于同时设置了 flex-direction 和 flex-wrap</p>
<p>flex-direction</p>
<p>在 flex 布局中，是分为主轴和侧轴两个方向，同样的叫法有 ： 行和列、x 轴和y 轴</p>
<p>默认主轴方向就是 x 轴方向，水平向右</p>
<p>默认侧轴方向就是 y 轴方向，水平向下</p>
<p>&lt;img src=</p>
<p>“ width=“185” height=“30” align=””&gt;</p>
<p>： 主轴和侧轴是会变化的，就看 flex-direction 设置谁为主轴，剩下的就是侧轴。而我们的子元素是跟着主轴来排列的</p>
<p>flex-wrap设置是否换行</p>
<p>默认情况下，项目都排在一条线(又称”轴线”)上。flex-wrap属性定义，flex布局中默认是不换行的。</p>
<p>nowrap 不换行</p>
<p>wrap 换行</p>
<p>justify-content 设置主轴上的子元素排列方式</p>
<p>&lt;img src=</p>
<p>“ width=“185” height=“30” align=””&gt;</p>
<p>效果图</p>
<p>： 这里讲下space-around和space-evenly</p>
<p>space-around：项目之间的间距为左右两侧项目到容器间距的2倍。</p>
<p>space-evenly：项目两侧之间的间距与项目与容器两侧的间距相等，相当于除去项目宽度和容器和项目的两侧间距，剩下的平均分配了剩余宽度作为项目左右margin。</p>
<p>**设置侧轴上的子元素排列方式：align-items(单行)/align-content(多行) **</p>
<p>上图写能设置多行只能用于子项出现 换行 的情况(多行)，在单行下是没有效果的。</p>
<p>效果跟上面是一样的只不过是方向换了，上面是元素在主轴上排列，这个是在侧抽上，至于侧轴是不是Y轴就看你的flex-direciton怎么设置的了</p>
<p>子项常见属性</p>
<p>flex(复合属性): 默认: flex: 0 1 auto;</p>
<p>flex-grow</p>
<p>flex-shrink</p>
<p>flex-basis</p>
<p>align-self：控制子项自己在侧轴的排列方式</p>
<p>order：定义子项的排列顺序(前后顺序), 0是第一个</p>
<p>flex-grow</p>
<p>默认0，用于决定项目在有剩余空间的情况下是否放大，默认不放大;注意，即便设置了固定宽度，也会放大。</p>
<p>假设第一个项目默认为0，第二个项目为flex-grow:2，最后一个项目为1，则第二个项目在放大时所占空间是最后项目的两倍。</p>
<p>可以这么理解:</p>
<p>flex: 1 =&gt; 在剩余的空间里我就占一份</p>
<p>flex: 2 =&gt; 在剩余的空间里我就占两份</p>
<p>flex: 3 =&gt; 在剩余的空间里我就占三份</p>
<p>假设三个盒子分别都设置了上面的属性: 那就将剩余空间分成6份, 各占自己的份数</p>
<p>假设前两个没有设置, 就最后一个设置了flex: 3 === flex: 1, 那就将剩余空间都给它</p>
<p>复制代码</p>
<p>flex-shrink</p>
<p>默认1，用于决定项目在空间不足时是否缩小，默认项目都是1，即空间不足时大家一起等比缩小;注意，即便设置了固定宽度，也会缩小。但如果某个项目flex-shrink设置为0，则即便空间不够，自身也不缩小。</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>上图中第二个项目flex-shrink为0，所以自身不会缩小。</p>
<p>flex-basis</p>
<p>默认auto，用于设置项目宽度，默认auto时，项目会保持默认宽度，或者以width为自身的宽度，但如果设置了flex-basis，权重会width属性高，因此会覆盖widtn属性。</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>上图中先设置了flex-basis属性，后设置了width属性，但宽度依旧以flex-basis属性为准。</p>
<p>注意⚠: 如果当容器中有多个盒子并且还宽度100%, flex-basis会被影响, 如下图</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>解决办法就是在我们设置flex-basis宽度时, 最好给他设置flex-shrink为0不缩放</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>transform</p>
<p>2D的属性相信大家都会用了, 本文主要深究transform的3D属性</p>
<p>透视：perspctive</p>
<p>3D呈现：transfrom-style</p>
<p>3D 位移：translate3d(x, y, z)</p>
<p>3D旋转：rotate3d(x, y, z)</p>
<p>透视(perspective)</p>
<p>在讲3D之间先来了解一下透视(视距)，只有了解了透视我们才能理解3D的物体投影在2D平面上</p>
<p>透视也称为视距，所谓的视距就是人的眼睛到屏幕的距离</p>
<p>实际上模仿人类的视觉位置，可视为安排一直眼睛去看</p>
<p>距离透视点越近的在电脑平面成像越大，越远成像越小</p>
<p>透视的单位是像素</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>注意: 透视需要写在被视察元素的父盒子上面</p>
<p>拿图说话👇</p>
<p>d：就是视距，视距就是指人的眼睛到屏幕的距离</p>
<p>z：就是 z 轴，z 轴越大(正值)，我们看到的物体就越大</p>
<p>来个栗子🌰</p>
<p>给实例的父元素设置: perspective: 200px;</p>
<p>复制代码</p>
<p>上面我们在div的父盒子上设置了perspective，也就是说从3D成像的角度来讲我们人眼距离屏幕div是200的视距，translate3D设置Z轴让div往前挪了100，视距变小距离我们人眼距离也就越小，所以看到的div也就变大了。 (可以想像成在500米远看见的人， 和5米看见的人。)</p>
<p>translate3d(x, y, z)</p>
<p>3D的特点</p>
<p>近大远小</p>
<p>物体和面遮挡不可见</p>
<p>三维坐标系</p>
<p>x 轴：水平向右 – 注意：x 轴右边是正值，左边是负值</p>
<p>y 轴：垂直向下 – 注意：y 轴下面是正值，上面是负值</p>
<p>z 轴：垂直屏幕 – 注意：往外边的是正值，往里面的是负值</p>
<p>“ alt=” “ width=“35” height=“30” align=””&gt;</p>
<p>3D 呈现 transform-style</p>
<p>transform-style：控制子元素是否开启三维立体环境，代码写给父级，但是影响的是子盒子</p>
<p>transform-style: flat 代表子元素不开启 3D 立体空间，默认的</p>
<p>transform-style: preserve-3d 子元素开启立体空间</p>
<p>效果图</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>body {<br>perspective: 500px;</p>
<p>}</p>
<p>.box {<br>position: relative;</p>
<p>width: 200px;</p>
<p>height: 200px;</p>
<p>margin: 100px auto;</p>
<p>transition: all 2s;</p>
<p>/* 让子元素保持3d立体空间环境 */</p>
<p>transform-style: preserve-3d;</p>
<p>}</p>
<p>.box:hover {<br>transform: rotateY(60deg);</p>
<p>}</p>
<p>.box div {<br>position: absolute;</p>
<p>top: 0;</p>
<p>left: 0;</p>
<p>width: 100%;</p>
<p>height: 100%;</p>
<p>background-color: pink;</p>
<p>}</p>
<p>.box div:last-child {<br>background-color: purple;</p>
<p>transform: rotateX(60deg);</p>
<p>}</p>
<p>复制代码</p>
<p>rotate3d(x, y, z)</p>
<p>3D 旋转指可以让元素在三维平面内沿着 x 轴、y 轴、z 轴 或者自定义轴进行旋转</p>
<p>transform: rotate3d(x, y, z, 45deg)` – 沿着自定义轴旋转 45 deg 为角度</p>
<p>例子：</p>
<p>公众号:</p>
<p>前端自学驿站</p>
<p>复制代码</p>
<p>ul li {<br>float: left;</p>
<p>margin: 0 5px;</p>
<p>width: 120px;</p>
<p>height: 35px;</p>
<p>list-style: none;</p>
<p>/* 一会我们需要给box 旋转 也需要透视 干脆给li加 里面的子盒子都有透视效果 */</p>
<p>perspective: 500px;</p>
<p>}</p>
<p>.box {<br>position: relative;</p>
<p>width: 100%;</p>
<p>height: 100%;</p>
<p>transform-style: preserve-3d;</p>
<p>transition: all .4s;</p>
<p>}</p>
<p>.box:hover {<br>transform: rotateX(90deg);</p>
<p>}</p>
<p>.front,</p>
<p>.bottom {<br>position: absolute;</p>
<p>left: 0;</p>
<p>top: 0;</p>
<p>width: 100%;</p>
<p>height: 100%;</p>
<p>}</p>
<p>.front {<br>background-color: pink;</p>
<p>z-index: 1;</p>
<p>transform: translateZ(17.5px);</p>
<p>}</p>
<p>.bottom {<br>background-color: purple;</p>
<p>/* 这个x轴一定是负值 */</p>
<p>/* 我们如果有移动 或者其他样式，必须先写我们的移动 */</p>
<p>transform: translateY(17.5px) rotateX(-90deg);</p>
<p>}</p>
<p>复制代码</p>
<p>animation</p>
<p>动画(animation)是 CSS3 中最具颠覆性的特征之一，可通过设置多个节点来精确的控制一个或者一组动画，从而实现复杂的动画效果, 先定义动画在调用定义好的动画</p>
<p>动画序列</p>
<p>0% 是动画的开始，100 % 是动画的完成，这样的规则就是动画序列</p>
<p>在 @keyframs 中规定某项 CSS 样式，就由创建当前样式逐渐改为新样式的动画效果</p>
<p>动画是使元素从一个样式逐渐变化为另一个样式的效果，可以改变任意多的样式任意多的次数</p>
<p>用百分比来规定变化发生的时间，或用 from 和 to，等同于 0% 和 100%</p>
<p>@keyframes move{<br>0% {<br>transform: translate(0px)</p>
<p>}</p>
<p>form {<br>transform: translate(0px)</p>
<p>}</p>
<p>100% {<br>transform: translate(500px, 0)</p>
<p>}</p>
<p>to {<br>transform: translate(500px, 0)</p>
<p>}</p>
<p>}</p>
<p>复制代码</p>
<p>动画常见属性</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>动画简写方式</p>
<p>/* animation: 动画名称 持续时间 运动曲线 何时开始 播放次数 是否反方向 起始与结束状态 */</p>
<p>animation: name duration timing-function delay iteration-count direction fill-mode</p>
<p>复制代码</p>
<p>除了名字，持续时间，何时开始有严格顺序要求其它随意</p>
<p>CSS实现扫描二维码</p>
<p>效果</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>代码篇幅过长我放到gitHub仓库了，大家可以pull下来自行研究。</p>
<p>地址：<a target="_blank" rel="noopener" href="https://github.com/it-beige/blog">https://github.com/it-beige/blog</a></p>
<p>面试常问题BFC相关</p>
<p>BFC(Block formatting context)直译为”块级格式化上下文”。</p>
<p>在讲BFC之前得先说下display的属性值，只有它符合成为条件才资格触发BFC机制</p>
<p>“ alt=“display属性值” width=“113” height=“30” align=””&gt;</p>
<p>那些属性值会具有BFC的条件</p>
<p>不是所有的元素模式都能产生BFC，w3c 规范： display 属性为 block, list-item, table 的元素，会产生BFC.</p>
<p>大家有没有发现这个三个都是用来布局最为合理的元素，因为他们就是用来可视化布局。注意其他的，display属性，比如 line 等等，他们创建的是 IFC ，我们下面研究。</p>
<p>这个BFC 有着具体的布局特性：</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>有宽度和高度，有 外边距margin 有内边距padding 有边框 border。就好比，你有了练习武术的体格了。 有潜力，有资质。</p>
<p>什么情况下可以让元素产生BFC</p>
<p>以上盒子具有BFC条件了，就是说有资质了，但是怎样触发才会产生BFC，从而创造这个封闭的环境呢?</p>
<p>就好比，你光有资质还不行，你需要一定额外效果才能出发的武学潜力，要么你掉到悬崖下面，捡到了一本九阴真经，要么你学习葵花宝典，欲练此功必先…</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>同样，要给这些元素添加如下属性就可以触发BFC。</p>
<p>float属性不为none</p>
<p>position为absolute或fixed</p>
<p>display为inline-block, table-cell, table-caption, flex, inline-flex</p>
<p>overflow不为visible。</p>
<p>BFC元素所具有的特性</p>
<p>BFC布局规则特性：</p>
<p>在BFC中，盒子从顶端开始垂直地一个接一个地排列</p>
<p>盒子垂直方向的距离由margin决定。属于同一个BFC的两个相邻盒子的margin会发生重叠</p>
<p>在BFC中，每一个盒子的左外边缘(margin-left)会触碰到容器的左边缘(border-left)(对于从右到左的格式来说，则触碰到右边缘)。</p>
<p>BFC的区域不会与浮动盒子产生交集，而是紧贴浮动边缘。</p>
<p>计算BFC的高度时，自然也会检测浮动或者定位的盒子高度</p>
<p>它是一个独立的渲染区域，只有Block-level box参与， 它规定了内部的Block-level Box如何布局，并且与这个区域外部毫不相干。</p>
<p>白话文： 孩子在家里愿意怎么折腾都行，但是出了家门口，你就的乖乖的，不能影响外面的任何人。</p>
<p>复制代码</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>BFC的主要用途</p>
<p>(1) 清除元素内部浮动</p>
<p>只要把父元素设为BFC就可以清理子元素的浮动了，最常见的用法就是在父元素上设置overflow: hidden样式</p>
<p>主要用到</p>
<p>计算BFC的高度时，自然也会检测浮动或者定位的盒子高度。</p>
<p>复制代码</p>
<p>(2) 解决外边距合并(塌陷)问题</p>
<p>主要用到</p>
<p>盒子垂直方向的距离由margin决定。属于同一个BFC的两个相邻盒子的margin会发生重叠</p>
<p>复制代码</p>
<p>属于同一个sBFC的两个相邻盒子的margin会发生重叠，那么我们创建不属于同一个BFC，就不会发生margin重叠了。</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>(3) 制作右侧自适应的盒子问题</p>
<p>主要用到</p>
<p>普通流体元素BFC后，为了和浮动元素不产生任何交集，顺着浮动边缘形成自己的封闭上下文</p>
<p>复制代码</p>
<p>“ alt=”” width=“28” height=“30” align=””&gt;</p>
<p>BFC 总结</p>
<p>BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此。包括浮动，和外边距合并等等，因此，有了这个特性，我们布局的时候就不会出现意外情况了。</p>
<p>IFC相关</p>
<p>IFC(inline Formatting Context)叫做“行级格式化上下”相对BFC比较简单且问的也不是很多，这里大该做个了解</p>
<p>布局规则如下：</p>
<p>内部的盒子会在水平方向，一个个地放置(默认就是IFC);</p>
<p>IFC的高度，由里面最高盒子的高度决定(里面的内容会撑开父盒子);</p>
<p>当一行不够放置的时候会自动切换到下一行;</p>
<p>哪些属性开启了性能加速</p>
<p>何为硬件加速：就是将浏览器的渲染过程交给GPU(Graphics Processing Unit)处理，而不是使用自带的比较慢的渲染器。这样就可以使得animation与transition更加顺畅</p>
<p>我们可以在浏览器中用CSS开启硬件加速，使GPU发挥功能，从而提升性能</p>
<p>所谓GPU，就是图形处理器的缩写，相当于PC中的显卡。手机中的GPU也是为了对图形、图像处理而存在的，所谓强制渲染，就是hwa(hardware acceleration硬件加载)的一种，其存在的意义就是为了分担cpu的负担，其原理是通过GPU对软件图形的处理来减轻CPU的负担。从而使应用软件能够以更快的速度被处理，以达到提速的目的。</p>
<p>硬件加速的原理</p>
<p>浏览器接收到页面文档后，会将文档中的标记语言解析为DOM树。DOM树和CSS结合后形成浏览器构建页面的渲染树。渲染树中包含大量的渲染元素，每个渲染元素会被分到一个图层中，每个图层又会被加载到GPU形成渲染纹理，而图层在GPU中transform是不会触发repaint的，最终这些使用transform的图层都会由独立的合成器进程进行处理, CSS transform会创建了一个新的复合图层，可以被GPU直接用来执行transform操作。</p>
<p>浏览器什么时候会创建一个独立的复合图层呢?事实上一般是在以下几种情况下：</p>
<p>3D或者CSS transform</p>
<p>和标签</p>
<p>css filters(滤镜效果)</p>
<p>元素覆盖时，比如使用了z-index属性</p>
<p>为什么硬件加速会使页面流畅</p>
<p>因为transform属性不会触发浏览器的repaint(重绘)，而绝对定位absolute中的left和top则会一直触发repaint(重绘)。</p>
<p>为什么transform没有触发repaint呢?</p>
<p>简而言之，transform动画由GPU控制，支持硬件加载，并不需要软件方面的渲染。并不是所有的CSS属性都能触发GPU的硬件加载，事实上只有少数的属性可以，比如transform、opacity、filter</p>
<p>如何用CSS开启硬件加速</p>
<p>CSS animation、transform以及transition不会自动开启GPU加速，而是由浏览器的缓慢的软件渲染引擎来执行，那我们怎样才可以切换到GPU模式呢，很多浏览器提供了某些触发的CSS规则。</p>
<p>当浏览器检测到页面中某个DOM元素应用了某些CSS规则时就会开启，最显著的特征的元素是3D变化。</p>
<p>.cube{<br>translate3d(250px,250px,250px);</p>
<p>rotate3d(250px,250px,250px,-120deg)</p>
<p>scale3d(0.5,0.5,0.5);</p>
<p>}</p>
<p>复制代码</p>
<p>可能在一些情况下，我们并不需要对元素应用3D变幻的效果，那怎么办呢?这时候我们可以使用“欺骗”浏览器来开启硬件加速。虽然我们可能不想对元素应用3D变幻，可我们一样可以开启3D引擎。例如我们可以用transform:translateZ(0);来开启硬件加速</p>
<p>.cube{<br>transform: translateZ(0);</p>
<p>}</p>
<p>复制代码</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color2">C</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2021/04/05/8.3.%E7%BD%91%E9%A1%B5%E5%89%8D%E7%AB%AF%E4%B9%8BCSS/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/9/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/11/">Next &amp;raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2021 swx
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		toc_hide_index: true,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var r={};n.m=t,n.c=r,n.p="./",n(0)}([function(t,n,r){r(195),t.exports=r(191)},function(t,n,r){var e=r(3),i=r(52),o=r(27),u=r(28),c=r(53),f="prototype",a=function(t,n,r){var s,l,h,v,p=t&a.F,d=t&a.G,y=t&a.S,g=t&a.P,b=t&a.B,m=d?e:y?e[n]||(e[n]={}):(e[n]||{})[f],x=d?i:i[n]||(i[n]={}),w=x[f]||(x[f]={});d&&(r=n);for(s in r)l=!p&&m&&void 0!==m[s],h=(l?m:r)[s],v=b&&l?c(h,e):g&&"function"==typeof h?c(Function.call,h):h,m&&u(m,s,h,t&a.U),x[s]!=h&&o(x,s,v),g&&w[s]!=h&&(w[s]=h)};e.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,r){var e=r(6);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(126)("wks"),i=r(76),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(94),i=r(33);t.exports=function(t){return e(i(t))}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(167),o=r(50),u=Object.defineProperty;n.f=r(10)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(22);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(20),i=r(58),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(40)("wks"),i=r(23),o=r(5).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(67),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){var e=r(46);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(63),i=r(34);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(21);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(11),i=r(66);t.exports=r(10)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(3),i=r(27),o=r(24),u=r(76)("src"),c="toString",f=Function[c],a=(""+f).split(c);r(52).inspectSource=function(t){return f.call(t)},(t.exports=function(t,n,r,c){var f="function"==typeof r;f&&(o(r,"name")||i(r,"name",n)),t[n]!==r&&(f&&(o(r,u)||i(r,u,t[n]?""+t[n]:a.join(String(n)))),t===e?t[n]=r:c?t[n]?t[n]=r:i(t,n,r):(delete t[n],i(t,n,r)))})(Function.prototype,c,function(){return"function"==typeof this&&this[u]||f.call(this)})},function(t,n,r){var e=r(1),i=r(4),o=r(46),u=function(t,n,r,e){var i=String(o(t)),u="<"+n;return""!==r&&(u+=" "+r+'="'+String(e).replace(/"/g,"&quot;")+'"'),u+">"+i+"</"+n+">"};t.exports=function(t,n){var r={};r[t]=n(u),e(e.P+e.F*i(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},function(t,n,r){var e=r(115),i=r(46);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(116),i=r(66),o=r(30),u=r(50),c=r(24),f=r(167),a=Object.getOwnPropertyDescriptor;n.f=r(10)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(24),i=r(17),o=r(145)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(8),o=r(15)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(23);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(5),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){var e=r(21);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(36),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(15)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n,r){var e=r(53),i=r(115),o=r(17),u=r(16),c=r(203);t.exports=function(t,n){var r=1==t,f=2==t,a=3==t,s=4==t,l=6==t,h=5==t||l,v=n||c;return function(n,c,p){for(var d,y,g=o(n),b=i(g),m=e(c,p,3),x=u(b.length),w=0,S=r?v(n,x):f?v(n,0):void 0;x>w;w++)if((h||w in b)&&(d=b[w],y=m(d,w,g),t))if(r)S[w]=y;else if(y)switch(t){case 3:return!0;case 5:return d;case 6:return w;case 2:S.push(d)}else if(s)return!1;return l?-1:a||s?s:S}}},function(t,n,r){var e=r(1),i=r(52),o=r(4);t.exports=function(t,n){var r=(i.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*o(function(){r(1)}),"Object",u)}},function(t,n,r){var e=r(6);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(91),u=r(13),c="prototype",f=function(t,n,r){var a,s,l,h=t&f.F,v=t&f.G,p=t&f.S,d=t&f.P,y=t&f.B,g=t&f.W,b=v?i:i[n]||(i[n]={}),m=b[c],x=v?e:p?e[n]:(e[n]||{})[c];v&&(r=n);for(a in r)(s=!h&&x&&void 0!==x[a])&&a in b||(l=s?x[a]:r[a],b[a]=v&&"function"!=typeof x[a]?r[a]:y&&s?o(l,e):g&&x[a]==l?function(t){var n=function(n,r,e){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,e)}return t.apply(this,arguments)};return n[c]=t[c],n}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((b.virtual||(b.virtual={}))[a]=l,t&f.R&&m&&!m[a]&&u(m,a,l)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n,r){var e=r(26);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(183),i=r(1),o=r(126)("metadata"),u=o.store||(o.store=new(r(186))),c=function(t,n,r){var i=u.get(t);if(!i){if(!r)return;u.set(t,i=new e)}var o=i.get(n);if(!o){if(!r)return;i.set(n,o=new e)}return o},f=function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},a=function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},s=function(t,n,r,e){c(r,e,!0).set(t,n)},l=function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},v=function(t){i(i.S,"Reflect",t)};t.exports={store:u,map:c,has:f,get:a,set:s,keys:l,key:h,exp:v}},function(t,n,r){"use strict";if(r(10)){var e=r(69),i=r(3),o=r(4),u=r(1),c=r(127),f=r(152),a=r(53),s=r(68),l=r(66),h=r(27),v=r(73),p=r(67),d=r(16),y=r(75),g=r(50),b=r(24),m=r(180),x=r(114),w=r(6),S=r(17),_=r(137),O=r(70),E=r(32),P=r(71).f,j=r(154),F=r(76),M=r(7),A=r(48),N=r(117),T=r(146),I=r(155),k=r(80),L=r(123),R=r(74),C=r(130),D=r(160),U=r(11),W=r(31),G=U.f,B=W.f,V=i.RangeError,z=i.TypeError,q=i.Uint8Array,K="ArrayBuffer",J="Shared"+K,Y="BYTES_PER_ELEMENT",H="prototype",$=Array[H],X=f.ArrayBuffer,Q=f.DataView,Z=A(0),tt=A(2),nt=A(3),rt=A(4),et=A(5),it=A(6),ot=N(!0),ut=N(!1),ct=I.values,ft=I.keys,at=I.entries,st=$.lastIndexOf,lt=$.reduce,ht=$.reduceRight,vt=$.join,pt=$.sort,dt=$.slice,yt=$.toString,gt=$.toLocaleString,bt=M("iterator"),mt=M("toStringTag"),xt=F("typed_constructor"),wt=F("def_constructor"),St=c.CONSTR,_t=c.TYPED,Ot=c.VIEW,Et="Wrong length!",Pt=A(1,function(t,n){return Tt(T(t,t[wt]),n)}),jt=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Ft=!!q&&!!q[H].set&&o(function(){new q(1).set({})}),Mt=function(t,n){if(void 0===t)throw z(Et);var r=+t,e=d(t);if(n&&!m(r,e))throw V(Et);return e},At=function(t,n){var r=p(t);if(r<0||r%n)throw V("Wrong offset!");return r},Nt=function(t){if(w(t)&&_t in t)return t;throw z(t+" is not a typed array!")},Tt=function(t,n){if(!(w(t)&&xt in t))throw z("It is not a typed array constructor!");return new t(n)},It=function(t,n){return kt(T(t,t[wt]),n)},kt=function(t,n){for(var r=0,e=n.length,i=Tt(t,e);e>r;)i[r]=n[r++];return i},Lt=function(t,n,r){G(t,n,{get:function(){return this._d[r]}})},Rt=function(t){var n,r,e,i,o,u,c=S(t),f=arguments.length,s=f>1?arguments[1]:void 0,l=void 0!==s,h=j(c);if(void 0!=h&&!_(h)){for(u=h.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(l&&f>2&&(s=a(s,arguments[2],2)),n=0,r=d(c.length),i=Tt(this,r);r>n;n++)i[n]=l?s(c[n],n):c[n];return i},Ct=function(){for(var t=0,n=arguments.length,r=Tt(this,n);n>t;)r[t]=arguments[t++];return r},Dt=!!q&&o(function(){gt.call(new q(1))}),Ut=function(){return gt.apply(Dt?dt.call(Nt(this)):Nt(this),arguments)},Wt={copyWithin:function(t,n){return D.call(Nt(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return rt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return C.apply(Nt(this),arguments)},filter:function(t){return It(this,tt(Nt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return et(Nt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Nt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Nt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ut(Nt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Nt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return vt.apply(Nt(this),arguments)},lastIndexOf:function(t){return st.apply(Nt(this),arguments)},map:function(t){return Pt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Nt(this),arguments)},reduceRight:function(t){return ht.apply(Nt(this),arguments)},reverse:function(){for(var t,n=this,r=Nt(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(Nt(this),t)},subarray:function(t,n){var r=Nt(this),e=r.length,i=y(t,e);return new(T(r,r[wt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,d((void 0===n?e:y(n,e))-i))}},Gt=function(t,n){return It(this,dt.call(Nt(this),t,n))},Bt=function(t){Nt(this);var n=At(arguments[1],1),r=this.length,e=S(t),i=d(e.length),o=0;if(i+n>r)throw V(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(Nt(this))},keys:function(){return ft.call(Nt(this))},values:function(){return ct.call(Nt(this))}},zt=function(t,n){return w(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return zt(t,n=g(n,!0))?l(2,t[n]):B(t,n)},Kt=function(t,n,r){return!(zt(t,n=g(n,!0))&&w(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?G(t,n,r):(t[n]=r.value,t)};St||(W.f=qt,U.f=Kt),u(u.S+u.F*!St,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Kt}),o(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Jt=v({},Wt);v(Jt,Vt),h(Jt,bt,Vt.values),v(Jt,{slice:Gt,set:Bt,constructor:function(){},toString:yt,toLocaleString:Ut}),Lt(Jt,"buffer","b"),Lt(Jt,"byteOffset","o"),Lt(Jt,"byteLength","l"),Lt(Jt,"length","e"),G(Jt,mt,{get:function(){return this[_t]}}),t.exports=function(t,n,r,f){f=!!f;var a=t+(f?"Clamped":"")+"Array",l="Uint8Array"!=a,v="get"+t,p="set"+t,y=i[a],g=y||{},b=y&&E(y),m=!y||!c.ABV,S={},_=y&&y[H],j=function(t,r){var e=t._d;return e.v[v](r*n+e.o,jt)},F=function(t,r,e){var i=t._d;f&&(e=(e=Math.round(e))<0?0:e>255?255:255&e),i.v[p](r*n+i.o,e,jt)},M=function(t,n){G(t,n,{get:function(){return j(this,n)},set:function(t){return F(this,n,t)},enumerable:!0})};m?(y=r(function(t,r,e,i){s(t,y,a,"_d");var o,u,c,f,l=0,v=0;if(w(r)){if(!(r instanceof X||(f=x(r))==K||f==J))return _t in r?kt(y,r):Rt.call(y,r);o=r,v=At(e,n);var p=r.byteLength;if(void 0===i){if(p%n)throw V(Et);if((u=p-v)<0)throw V(Et)}else if((u=d(i)*n)+v>p)throw V(Et);c=u/n}else c=Mt(r,!0),u=c*n,o=new X(u);for(h(t,"_d",{b:o,o:v,l:u,e:c,v:new Q(o)});l<c;)M(t,l++)}),_=y[H]=O(Jt),h(_,"constructor",y)):L(function(t){new y(null),new y(t)},!0)||(y=r(function(t,r,e,i){s(t,y,a);var o;return w(r)?r instanceof X||(o=x(r))==K||o==J?void 0!==i?new g(r,At(e,n),i):void 0!==e?new g(r,At(e,n)):new g(r):_t in r?kt(y,r):Rt.call(y,r):new g(Mt(r,l))}),Z(b!==Function.prototype?P(g).concat(P(b)):P(g),function(t){t in y||h(y,t,g[t])}),y[H]=_,e||(_.constructor=y));var A=_[bt],N=!!A&&("values"==A.name||void 0==A.name),T=Vt.values;h(y,xt,!0),h(_,_t,a),h(_,Ot,!0),h(_,wt,y),(f?new y(1)[mt]==a:mt in _)||G(_,mt,{get:function(){return a}}),S[a]=y,u(u.G+u.W+u.F*(y!=g),S),u(u.S,a,{BYTES_PER_ELEMENT:n,from:Rt,of:Ct}),Y in _||h(_,Y,n),u(u.P,a,Wt),R(a),u(u.P+u.F*Ft,a,{set:Bt}),u(u.P+u.F*!N,a,Vt),u(u.P+u.F*(_.toString!=yt),a,{toString:yt}),u(u.P+u.F*o(function(){new y(1).slice()}),a,{slice:Gt}),u(u.P+u.F*(o(function(){return[1,2].toLocaleString()!=new y([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),a,{toLocaleString:Ut}),k[a]=N?A:T,e||N||h(_,bt,T)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(21),i=r(5).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(18)(function(){return 7!=Object.defineProperty(r(57)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var e=r(36),i=r(51),o=r(64),u=r(13),c=r(8),f=r(35),a=r(96),s=r(38),l=r(103),h=r(15)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n,r){var e=r(20),i=r(100),o=r(34),u=r(39)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(57)("iframe"),e=o.length;for(n.style.display="none",r(93).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(63),i=r(34).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(8),i=r(9),o=r(90)(!1),u=r(39)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(76)("meta"),i=r(6),o=r(24),u=r(11).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n){t.exports=!1},function(t,n,r){var e=r(2),i=r(173),o=r(133),u=r(145)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(132)("iframe"),e=o.length;for(n.style.display="none",r(135).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(175),i=r(133).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(175),i=r(133);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(28);t.exports=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(11),o=r(10),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(67),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(33);t.exports=function(t){return Object(e(t))}},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;void 0==i[e]&&r(27)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n,r){var e=r(53),i=r(169),o=r(137),u=r(2),c=r(16),f=r(154),a={},s={},n=t.exports=function(t,n,r,l,h){var v,p,d,y,g=h?function(){return t}:f(t),b=e(r,l,n?2:1),m=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(v=c(t.length);v>m;m++)if((y=n?b(u(p=t[m])[0],p[1]):b(t[m]))===a||y===s)return y}else for(d=g.call(t);!(p=d.next()).done;)if((y=i(d,b,p.value,n))===a||y===s)return y};n.BREAK=a,n.RETURN=s},function(t,n){t.exports={}},function(t,n,r){var e=r(11).f,i=r(24),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(1),i=r(46),o=r(4),u=r(150),c="["+u+"]",f="​",a=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),l=function(t,n,r){var i={},c=o(function(){return!!u[t]()||f[t]()!=f}),a=i[t]=c?n(h):u[t];r&&(i[r]=a),e(e.P+e.F*c,"String",i)},h=l.trim=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(s,"")),t};t.exports=l},function(t,n,r){t.exports={default:r(86),__esModule:!0}},function(t,n,r){t.exports={default:r(87),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(84),o=e(i),u=r(83),c=e(u),f="function"==typeof c.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":typeof t};n.default="function"==typeof c.default&&"symbol"===f(o.default)?function(t){return void 0===t?"undefined":f(t)}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":void 0===t?"undefined":f(t)}},function(t,n,r){r(110),r(108),r(111),r(112),t.exports=r(25).Symbol},function(t,n,r){r(109),r(113),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(9),i=r(106),o=r(105);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){var e=r(88);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(19),i=r(62),o=r(37);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){t.exports=r(5).document&&document.documentElement},function(t,n,r){var e=r(56);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(56);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(60),i=r(22),o=r(38),u={};r(13)(u,r(15)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(19),i=r(9);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){var e=r(23)("meta"),i=r(21),o=r(8),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(18)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n,r){var e=r(14),i=r(20),o=r(19);t.exports=r(12)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(22),o=r(9),u=r(42),c=r(8),f=r(58),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(9),i=r(61).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(8),i=r(77),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(41),i=r(33);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(89),i=r(97),o=r(35),u=r(9);t.exports=r(59)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(104)(!0);r(59)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(5),i=r(8),o=r(12),u=r(51),c=r(64),f=r(99).KEY,a=r(18),s=r(40),l=r(38),h=r(23),v=r(15),p=r(44),d=r(43),y=r(98),g=r(92),b=r(95),m=r(20),x=r(9),w=r(42),S=r(22),_=r(60),O=r(102),E=r(101),P=r(14),j=r(19),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(61).f=O.f=Z,r(37).f=X,r(62).f=tt,o&&!r(36)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(13)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(107);for(var e=r(5),i=r(13),o=r(35),u=r(15)("toStringTag"),c=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){var e=r(45),i=r(7)("toStringTag"),o="Arguments"==e(function(){return arguments}()),u=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,r,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(n=Object(t),i))?r:o?e(n):"Object"==(c=e(n))&&"function"==typeof n.callee?"Arguments":c}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(30),i=r(16),o=r(75);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){"use strict";var e=r(3),i=r(1),o=r(28),u=r(73),c=r(65),f=r(79),a=r(68),s=r(6),l=r(4),h=r(123),v=r(81),p=r(136);t.exports=function(t,n,r,d,y,g){var b=e[t],m=b,x=y?"set":"add",w=m&&m.prototype,S={},_=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!s(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,r){return n.call(this,0===t?0:t,r),this})};if("function"==typeof m&&(g||w.forEach&&!l(function(){(new m).entries().next()}))){var O=new m,E=O[x](g?{}:-0,1)!=O,P=l(function(){O.has(1)}),j=h(function(t){new m(t)}),F=!g&&l(function(){for(var t=new m,n=5;n--;)t[x](n,n);return!t.has(-0)});j||(m=n(function(n,r){a(n,m,t);var e=p(new b,n,m);return void 0!=r&&f(r,y,e[x],e),e}),m.prototype=w,w.constructor=m),(P||F)&&(_("delete"),_("has"),y&&_("get")),(F||E)&&_(x),g&&w.clear&&delete w.clear}else m=d.getConstructor(n,t,y,x),u(m.prototype,r),c.NEED=!0;return v(m,t),S[t]=m,i(i.G+i.W+i.F*(m!=b),S),g||d.setStrong(m,t,y),m}},function(t,n,r){"use strict";var e=r(27),i=r(28),o=r(4),u=r(46),c=r(7);t.exports=function(t,n,r){var f=c(t),a=r(u,f,""[t]),s=a[0],l=a[1];o(function(){var n={};return n[f]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,s),e(RegExp.prototype,f,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}
},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(6),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var e=r(7)("iterator"),i=!1;try{var o=[7][e]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var r=!1;try{var o=[7],u=o[e]();u.next=function(){return{done:r=!0}},o[e]=function(){return u},t(o)}catch(t){}return r}},function(t,n,r){t.exports=r(69)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(3),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,r){for(var e,i=r(3),o=r(27),u=r(76),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n){"use strict";var r={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),weixin:-1==t.indexOf("MicroMessenger")}}()};t.exports=r},function(t,n,r){"use strict";var e=r(85),i=function(t){return t&&t.__esModule?t:{default:t}}(e),o=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):r[t]||t}function n(t){return e[t]}var r={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},e={};for(var u in r)e[r[u]]=u;return r["&apos;"]="'",e["'"]="&#39;",{encode:function(t){return t?(""+t).replace(/['<> "&]/g,n).replace(/\r?\n/g,"<br/>").replace(/\s/g,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(/<br\s*\/?>/gi,"\n").replace(/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,t).replace(/\u00a0/g," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;r>n;n++)t[n]=o.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,i.default)(t)))for(var e in t)t[e]=o.encodeObject(t[e]);else if("string"==typeof t)return o.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=o},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=function(t){for(var n=e(this),r=o(n.length),u=arguments.length,c=i(u>1?arguments[1]:void 0,r),f=u>2?arguments[2]:void 0,a=void 0===f?r:i(f,r);a>c;)n[c++]=t;return n}},function(t,n,r){"use strict";var e=r(11),i=r(66);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(6),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,r){t.exports=r(3).document&&document.documentElement},function(t,n,r){var e=r(6),i=r(144).set;t.exports=function(t,n,r){var o,u=n.constructor;return u!==r&&"function"==typeof u&&(o=u.prototype)!==r.prototype&&e(o)&&i&&i(t,o),t}},function(t,n,r){var e=r(80),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(70),i=r(66),o=r(81),u={};r(27)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var e=r(69),i=r(1),o=r(28),u=r(27),c=r(24),f=r(80),a=r(139),s=r(81),l=r(32),h=r(7)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var e=r(3),i=r(151).set,o=e.MutationObserver||e.WebKitMutationObserver,u=e.process,c=e.Promise,f="process"==r(45)(u);t.exports=function(){var t,n,r,a=function(){var e,i;for(f&&(e=u.domain)&&e.exit();t;){i=t.fn,t=t.next;try{i()}catch(e){throw t?r():n=void 0,e}}n=void 0,e&&e.enter()};if(f)r=function(){u.nextTick(a)};else if(o){var s=!0,l=document.createTextNode("");new o(a).observe(l,{characterData:!0}),r=function(){l.data=s=!s}}else if(c&&c.resolve){var h=c.resolve();r=function(){h.then(a)}}else r=function(){i.call(e,a)};return function(e){var i={fn:e,next:void 0};n&&(n.next=i),t||(t=i,r()),n=i}}},function(t,n,r){var e=r(6),i=r(2),o=function(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{e=r(53)(Function.call,r(31).f(Object.prototype,"__proto__").set,2),e(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return o(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(126)("keys"),i=r(76);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(2),i=r(26),o=r(7)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||void 0==(r=e(u)[o])?n:i(r)}},function(t,n,r){var e=r(67),i=r(46);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(122),i=r(46);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var e=r(67),i=r(46);t.exports=function(t){var n=String(i(this)),r="",o=e(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(53),c=r(121),f=r(135),a=r(132),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=0,y={},g="onreadystatechange",b=function(){var t=+this;if(y.hasOwnProperty(t)){var n=y[t];delete y[t],n()}},m=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return y[++d]=function(){c("function"==typeof t?t:Function(t),n)},e(d),d},v=function(t){delete y[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(b,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=g in a("script")?function(t){f.appendChild(a("script"))[g]=function(){f.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";var e=r(3),i=r(10),o=r(69),u=r(127),c=r(27),f=r(73),a=r(4),s=r(68),l=r(67),h=r(16),v=r(71).f,p=r(11).f,d=r(130),y=r(81),g="ArrayBuffer",b="DataView",m="prototype",x="Wrong length!",w="Wrong index!",S=e[g],_=e[b],O=e.Math,E=e.RangeError,P=e.Infinity,j=S,F=O.abs,M=O.pow,A=O.floor,N=O.log,T=O.LN2,I="buffer",k="byteLength",L="byteOffset",R=i?"_b":I,C=i?"_l":k,D=i?"_o":L,U=function(t,n,r){var e,i,o,u=Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?M(2,-24)-M(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=F(t),t!=t||t===P?(i=t!=t?1:0,e=f):(e=A(N(t)/T),t*(o=M(2,-e))<1&&(e--,o*=2),t+=e+a>=1?s/o:s*M(2,1-a),t*o>=2&&(e++,o/=2),e+a>=f?(i=0,e=f):e+a>=1?(i=(t*o-1)*M(2,n),e+=a):(i=t*M(2,a-1)*M(2,n),e=0));n>=8;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;c>0;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u},W=function(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;c>0;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;c>0;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-P:P;e+=M(2,n),s-=u}return(a?-1:1)*e*M(2,s-n)},G=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},B=function(t){return[255&t]},V=function(t){return[255&t,t>>8&255]},z=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},q=function(t){return U(t,52,8)},K=function(t){return U(t,23,4)},J=function(t,n,r){p(t[m],n,{get:function(){return this[r]}})},Y=function(t,n,r,e){var i=+r,o=l(i);if(i!=o||o<0||o+n>t[C])throw E(w);var u=t[R]._b,c=o+t[D],f=u.slice(c,c+n);return e?f:f.reverse()},H=function(t,n,r,e,i,o){var u=+r,c=l(u);if(u!=c||c<0||c+n>t[C])throw E(w);for(var f=t[R]._b,a=c+t[D],s=e(+i),h=0;h<n;h++)f[a+h]=s[o?h:n-h-1]},$=function(t,n){s(t,S,g);var r=+n,e=h(r);if(r!=e)throw E(x);return e};if(u.ABV){if(!a(function(){new S})||!a(function(){new S(.5)})){S=function(t){return new j($(this,t))};for(var X,Q=S[m]=j[m],Z=v(j),tt=0;Z.length>tt;)(X=Z[tt++])in S||c(S,X,j[X]);o||(Q.constructor=S)}var nt=new _(new S(2)),rt=_[m].setInt8;nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||f(_[m],{setInt8:function(t,n){rt.call(this,t,n<<24>>24)},setUint8:function(t,n){rt.call(this,t,n<<24>>24)}},!0)}else S=function(t){var n=$(this,t);this._b=d.call(Array(n),0),this[C]=n},_=function(t,n,r){s(this,_,b),s(t,S,b);var e=t[C],i=l(n);if(i<0||i>e)throw E("Wrong offset!");if(r=void 0===r?e-i:h(r),i+r>e)throw E(x);this[R]=t,this[D]=i,this[C]=r},i&&(J(S,k,"_l"),J(_,I,"_b"),J(_,k,"_l"),J(_,L,"_o")),f(_[m],{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var n=Y(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=Y(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return G(Y(this,4,t,arguments[1]))},getUint32:function(t){return G(Y(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return W(Y(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return W(Y(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){H(this,1,t,B,n)},setUint8:function(t,n){H(this,1,t,B,n)},setInt16:function(t,n){H(this,2,t,V,n,arguments[2])},setUint16:function(t,n){H(this,2,t,V,n,arguments[2])},setInt32:function(t,n){H(this,4,t,z,n,arguments[2])},setUint32:function(t,n){H(this,4,t,z,n,arguments[2])},setFloat32:function(t,n){H(this,4,t,K,n,arguments[2])},setFloat64:function(t,n){H(this,8,t,q,n,arguments[2])}});y(S,g),y(_,b),c(_[m],u.VIEW,!0),n[g]=S,n[b]=_},function(t,n,r){var e=r(3),i=r(52),o=r(69),u=r(182),c=r(11).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(114),i=r(7)("iterator"),o=r(80);t.exports=r(52).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(78),i=r(170),o=r(80),u=r(30);t.exports=r(140)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){function r(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=r},function(t,n){function r(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}t.exports=r},function(t,n){function r(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function i(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(n){try{return s.call(null,t,0)}catch(n){return s.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(n){try{return l.call(null,t)}catch(n){return l.call(this,t)}}}function u(){d&&v&&(d=!1,v.length?p=v.concat(p):y=-1,p.length&&c())}function c(){if(!d){var t=i(u);d=!0;for(var n=p.length;n;){for(v=p,p=[];++y<n;)v&&v[y].run();y=-1,n=p.length}v=null,d=!1,o(t)}}function f(t,n){this.fun=t,this.array=n}function a(){}var s,l,h=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(t){s=r}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(t){l=e}}();var v,p=[],d=!1,y=-1;h.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];p.push(new f(t,n)),1!==p.length||d||i(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.prependListener=a,h.prependOnceListener=a,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=[].copyWithin||function(t,n){var r=e(this),u=o(r.length),c=i(t,u),f=i(n,u),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?u:i(a,u))-f,u-c),l=1;for(f<c&&c<f+s&&(l=-1,f+=s-1,c+=s-1);s-- >0;)f in r?r[c]=r[f]:delete r[c],c+=l,f+=l;return r}},function(t,n,r){var e=r(79);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var e=r(26),i=r(17),o=r(115),u=r(16);t.exports=function(t,n,r,c,f){e(n);var a=i(t),s=o(a),l=u(a.length),h=f?l-1:0,v=f?-1:1;if(r<2)for(;;){if(h in s){c=s[h],h+=v;break}if(h+=v,f?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;f?h>=0:l>h;h+=v)h in s&&(c=n(c,s[h],h,a));return c}},function(t,n,r){"use strict";var e=r(26),i=r(6),o=r(121),u=[].slice,c={},f=function(t,n,r){if(!(n in c)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";c[n]=Function("F,a","return new F("+e.join(",")+")")}return c[n](t,r)};t.exports=Function.bind||function(t){var n=e(this),r=u.call(arguments,1),c=function(){var e=r.concat(u.call(arguments));return this instanceof c?f(n,e.length,e):o(n,e,t)};return i(n.prototype)&&(c.prototype=n.prototype),c}},function(t,n,r){"use strict";var e=r(11).f,i=r(70),o=r(73),u=r(53),c=r(68),f=r(46),a=r(79),s=r(140),l=r(170),h=r(74),v=r(10),p=r(65).fastKey,d=v?"_s":"size",y=function(t,n){var r,e=p(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,n,r,s){var l=t(function(t,e){c(t,l,n,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=e&&a(e,r,t[s],t)});return o(l.prototype,{clear:function(){for(var t=this,n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=this,r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){c(this,l,"forEach");for(var n,r=u(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(this,t)}}),v&&e(l.prototype,"size",{get:function(){return f(this[d])}}),l},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=p(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,r){s(t,n,function(t,n){this._t=t,this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==n?l(0,r.k):"values"==n?l(0,r.v):l(0,[r.k,r.v]):(t._t=void 0,l(1))},r?"entries":"values",!r,!0),h(n)}}},function(t,n,r){var e=r(114),i=r(161);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var e=r(73),i=r(65).getWeak,o=r(2),u=r(6),c=r(68),f=r(79),a=r(48),s=r(24),l=a(5),h=a(6),v=0,p=function(t){return t._l||(t._l=new d)},d=function(){this.a=[]},y=function(t,n){return l(t.a,function(t){return t[0]===n})};d.prototype={get:function(t){var n=y(this,t);if(n)return n[1]},has:function(t){return!!y(this,t)},set:function(t,n){var r=y(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(t){var n=h(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,r,o){var a=t(function(t,e){c(t,a,n,"_i"),t._i=v++,t._l=void 0,void 0!=e&&f(e,r,t[o],t)});return e(a.prototype,{delete:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).delete(t):n&&s(n,this._i)&&delete n[this._i]},has:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).has(t):n&&s(n,this._i)}}),a},def:function(t,n,r){var e=i(o(n),!0);return!0===e?p(t).set(n,r):e[t._i]=r,t},ufstore:p}},function(t,n,r){t.exports=!r(10)&&!r(4)(function(){return 7!=Object.defineProperty(r(132)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(6),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var e=r(2);t.exports=function(t,n,r,i){try{return i?n(e(r)[0],r[1]):n(r)}catch(n){var o=t.return;throw void 0!==o&&e(o.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,r){"use strict";var e=r(72),i=r(125),o=r(116),u=r(17),c=r(115),f=Object.assign;t.exports=!f||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=f({},t)[r]||Object.keys(f({},n)).join("")!=e})?function(t,n){for(var r=u(t),f=arguments.length,a=1,s=i.f,l=o.f;f>a;)for(var h,v=c(arguments[a++]),p=s?e(v).concat(s(v)):e(v),d=p.length,y=0;d>y;)l.call(v,h=p[y++])&&(r[h]=v[h]);return r}:f},function(t,n,r){var e=r(11),i=r(2),o=r(72);t.exports=r(10)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(30),i=r(71).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(24),i=r(30),o=r(117)(!1),u=r(145)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){var e=r(72),i=r(30),o=r(116).f;t.exports=function(t){return function(n){for(var r,u=i(n),c=e(u),f=c.length,a=0,s=[];f>a;)o.call(u,r=c[a++])&&s.push(t?[r,u[r]]:u[r]);return s}}},function(t,n,r){var e=r(71),i=r(125),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(82).trim;t.exports=1/e(r(150)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(82).trim,o=r(150),u=/^[\-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(16),i=r(149),o=r(46);t.exports=function(t,n,r,u){var c=String(o(t)),f=c.length,a=void 0===r?" ":String(r),s=e(n);if(s<=f||""==a)return c;var l=s-f,h=i.call(a,Math.ceil(l/a.length));return h.length>l&&(h=h.slice(0,l)),u?h+c:c+h}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(this,t);return n&&n.v},set:function(t,n){return e.def(this,0===t?0:t,n)}},e,!0)},function(t,n,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(120)})},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var e,i=r(48)(0),o=r(28),u=r(65),c=r(172),f=r(166),a=r(6),s=u.getWeak,l=Object.isExtensible,h=f.ufstore,v={},p=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(t){if(a(t)){var n=s(t);return!0===n?h(this).get(t):n?n[this._i]:void 0}},set:function(t,n){return f.def(this,t,n)}},y=t.exports=r(118)("WeakMap",p,d,f,!0,!0);7!=(new y).set((Object.freeze||Object)(v),7).get(v)&&(e=f.getConstructor(p),c(e.prototype,d),u.NEED=!0,i(["delete","has","get","set"],function(t){var n=y.prototype,r=n[t];o(n,t,function(n,i){if(a(n)&&!l(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)})}))},,,,function(t,n){"use strict";function r(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")})}if(yiliaConfig&&yiliaConfig.toc_hide_index){document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"})}var n=document.querySelector("#js-aboutme");n&&0!==n.length&&(n.innerHTML=n.innerText)}t.exports={init:r}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n){var r=/\/|index.html/g;return t.replace(r,"")===n.replace(r,"")}function o(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var o=t[r];i(n,o.getAttribute("href"))&&(0,h.default)(o,"active")}}function u(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}function c(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}function f(t,n,r,e,i){var o=u(t),f=c(t)-n;if(f-r<=i){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,d.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(r||f)+"px",a.style.left=o+"px",a.style.zIndex=e||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");f(t,document.body.scrollTop,-63,2,0),f(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}var l=r(156),h=e(l),v=r(157),p=(e(v),r(382)),d=e(p),y=r(128),g=e(y),b=r(190),m=e(b),x=r(129);(function(){g.default.versions.mobile&&window.screen.width<800&&(o(),s())})(),(0,x.addLoadEvent)(function(){m.default.init()}),t.exports={}},,,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object[e](t,n,{writable:!0,configurable:!0,value:r})}if(r(381),r(391),r(198),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},,,function(t,n,r){r(210),t.exports=r(52).RegExp.escape},,,,function(t,n,r){var e=r(6),i=r(138),o=r(7)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,r){var e=r(202);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(2),i=r(50),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),t!=o)}},function(t,n,r){var e=r(72),i=r(125),o=r(116);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){var e=r(72),i=r(30);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){"use strict";var e=r(208),i=r(121),o=r(26);t.exports=function(){for(var t=o(this),n=arguments.length,r=Array(n),u=0,c=e._,f=!1;n>u;)(r[u]=arguments[u++])===c&&(f=!0);return function(){var e,o=this,u=arguments.length,a=0,s=0;if(!f&&!u)return i(t,r,o);if(e=r.slice(),f)for(;n>a;a++)e[a]===c&&(e[a]=arguments[s++]);for(;u>s;)e.push(arguments[s++]);return i(t,e,o)}}},function(t,n,r){t.exports=r(3)},function(t,n){t.exports=function(t,n){var r=n===Object(n)?function(t){return n[t]}:n;return function(n){return String(n).replace(t,r)}}},function(t,n,r){var e=r(1),i=r(209)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(160)}),r(78)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(48)(4);e(e.P+e.F*!r(47)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(130)}),r(78)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(48)(2);e(e.P+e.F*!r(47)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(0),o=r(47)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(53),i=r(1),o=r(17),u=r(169),c=r(137),f=r(16),a=r(131),s=r(154);i(i.S+i.F*!r(123)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,y=void 0!==d,g=0,b=s(h);if(y&&(d=e(d,p>2?arguments[2]:void 0,2)),void 0==b||v==Array&&c(b))for(n=f(h.length),r=new v(n);n>g;g++)a(r,g,y?d(h[g],g):h[g]);else for(l=b.call(h),r=new v;!(i=l.next()).done;g++)a(r,g,y?u(l,d,[i.value,g],!0):i.value);return r.length=g,r}})},function(t,n,r){"use strict";var e=r(1),i=r(117)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(47)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(138)})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=[].join;e(e.P+e.F*(r(115)!=Object||!r(47)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=r(67),u=r(16),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(47)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(1);e(e.P+e.F*!r(47)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(131);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(135),o=r(45),u=r(75),c=r(16),f=[].slice;e(e.P+e.F*r(4)(function(){i&&f.call(i)}),"Array",{slice:function(t,n){var r=c(this.length),e=o(this);if(n=void 0===n?r:n,"Array"==e)return f.call(this,t,n);for(var i=u(t,r),a=u(n,r),s=c(a-i),l=Array(s),h=0;h<s;h++)l[h]="String"==e?this.charAt(i+h):this[i+h];return l}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(3);e(e.P+e.F*!r(47)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(26),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(47)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(74)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=Date.prototype.getTime,u=function(t){return t>9?t:"0"+t};e(e.P+e.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){
if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":n>9999?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(r>99?r:"0"+u(r))+"Z"}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(27)(i,e,r(204))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(28)(e,o,function(){var t=c.call(this);return t===t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(163)})},function(t,n,r){"use strict";var e=r(6),i=r(32),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(11).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(11).f,i=r(66),o=r(24),u=Function.prototype,c="name",f=Object.isExtensible||function(){return!0};c in u||r(10)&&e(u,c,{configurable:!0,get:function(){try{var t=this,n=(""+t).match(/^\s*function ([^ (]*)/)[1];return o(t,c)||!f(t)||e(t,c,i(5,n)),n}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(171),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=r(1),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:e})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(142);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(141);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1),i=r(142),o=Math.pow,u=o(2,-52),c=o(2,-23),f=o(2,127)*(2-c),a=o(2,-126),s=function(t){return t+1/u-1/u};e(e.S,"Math",{fround:function(t){var n,r,e=Math.abs(t),o=i(t);return e<a?o*s(e/a/c)*a*c:(n=(1+c/u)*e,r=n-(n-e),r>f||r!=r?o*(1/0):o*r)}})},function(t,n,r){var e=r(1),i=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,o=0,u=0,c=arguments.length,f=0;u<c;)r=i(arguments[u++]),f<r?(e=f/r,o=o*e*e+1,f=r):r>0?(e=r/f,o+=e*e):o+=r;return f===1/0?1/0:f*Math.sqrt(o)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(171)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(142)})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(45),u=r(136),c=r(50),f=r(4),a=r(71).f,s=r(31).f,l=r(11).f,h=r(82).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(70)(y))==v,b="trim"in String.prototype,m=function(t){var n=c(t,!1);if("string"==typeof n&&n.length>2){n=b?n.trim():h(n,3);var r,e,i,o=n.charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,f=n.slice(2),a=0,s=f.length;a<s;a++)if((u=f.charCodeAt(a))<48||u>i)return NaN;return parseInt(f,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?f(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(m(n)),r,p):m(n)};for(var x,w=r(10)?a(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)i(d,x=w[S])&&!i(p,x)&&l(p,x,s(d,x));p.prototype=y,y.constructor=p,r(28)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(168)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(168),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(178);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),i=r(67),o=r(159),u=r(149),c=1..toFixed,f=Math.floor,a=[0,0,0,0,0,0],s="Number.toFixed: incorrect invocation!",l="0",h=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*a[r],a[r]=e%1e7,e=f(e/1e7)},v=function(t){for(var n=6,r=0;--n>=0;)r+=a[n],a[n]=f(r/t),r=r%t*1e7},p=function(){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==a[t]){var r=String(a[t]);n=""===n?r:n+u.call(l,7-r.length)+r}return n},d=function(t,n,r){return 0===n?r:n%2==1?d(t,n-1,r*t):d(t*t,n/2,r)},y=function(t){for(var n=0,r=t;r>=4096;)n+=12,r/=4096;for(;r>=2;)n+=1,r/=2;return n};e(e.P+e.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){c.call({})})),"Number",{toFixed:function(t){var n,r,e,c,f=o(this,s),a=i(t),g="",b=l;if(a<0||a>20)throw RangeError(s);if(f!=f)return"NaN";if(f<=-1e21||f>=1e21)return String(f);if(f<0&&(g="-",f=-f),f>1e-21)if(n=y(f*d(2,69,1))-69,r=n<0?f*d(2,-n,1):f/d(2,n,1),r*=4503599627370496,(n=52-n)>0){for(h(0,r),e=a;e>=7;)h(1e7,0),e-=7;for(h(d(10,e,1),0),e=n-1;e>=23;)v(1<<23),e-=23;v(1<<e),h(1,1),v(2),b=p()}else h(0,r),h(1<<-n,0),b=p()+u.call(l,a);return a>0?(c=b.length,b=g+(c<=a?"0."+u.call(l,a-c)+b:b.slice(0,c-a)+"."+b.slice(c-a))):b=g+b,b}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(159),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(172)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(70)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperties:r(173)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("freeze",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(30),i=r(31).f;r(49)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(49)("getOwnPropertyNames",function(){return r(174).f})},function(t,n,r){var e=r(17),i=r(32);r(49)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6);r(49)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},function(t,n,r){var e=r(6);r(49)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(6);r(49)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(180)})},function(t,n,r){var e=r(17),i=r(72);r(49)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("preventExtensions",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("seal",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(144).set})},function(t,n,r){"use strict";var e=r(114),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(28)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(178);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u=r(69),c=r(3),f=r(53),a=r(114),s=r(1),l=r(6),h=r(26),v=r(68),p=r(79),d=r(146),y=r(151).set,g=r(143)(),b="Promise",m=c.TypeError,x=c.process,w=c[b],x=c.process,S="process"==a(x),_=function(){},O=!!function(){try{var t=w.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(_,_)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(_)instanceof n}catch(t){}}(),E=function(t,n){return t===n||t===w&&n===o},P=function(t){var n;return!(!l(t)||"function"!=typeof(n=t.then))&&n},j=function(t){return E(w,t)?new F(t):new i(t)},F=i=function(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw m("Bad Promise constructor");n=t,r=e}),this.resolve=h(n),this.reject=h(r)},M=function(t){try{t()}catch(t){return{error:t}}},A=function(t,n){if(!t._n){t._n=!0;var r=t._c;g(function(){for(var e=t._v,i=1==t._s,o=0;r.length>o;)!function(n){var r,o,u=i?n.ok:n.fail,c=n.resolve,f=n.reject,a=n.domain;try{u?(i||(2==t._h&&I(t),t._h=1),!0===u?r=e:(a&&a.enter(),r=u(e),a&&a.exit()),r===n.promise?f(m("Promise-chain cycle")):(o=P(r))?o.call(r,c,f):c(r)):f(e)}catch(t){f(t)}}(r[o++]);t._c=[],t._n=!1,n&&!t._h&&N(t)})}},N=function(t){y.call(c,function(){var n,r,e,i=t._v;if(T(t)&&(n=M(function(){S?x.emit("unhandledRejection",i,t):(r=c.onunhandledrejection)?r({promise:t,reason:i}):(e=c.console)&&e.error&&e.error("Unhandled promise rejection",i)}),t._h=S||T(t)?2:1),t._a=void 0,n)throw n.error})},T=function(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,e=0;r.length>e;)if(n=r[e++],n.fail||!T(n.promise))return!1;return!0},I=function(t){y.call(c,function(){var n;S?x.emit("rejectionHandled",t):(n=c.onrejectionhandled)&&n({promise:t,reason:t._v})})},k=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),A(n,!0))},L=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw m("Promise can't be resolved itself");(n=P(t))?g(function(){var e={_w:r,_d:!1};try{n.call(t,f(L,e,1),f(k,e,1))}catch(t){k.call(e,t)}}):(r._v=t,r._s=1,A(r,!1))}catch(t){k.call({_w:r,_d:!1},t)}}};O||(w=function(t){v(this,w,b,"_h"),h(t),e.call(this);try{t(f(L,this,1),f(k,this,1))}catch(t){k.call(this,t)}},e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},e.prototype=r(73)(w.prototype,{then:function(t,n){var r=j(d(this,w));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=S?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&A(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),F=function(){var t=new e;this.promise=t,this.resolve=f(L,t,1),this.reject=f(k,t,1)}),s(s.G+s.W+s.F*!O,{Promise:w}),r(81)(w,b),r(74)(b),o=r(52)[b],s(s.S+s.F*!O,b,{reject:function(t){var n=j(this);return(0,n.reject)(t),n.promise}}),s(s.S+s.F*(u||!O),b,{resolve:function(t){if(t instanceof w&&E(t.constructor,this))return t;var n=j(this);return(0,n.resolve)(t),n.promise}}),s(s.S+s.F*!(O&&r(123)(function(t){w.all(t).catch(_)})),b,{all:function(t){var n=this,r=j(n),e=r.resolve,i=r.reject,o=M(function(){var r=[],o=0,u=1;p(t,!1,function(t){var c=o++,f=!1;r.push(void 0),u++,n.resolve(t).then(function(t){f||(f=!0,r[c]=t,--u||e(r))},i)}),--u||e(r)});return o&&i(o.error),r.promise},race:function(t){var n=this,r=j(n),e=r.reject,i=M(function(){p(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i&&e(i.error),r.promise}})},function(t,n,r){var e=r(1),i=r(26),o=r(2),u=(r(3).Reflect||{}).apply,c=Function.apply;e(e.S+e.F*!r(4)(function(){u(function(){})}),"Reflect",{apply:function(t,n,r){var e=i(t),f=o(r);return u?u(e,n,f):c.call(e,n,f)}})},function(t,n,r){var e=r(1),i=r(70),o=r(26),u=r(2),c=r(6),f=r(4),a=r(163),s=(r(3).Reflect||{}).construct,l=f(function(){function t(){}return!(s(function(){},[],t)instanceof t)}),h=!f(function(){s(function(){})});e(e.S+e.F*(l||h),"Reflect",{construct:function(t,n){o(t),u(n);var r=arguments.length<3?t:o(arguments[2]);if(h&&!l)return s(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(a.apply(t,e))}var f=r.prototype,v=i(c(f)?f:Object.prototype),p=Function.apply.call(t,v,n);return c(p)?p:v}})},function(t,n,r){var e=r(11),i=r(1),o=r(2),u=r(50);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(31).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(139)(o,"Object",function(){var t,n=this,r=n._k;do{if(n._i>=r.length)return{value:void 0,done:!0}}while(!((t=r[n._i++])in n._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(31),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(32),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){function e(t,n){var r,c,s=arguments.length<3?t:arguments[2];return a(t)===s?t[n]:(r=i.f(t,n))?u(r,"value")?r.value:void 0!==r.get?r.get.call(s):void 0:f(c=o(t))?e(c,n,s):void 0}var i=r(31),o=r(32),u=r(24),c=r(1),f=r(6),a=r(2);c(c.S,"Reflect",{get:e})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(177)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(144);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){function e(t,n,r){var f,h,v=arguments.length<4?t:arguments[3],p=o.f(s(t),n);if(!p){if(l(h=u(t)))return e(h,n,r,v);p=a(0)}return c(p,"value")?!(!1===p.writable||!l(v)||(f=o.f(v,n)||a(0),f.value=r,i.f(v,n,f),0)):void 0!==p.set&&(p.set.call(v,r),!0)}var i=r(11),o=r(31),u=r(32),c=r(24),f=r(1),a=r(66),s=r(2),l=r(6);f(f.S,"Reflect",{set:e})},function(t,n,r){var e=r(3),i=r(136),o=r(11).f,u=r(71).f,c=r(122),f=r(120),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(10)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),o=void 0===n;return!r&&e&&t.constructor===a&&o?t:i(p?new s(e&&!o?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&o?f.call(t):n),r?this:l,a)};for(var d=u(s),y=0;d.length>y;)!function(t){t in a||o(a,t,{configurable:!0,get:function(){return s[t]},set:function(n){s[t]=n}})}(d[y++]);l.constructor=a,a.prototype=l,r(28)(e,"RegExp",a)}r(74)("RegExp")},function(t,n,r){r(119)("match",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("replace",2,function(t,n,r){return[function(e,i){"use strict";var o=t(this),u=void 0==e?void 0:e[n];return void 0!==u?u.call(e,o,i):r.call(String(o),e,i)},r]})},function(t,n,r){r(119)("search",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("split",2,function(t,n,e){"use strict";var i=r(122),o=e,u=[].push,c="split",f="length",a="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[f]||2!="ab"[c](/(?:ab)*/)[f]||4!="."[c](/(.?)(.?)/)[f]||"."[c](/()()/)[f]>1||""[c](/.?/)[f]){var s=void 0===/()??/.exec("")[1];e=function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(r,t,n);var e,c,l,h,v,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===n?4294967295:n>>>0,b=new RegExp(t.source,d+"g");for(s||(e=new RegExp("^"+b.source+"$(?!\\s)",d));(c=b.exec(r))&&!((l=c.index+c[0][f])>y&&(p.push(r.slice(y,c.index)),!s&&c[f]>1&&c[0].replace(e,function(){for(v=1;v<arguments[f]-2;v++)void 0===arguments[v]&&(c[v]=void 0)}),c[f]>1&&c.index<r[f]&&u.apply(p,c.slice(1)),h=c[0][f],y=l,p[f]>=g));)b[a]===c.index&&b[a]++;return y===r[f]?!h&&b.test("")||p.push(""):p.push(r.slice(y)),p[f]>g?p.slice(0,g):p}}else"0"[c](void 0,0)[f]&&(e=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function(r,i){var o=t(this),u=void 0==r?void 0:r[n];return void 0!==u?u.call(r,o,i):e.call(String(o),r,i)},e]})},function(t,n,r){"use strict";r(184);var e=r(2),i=r(120),o=r(10),u="toString",c=/./[u],f=function(t){r(28)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(29)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){"use strict";r(29)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(29)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(29)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="endsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{endsWith:function(t){var n=o(this,t,u),r=arguments.length>1?arguments[1]:void 0,e=i(n.length),f=void 0===r?e:Math.min(i(r),e),a=String(t);return c?c.call(n,a,f):n.slice(f-a.length,f)===a}})},function(t,n,r){"use strict";r(29)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(29)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){"use strict";r(29)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){var e=r(1),i=r(75),o=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?o(n):o(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(148),o="includes";e(e.P+e.F*r(134)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(29)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(147)(!0);r(140)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(29)("link",function(t){return function(n){return t(this,"a","href",n)}})},function(t,n,r){var e=r(1),i=r(30),o=r(16);e(e.S,"String",{raw:function(t){for(var n=i(t.raw),r=o(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),c<e&&u.push(String(arguments[c]));return u.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(149)})},function(t,n,r){"use strict";r(29)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="startsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(29)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(29)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(29)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(82)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(10),u=r(1),c=r(28),f=r(65).KEY,a=r(4),s=r(126),l=r(81),h=r(76),v=r(7),p=r(182),d=r(153),y=r(206),g=r(205),b=r(138),m=r(2),x=r(30),w=r(50),S=r(66),_=r(70),O=r(174),E=r(31),P=r(11),j=r(72),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(71).f=O.f=Z,r(116).f=X,r(125).f=tt,o&&!r(69)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(27)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(127),o=r(152),u=r(2),c=r(75),f=r(16),a=r(6),s=r(3).ArrayBuffer,l=r(146),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&s.isView,d=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(s!==h),{ArrayBuffer:h}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return p&&p(t)||a(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(u(this),t);for(var r=u(this).byteLength,e=c(t,r),i=c(void 0===n?r:n,r),o=new(l(this,h))(f(i-e)),a=new v(this),s=new v(o),p=0;e<i;)s.setUint8(p++,a.getUint8(e++));return o}}),r(74)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(127).ABV,{DataView:r(152).DataView})},function(t,n,r){r(55)("Float32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Float64",8,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}},!0)},function(t,n,r){"use strict";var e=r(166);r(118)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(117)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)("includes")},function(t,n,r){var e=r(1),i=r(143)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(165)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o+(e>>>0)+((i&u|(i|u)&~(i+u>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>16,f=i>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>16)+((o*f>>>0)+(a&r)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o-(e>>>0)-((~i&u|~(i^u)&i-u>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>>16,f=i>>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>>16)+((o*f>>>0)+(a&r)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(176)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),i=r(177),o=r(30),u=r(31),c=r(131);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r=o(t),e=u.f,f=i(r),a={},s=0;f.length>s;)c(a,n=f[s++],e(r,n));return a}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(176)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),i=r(3),o=r(52),u=r(143)(),c=r(7)("observable"),f=r(26),a=r(2),s=r(68),l=r(73),h=r(27),v=r(79),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},m=function(t,n){a(t),this._c=void 0,this._o=t,t=new x(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};m.prototype=l({},{unsubscribe:function(){b(this)}});var x=function(t){this._s=t};x.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var w=function(t){s(this,w,"Observable","_f")._f=f(t)};l(w.prototype,{subscribe:function(t){return new m(t,this._f)},forEach:function(t){var n=this;return new(o.Promise||i.Promise)(function(r,e){f(t);var i=n.subscribe({next:function(n){try{return t(n)}catch(t){e(t),i.unsubscribe()}},error:e,complete:r})})}}),l(w,{from:function(t){var n="function"==typeof this?this:w,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return u(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,r=Array(n);t<n;)r[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var n=!1;return u(function(){if(!n){for(var e=0;e<r.length;++e)if(t.next(r[e]),n)return;t.complete()}}),function(){n=!0}})}}),h(w.prototype,c,function(){return this}),e(e.G,{Observable:w}),r(74)("Observable")},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.map,c=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:o(arguments[2]),e=u(i(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var f=c.get(n);return f.delete(r),!!f.size||c.delete(n)}})},function(t,n,r){var e=r(185),i=r(161),o=r(54),u=r(2),c=r(32),f=o.keys,a=o.key,s=function(t,n){var r=f(t,n),o=c(t);if(null===o)return r;var u=s(o,n);return u.length?r.length?i(new e(r.concat(u))):u:r};o.exp({getMetadataKeys:function(t){return s(u(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){
return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(26),u=e.key,c=e.set;e.exp({metadata:function(t,n){return function(r,e){c(t,n,(void 0!==e?i:o)(r),u(e))}}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(165)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(16),u=r(122),c=r(120),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(139)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(82)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(82)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(153)("asyncIterator")},function(t,n,r){r(153)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){for(var e=r(155),i=r(28),o=r(3),u=r(27),c=r(80),f=r(7),a=f("iterator"),s=f("toStringTag"),l=c.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],v=0;v<5;v++){var p,d=h[v],y=o[d],g=y&&y.prototype;if(g){g[a]||u(g,a,l),g[s]||u(g,s,d),c[d]=l;for(p in e)g[p]||i(g,p,e[p],!0)}}},function(t,n,r){var e=r(1),i=r(151);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(121),u=r(207),c=e.navigator,f=!!c&&/MSIE .\./.test(c.userAgent),a=function(t){return f?function(n,r){return t(o(u,[].slice.call(arguments,2),"function"==typeof n?n:Function(n)),r)}:t};i(i.G+i.B+i.F*f,{setTimeout:a(e.setTimeout),setInterval:a(e.setInterval)})},function(t,n,r){r(330),r(269),r(271),r(270),r(273),r(275),r(280),r(274),r(272),r(282),r(281),r(277),r(278),r(276),r(268),r(279),r(283),r(284),r(236),r(238),r(237),r(286),r(285),r(256),r(266),r(267),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(317),r(322),r(329),r(320),r(312),r(313),r(318),r(323),r(325),r(308),r(309),r(310),r(311),r(314),r(315),r(316),r(319),r(321),r(324),r(326),r(327),r(328),r(231),r(233),r(232),r(235),r(234),r(220),r(218),r(224),r(221),r(227),r(229),r(217),r(223),r(214),r(228),r(212),r(226),r(225),r(219),r(222),r(211),r(213),r(216),r(215),r(230),r(155),r(302),r(307),r(184),r(303),r(304),r(305),r(306),r(287),r(183),r(185),r(186),r(342),r(331),r(332),r(337),r(340),r(341),r(335),r(338),r(336),r(339),r(333),r(334),r(288),r(289),r(290),r(291),r(292),r(295),r(293),r(294),r(296),r(297),r(298),r(299),r(301),r(300),r(343),r(369),r(372),r(371),r(373),r(374),r(370),r(375),r(376),r(354),r(357),r(353),r(351),r(352),r(355),r(356),r(346),r(368),r(377),r(345),r(347),r(349),r(348),r(350),r(359),r(360),r(362),r(361),r(364),r(363),r(365),r(366),r(367),r(344),r(358),r(380),r(379),r(378),t.exports=r(52)},function(t,n){function r(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}t.exports=r},,,,,,,,,function(t,n,r){(function(n,r){!function(n){"use strict";function e(t,n,r,e){var i=n&&n.prototype instanceof o?n:o,u=Object.create(i.prototype),c=new p(e||[]);return u._invoke=s(t,r,c),u}function i(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function u(){}function c(){}function f(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function a(t){function n(r,e,o,u){var c=i(t[r],t,e);if("throw"!==c.type){var f=c.arg,a=f.value;return a&&"object"==typeof a&&m.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,o,u)},function(t){n("throw",t,o,u)}):Promise.resolve(a).then(function(t){f.value=t,o(f)},u)}u(c.arg)}function e(t,r){function e(){return new Promise(function(e,i){n(t,r,e,i)})}return o=o?o.then(e,e):e()}"object"==typeof r&&r.domain&&(n=r.domain.bind(n));var o;this._invoke=e}function s(t,n,r){var e=P;return function(o,u){if(e===F)throw new Error("Generator is already running");if(e===M){if("throw"===o)throw u;return y()}for(r.method=o,r.arg=u;;){var c=r.delegate;if(c){var f=l(c,r);if(f){if(f===A)continue;return f}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(e===P)throw e=M,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);e=F;var a=i(t,n,r);if("normal"===a.type){if(e=r.done?M:j,a.arg===A)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(e=M,r.method="throw",r.arg=a.arg)}}}function l(t,n){var r=t.iterator[n.method];if(r===g){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=g,l(t,n),"throw"===n.method))return A;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var e=i(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,A;var o=e.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g),n.delegate=null,A):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function h(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function v(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var n=t[w];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function n(){for(;++r<t.length;)if(m.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=g,n.done=!0,n};return e.next=e}}return{next:y}}function y(){return{value:g,done:!0}}var g,b=Object.prototype,m=b.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},w=x.iterator||"@@iterator",S=x.asyncIterator||"@@asyncIterator",_=x.toStringTag||"@@toStringTag",O="object"==typeof t,E=n.regeneratorRuntime;if(E)return void(O&&(t.exports=E));E=n.regeneratorRuntime=O?t.exports:{},E.wrap=e;var P="suspendedStart",j="suspendedYield",F="executing",M="completed",A={},N={};N[w]=function(){return this};var T=Object.getPrototypeOf,I=T&&T(T(d([])));I&&I!==b&&m.call(I,w)&&(N=I);var k=c.prototype=o.prototype=Object.create(N);u.prototype=k.constructor=c,c.constructor=u,c[_]=u.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===u||"GeneratorFunction"===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,_ in t||(t[_]="GeneratorFunction")),t.prototype=Object.create(k),t},E.awrap=function(t){return{__await:t}},f(a.prototype),a.prototype[S]=function(){return this},E.AsyncIterator=a,E.async=function(t,n,r,i){var o=new a(e(t,n,r,i));return E.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},f(k),k[_]="Generator",k.toString=function(){return"[object Generator]"},E.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var e=n.pop();if(e in t)return r.value=e,r.done=!1,r}return r.done=!0,r}},E.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(v),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,e){return o.type="throw",o.arg=t,r.next=n,e&&(r.method="next",r.arg=g),!!e}if(this.done)throw t;for(var r=this,e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=m.call(i,"catchLoc"),c=m.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&m.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),A},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),v(r),A}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;v(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:d(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=g),A}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(n,function(){return this}(),r(158))}])</script><script src="/./main.0cf68a.js"></script><script>!function(){!function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}("/slider.e37972.js")}()</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">杂谈</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">经历</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">与人沟通</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">项目合作</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">搜索技巧</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">百度</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">谷歌</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">书</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">收藏</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">打包</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">swagger</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">springfox</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">mybatis</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Portainer.io</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Typora</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">快捷键</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">压缩算法</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">PBOOTCMS</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Eclipse</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">新环境</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">软件</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">软件说明</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">WebRTC</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">类型转换</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">JVM</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">接口</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">抽象类</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">内部类</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">if</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">逻辑判断</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">for循环</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Tomcat</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">http</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">vite</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">WEB</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">servlet</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">JSP</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">JPA</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">json</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">数据库</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">SQL</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">小技巧</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">小科普</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">git</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Gitee</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">hexo</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">node.js</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">ElasticSearch</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">基础概念</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">面向对象</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">mysql</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">索引</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">锁</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">事务</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Navicat</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">JQuery</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">mqtt</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">代理</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">工具类代码</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">轮子</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">消息中间件</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">设计规范</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">编程规范</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">RESTful</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">HATEOAS</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">java概述</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">历史版本</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">安装</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">MySQL基础概念</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">HTML</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">日志</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">PO-BO-VO，DTO-DAO与POJO</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">spring</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">maven</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">C</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">IDEA</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">插件</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">微信</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Redis</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">ngnix</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">MyBatis-Plus</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">npm</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">vue</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">SpringBoot</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、请确保node版本大于6.2<br/>2、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            3、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接1</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接2</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接3</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接4</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接5</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接6</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>
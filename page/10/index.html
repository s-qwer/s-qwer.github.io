<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>swx</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="我的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="swx">
<meta property="og:url" content="https://s-qwer.github.io/page/10/index.html">
<meta property="og:site_name" content="swx">
<meta property="og:description" content="我的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="swx">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="swx" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">swx</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">blog</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://s-qwer.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-6.1.nginx配置" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/30/6.1.nginx%E9%85%8D%E7%BD%AE/" class="article-date">
  <time class="dt-published" datetime="2021-03-30T06:47:54.000Z" itemprop="datePublished">2021-03-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/30/6.1.nginx%E9%85%8D%E7%BD%AE/">nginx配置</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Nginx (“engine x”) 是一个高性能的HTTP和反向代理服务器，也是一个IMAP/POP3/SMTP服务器。Nginx是由Igor Sysoev为俄罗斯访问量第二的Rambler.ru站点开发的，第一个公开版本0.1.0发布于2004年10月4日。其将源代码以类BSD许可证的形式发布，因它的稳定性、丰富的功能集、示例配置文件和低系统资源的消耗而闻名。2011年6月1日，nginx 1.0.4发布。</p>
<p>Nginx是一款轻量级的Web 服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器，并在一个BSD-like 协议下发行。由俄罗斯的程序设计师Igor Sysoev所开发，供俄国大型的入口网站及搜索引擎Rambler（俄文：Рамблер）使用。其特点是占有内存少，并发能力强，事实上nginx的并发能力确实在同类型的网页服务器中表现较好，中国大陆使用nginx网站用户有：百度、京东、新浪、网易、腾讯、淘宝等。</p>
<p><code>Nginx</code> 是开源、高性能、高可靠的 <code>Web</code> 和反向代理服务器，而且支持热部署，几乎可以做到 7 * 24 小时不间断运行，即使运行几个月也不需要重新启动，还能在不间断服务的情况下对软件版本进行热更新。性能是 <code>Nginx</code> 最重要的考量，其占用内存少、并发能力强、能支持高达 5w 个并发连接数，最重要的是， <code>Nginx</code> 是免费的并可以商业化，配置使用也比较简单</p>
<p>优点：Nginx 可以在大多数 UnixLinux OS 上编译运行，并有 Windows 移植版。 Nginx 的1.4.0稳定版已经于2013年4月24日发布，一般情况下，对于新建站点，建议使用最新稳定版作为生产版本，已有站点的升级急迫性不高。Nginx 的源代码使用 2-clause BSD-like license。</p>
<p>Nginx 是一个很强大的高性能Web和反向代理服务器，它具有很多非常优越的特性：</p>
<p>在连接高并发的情况下，Nginx是Apache服务器不错的替代品：Nginx在美国是做虚拟主机生意的老板们经常选择的软件平台之一。能够支持高达 50,000 个并发连接数的响应，感谢Nginx为我们选择了 epoll and kqueue作为开发模型。</p>
<ul>
<li>高并发、高性能；</li>
<li>模块化架构使得它的扩展性非常好；</li>
<li>异步非阻塞的事件驱动模型这点和 <code>Node.js</code> 相似；</li>
<li>相对于其它服务器来说它可以连续几个月甚至更长而不需要重启服务器使得它具有高可靠性；</li>
<li>热部署、平滑升级；</li>
<li>完全开源，生态繁荣</li>
</ul>
<p>意义：互联网飞速发展的今天,大用户量高并发已经成为互联网的主体.怎样能让一个网站能够承载几万个或几十万个用户的持续访问呢？这是一些中小网站急需解决的问题。用单机tomcat搭建的网站，在比较理想的状态下能够承受的并发访问量在150到200左右。按照并发访问量占总用户数量的5%到10%这样计算，单点tomcat网站的用户人数在1500到4000左右。对于一个为全国范围提供服务的网站显然是不够用的，为了解决这个问题引入了负载均衡方法。负载均衡就是一个web服务器解决不了的问题可以通过多个web服务器来平均分担压力来解决，并发过来的请求被平均分配到多个后台web服务器来处理，这样压力就被分解开来。</p>
<p>负载均衡服务器分为两种:一种是通过硬件实现的负载均衡服务器，简称硬负载例如：f5。另一种是通过软件来实现的负载均衡，简称软负载:例如apache和nginx。硬负载和软负载相比前者作用的网络层次比较多可以作用到socket接口的数据链路层对发出的请求进行分组转发但是价格成本比较贵，而软负载作用的层次在http协议层之上可以对http请求进行分组转发并且因为是开源的所以几乎是0成本，并且阿里巴巴，京东等电商网站使用的都是Nginx服务器。</p>
<p>应用场景：</p>
<p>1.http服务器，可以做静态网页的http服务器。</p>
<p>2.配置虚拟机。一个域名可以被多个ip绑定。可以根据域名的不同请求转发给运行在不同端口的服务器。</p>
<p>3.反向代理，负载均衡。把请求转发给不同的服务器。</p>
<p>Nginx 的最重要的几个使用场景：</p>
<ol>
<li>静态资源服务，通过本地文件系统提供服务；</li>
<li>反向代理服务，延伸出包括缓存、负载均衡等；</li>
<li><code>API</code> 服务， <code>OpenResty</code> ；</li>
</ol>
<p>对于前端来说 <code>Node.js</code> 并不陌生， <code>Nginx</code> 和 <code>Node.js</code> 的很多理念类似， <code>HTTP</code> 服务器、事件驱动、异步非阻塞等，且 <code>Nginx</code> 的大部分功能使用 <code>Node.js</code> 也可以实现，但 <code>Nginx</code> 和<code>Node.js</code> 并不冲突，都有自己擅长的领域。<code>Nginx</code> 擅长于底层服务器端资源的处理（静态资源处理转发、反向代理，负载均衡等）， <code>Node.js</code> 更擅长上层具体业务逻辑的处理，两者可以完美组合</p>
<p>正向代理隐藏的是客户端</p>
<p>反向代理隐藏的是服务器端</p>
<h1 id="Nginx安装"><a href="#Nginx安装" class="headerlink" title="Nginx安装"></a>Nginx安装</h1><p>官方网站：<a target="_blank" rel="noopener" href="http://nginx.org/">http://nginx.org/</a></p>
<p>Nginx在windows下安装：</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps1.jpg" alt="img"> </p>
<p>执行exe文件，在浏览器中访问localhost:80</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps2.jpg" alt="img"> </p>
<p>Nginx在linux下安装：</p>
<p>1.环境要求：</p>
<p>nginx是C语言开发，建议在linux上运行，本教程使用Centos6.4作为安装环境。</p>
<p>l gcc</p>
<p>​    安装nginx需要先将官网下载的源码进行编译，编译依赖gcc环境，如果没有gcc环境，需要安装gcc：</p>
<p><em><strong>*yum install gcc-c++*</strong></em> </p>
<p>l PCRE</p>
<p>​    PCRE(Perl Compatible Regular Expressions)是一个Perl库，包括 perl 兼容的正则表达式库。nginx的http模块使用pcre来解析正则表达式，所以需要在linux上安装pcre库。</p>
<p><em><strong>*yum install -y pcre pcre-devel*</strong></em></p>
<p>注：pcre-devel是使用pcre开发的一个二次开发库。nginx也需要此库。</p>
<p>l zlib</p>
<p>​    zlib库提供了很多种压缩和解压缩的方式，nginx使用zlib对http包的内容进行gzip，所以需要在linux上安装zlib库。</p>
<p><em><strong>*yum install -y zlib zlib-devel*</strong></em></p>
<p>l openssl</p>
<p>​    OpenSSL 是一个强大的安全套接字层密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及SSL协议，并提供丰富的应用程序供测试或其它目的使用。</p>
<p>​    nginx不仅支持http协议，还支持https（即在ssl协议上传输http），所以需要在linux安装openssl库。</p>
<p><em><strong>*yum install -y openssl openssl-devel*</strong></em></p>
<p>****2.****编译及安装</p>
<p>第一步：把nginx的源码包上传至linux服务器</p>
<p>第二步：解压源码包。 tar -zxf nginx-1.8.0.tar.gz </p>
<p>第三步：进入nginx-1.8.0文件夹。</p>
<p>第四步：使用configure命令创建makefile。参数设置如下：</p>
<p>./configure \</p>
<p>–prefix=/usr/local/nginx \</p>
<p>–pid-path=/var/run/nginx/nginx.pid \</p>
<p>–lock-path=/var/lock/nginx.lock \</p>
<p>–error-log-path=/var/log/nginx/error.log \</p>
<p>–http-log-path=/var/log/nginx/access.log \</p>
<p>–with-http_gzip_static_module \</p>
<p>–http-client-body-temp-path=/var/temp/nginx/client \</p>
<p>–http-proxy-temp-path=/var/temp/nginx/proxy \</p>
<p>–http-fastcgi-temp-path=/var/temp/nginx/fastcgi \</p>
<p>–http-uwsgi-temp-path=/var/temp/nginx/uwsgi \</p>
<p>–http-scgi-temp-path=/var/temp/nginx/scgi</p>
<p><em><strong>*注意：上边将临时文件目录指定为*</strong>***</em>*/var/temp/nginx*<strong><strong><strong>*，需要在*</strong></strong></strong>*/var*<strong><strong><strong>*下创建*</strong></strong></strong>*temp*<strong><strong><strong>*及*</strong></strong></strong>*nginx****<em><strong>*目录*</strong></em></p>
<p><em><strong>*mkdir  -p  /var/temp/nginx*</strong></em></p>
<p>第五步：make</p>
<p>第六步: make install</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps3.jpg" alt="img"> </p>
<p>以上操作完成后，进入/usr/local/nginx目录,ll</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps4.jpg" alt="img"> </p>
<p>conf它里面装入的是nginx相关的配置文件</p>
<p>html目录 它里面装入的html代码</p>
<p>sbin目录它里面有一个nginx (这个nginx其实就相当于是windows系统的exe)</p>
<p>想要启动nginx只需要执行bin目录下的nginx命令就可以</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps5.jpg" alt="img"> </p>
<p>Nginx服务在启动时会启动两个服务</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps6.jpg" alt="img">此时如果想检测访问的话，去浏览器输入：192.168.19.128：80</p>
<p>使用 <code>yum</code> 安装 <code>Nginx</code> ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx -y</span><br></pre></td></tr></table></figure>

<p>安装完成后，通过 <code>rpm \-ql nginx</code> 命令查看 <code>Nginx</code> 的安装信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># Nginx配置文件</span><br><span class="line">&#x2F;etc&#x2F;nginx&#x2F;nginx.conf # nginx 主配置文件</span><br><span class="line">&#x2F;etc&#x2F;nginx&#x2F;nginx.conf.default</span><br><span class="line"></span><br><span class="line"># 可执行程序文件</span><br><span class="line">&#x2F;usr&#x2F;bin&#x2F;nginx-upgrade</span><br><span class="line">&#x2F;usr&#x2F;sbin&#x2F;nginx</span><br><span class="line"></span><br><span class="line"># nginx库文件</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;nginx.service # 用于配置系统守护进程</span><br><span class="line">&#x2F;usr&#x2F;lib64&#x2F;nginx&#x2F;modules # Nginx模块目录</span><br><span class="line"></span><br><span class="line"># 帮助文档</span><br><span class="line">&#x2F;usr&#x2F;share&#x2F;doc&#x2F;nginx-1.16.1</span><br><span class="line">&#x2F;usr&#x2F;share&#x2F;doc&#x2F;nginx-1.16.1&#x2F;CHANGES</span><br><span class="line">&#x2F;usr&#x2F;share&#x2F;doc&#x2F;nginx-1.16.1&#x2F;README</span><br><span class="line">&#x2F;usr&#x2F;share&#x2F;doc&#x2F;nginx-1.16.1&#x2F;README.dynamic</span><br><span class="line">&#x2F;usr&#x2F;share&#x2F;doc&#x2F;nginx-1.16.1&#x2F;UPGRADE-NOTES-1.6-to-1.10</span><br><span class="line"></span><br><span class="line"># 静态资源目录</span><br><span class="line">&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;404.html</span><br><span class="line">&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;50x.html</span><br><span class="line">&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;index.html</span><br><span class="line"></span><br><span class="line"># 存放Nginx日志文件</span><br><span class="line">&#x2F;var&#x2F;log&#x2F;nginx</span><br></pre></td></tr></table></figure>

<p>主要关注的文件夹有两个：</p>
<p><code>1. /etc/nginx/conf.d/</code> 是子配置项存放处， <code>/etc/nginx/nginx.conf</code> 主配置文件会默认把这个文件夹中所有子配置项都引入；</p>
<p><code>2. /usr/share/nginx/html/</code> 静态文件都放在这个文件夹，也可以根据你自己的习惯放在其他地方；</p>
<p>Nginx常用命令：</p>
<p>l 关闭nginx需要使用:（暴力）</p>
<p>nginx -s stop 相当于找到nginx进程kill。</p>
<p>l 退出命令：（温和）</p>
<p>nginx -s quit</p>
<p>等程序执行完毕后关闭，建议使用此命令。</p>
<p>l 重新加载配置文件:（重启）</p>
<p>nginx -s reload 可以不关闭nginx的情况下更新配置文件</p>
<p><code>systemctl</code> 系统命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 开机配置</span><br><span class="line">systemctl enable nginx # 开机自动启动</span><br><span class="line">systemctl disable nginx # 关闭开机自动启动</span><br><span class="line"></span><br><span class="line"># 启动Nginx</span><br><span class="line">systemctl start nginx # 启动Nginx成功后，可以直接访问主机IP，此时会展示Nginx默认页面</span><br><span class="line"></span><br><span class="line"># 停止Nginx</span><br><span class="line">systemctl stop nginx</span><br><span class="line"></span><br><span class="line"># 重启Nginx</span><br><span class="line">systemctl restart nginx</span><br><span class="line"></span><br><span class="line"># 重新加载Nginx</span><br><span class="line">systemctl reload nginx</span><br><span class="line"></span><br><span class="line"># 查看 Nginx 运行状态</span><br><span class="line">systemctl status nginx</span><br><span class="line"></span><br><span class="line"># 查看Nginx进程</span><br><span class="line">ps -ef | grep nginx</span><br><span class="line"></span><br><span class="line"># 杀死Nginx进程</span><br><span class="line">kill -9 pid # 根据上面查看到的Nginx进程号，杀死Nginx进程，-9 表示强制结束进程</span><br></pre></td></tr></table></figure>

<p><code>Nginx</code> 应用程序命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload # 向主进程发送信号，重新加载配置文件，热重启</span><br><span class="line">nginx -s reopen # 重启 Nginx</span><br><span class="line">nginx -s stop # 快速关闭</span><br><span class="line">nginx -s quit # 等待工作进程处理完成后关闭</span><br><span class="line">nginx -T # 查看当前 Nginx 最终的配置</span><br><span class="line">nginx -t # 检查配置是否有问题</span><br></pre></td></tr></table></figure>



<h1 id="Nginx配置与应用"><a href="#Nginx配置与应用" class="headerlink" title="Nginx配置与应用"></a>Nginx配置与应用</h1><p>1.Nginx虚拟机配置</p>
<p>主要是在描述nginx它是一个http服务器。它是apache的一个替代品。</p>
<p>对于nginx虚拟机配置主要可以从三个方面入手:</p>
<p>\1. ip配置</p>
<p>\2. 域名配置</p>
<p>\3. 端口配置</p>
<p>它的配置主要体现在nginx/conf/nginx.conf，这个文件中#都是注释</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps7.jpg" alt="img"> </p>
<p>测试针对ip地址进行配置：复制一个server，将其中的server-name改为自己电脑的ip地址，可以选择性的对location中内容进行修改，实现不同的ip地址和域名访问不同的资源的效果。重启nginx</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps8.jpg" alt="img"> </p>
<p>测试针对于域名进行配置</p>
<p>域名作用:可以方便记忆。</p>
<p>问题:为什么通过域名可以访问到网站。</p>
<p>答：DNS服务器—-域名解析服务器。</p>
<p>在windows或linux上都有一个hosts文件，它是一个本地域名解析文件。</p>
<p>windows上在c：\Windows\System32\drivers\etc</p>
<p>linux上在/etc/hosts</p>
<p>linux系统中nginx/conf/nginx.conf，或者windows中config下的nginx.conf文件。修改server-name为一个域名。重启nginx</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps9.jpg" alt="img"> </p>
<p>测试针对于端口进行配置</p>
<p>改变listen为8001，就可以根据不同的端口访问不同的资源</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps10.jpg" alt="img"> </p>
<p>2.Nginx作反向代理</p>
<p>需要在conf文件中添加反向代理的配置（当访问localhost时，默认端口为80，会跳转到server_list进而访问到tomcat的localhost：8080）如果出错了，可以查看nginx的logs文件，每次改完配置文件后，都需要重启nginx服务器。</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps11.jpg" alt="img"> </p>
<p>完成简单的tomcat集群（这个配置有很多错误）：在server_list中继续添加tomcat服务器（这里的8081是修改端口号的tomcat文件的副本）</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps12.jpg" alt="img"> </p>
<p>3.Nginx负载均衡</p>
<p>所谓的负载均衡简单说就是将一台服务原来承受的压力由多台服务器来分配，可以在nginx中实现tomcat集群，因为不同服务器的性能可能不一样，所以可以通过weight来分配权重，权重越大代表使用的越多</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps13.jpg" alt="img"> </p>
<p>4.Nginx+tomcat集群+redis实现session共享</p>
<p>Session共享问题演示：</p>
<p>1）在tomcat中创建项目myweb，这个网页中得到sessionid值</p>
<p>2）分别启动两个tomcat,查看sessionid值</p>
<p>Tomcat_main</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps14.jpg" alt="img"> </p>
<p>Tomcat_back</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps15.jpg" alt="img"> </p>
<p>Session共享问题解决：</p>
<p>思想:将原来由每一个tomcat管理的session统一存储到redis中管理</p>
<p>1）下载nginx+tomcat集群+redis实现session共享工具jar包</p>
<p><a target="_blank" rel="noopener" href="https://github.com/jcoleman/tomcat-redis-session-manager/downloads">https://github.com/jcoleman/tomcat-redis-session-manager/downloads</a></p>
<p>其它依赖包</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps16.jpg" alt="img"> </p>
<p>最好使用这四个jar包，因为其他版本的jar包可能会存在冲突</p>
<p>将以上四个包copy到tomcat的lib目录下(集群中的所有Tomcat都需要有这四个jar)</p>
<p>2）在tomcat/conf/context.xml文件中添加配置(集群中的所有Tomcat都需要配置)</p>
<Valve className="com.radiadesign.catalina.session.RedisSessionHandlerValve"/>

<p>  &lt;Manager className=”com.radiadesign.catalina.session.RedisSessionManager”</p>
<p>​    host=”192.168.19.128”</p>
<p>​    port=”6379”</p>
<p>​    database=”0”</p>
<p>​     maxInactiveInterval=”60”</p>
<p>​         </p>
<p>​         password=”admin”</p>
<p>​         /&gt;</p>
<p>重启tomcat，nginx，启动redis数据库</p>
<p>3）查看myweb工具中sessionid</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps17.jpg" alt="img"> </p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps18.jpg" alt="img"> </p>
<p>Redis帮助我们存储了session</p>
<p><img src="file:///C:\Users\swx\AppData\Local\Temp\ksohtml3720\wps19.jpg" alt="img"> </p>
<p> <em><strong>*配置Tomcat的session共享可以有三种解决方案:*</strong></em></p>
<p>1.以负载均衡服务器本身提供的session共享策略，每种服务器的配置是不一样的并且nginx本身是没有的</p>
<p>2.利用web容器本身的session共享策略来配置共享。针对于weblogic这种方式还是靠谱的。但是针对于tomcat这种方式存在很大的缺陷，主要因为是依靠广播方式来实现的session复制，会浪费很多带宽导致整个网络反映缓慢。官网也建议这种方式最好不要超过4台tomcat,具体的内容可参考/webapps/docs/cluster-howto.html里面有详细的说明</p>
<p>3.<em><strong>*Tomcat集群+redis的Session共享配置方法*</strong></em></p>
<p><em><strong>*配置tomcat中的session共享：*</strong></em></p>
<p><em><strong>*步骤一:修改server.xml文件，最简单的集群配置只需要将节点中注释掉的下面这句取消注释即可：*</strong></em></p>
<p>Xml代码：</p>
  <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>  

<p>使用这样方法配置的集群会将Session同步到所在网段上的所有配置了集群属性的实例上(此处讲所在网段可能不准确，是使用Membership 的address和port来区分的。tomcat集群的实例如果在Membership配置中有相同的address和port值的tomcat被分到同一个集群里边。他们的session是相互共享的，同一个session的集群被称为一个cluster。可以配置多个cluster，但是cluster和cluster之间的session是不共享的)。也就是说如果该广播地址下的所有Tomcat实例都会共享Session，那么假如有几个互不相关的集群，就可能造成Session复制浪费，所以为了避免浪费就需要对节点多做点设置了，如下：</p>
<p>Xml代码</p>
  <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster">   

<p>​    <Channel className="org.apache.catalina.tribes.group.GroupChannel">   </p>
<p>​      &lt;Membership className=”org.apache.catalina.tribes.membership.McastService”   </p>
<p>​        address=”228.0.0.4”   </p>
<p>​        port=”45564”   </p>
<p>​        frequency=”500”   </p>
<p>​        dropTime=”3000”/&gt;   </p>
<p>​    </Channel>   </p>
  </Cluster>  

<p>加了一个Channel，里面包了个Membership，咱们要关注的就是membership的port属性和address属性，不同的集群设置不同的port值或address值，从目前的使用来看，基本上是隔离开了。</p>
<p><em><strong>*步骤二:修改项目的web.xml文件：*</strong></em></p>
<p>web.xml文件的修改很简单：只需要在节点中添加这个节点<distributable/>就可以了。</p>
<p>OK，有了这二步就实现了Tomcat的集群和Session的共享了</p>
<h1 id="nginx的配置"><a href="#nginx的配置" class="headerlink" title="nginx的配置"></a>nginx的配置</h1><p>main（全局设置）、server（主机设置）、upstream（负载均衡服务器设置）和 location（URL匹配特定位置的设置）。</p>
<p>main块设置的指令将影响其他所有设置；<br>server块的指令主要用于指定主机和端口；<br>upstream指令主要用于负载均衡，设置一系列的后端服务器；<br>location块用于匹配网页位置。</p>
<p>这四者之间的关系式：server继承main，location继承server，upstream既不会继承其他设置也不会被继承。<br>在这四个部分当中，每个部分都包含若干指令，这些指令主要包含Nginx的主模块指令、事件模块指令、HTTP核心模块指令，同时每个部分还可以使用其他HTTP模块指令，例如Http SSL模块、HttpGzip Static模块和Http Addition模块等。</p>
<h2 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">user</span> nobody nobody;  <span class="comment">#用户及组：用户 组   windows下不指定</span></span><br><span class="line"><span class="attribute">worker_processes</span> <span class="number">2</span>;  </span><br><span class="line"><span class="comment">#worker_processes是个主模块指令，指定了Nginx要开启的进程数。每个Nginx进程平均耗费10M~12M内存。建议指定和CPU的数量一致即可，根据硬件调整，通常等于CPU数量或者2倍于CPU</span></span><br><span class="line"><span class="attribute">error_log</span> logs/error.log <span class="literal">notice</span>;  </span><br><span class="line"><span class="comment">#error_log是个主模块指令，用来定义全局错误日志文件存放路径。日志输出级别有debug、info、notice、warn、error、crit可供选择，其中，debug输出日志最为最详细，而crit输出日志最少</span></span><br><span class="line"><span class="attribute">pid</span> logs/nginx.pid;  <span class="comment">#pid是个主模块指令，pid（进程标识符）用来指定进程pid的存储文件位置</span></span><br><span class="line"><span class="attribute">worker_rlimit_nofile</span> <span class="number">65535</span>;  </span><br><span class="line"><span class="comment">#worker_rlimit_nofile用于绑定worker进程和CPU， Linux内核2.4以上可用。指定进程可以打开的最大描述符：数目。这个指令是指当一个nginx进程打开的最多文件描述符数目，理论值应该是最多打开文件数（ulimit -n）与nginx进程数相除，但是nginx分配请求并不是那么均匀，所以最好与ulimit -n 的值保持一致。现在在linux 2.6内核下开启文件打开数为65535，worker_rlimit_nofile就相应应该填写65535。这是因为nginx调度时分配请求到进程并不是那么的均衡，所以假如填写10240，总并发量达到3-4万时就有进程可能超过10240了，这时会返回502错误。</span></span><br></pre></td></tr></table></figure>



<h2 id="events事件"><a href="#events事件" class="headerlink" title="events事件"></a>events事件</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设定Nginx的工作模式及连接数上限：</span></span><br><span class="line">events&#123;</span><br><span class="line"><span class="attribute">use</span> <span class="literal">epoll</span>; </span><br><span class="line"><span class="comment">#use是个事件模块指令，用来指定Nginx的工作模式。Nginx支持的工作模式有select、poll、kqueue、epoll、rtsig和/dev/poll。其中select和poll都是标准的工作模式，kqueue和epoll是高效的工作模式，不同的是epoll用在Linux平台上，而kqueue用在FreeBSD系统中。对于Linux系统，epoll工作模式是首选。window下不指定</span></span><br><span class="line"><span class="attribute">worker_connections</span> <span class="number">65536</span>;  </span><br><span class="line"><span class="comment">#worker_connections也是个事件模块指令，用于定义Nginx每个进程的最大连接数，默认是1024。最大客户端连接数由worker_processes和worker_connections决定，即Max_client=worker_processes*worker_connections。在作为反向代理时，max_clients变为：max_clients = worker_processes * worker_connections/4。进程的最大连接数受Linux系统进程的最大打开文件数限制，在执行操作系统命令“ulimit -n 65536”后worker_connections的设置才能生效</span></span><br><span class="line"><span class="attribute">keepalive_timeout</span> <span class="number">60</span>;  <span class="comment">#keepalive超时时间</span></span><br><span class="line"><span class="attribute">client_header_buffer_size</span> <span class="number">4k</span>;</span><br><span class="line"><span class="comment">#客户端请求头部的缓冲区大小。这个可以根据你的系统分页大小来设置，一般一个请求头的大小不会超过1k，不过由于一般系统分页都要大于1k，所以这里设置为分页大小。分页大小可以用命令`getconf PAGESIZE` 取得。但也有client_header_buffer_size超过4k的情况，但是client_header_buffer_size该值必须设置为“系统分页大小”的整倍数</span></span><br><span class="line"><span class="attribute">open_file_cache</span> max=<span class="number">65535</span> inactive=<span class="number">60s</span>;</span><br><span class="line"><span class="comment">#这个将为打开文件指定缓存，默认是没有启用的，max指定缓存数量，建议和打开文件数一致，inactive是指经过多长时间文件没被请求后删除缓存。</span></span><br><span class="line"><span class="attribute">open_file_cache_valid</span> <span class="number">80s</span>;</span><br><span class="line"><span class="comment">#这个是指多长时间检查一次缓存的有效信息。</span></span><br><span class="line"><span class="attribute">open_file_cache_min_uses</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment">#open_file_cache指令中的inactive参数时间内文件的最少使用次数，如果超过这个数字，文件描述符一直是在缓存中打开的，如上例，如果有一个文件在inactive时间内一次没被使用，它将被移除。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="HTTP服务器配置"><a href="#HTTP服务器配置" class="headerlink" title="HTTP服务器配置"></a>HTTP服务器配置</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">http&#123;</span><br><span class="line"><span class="attribute">include</span> conf/mime.types;  </span><br><span class="line"><span class="comment">#include是个主模块指令，实现对配置文件所包含的文件的设定，可以减少主配置文件的复杂度。类似于Apache中的include方法。设定mime类型,类型由mime.type文件定义</span></span><br><span class="line"><span class="attribute">default_type</span> application/octet-stream;  </span><br><span class="line"><span class="comment">#default_type属于HTTP核心模块指令，这里设定默认类型为二进制流，也就是当文件类型未定义时使用这种方式，例如在没有配置PHP环境时，Nginx是不予解析的，此时，用浏览器访问PHP文件就会出现下载窗口</span></span><br><span class="line"><span class="attribute">log_format</span> main <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &#x27;</span>  用以记录客户端的ip地址  用来记录客户端用户名称  用来记录访问时间与时区</span><br><span class="line"><span class="string">&#x27;&quot;$request&quot; $status $bytes_sent &#x27;</span>     用来记录请求的url与http协议  用来记录请求状态；成功是<span class="number">200</span>  记录发送给客户端文件主体内容大小</span><br><span class="line"><span class="string">&#x27;&quot;$http_referer&quot; &quot;$http_user_agent&quot; &#x27;</span>  用来记录从那个页面链接访问过来的  记录客户浏览器的相关信息</span><br><span class="line"><span class="string">&#x27;&quot;$gzip_ratio&quot;&#x27;</span>;</span><br><span class="line"><span class="attribute">log_format</span> download <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;$request&quot; $status $bytes_sent &#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;$http_referer&quot; &quot;$http_user_agent&quot; &#x27;</span></span><br><span class="line"><span class="string">&#x27;&quot;$http_range&quot; &quot;$sent_http_content_range&quot;&#x27;</span>;</span><br><span class="line">    <span class="comment">##通常web服务器放在反向代理的后面，这样就不能获取到客户的IP地址了，通过$remote_add拿到的IP地址是反向代理服务器的iP地址。反向代理服务器在转发请求的http头信息中，可以增加x_forwarded_for信息，用以记录原有客户端的IP地址和原来客户端的请求的服务器地址</span></span><br><span class="line"><span class="comment">#log_format是Nginx的HttpLog模块指令，用于指定Nginx日志的输出格式。main为此日志输出格式的名称，用了log_format指令设置了日志格式之后，需要用access_log指令指定日志文件的存放路径。</span></span><br><span class="line"><span class="attribute">access_log</span>  logs/host.access.log  main;</span><br><span class="line"><span class="attribute">access_log</span>  logs/host.access.<span class="number">404</span>.log  log404;</span><br><span class="line"></span><br><span class="line"><span class="attribute">server_names_hash_bucket_size</span> <span class="number">128</span>;</span><br><span class="line"><span class="comment">#保存服务器名字的hash表是由指令server_names_hash_max_size 和server_names_hash_bucket_size所控制的。参数hash bucket size总是等于hash表的大小，并且是一路处理器缓存大小的倍数。在减少了在内存中的存取次数后，使在处理器中加速查找hash表键值成为可能。如果hash bucket size等于一路处理器缓存的大小，那么在查找键的时候，最坏的情况下在内存中查找的次数为2。第一次是确定存储单元的地址，第二次是在存储单元中查找键值。因此，如果Nginx给出需要增大hash max size 或 hash bucket size的提示，那么首要的是增大前一个参数的大小</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">client_max_body_size</span> <span class="number">20m</span>;  <span class="comment">#client_max_body_size用来设置允许客户端请求的最大的单个文件字节数；设定通过nginx上传文件的大小</span></span><br><span class="line"><span class="attribute">client_header_buffer_size</span> <span class="number">32K</span>;  <span class="comment">#client_header_buffer_size用于指定来自客户端请求头的headerbuffer大小。对于大多数请求，1K的缓冲区大小已经足够，如果自定义了消息头或有更大的Cookie，可以增加缓冲区大小。这里设置为32K</span></span><br><span class="line"><span class="attribute">large_client_header_buffers</span> <span class="number">4</span> <span class="number">32k</span>;  <span class="comment">#large_client_header_buffers用来指定客户端请求中较大的消息头的缓存最大数量和大小， “4”为个数，“128K”为大小，最大缓存量为4个128K</span></span><br><span class="line"><span class="attribute">Sendfile</span> <span class="literal">on</span>;  <span class="comment">#sendfile参数用于开启高效文件传输模式。将tcp_nopush和tcp_nodelay两个指令设置为on用于防止网络阻塞</span></span><br><span class="line"><span class="attribute">tcp_nopush</span> <span class="literal">on</span>;  <span class="comment">#此选项允许或禁止使用socke的TCP_CORK的选项，此选项仅在使用sendfile的时候使用</span></span><br><span class="line"><span class="attribute">tcp_nodelay</span> <span class="literal">on</span>;  </span><br><span class="line">    </span><br><span class="line"><span class="attribute">keepalive_timeout</span> <span class="number">60</span>;  <span class="comment">#keepalive_timeout设置客户端连接保持活动的超时时间。在超过这个时间之后，服务器会关闭该连接</span></span><br><span class="line"><span class="attribute">client_header_timeout</span> <span class="number">10</span>;  <span class="comment">#client_header_timeout设置客户端请求头读取超时时间。如果超过这个时间，客户端还没有发送任何数据，Nginx将返回“Request time out（408）”错误</span></span><br><span class="line"><span class="attribute">client_body_timeout</span> <span class="number">10</span>;  <span class="comment">#client_body_timeout设置客户端请求主体读取超时时间。如果超过这个时间，客户端还没有发送任何数据，Nginx将返回“Request time out（408）”错误，默认值是60</span></span><br><span class="line"><span class="attribute">send_timeout</span> <span class="number">10</span>;  <span class="comment">#send_timeout指定响应客户端的超时时间。这个超时仅限于两个连接活动之间的时间，如果超过这个时间，客户端没有任何活动，Nginx将会关闭连接</span></span><br></pre></td></tr></table></figure>

<h2 id="HttpGzip模块"><a href="#HttpGzip模块" class="headerlink" title="HttpGzip模块"></a>HttpGzip模块</h2><p>这个模块支持在线实时压缩输出数据流。通过<code>/opt/nginx/sbin/nginx -V</code>命令可以查看安装Nginx时的编译选项</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@vps ~]# /opt/nginx/sbin/nginx  -V</span><br><span class="line">nginx version: nginx/1.0.14</span><br><span class="line">built by gcc 4.4.6 20110731 (Red Hat 4.4.6-3) (GCC)</span><br><span class="line">configure arguments: --with-http_stub_status_module --with-http_gzip_static_module --prefix=/opt/nginx</span><br><span class="line">                   </span><br><span class="line">gzip on;   #gzip用于设置开启或者关闭gzip模块，“gzip on”表示开启GZIP压缩，实时压缩输出数据流</span><br><span class="line">gzip_min_length 1k;  #gzip_min_length设置允许压缩的页面最小字节数，页面字节数从header头的Content-Length中获取。默认值是0，不管页面多大都进行压缩。建议设置成大于1K的字节数，小于1K可能会越压越大</span><br><span class="line">gzip_buffers 4 16k;  #gzip_buffers表示申请4个单位为16K的内存作为压缩结果流缓存，默认值是申请与原始数据大小相同的内存空间来存储gzip压缩结果</span><br><span class="line">gzip_http_version 1.1;  #gzip_http_version用于设置识别HTTP协议版本，默认是1.1，目前大部分浏览器已经支持GZIP解压，使用默认即可</span><br><span class="line">gzip_comp_level 2;  #gzip_comp_level用来指定GZIP压缩比，1 压缩比最小，处理速度最快；9 压缩比最大，传输速度快，但处理最慢，也比较消耗cpu资源</span><br><span class="line">gzip_types text/plain application/x-javascript text/css application/xml;  </span><br><span class="line"><span class="meta">#</span><span class="bash">gzip_types用来指定压缩的类型，无论是否指定，“text/html”类型总是会被压缩的</span></span><br><span class="line">gzip_vary on;  #gzip_vary选项可以让前端的缓存服务器缓存经过GZIP压缩的页面，例如用Squid缓存经过Nginx压缩的数据</span><br></pre></td></tr></table></figure>



<h2 id="负载均衡设置"><a href="#负载均衡设置" class="headerlink" title="负载均衡设置"></a>负载均衡设置</h2><p>Nginx的负载均衡模块目前支持4种调度算法:</p>
<p>1.轮询(默认):每个请求按时间顺序逐一分配到不同的后端服务器。指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">#设定负载均衡服务器列表</span></span><br><span class="line">  <span class="attribute">upstream</span> roundrobin &#123;</span><br><span class="line">       <span class="comment">#后端服务器访问规则</span></span><br><span class="line">      <span class="attribute">server</span> <span class="number">192.168.1.115:8080</span>  weight=<span class="number">1</span>;       <span class="comment">#server1</span></span><br><span class="line">      <span class="attribute">server</span> <span class="number">192.168.1.131:8081</span>  weight=<span class="number">1</span>;       <span class="comment">#server1</span></span><br><span class="line">      <span class="attribute">server</span> <span class="number">192.168.1.94:8090</span>   weight=<span class="number">1</span>;       <span class="comment">#server3</span></span><br><span class="line">  &#125;</span><br><span class="line">   </span><br><span class="line">  <span class="section">server</span> &#123;</span><br><span class="line">          <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">          <span class="attribute">server_name</span> <span class="number">192.168.1.131</span>;</span><br><span class="line">          <span class="attribute">location</span> / &#123;</span><br><span class="line">                  <span class="attribute">proxy_pass</span> http://roundrobin;</span><br><span class="line">          &#125;</span><br><span class="line">  &#125;</span><br><span class="line">当访问 http://192.168.131 的时候，会把这个请求负载到 192.168.1.115 的 8080 端口、192.168.1.115 的 8080 端口、192.168.1.115 的 8080 端口。负载的权重由 weight 来决定，默认为 1 ，weight 越大，权重就越大</span><br></pre></td></tr></table></figure>

<p>  2.ip_hash:每个请求按访问IP的hash结果分配，同一个IP客户端固定访问一个后端服务器。可以保证来自同一ip的请求被打到固定的机器上，可以解决session问题</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设定负载均衡服务器列表</span></span><br><span class="line"><span class="attribute">upstream</span> roundrobin &#123;</span><br><span class="line">     <span class="comment">#后端服务器访问规则</span></span><br><span class="line">    	ip_hash;</span><br><span class="line">        <span class="attribute">server</span> <span class="number">192.168.1.134</span> weight=<span class="number">1</span> max_fails=<span class="number">2</span> fail_timeout=<span class="number">2</span>;</span><br><span class="line">        <span class="attribute">server</span> <span class="number">192.168.1.131</span> weight=<span class="number">1</span> max_fails=<span class="number">2</span> fail_timeout=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span> <span class="number">192.168.1.131</span>;</span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">                <span class="attribute">proxy_pass</span> http://roundrobin;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">设置后端负载均衡服务器的状态:</span><br><span class="line">down，表示当前的server暂时不参与负载均衡。</span><br><span class="line">backup，预留的备份机器。当其他所有的非backup机器出现故障或者忙的时候，才会请求backup机器，因此这台机器的压力最轻。</span><br><span class="line">max_fails：允许请求失败的次数，默认为1。当超过最大次数时，返回proxy_next_upstream 模块定义的错误。</span><br><span class="line">fail_timeout：在经历了max_fails次失败后，暂停服务的时间。max_fails可以和fail_timeout一起使用。</span><br><span class="line">注意：backup不能和ip_hash同时配置。因为ip_hash只能访问同一台服务器，而backup是在只有所有参与负载均衡的服务器出现故障时，才会请求备份机。当所有负载均衡的服务器出现故障了，ip_hash的将无法请求了</span><br><span class="line"><span class="comment">#设定负载均衡服务器列表</span></span><br><span class="line"><span class="attribute">upstream</span> roundrobin &#123;</span><br><span class="line">    <span class="comment">#后端服务器访问规则</span></span><br><span class="line">    <span class="attribute">server</span> <span class="number">192.168.1.115:8080</span>  weight=<span class="number">1</span>;       <span class="comment">#server1</span></span><br><span class="line">    <span class="attribute">server</span> <span class="number">192.168.1.131:8080</span>  down;           <span class="comment">#server2 不参与负载</span></span><br><span class="line">    <span class="attribute">server</span> <span class="number">192.168.1.94:8090</span>   backup;         <span class="comment">#server3 备份机   </span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span> <span class="number">192.168.1.131</span>;</span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">                <span class="attribute">proxy_pass</span> http://roundrobin;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.url_hash（第三方）:访问url的hash结果来分配请求，使每个url定向到同一个后端服务器，可以进一步提高后端缓存服务器的效率。Nginx本身是不支持url_hash的，如果需要使用这种调度算法，必须安装Nginx 的hash软件包</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">upstream</span> backend &#123;</span><br><span class="line"><span class="attribute">server</span> squid1:<span class="number">3128</span>;</span><br><span class="line"><span class="attribute">server</span> squid2:<span class="number">3128</span>;</span><br><span class="line"><span class="attribute">hash</span> $request_uri;</span><br><span class="line"><span class="attribute">hash_method</span> crc32;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.fair（第三方）:这是比上面两个更加智能的负载均衡算法。此种算法可以依据页面大小和加载时间长短智能地进行负载均衡，也就是根据后端服务器的响应时间来分配请求，响应时间短的优先分配。Nginx本身是不支持 fair的，如果需要使用这种调度算法，必须下载Nginx的 upstream_fair模块</p>
<p>upstream是Nginx的HTTP Upstream模块，这个模块通过一个简单的调度算法来实现客户端IP到后端服务器的负载均衡。</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">upstream</span> backend &#123;</span><br><span class="line"><span class="attribute">server</span> server1;</span><br><span class="line"><span class="attribute">server</span> server2;</span><br><span class="line">fair;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>location对URL进行匹配.可以进行重定向或者进行新的代理 负载均衡</p>
<h2 id="server虚拟主机配置"><a href="#server虚拟主机配置" class="headerlink" title="server虚拟主机配置"></a>server虚拟主机配置</h2><p>建议将对虚拟主机进行配置的内容写进另外一个文件，然后通过include指令包含进来，这样更便于维护和管理</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server&#123;    #server标志定义虚拟主机开始</span><br><span class="line"><span class="attribute">listen</span> <span class="number">80</span>;   <span class="comment">#listen用于指定虚拟主机的服务端口</span></span><br><span class="line"><span class="attribute">server_name</span> <span class="number">192.168.8.18</span> cszhi.com;  <span class="comment">#server_name用来指定访问的IP地址或者域名，多个域名之间用空格分开</span></span><br><span class="line"><span class="attribute">index</span> index.html index.htm index.php;  <span class="comment">#index用于设定访问的默认首页地址</span></span><br><span class="line"><span class="attribute">root</span> /wwwroot/www.cszhi.com  <span class="comment">#root指令用于指定虚拟主机的网页根目录，这个目录可以是相对路径，也可以是绝对路径</span></span><br><span class="line">charset gb2312;  <span class="comment">#charset用于 设置网页的默认编码格式</span></span><br><span class="line"><span class="attribute">access_log</span> logs/www.ixdba.net.access.log main;  <span class="comment">#access_log用来指定此虚拟主机的访问日志存放路径，最后的main用于指定访问日志的输出格式</span></span><br><span class="line"><span class="attribute">proxy_pass</span> http://img_relay$request_uri;  <span class="comment">#设置被代理服务器的端口或套接字，以及URL</span></span><br><span class="line"><span class="attribute">proxy_set_header</span> Host $host;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Real-IP $remote_addr;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Forwarded-For $proxy_add_x_forwarded_for;  </span><br><span class="line"><span class="comment">#以上三行，目的是将代理服务器收到的用户的信息传到真实服务器上</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="location-URL匹配配置"><a href="#location-URL匹配配置" class="headerlink" title="location URL匹配配置"></a>location URL匹配配置</h2><p>URL地址匹配是进行Nginx配置中最灵活的部分。 location支持正则表达式匹配，也支持条件判断匹配，用户可以通过location指令实现Nginx对动、静态网页进行过滤处理。使用location URL匹配配置还可以实现反向代理，用于实现PHP动态解析或者负载负载均衡</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#这段设置是通过location指令来对网页URL进行分析处理，所有扩展名以.gif、.jpg、.jpeg、.png、.bmp、.swf结尾的静态文件都交给nginx进行负载均衡</span></span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~ .*\.(gif|jpg|jpeg|png|bmp|swf)$</span> &#123;</span><br><span class="line"><span class="attribute">root</span> /wwwroot/www.cszhi.com;</span><br><span class="line"><span class="attribute">expires</span> <span class="number">30d</span>;   <span class="comment">#expires用来指定静态文件的过期时间，这里是30天</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#这段设置中，location是对此虚拟主机下动态网页的过滤处理，也就是将所有以.jsp为后缀的文件都交给本机的8080端口处理</span></span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~ .*.php$</span> &#123;</span><br><span class="line"><span class="attribute">index</span> index.php;</span><br><span class="line"><span class="attribute">proxy_pass</span> http://localhost:8080;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>root和alias的区别：</p>
<h2 id="StubStatus模块配置"><a href="#StubStatus模块配置" class="headerlink" title="StubStatus模块配置"></a>StubStatus模块配置</h2><p>StubStatus模块能够获取Nginx自上次启动以来的工作状态，此模块非核心模块，需要在Nginx编译安装时手工指定才能使用此功能。</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#以下指令是指定启用获取Nginx工作状态的功能</span></span><br><span class="line"><span class="attribute">location</span> /NginxStatus &#123;</span><br><span class="line"><span class="attribute">stub_status</span> <span class="literal">on</span>;  <span class="comment">#stub_status设置为“on”表示启用StubStatus的工作状态统计功能</span></span><br><span class="line"><span class="attribute">access_log</span> logs/NginxStatus.log;  <span class="comment">#access_log 用来指定StubStatus模块的访问日志文件</span></span><br><span class="line"><span class="attribute">auth_basic</span> <span class="string">&quot;NginxStatus&quot;</span>;  <span class="comment">#auth_basic是Nginx的一种认证机制</span></span><br><span class="line"><span class="attribute">auth_basic_user_file</span> ../htpasswd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>auth_basic_user_file用来指定认证的密码文件，由于Nginx的auth_basic认证采用的是与Apache兼容的密码文件，因此需要用Apache的htpasswd命令来生成密码文件，例如要添加一个test用户，可以使用下面方式生成密码文件<br><code>/usr/local/apache/bin/htpasswd -c  /opt/nginx/conf/htpasswd test</code><br>然后输入两次密码后确认之后添加用户成功。</p>
<p>要查看Nginx的运行状态，可以输入<a target="_blank" rel="noopener" href="http://ip/NginxStatus%EF%BC%8C%E8%BE%93%E5%85%A5%E5%88%9B%E5%BB%BA%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0Nginx%E7%9A%84%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81">http://ip/NginxStatus，输入创建的用户名和密码就可以看到Nginx的运行状态</a></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Active</span> connections: <span class="number">1</span>  <span class="comment">#Active connections表示当前活跃的连接数</span></span><br><span class="line">server accepts handled requests</span><br><span class="line"><span class="number">34561</span> <span class="number">35731</span> <span class="number">354399</span>  <span class="comment">#表示Nginx当前总共处理了34561个连接， 成功创建次握手， 总共处理了354399个请求</span></span><br><span class="line">Reading: <span class="number">0</span> Writing: <span class="number">3</span> Waiting: <span class="number">0</span>  <span class="comment">#Reading表示Nginx读取到客户端Header信息数， Writing表示Nginx返回给客户端的Header信息数，“Waiting”表示Nginx已经处理完，正在等候下一次请求指令时的驻留连接数</span></span><br></pre></td></tr></table></figure>



<h2 id="错误信息"><a href="#错误信息" class="headerlink" title="错误信息"></a>错误信息</h2><p>这段设置中，设置了虚拟主机的错误信息返回页面，通过error_page指令可以定制各种错误信息的返回页面。在默认情况下，Nginx会在主目录的html目录中查找指定的返回页面，特别需要注意的是，这些错误信息的返回页面大小一定要超过512K，否者会被ie浏览器替换为ie默认的错误页面</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">error_page</span> <span class="number">404</span> /<span class="number">404</span>.html;</span><br><span class="line"><span class="attribute">error_page</span> <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span> /50x.html;</span><br><span class="line"><span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line"><span class="attribute">root</span> html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><code>Nginx</code> 的典型配置示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"># main段配置信息</span><br><span class="line">user  nginx; # 运行用户，默认即是nginx，可以不进行设置</span><br><span class="line">worker_processes  auto; # Nginx 进程数，一般设置为和 CPU 核数一样</span><br><span class="line">error_log  &#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log warn; # Nginx 的错误日志存放目录</span><br><span class="line">pid        &#x2F;var&#x2F;run&#x2F;nginx.pid; # Nginx 服务启动时的 pid 存放位置</span><br><span class="line"></span><br><span class="line"># events段配置信息</span><br><span class="line">events &#123;</span><br><span class="line">    use epoll; # 使用epoll的I&#x2F;O模型(如果你不知道Nginx该使用哪种轮询方法，会自动选择一个最适合你操作系统的)</span><br><span class="line">    worker_connections 1024; # 每个进程允许最大并发数</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># http段配置信息</span><br><span class="line"># 配置使用最频繁的部分，代理、缓存、日志定义等绝大多数功能和第三方模块的配置都在这里设置</span><br><span class="line">http &#123; </span><br><span class="line">    # 设置日志模式</span><br><span class="line">    log_format  main &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span><br><span class="line">                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span><br><span class="line">                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;</span><br><span class="line"></span><br><span class="line">    access_log  &#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log main; # Nginx访问日志存放位置</span><br><span class="line"></span><br><span class="line">    sendfile            on; # 开启高效传输模式</span><br><span class="line">    tcp_nopush          on; # 减少网络报文段的数量</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65; # 保持连接的时间，也叫超时时间，单位秒</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include             &#x2F;etc&#x2F;nginx&#x2F;mime.types; # 文件扩展名与类型映射表</span><br><span class="line">    default_type        application&#x2F;octet-stream; # 默认文件类型</span><br><span class="line"></span><br><span class="line">    include &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;*.conf; # 加载子配置项</span><br><span class="line">    </span><br><span class="line">    # server段配置信息</span><br><span class="line">    server &#123;</span><br><span class="line">     listen       80; # 配置监听的端口</span><br><span class="line">     server_name  localhost; # 配置的域名</span><br><span class="line">      </span><br><span class="line">     # location段配置信息</span><br><span class="line">     location &#x2F; &#123;</span><br><span class="line">      root   &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html; # 网站根目录</span><br><span class="line">      index  index.html index.htm; # 默认首页文件</span><br><span class="line">      deny 172.168.22.11; # 禁止访问的ip地址，可以为all</span><br><span class="line">      allow 172.168.33.44；# 允许访问的ip地址，可以为all</span><br><span class="line">     &#125;</span><br><span class="line">     </span><br><span class="line">     error_page 500 502 503 504 &#x2F;50x.html; # 默认50x对应的访问页面</span><br><span class="line">     error_page 400 404 error.html; # 同上</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li> 全局配置，对全局生效；</li>
<li><code>events</code> 配置影响 <code>Nginx</code> 服务器与用户的网络连接；</li>
<li><code>http</code> 配置代理，缓存，日志定义等绝大多数功能和第三方模块的配置；</li>
<li><code>server</code> 配置虚拟主机的相关参数，一个 <code>http</code> 块中可以有多个 <code>server</code> 块；</li>
<li><code>location</code> 用于配置匹配的 <code>uri</code> ；</li>
<li><code>upstream</code> 配置后端服务器具体地址，负载均衡配置不可或缺的部分；</li>
</ul>
<p>用一张图清晰的展示它的层级结构：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1CxxiaXXtjSM4U1Y0r7AeZttVadvjianCuG5VVd2nuiauWV2p6XTtSHiaIfjlNg8LuO8NYddOlj5iceJg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h2 id="配置文件-main-段核心参数"><a href="#配置文件-main-段核心参数" class="headerlink" title="配置文件 main 段核心参数"></a>配置文件 main 段核心参数</h2><h2 id="user"><a href="#user" class="headerlink" title="user"></a>user</h2><p>指定运行 <code>Nginx</code> 的 <code>woker</code> 子进程的属主和属组，其中组可以不指定。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">user USERNAME [GROUP]</span><br><span class="line"></span><br><span class="line">user nginx lion; # 用户是nginx;组是lion</span><br></pre></td></tr></table></figure>



<p><strong>pid</strong></p>
<p>指定运行 <code>Nginx</code> <code>master</code> 主进程的 <code>pid</code> 文件存放路径。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pid &#x2F;opt&#x2F;nginx&#x2F;logs&#x2F;nginx.pid # master主进程的的pid存放在nginx.pid的文件</span><br></pre></td></tr></table></figure>

<h3 id="worker-rlimit-nofile-number"><a href="#worker-rlimit-nofile-number" class="headerlink" title="worker_rlimit_nofile_number"></a>worker_rlimit_nofile_number</h3><p>指定 <code>worker</code> 子进程可以打开的最大文件句柄数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">worker_rlimit_nofile 20480; # 可以理解成每个worker子进程的最大连接数量。</span><br></pre></td></tr></table></figure>



<p><strong>worker_rlimit_core</strong></p>
<p>指定 <code>worker</code> 子进程异常终止后的 <code>core</code> 文件，用于记录分析问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">worker_rlimit_core 50M; # 存放大小限制</span><br><span class="line">working_directory &#x2F;opt&#x2F;nginx&#x2F;tmp; # 存放目录</span><br></pre></td></tr></table></figure>

<h3 id="worker-processes-number"><a href="#worker-processes-number" class="headerlink" title="worker_processes_number"></a>worker_processes_number</h3><p>指定 <code>Nginx</code> 启动的 <code>worker</code> 子进程数量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">worker_processes 4; # 指定具体子进程数量</span><br><span class="line">worker_processes auto; # 与当前cpu物理核心数一致</span><br></pre></td></tr></table></figure>

<h3 id="worker-cpu-affinity"><a href="#worker-cpu-affinity" class="headerlink" title="worker_cpu_affinity"></a>worker_cpu_affinity</h3><p>将每个 <code>worker</code> 子进程与我们的 <code>cpu</code> 物理核心绑定。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">worker_cpu_affinity 0001 0010 0100 1000; # 4个物理核心，4个worker子进程</span><br></pre></td></tr></table></figure>



<p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1CxxiaXXtjSM4U1Y0r7AeZtZIGmia42mZYtFicgicRtCKBCJYbon4trM52w2f8sqtXqSzUM2eZvm2tSw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>将每个 <code>worker</code> 子进程与特定 <code>CPU</code> 物理核心绑定，优势在于，避免同一个 <code>worker</code> 子进程在不同的 <code>CPU</code> 核心上切换，缓存失效，降低性能。但其并不能真正的避免进程切换。</p>
<p><strong>worker_priority</strong></p>
<p>指定 <code>worker</code> 子进程的 <code>nice</code> 值，以调整运行 <code>Nginx</code> 的优先级，通常设定为负值，以优先调用<code>Nginx</code> 。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">worker_priority -10; # 120-10&#x3D;110，110就是最终的优先级</span><br></pre></td></tr></table></figure>

<p><code>Linux</code> 默认进程的优先级值是120，值越小越优先；<code>nice</code> 定范围为 <code>-20</code> 到 <code>+19</code> 。</p>
<p>[备注] 应用的默认优先级值是120加上 <code>nice</code> 值等于它最终的值，这个值越小，优先级越高。</p>
<h3 id="worker-shutdown-timeout"><a href="#worker-shutdown-timeout" class="headerlink" title="worker_shutdown_timeout"></a>worker_shutdown_timeout</h3><p>指定 <code>worker</code> 子进程优雅退出时的超时时间。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">worker_shutdown_timeout 5s;</span><br></pre></td></tr></table></figure>

<h3 id="timer-resolution"><a href="#timer-resolution" class="headerlink" title="timer_resolution"></a>timer_resolution</h3><p><code>worker</code> 子进程内部使用的计时器精度，调整时间间隔越大，系统调用越少，有利于性能提升；反之，系统调用越多，性能下降。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timer_resolution 100ms;</span><br></pre></td></tr></table></figure>

<p>在 <code>Linux</code> 系统中，用户需要获取计时器时需要向操作系统内核发送请求，有请求就必然会有开销，因此这个间隔越大开销就越小。</p>
<p><strong>daemon</strong></p>
<p>指定 <code>Nginx</code> 的运行方式，前台还是后台，前台用于调试，后台用于生产。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">daemon off; # 默认是on，后台运行模式</span><br></pre></td></tr></table></figure>

<h2 id="配置文件-events-段核心参数"><a href="#配置文件-events-段核心参数" class="headerlink" title="配置文件 events 段核心参数"></a>配置文件 events 段核心参数</h2><h3 id="use"><a href="#use" class="headerlink" title="use"></a>use</h3><p><code>Nginx</code> 使用何种事件驱动模型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use method; # 不推荐配置它，让nginx自己选择</span><br><span class="line"></span><br><span class="line">method 可选值为：select、poll、kqueue、epoll、&#x2F;dev&#x2F;poll、eventport</span><br></pre></td></tr></table></figure>

<h3 id="worker-connections"><a href="#worker-connections" class="headerlink" title="worker_connections"></a>worker_connections</h3><p><code>worker</code> 子进程能够处理的最大并发连接数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">worker_connections 1024 # 每个子进程的最大连接数为1024</span><br></pre></td></tr></table></figure>

<p><strong>accept_mutex</strong></p>
<p>是否打开负载均衡互斥锁。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">accept_mutex on # 默认是off关闭的，这里推荐打开</span><br></pre></td></tr></table></figure>

<p><strong>server_name 指令</strong></p>
<p>指定虚拟主机域名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">server_name name1 name2 name3</span><br><span class="line"></span><br><span class="line"># 示例：</span><br><span class="line">server_name www.nginx.com;</span><br></pre></td></tr></table></figure>

<p>域名匹配的四种写法：</p>
<ul>
<li>精确匹配：<code>server_name www.nginx.com</code> ;</li>
<li>左侧通配：<code>server_name *.nginx.com</code> ;</li>
<li>右侧统配：<code>server_name www.nginx.*</code> ;</li>
<li>正则匹配：<code>server_name ~^www\.nginx\.*$</code> ;</li>
</ul>
<p>匹配优先级：<strong>精确匹配 &gt; 左侧通配符匹配 &gt; 右侧通配符匹配 &gt; 正则表达式匹配</strong></p>
<p><code>server_name</code> 配置实例：</p>
<p>1、配置本地 <code>DNS</code> 解析 <code>vim /etc/hosts</code> （ <code>macOS</code> 系统）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 添加如下内容，其中 121.42.11.34 是阿里云服务器IP地址</span><br><span class="line">121.42.11.34 www.nginx-test.com</span><br><span class="line">121.42.11.34 mail.nginx-test.com</span><br><span class="line">121.42.11.34 www.nginx-test.org</span><br><span class="line">121.42.11.34 doc.nginx-test.com</span><br><span class="line">121.42.11.34 www.nginx-test.cn</span><br><span class="line">121.42.11.34 fe.nginx-test.club</span><br></pre></td></tr></table></figure>

<p>[注意] 这里使用的是虚拟域名进行测试，因此需要配置本地 <code>DNS</code> 解析，如果使用阿里云上购买的域名，则需要在阿里云上设置好域名解析。</p>
<p>2、配置阿里云 <code>Nginx</code> ，<code>vim /etc/nginx/nginx.conf</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"># 这里只列举了http端中的sever端配置</span><br><span class="line"></span><br><span class="line"># 左匹配</span><br><span class="line">server &#123;</span><br><span class="line"> listen 80;</span><br><span class="line"> server_name *.nginx-test.com;</span><br><span class="line"> root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;nginx-test&#x2F;left-match&#x2F;;</span><br><span class="line"> location &#x2F; &#123;</span><br><span class="line">  index index.html;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 正则匹配</span><br><span class="line">server &#123;</span><br><span class="line"> listen 80;</span><br><span class="line"> server_name ~^.*\.nginx-test\..*$;</span><br><span class="line"> root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;nginx-test&#x2F;reg-match&#x2F;;</span><br><span class="line"> location &#x2F; &#123;</span><br><span class="line">  index index.html;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 右匹配</span><br><span class="line">server &#123;</span><br><span class="line"> listen 80;</span><br><span class="line"> server_name www.nginx-test.*;</span><br><span class="line"> root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;nginx-test&#x2F;right-match&#x2F;;</span><br><span class="line"> location &#x2F; &#123;</span><br><span class="line">  index index.html;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 完全匹配</span><br><span class="line">server &#123;</span><br><span class="line"> listen 80;</span><br><span class="line"> server_name www.nginx-test.com;</span><br><span class="line"> root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;nginx-test&#x2F;all-match&#x2F;;</span><br><span class="line"> location &#x2F; &#123;</span><br><span class="line">  index index.html;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3、访问分析</p>
<ul>
<li>当访问 <code>www.nginx-test.com</code> 时，都可以被匹配上，因此选择优先级最高的“完全匹配”；</li>
<li>当访问 <code>mail.nginx-test.com</code> 时，会进行“左匹配”；</li>
<li>当访问 <code>www.nginx-test.org</code> 时，会进行“右匹配”；</li>
<li>当访问 <code>doc.nginx-test.com</code> 时，会进行“左匹配”；</li>
<li>当访问 <code>www.nginx-test.cn</code> 时，会进行“右匹配”；</li>
<li>当访问 <code>fe.nginx-test.club</code> 时，会进行“正则匹配”；</li>
</ul>
<h2 id="root"><a href="#root" class="headerlink" title="root"></a>root</h2><p>指定静态资源目录位置，它可以写在 <code>http</code> 、 <code>server</code> 、 <code>location</code> 等配置中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root path</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line">location &#x2F;image &#123;</span><br><span class="line"> root &#x2F;opt&#x2F;nginx&#x2F;static;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">当用户访问 www.test.com&#x2F;image&#x2F;1.png 时，实际在服务器找的路径是 &#x2F;opt&#x2F;nginx&#x2F;static&#x2F;image&#x2F;1.png</span><br></pre></td></tr></table></figure>

<p>[注意] <code>root</code> 会将定义路径与 <code>URI</code> 叠加， <code>alias</code> 则只取定义路径。</p>
<h2 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h2><p>它也是指定静态资源目录位置，它只能写在 <code>location</code> 中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F;image &#123;</span><br><span class="line"> alias &#x2F;opt&#x2F;nginx&#x2F;static&#x2F;image&#x2F;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">当用户访问 www.test.com&#x2F;image&#x2F;1.png 时，实际在服务器找的路径是 &#x2F;opt&#x2F;nginx&#x2F;static&#x2F;image&#x2F;1.png</span><br></pre></td></tr></table></figure>

<p>[注意] 使用 alias 末尾一定要添加 <code>/</code> ，并且它只能位于 <code>location</code> 中。</p>
<p><strong>location</strong></p>
<p>配置路径。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location [ &#x3D; | ~ | ~* | ^~ ] uri &#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>匹配规则：</p>
<ul>
<li><code>=</code> 精确匹配；</li>
<li><code>~</code> 正则匹配，区分大小写；</li>
<li><code>~*</code> 正则匹配，不区分大小写；</li>
<li><code>^~</code> 匹配到即停止搜索；</li>
</ul>
<p>匹配优先级：<code>=</code> &gt; <code>^~</code> &gt; <code>~</code> &gt; <code>~*</code> &gt; 不带任何字符。</p>
<p>实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name www.nginx-test.com;</span><br><span class="line">  </span><br><span class="line">  # 只有当访问 www.nginx-test.com&#x2F;match_all&#x2F; 时才会匹配到&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;match_all&#x2F;index.html</span><br><span class="line">  location &#x3D; &#x2F;match_all&#x2F; &#123;</span><br><span class="line">      root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html</span><br><span class="line">      index index.html</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  # 当访问 www.nginx-test.com&#x2F;1.jpg 等路径时会去 &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;images&#x2F;1.jpg 找对应的资源</span><br><span class="line">  location ~ \.(jpeg|jpg|png|svg)$ &#123;</span><br><span class="line">   root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;images;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  # 当访问 www.nginx-test.com&#x2F;bbs&#x2F; 时会匹配上 &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;bbs&#x2F;index.html</span><br><span class="line">  location ^~ &#x2F;bbs&#x2F; &#123;</span><br><span class="line">   root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line">    index index.html index.htm;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>location 中的反斜线</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F;test &#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location &#x2F;test&#x2F; &#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>不带 <code>/</code> 当访问 <code>www.nginx-test.com/test</code> 时， <code>Nginx</code> 先找是否有 <code>test</code> 目录，如果有则找 <code>test</code> 目录下的 <code>index.html</code> ；如果没有 <code>test</code> 目录， <code>nginx</code> 则会找是否有 <code>test</code> 文件。</li>
<li>带 <code>/</code> 当访问 <code>www.nginx-test.com/test</code> 时， <code>Nginx</code> 先找是否有 <code>test</code> 目录，如果有则找<code>test</code> 目录下的 <code>index.html</code> ，如果没有它也不会去找是否存在 <code>test</code> 文件。</li>
</ul>
<h3 id="return"><a href="#return" class="headerlink" title="return"></a>return</h3><p>停止处理请求，直接返回响应码或重定向到其他 <code>URL</code> ；执行 <code>return</code> 指令后， <code>location</code> 中后续指令将不会被执行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">return code [text];</span><br><span class="line">return code URL;</span><br><span class="line">return URL;</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line">location &#x2F; &#123;</span><br><span class="line"> return 404; # 直接返回状态码</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location &#x2F; &#123;</span><br><span class="line"> return 404 &quot;pages not found&quot;; # 返回状态码 + 一段文本</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location &#x2F; &#123;</span><br><span class="line"> return 302 &#x2F;bbs ; # 返回状态码 + 重定向地址</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location &#x2F; &#123;</span><br><span class="line"> return https:&#x2F;&#x2F;www.baidu.com ; # 返回重定向地址</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="rewrite"><a href="#rewrite" class="headerlink" title="rewrite"></a>rewrite</h2><p>根据指定正则表达式匹配规则，重写 <code>URL</code> 。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：rewrite 正则表达式 要替换的内容 [flag];</span><br><span class="line"></span><br><span class="line">上下文：server、location、if</span><br><span class="line"></span><br><span class="line">示例：rewirte &#x2F;images&#x2F;(.*\.jpg)$ &#x2F;pic&#x2F;$1; # $1是前面括号(.*\.jpg)的反向引用</span><br></pre></td></tr></table></figure>

<p><code>flag</code> 可选值的含义：</p>
<ul>
<li><code>last</code> 重写后的 <code>URL</code> 发起新请求，再次进入 <code>server</code> 段，重试 <code>location</code> 的中的匹配；</li>
<li><code>break</code> 直接使用重写后的 <code>URL</code> ，不再匹配其它 <code>location</code> 中语句；</li>
<li><code>redirect</code> 返回302临时重定向；</li>
<li><code>permanent</code> 返回301永久重定向；</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name fe.lion.club; # 要在本地hosts文件进行配置</span><br><span class="line">  root html;</span><br><span class="line">  location &#x2F;search &#123;</span><br><span class="line">   rewrite ^&#x2F;(.*) https:&#x2F;&#x2F;www.baidu.com redirect;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  location &#x2F;images &#123;</span><br><span class="line">   rewrite &#x2F;images&#x2F;(.*) &#x2F;pics&#x2F;$1;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  location &#x2F;pics &#123;</span><br><span class="line">   rewrite &#x2F;pics&#x2F;(.*) &#x2F;photos&#x2F;$1;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  location &#x2F;photos &#123;</span><br><span class="line">  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>按照这个配置我们来分析：</p>
<ul>
<li>当访问 <code>fe.lion.club/search</code> 时，会自动帮我们重定向到 <code>https://www.baidu.com</code>。</li>
<li>当访问 <code>fe.lion.club/images/1.jpg</code> 时，第一步重写 <code>URL</code> 为 <code>fe.lion.club/pics/1.jpg</code>，找到 <code>pics</code> 的 <code>location</code> ，继续重写 <code>URL</code> 为 <code>fe.lion.club/photos/1.jpg</code> ，找到<code>/photos</code> 的 <code>location</code> 后，去 <code>html/photos</code> 目录下寻找 <code>1.jpg</code> 静态资源。</li>
</ul>
<h2 id="if-指令"><a href="#if-指令" class="headerlink" title="if 指令"></a>if 指令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">语法：if (condition) &#123;...&#125;</span><br><span class="line"></span><br><span class="line">上下文：server、location</span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line">if($http_user_agent ~ Chrome)&#123;</span><br><span class="line">  rewrite &#x2F;(.*)&#x2F;browser&#x2F;$1 break;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>condition</code> 判断条件：</p>
<ul>
<li><code>$variable</code> 仅为变量时，值为空或以0开头字符串都会被当做 <code>false</code> 处理；</li>
<li><code>=</code> 或 <code>!=</code> 相等或不等；</li>
<li><code>~</code> 正则匹配；</li>
<li><code>! ~</code> 非正则匹配；</li>
<li><code>~*</code> 正则匹配，不区分大小写；</li>
<li><code>-f</code> 或 <code>! -f</code> 检测文件存在或不存在；</li>
<li><code>-d</code> 或 <code>! -d</code> 检测目录存在或不存在；</li>
<li><code>-e</code> 或 <code>! -e</code> 检测文件、目录、符号链接等存在或不存在；</li>
<li><code>-x</code> 或 <code>! -x</code> 检测文件可以执行或不可执行；</li>
</ul>
<p>实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 8080;</span><br><span class="line">  server_name localhost;</span><br><span class="line">  root html;</span><br><span class="line">  </span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">   if ( $uri &#x3D; &quot;&#x2F;images&#x2F;&quot; )&#123;</span><br><span class="line">     rewrite (.*) &#x2F;pics&#x2F; break;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当访问 <code>localhost:8080/images/</code> 时，会进入 <code>if</code> 判断里面执行 <code>rewrite</code> 命令。</p>
<p><strong>autoindex</strong></p>
<p>用户请求以 <code>/</code> 结尾时，列出目录结构，可以用于快速搭建静态资源下载网站。</p>
<p><code>autoindex.conf</code> 配置信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name fe.lion-test.club;</span><br><span class="line">  </span><br><span class="line">  location &#x2F;download&#x2F; &#123;</span><br><span class="line">    root &#x2F;opt&#x2F;source;</span><br><span class="line">    </span><br><span class="line">    autoindex on; # 打开 autoindex，，可选参数有 on | off</span><br><span class="line">    autoindex_exact_size on; # 修改为off，以KB、MB、GB显示文件大小，默认为on，以bytes显示出⽂件的确切⼤⼩</span><br><span class="line">    autoindex_format html; # 以html的方式进行格式化，可选参数有 html | json | xml</span><br><span class="line">    autoindex_localtime off; # 显示的⽂件时间为⽂件的服务器时间。默认为off，显示的⽂件时间为GMT时间</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当访问 <code>fe.lion.com/download/</code> 时，会把服务器 <code>/opt/source/download/</code> 路径下的文件展示出来，如下图所示：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1CxxiaXXtjSM4U1Y0r7AeZtGScQRCxyfmDPfskKicRMDGMibAnLj1WX8Vv0nS8hGaAZEfohJOIuzvTA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>变量</strong></p>
<p><code>Nginx</code> 提供给使用者的变量非常多，但是终究是一个完整的请求过程所产生数据， <code>Nginx</code> 将这些数据以变量的形式提供给使用者。</p>
<p>下面列举些项目中常用的变量：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tshHIlcFwiap9d3kaiaXLvLMAibOBfJXwBxia7msxn3zw1D7Obd4OO8HoOt23ibjMLhW2snkLDfj3YGGIkw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>实例演示 <code>var.conf</code> ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line"> listen 8081;</span><br><span class="line"> server_name var.lion-test.club;</span><br><span class="line"> root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line"> location &#x2F; &#123;</span><br><span class="line">  return 200 &quot;</span><br><span class="line">remote_addr: $remote_addr</span><br><span class="line">remote_port: $remote_port</span><br><span class="line">server_addr: $server_addr</span><br><span class="line">server_port: $server_port</span><br><span class="line">server_protocol: $server_protocol</span><br><span class="line">binary_remote_addr: $binary_remote_addr</span><br><span class="line">connection: $connection</span><br><span class="line">uri: $uri</span><br><span class="line">request_uri: $request_uri</span><br><span class="line">scheme: $scheme</span><br><span class="line">request_method: $request_method</span><br><span class="line">request_length: $request_length</span><br><span class="line">args: $args</span><br><span class="line">arg_pid: $arg_pid</span><br><span class="line">is_args: $is_args</span><br><span class="line">query_string: $query_string</span><br><span class="line">host: $host</span><br><span class="line">http_user_agent: $http_user_agent</span><br><span class="line">http_referer: $http_referer</span><br><span class="line">http_via: $http_via</span><br><span class="line">request_time: $request_time</span><br><span class="line">https: $https</span><br><span class="line">request_filename: $request_filename</span><br><span class="line">document_root: $document_root</span><br><span class="line">&quot;;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当我们访问 <code>http://var.lion-test.club:8081/test?pid=121414&amp;cid=sadasd</code> 时，由于<code>Nginx</code> 中写了 <code>return</code> 方法，因此 <code>chrome</code> 浏览器会默认为我们下载一个文件，下面展示的就是下载的文件内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">remote_addr: 27.16.220.84</span><br><span class="line">remote_port: 56838</span><br><span class="line">server_addr: 172.17.0.2</span><br><span class="line">server_port: 8081</span><br><span class="line">server_protocol: HTTP&#x2F;1.1</span><br><span class="line">binary_remote_addr: 茉</span><br><span class="line">connection: 126</span><br><span class="line">uri: &#x2F;test&#x2F;</span><br><span class="line">request_uri: &#x2F;test&#x2F;?pid&#x3D;121414&amp;cid&#x3D;sadasd</span><br><span class="line">scheme: http</span><br><span class="line">request_method: GET</span><br><span class="line">request_length: 518</span><br><span class="line">args: pid&#x3D;121414&amp;cid&#x3D;sadasd</span><br><span class="line">arg_pid: 121414</span><br><span class="line">is_args: ?</span><br><span class="line">query_string: pid&#x3D;121414&amp;cid&#x3D;sadasd</span><br><span class="line">host: var.lion-test.club</span><br><span class="line">http_user_agent: Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;88.0.4324.182 Safari&#x2F;537.36</span><br><span class="line">http_referer: </span><br><span class="line">http_via: </span><br><span class="line">request_time: 0.000</span><br><span class="line">https: </span><br><span class="line">request_filename: &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;test&#x2F;</span><br><span class="line">document_root: &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html</span><br></pre></td></tr></table></figure>

<p><code>Nginx</code> 的配置还有非常多，以上只是罗列了一些常用的配置，在实际项目中还是要学会查阅文档。</p>
<p><strong>Nginx 应用核心概念</strong></p>
<p>代理是在服务器和客户端之间假设的一层服务器，代理将接收客户端的请求并将它转发给服务器，然后将服务端的响应转发给客户端。</p>
<p>不管是正向代理还是反向代理，实现的都是上面的功能。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1CxxiaXXtjSM4U1Y0r7AeZtguRkXWwLy0FsAVibBv3qiaJhmu1Dh28ibEZ1BxVXn4icUJJU7PvzibQx5Yg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>正向代理</strong></p>
<blockquote>
<p>正向代理，意思是一个位于客户端和原始服务器(origin server)之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定目标(原始服务器)，然后代理向原始服务器转交请求并将获得的内容返回给客户端。</p>
</blockquote>
<p>正向代理是为我们服务的，即为客户端服务的，客户端可以根据正向代理访问到它本身无法访问到的服务器资源。</p>
<p>正向代理对我们是透明的，对服务端是非透明的，即服务端并不知道自己收到的是来自代理的访问还是来自真实客户端的访问。</p>
<p><strong>反向代理</strong></p>
<blockquote>
<ul>
<li>反向代理*（Reverse Proxy）方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。</li>
</ul>
</blockquote>
<p>反向代理是为服务端服务的，反向代理可以帮助服务器接收来自客户端的请求，帮助服务器做请求转发，负载均衡等。</p>
<p>反向代理对服务端是透明的，对我们是非透明的，即我们并不知道自己访问的是代理服务器，而服务器知道反向代理在为他服务。</p>
<p>反向代理的优势：</p>
<ul>
<li>隐藏真实服务器；</li>
<li>负载均衡便于横向扩充后端动态服务；</li>
<li>动静分离，提升系统健壮性；</li>
</ul>
<p>那么“动静分离”是什么？负载均衡又是什么？</p>
<p><strong>动静分离</strong></p>
<p>动静分离是指在 <code>web</code> 服务器架构中，将静态页面与动态页面或者静态内容接口和动态内容接口分开不同系统访问的架构设计方法，进而提示整个服务的访问性和可维护性。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1CxxiaXXtjSM4U1Y0r7AeZtxdyM0vuy9aNSw1dp7ic3PxiajokELb0U4picENsJ0cQoUOwIXDMZibMoTg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>一般来说，都需要将动态资源和静态资源分开，由于 <code>Nginx</code> 的高并发和静态资源缓存等特性，经常将静态资源部署在 <code>Nginx</code> 上。如果请求的是静态资源，直接到静态资源目录获取资源，如果是动态资源的请求，则利用反向代理的原理，把请求转发给对应后台应用去处理，从而实现动静分离。</p>
<p>使用前后端分离后，可以很大程度提升静态资源的访问速度，即使动态服务不可用，静态资源的访问也不会受到影响。</p>
<p><strong>负载均衡</strong></p>
<p>一般情况下，客户端发送多个请求到服务器，服务器处理请求，其中一部分可能要操作一些资源比如数据库、静态资源等，服务器处理完毕后，再将结果返回给客户端。</p>
<p>这种模式对于早期的系统来说，功能要求不复杂，且并发请求相对较少的情况下还能胜任，成本也低。随着信息数量不断增长，访问量和数据量飞速增长，以及系统业务复杂度持续增加，这种做法已无法满足要求，并发量特别大时，服务器容易崩。</p>
<p>很明显这是由于服务器性能的瓶颈造成的问题，除了堆机器之外，最重要的做法就是负载均衡。</p>
<p>请求爆发式增长的情况下，单个机器性能再强劲也无法满足要求了，这个时候集群的概念产生了，单个服务器解决不了的问题，可以使用多个服务器，然后将请求分发到各个服务器上，将负载分发到不同的服务器，这就是负载均衡，核心是「分摊压力」。<code>Nginx</code> 实现负载均衡，一般来说指的是将请求转发给服务器集群。</p>
<p>举个具体的例子，晚高峰乘坐地铁的时候，入站口经常会有地铁工作人员大喇叭“请走 <code>B</code> 口，<code>B</code> 口人少车空….”，这个工作人员的作用就是负载均衡。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1CxxiaXXtjSM4U1Y0r7AeZt4hPMc4FRgLth4Yn0Q8F8tj0v2xaKCQrPfJVpWEn5W4Aq3JaT8M059A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><code>Nginx</code> 实现负载均衡的策略：</p>
<ul>
<li>轮询策略：默认情况下采用的策略，将所有客户端请求轮询分配给服务端。这种策略是可以正常工作的，但是如果其中某一台服务器压力太大，出现延迟，会影响所有分配在这台服务器下的用户。</li>
<li>最小连接数策略：将请求优先分配给压力较小的服务器，它可以平衡每个队列的长度，并避免向压力大的服务器添加更多的请求。</li>
<li>最快响应时间策略：优先分配给响应时间最短的服务器。</li>
<li>客户端 <code>ip</code> 绑定策略：来自同一个 <code>ip</code> 的请求永远只分配一台服务器，有效解决了动态网页存在的 <code>session</code> 共享问题。</li>
</ul>
<p><strong>Nginx 实战配置</strong></p>
<p>在配置反向代理和负载均衡等等功能之前，有两个核心模块是我们必须要掌握的，这两个模块应该说是 <code>Nginx</code> 应用配置中的核心，它们分别是：<code>upstream</code> 、<code>proxy_pass</code> 。</p>
<p><strong>upstream</strong></p>
<p>用于定义上游服务器（指的就是后台提供的应用服务器）的相关信息。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1CxxiaXXtjSM4U1Y0r7AeZtPq4RNcsFc6icp4alOBg28vOho4W8VCUUeJGrxuSktIYD7MeNbZTQ6eA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">语法：upstream name &#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">上下文：http</span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line">upstream back_end_server&#123;</span><br><span class="line">  server 192.168.100.33:8081</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 <code>upstream</code> 内可使用的指令：</p>
<ul>
<li><code>server</code> 定义上游服务器地址；</li>
<li><code>zone</code> 定义共享内存，用于跨 <code>worker</code> 子进程；</li>
<li><code>keepalive</code> 对上游服务启用长连接；</li>
<li><code>keepalive_requests</code> 一个长连接最多请求 <code>HTTP</code> 的个数；</li>
<li><code>keepalive_timeout</code> 空闲情形下，一个长连接的超时时长；</li>
<li><code>hash</code> 哈希负载均衡算法；</li>
<li><code>ip_hash</code> 依据 <code>IP</code> 进行哈希计算的负载均衡算法；</li>
<li><code>least_conn</code> 最少连接数负载均衡算法；</li>
<li><code>least_time</code> 最短响应时间负载均衡算法；</li>
<li><code>random</code> 随机负载均衡算法；</li>
</ul>
<h3 id="server"><a href="#server" class="headerlink" title="server"></a>server</h3><p>定义上游服务器地址。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法：server address [parameters]</span><br><span class="line"></span><br><span class="line">上下文：upstream</span><br></pre></td></tr></table></figure>

<p><code>parameters</code> 可选值：</p>
<ul>
<li><code>weight=number</code> 权重值，默认为1；</li>
<li><code>max_conns=number</code> 上游服务器的最大并发连接数；</li>
<li><code>fail_timeout=time</code> 服务器不可用的判定时间；</li>
<li><code>max_fails=numer</code> 服务器不可用的检查次数；</li>
<li><code>backup</code> 备份服务器，仅当其他服务器都不可用时才会启用；</li>
<li><code>down</code> 标记服务器长期不可用，离线维护；</li>
</ul>
<h3 id="keepalive"><a href="#keepalive" class="headerlink" title="keepalive"></a>keepalive</h3><p>限制每个 <code>worker</code> 子进程与上游服务器空闲长连接的最大数量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">keepalive connections;</span><br><span class="line"></span><br><span class="line">上下文：upstream</span><br><span class="line"></span><br><span class="line">示例：keepalive 16;</span><br></pre></td></tr></table></figure>

<h3 id="keepalive-requests"><a href="#keepalive-requests" class="headerlink" title="keepalive_requests"></a>keepalive_requests</h3><p>单个长连接可以处理的最多 <code>HTTP</code> 请求个数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：keepalive_requests number;</span><br><span class="line"></span><br><span class="line">默认值：keepalive_requests 100;</span><br><span class="line"></span><br><span class="line">上下文：upstream</span><br></pre></td></tr></table></figure>



<p><strong>keepalive_timeout</strong></p>
<p>空闲长连接的最长保持时间。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：keepalive_timeout time;</span><br><span class="line"></span><br><span class="line">默认值：keepalive_timeout 60s;</span><br><span class="line"></span><br><span class="line">上下文：upstream</span><br></pre></td></tr></table></figure>

<h3 id="配置实例"><a href="#配置实例" class="headerlink" title="配置实例"></a>配置实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">upstream back_end&#123;</span><br><span class="line"> server 127.0.0.1:8081 weight&#x3D;3 max_conns&#x3D;1000 fail_timeout&#x3D;10s max_fails&#x3D;2;</span><br><span class="line">  keepalive 32;</span><br><span class="line">  keepalive_requests 50;</span><br><span class="line">  keepalive_timeout 30s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="proxy-pass"><a href="#proxy-pass" class="headerlink" title="proxy_pass"></a>proxy_pass</h2><p>用于配置代理服务器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">语法：proxy_pass URL;</span><br><span class="line"></span><br><span class="line">上下文：location、if、limit_except</span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line">proxy_pass http:&#x2F;&#x2F;127.0.0.1:8081</span><br><span class="line">proxy_pass http:&#x2F;&#x2F;127.0.0.1:8081&#x2F;proxy</span><br></pre></td></tr></table></figure>

<p><code>URL</code> 参数原则</p>
<p><code>1. URL</code> 必须以 <code>http</code> 或 <code>https</code> 开头；</p>
<p><code>2. URL</code> 中可以携带变量；</p>
<p><code>3. URL</code> 中是否带 <code>URI</code> ，会直接影响发往上游请求的 <code>URL</code> ；</p>
<p>接下来让我们来看看两种常见的 <code>URL</code> 用法：</p>
<ol>
<li><code>proxy_pass http://192.168.100.33:8081</code></li>
<li><code>proxy_pass http://192.168.100.33:8081/</code></li>
</ol>
<p>这两种用法的区别就是带 <code>/</code> 和不带 <code>/</code> ，在配置代理时它们的区别可大了：</p>
<ul>
<li>不带 <code>/</code> 意味着 <code>Nginx</code> 不会修改用户 <code>URL</code> ，而是直接透传给上游的应用服务器；</li>
<li>带 <code>/</code> 意味着 <code>Nginx</code> 会修改用户 <code>URL</code> ，修改方法是将 <code>location</code> 后的 <code>URL</code> 从用户 <code>URL</code> 中删除；</li>
</ul>
<p>不带 <code>/</code> 的用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F;bbs&#x2F;&#123;</span><br><span class="line">  proxy_pass http:&#x2F;&#x2F;127.0.0.1:8080;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>分析：</p>
<p>\1. 用户请求 <code>URL</code> ：<code>/bbs/abc/test.html</code></p>
<p>\2. 请求到达 <code>Nginx</code> 的 <code>URL</code> ：<code>/bbs/abc/test.html</code></p>
<p>3 .请求到达上游应用服务器的 <code>URL</code> ：<code>/bbs/abc/test.html</code></p>
<p>带 <code>/</code> 的用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location &#x2F;bbs&#x2F;&#123;</span><br><span class="line">  proxy_pass http:&#x2F;&#x2F;127.0.0.1:8080&#x2F;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>分析：</p>
<p>\1. 用户请求 <code>URL</code> ：<code>/bbs/abc/test.html</code></p>
<p>\2. 请求到达 <code>Nginx</code> 的 <code>URL</code> ：<code>/bbs/abc/test.html</code></p>
<p>\3. 请求到达上游应用服务器的 <code>URL</code> ：<code>/abc/test.html</code></p>
<p>并没有拼接上 <code>/bbs</code> ，这点和 <code>root</code> 与 <code>alias</code> 之间的区别是保持一致的。</p>
<p><strong>配置反向代理</strong></p>
<p>这里为了演示更加接近实际，作者准备了两台云服务器，它们的公网 <code>IP</code> 分别是：<code>121.42.11.34</code>与 <code>121.5.180.193</code> 。</p>
<p>我们把 <code>121.42.11.34</code> 服务器作为上游服务器，做如下配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;proxy.conf</span><br><span class="line">server&#123;</span><br><span class="line">  listen 8080;</span><br><span class="line">  server_name localhost;</span><br><span class="line">  </span><br><span class="line">  location &#x2F;proxy&#x2F; &#123;</span><br><span class="line">    root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;proxy;</span><br><span class="line">    index index.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;proxy&#x2F;index.html</span><br><span class="line">&lt;h1&gt; 121.42.11.34 proxy html &lt;&#x2F;h1&gt;</span><br></pre></td></tr></table></figure>



<p>配置完成后重启 <code>Nginx</code> 服务器 <code>nginx \-s reload</code> 。</p>
<p>把 <code>121.5.180.193</code> 服务器作为代理服务器，做如下配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;proxy.conf</span><br><span class="line">upstream back_end &#123;</span><br><span class="line">  server 121.42.11.34:8080 weight&#x3D;2 max_conns&#x3D;1000 fail_timeout&#x3D;10s max_fails&#x3D;3;</span><br><span class="line">  keepalive 32;</span><br><span class="line">  keepalive_requests 80;</span><br><span class="line">  keepalive_timeout 20s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name proxy.lion.club;</span><br><span class="line">  location &#x2F;proxy &#123;</span><br><span class="line">   proxy_pass http:&#x2F;&#x2F;back_end&#x2F;proxy;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>本地机器要访问 <code>proxy.lion.club</code> 域名，因此需要配置本地 <code>hosts</code> ，通过命令：<code>vim /etc/hosts</code> 进入配置文件，添加如下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">121.5.180.193 proxy.lion.club</span><br></pre></td></tr></table></figure>

<p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1CxxiaXXtjSM4U1Y0r7AeZt7ZagQyO1XZk6iclBoicY5v7OhGGrqfmCEswrNtAgyKpl6GhOefU6wo1w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>分析：</p>
<p>当访问 <code>proxy.lion.club/proxy</code> 时通过 <code>upstream</code> 的配置找到 <code>121.42.11.34:8080</code> ；</p>
<p>因此访问地址变为 <code>http://121.42.11.34:8080/proxy</code> ；</p>
<p>连接到 <code>121.42.11.34</code> 服务器，找到 <code>8080</code> 端口提供的 <code>server</code> ；</p>
<p>通过 <code>server</code> 找到 <code>/usr/share/nginx/html/proxy/index.html</code> 资源，最终展示出来。</p>
<h2 id="配置负载均衡"><a href="#配置负载均衡" class="headerlink" title="配置负载均衡"></a>配置负载均衡</h2><p>配置负载均衡主要是要使用 <code>upstream</code> 指令。</p>
<p>我们把 <code>121.42.11.34</code> 服务器作为上游服务器，做如下配置（<code>/etc/nginx/conf.d/balance.conf</code> ）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">  listen 8020;</span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">   return 200 &#39;return 8020 \n&#39;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server&#123;</span><br><span class="line">  listen 8030;</span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">   return 200 &#39;return 8030 \n&#39;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server&#123;</span><br><span class="line">  listen 8040;</span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">   return 200 &#39;return 8040 \n&#39;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置完成后：</p>
<p><code>1. nginx -t</code> 检测配置是否正确；</p>
<p><code>2. nginx -s reload</code> 重启 <code>Nginx</code> 服务器；</p>
<p>\3. 执行 <code>ss -nlt</code> 命令查看端口是否被占用，从而判断 <code>Nginx</code> 服务是否正确启动。</p>
<p>把 <code>121.5.180.193</code> 服务器作为代理服务器，做如下配置（ <code>/etc/nginx/conf.d/balance.conf</code>）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">upstream demo_server &#123;</span><br><span class="line">  server 121.42.11.34:8020;</span><br><span class="line">  server 121.42.11.34:8030;</span><br><span class="line">  server 121.42.11.34:8040;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name balance.lion.club;</span><br><span class="line">  </span><br><span class="line">  location &#x2F;balance&#x2F; &#123;</span><br><span class="line">   proxy_pass http:&#x2F;&#x2F;demo_server;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置完成后重启 <code>Nginx</code> 服务器。并且在需要访问的客户端配置好 <code>ip</code> 和域名的映射关系。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># &#x2F;etc&#x2F;hosts</span><br><span class="line"></span><br><span class="line">121.5.180.193 balance.lion.club</span><br></pre></td></tr></table></figure>

<p>在客户端机器执行 <code>curl http://balance.lion.club/balance/</code> 命令：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1CxxiaXXtjSM4U1Y0r7AeZtJcN9Ghfnox2UsXQohHk2LOichwufTKWRBoU0F4ibAI5AKfXjeLXSLDXg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>不难看出，负载均衡的配置已经生效了，每次给我们分发的上游服务器都不一样。就是通过简单的轮询策略进行上游服务器分发。</p>
<p>接下来，我们再来了解下 <code>Nginx</code> 的其它分发策略。</p>
<p><strong>hash 算法</strong></p>
<p>通过制定关键字作为 <code>hash key</code> ，基于 <code>hash</code> 算法映射到特定的上游服务器中。关键字可以包含有变量、字符串。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">upstream demo_server &#123;</span><br><span class="line">  hash $request_uri;</span><br><span class="line">  server 121.42.11.34:8020;</span><br><span class="line">  server 121.42.11.34:8030;</span><br><span class="line">  server 121.42.11.34:8040;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name balance.lion.club;</span><br><span class="line">  </span><br><span class="line">  location &#x2F;balance&#x2F; &#123;</span><br><span class="line">   proxy_pass http:&#x2F;&#x2F;demo_server;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>hash $request_uri</code> 表示使用 <code>request_uri</code> 变量作为 <code>hash</code> 的 <code>key</code> 值，只要访问的 <code>URI</code> 保持不变，就会一直分发给同一台服务器。</p>
<p><strong>ip_hash</strong></p>
<p>根据客户端的请求 <code>ip</code> 进行判断，只要 <code>ip</code> 地址不变就永远分配到同一台主机。它可以有效解决后台服务器 <code>session</code> 保持的问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">upstream demo_server &#123;</span><br><span class="line">  ip_hash;</span><br><span class="line">  server 121.42.11.34:8020;</span><br><span class="line">  server 121.42.11.34:8030;</span><br><span class="line">  server 121.42.11.34:8040;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name balance.lion.club;</span><br><span class="line">  </span><br><span class="line">  location &#x2F;balance&#x2F; &#123;</span><br><span class="line">   proxy_pass http:&#x2F;&#x2F;demo_server;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="最少连接数算法"><a href="#最少连接数算法" class="headerlink" title="最少连接数算法"></a>最少连接数算法</h3><p>各个 <code>worker</code> 子进程通过读取共享内存的数据，来获取后端服务器的信息。来挑选一台当前已建立连接数最少的服务器进行分配请求。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语法：least_conn;</span><br><span class="line"></span><br><span class="line">上下文：upstream;</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">upstream demo_server &#123;</span><br><span class="line">  zone test 10M; # zone可以设置共享内存空间的名字和大小</span><br><span class="line">  least_conn;</span><br><span class="line">  server 121.42.11.34:8020;</span><br><span class="line">  server 121.42.11.34:8030;</span><br><span class="line">  server 121.42.11.34:8040;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name balance.lion.club;</span><br><span class="line">  </span><br><span class="line">  location &#x2F;balance&#x2F; &#123;</span><br><span class="line">   proxy_pass http:&#x2F;&#x2F;demo_server;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后你会发现，负载均衡的配置其实一点都不复杂。</p>
<p><strong>配置缓存</strong></p>
<p>缓存可以非常有效的提升性能，因此不论是客户端（浏览器），还是代理服务器（ <code>Nginx</code> ），乃至上游服务器都多少会涉及到缓存。可见缓存在每个环节都是非常重要的。下面让我们来学习<code>Nginx</code> 中如何设置缓存策略。</p>
<p><strong>proxy_cache</strong></p>
<p>存储一些之前被访问过、而且可能将要被再次访问的资源，使用户可以直接从代理服务器获得，从而减少上游服务器的压力，加快整个访问速度。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：proxy_cache zone | off ; # zone 是共享内存的名称</span><br><span class="line"></span><br><span class="line">默认值：proxy_cache off;</span><br><span class="line"></span><br><span class="line">上下文：http、server、location</span><br></pre></td></tr></table></figure>

<p><strong>proxy_cache_path</strong></p>
<p>设置缓存文件的存放路径。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：proxy_cache_path path [level&#x3D;levels] ...可选参数省略，下面会详细列举</span><br><span class="line"></span><br><span class="line">默认值：proxy_cache_path off</span><br><span class="line"></span><br><span class="line">上下文：http</span><br></pre></td></tr></table></figure>

<p>参数含义：</p>
<ul>
<li><code>path</code> 缓存文件的存放路径；</li>
<li><code>level path</code> 的目录层级；</li>
<li><code>keys_zone</code> 设置共享内存；</li>
<li><code>inactive</code> 在指定时间内没有被访问，缓存会被清理，默认10分钟；</li>
</ul>
<h3 id="proxy-cache-key"><a href="#proxy-cache-key" class="headerlink" title="proxy_cache_key"></a>proxy_cache_key</h3><p>设置缓存文件的 <code>key</code> 。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：proxy_cache_key</span><br><span class="line"></span><br><span class="line">默认值：proxy_cache_key $scheme$proxy_host$request_uri;</span><br><span class="line"></span><br><span class="line">上下文：http、server、location</span><br></pre></td></tr></table></figure>



<p><strong>proxy_cache_valid</strong></p>
<p>配置什么状态码可以被缓存，以及缓存时长。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：proxy_cache_valid [code...] time;</span><br><span class="line"></span><br><span class="line">上下文：http、server、location</span><br><span class="line"></span><br><span class="line">配置示例：proxy_cache_valid 200 304 2m;; # 说明对于状态为200和304的缓存文件的缓存时间是2分钟</span><br></pre></td></tr></table></figure>

<h3 id="proxy-no-cache"><a href="#proxy-no-cache" class="headerlink" title="proxy_no_cache"></a>proxy_no_cache</h3><p>定义相应保存到缓存的条件，如果字符串参数的至少一个值不为空且不等于“ 0”，则将不保存该响应到缓存。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：proxy_no_cache string;</span><br><span class="line"></span><br><span class="line">上下文：http、server、location</span><br><span class="line"></span><br><span class="line">示例：proxy_no_cache $http_pragma    $http_authorization;</span><br></pre></td></tr></table></figure>

<h3 id="proxy-cache-bypass"><a href="#proxy-cache-bypass" class="headerlink" title="proxy_cache_bypass"></a>proxy_cache_bypass</h3><p>定义条件，在该条件下将不会从缓存中获取响应。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：proxy_cache_bypass string;</span><br><span class="line"></span><br><span class="line">上下文：http、server、location</span><br><span class="line"></span><br><span class="line">示例：proxy_cache_bypass $http_pragma    $http_authorization;</span><br></pre></td></tr></table></figure>

<h3 id="upstream-cache-status-变量"><a href="#upstream-cache-status-变量" class="headerlink" title="upstream_cache_status 变量"></a>upstream_cache_status 变量</h3><p>它存储了缓存是否命中的信息，会设置在响应头信息中，在调试中非常有用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MISS: 未命中缓存</span><br><span class="line">HIT：命中缓存</span><br><span class="line">EXPIRED: 缓存过期</span><br><span class="line">STALE: 命中了陈旧缓存</span><br><span class="line">REVALIDDATED: Nginx验证陈旧缓存依然有效</span><br><span class="line">UPDATING: 内容陈旧，但正在更新</span><br><span class="line">BYPASS: X响应从原始服务器获取</span><br></pre></td></tr></table></figure>

<h3 id="配置实例-1"><a href="#配置实例-1" class="headerlink" title="配置实例"></a>配置实例</h3><p>我们把 <code>121.42.11.34</code> 服务器作为上游服务器，做如下配置（ <code>/etc/nginx/conf.d/cache.conf</code>）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 1010;</span><br><span class="line">  root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;1010;</span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">   index index.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 1020;</span><br><span class="line">  root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;1020;</span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">   index index.html;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>把 <code>121.5.180.193</code> 服务器作为代理服务器，做如下配置（ <code>/etc/nginx/conf.d/cache.conf</code>）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">proxy_cache_path &#x2F;etc&#x2F;nginx&#x2F;cache_temp levels&#x3D;2:2 keys_zone&#x3D;cache_zone:30m max_size&#x3D;2g inactive&#x3D;60m use_temp_path&#x3D;off;</span><br><span class="line"></span><br><span class="line">upstream cache_server&#123;</span><br><span class="line">  server 121.42.11.34:1010;</span><br><span class="line">  server 121.42.11.34:1020;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name cache.lion.club;</span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">    proxy_cache cache_zone; # 设置缓存内存，上面配置中已经定义好的</span><br><span class="line">    proxy_cache_valid 200 5m; # 缓存状态为200的请求，缓存时长为5分钟</span><br><span class="line">    proxy_cache_key $request_uri; # 缓存文件的key为请求的URI</span><br><span class="line">    add_header Nginx-Cache-Status $upstream_cache_status # 把缓存状态设置为头部信息，响应给客户端</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;cache_server; # 代理转发</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>缓存就是这样配置，我们可以在 <code>/etc/nginx/cache_temp</code> 路径下找到相应的缓存文件。</p>
<p><strong>对于一些实时性要求非常高的页面或数据来说，就不应该去设置缓存，下面来看看如何配置不缓存的内容。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  server_name cache.lion.club;</span><br><span class="line">  # URI 中后缀为 .txt 或 .text 的设置变量值为 &quot;no cache&quot;</span><br><span class="line">  if ($request_uri ~ \.(txt|text)$) &#123;</span><br><span class="line">   set $cache_name &quot;no cache&quot;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">    proxy_no_cache $cache_name; # 判断该变量是否有值，如果有值则不进行缓存，如果没有值则进行缓存</span><br><span class="line">    proxy_cache cache_zone; # 设置缓存内存</span><br><span class="line">    proxy_cache_valid 200 5m; # 缓存状态为200的请求，缓存时长为5分钟</span><br><span class="line">    proxy_cache_key $request_uri; # 缓存文件的key为请求的URI</span><br><span class="line">    add_header Nginx-Cache-Status $upstream_cache_status # 把缓存状态设置为头部信息，响应给客户端</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;cache_server; # 代理转发</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>HTTPS</strong>**<br>**</p>
<p>在学习如何配置 <code>HTTPS</code> 之前，我们先来简单回顾下 <code>HTTPS</code> 的工作流程是怎么样的？它是如何进行加密保证安全的？</p>
<p><strong>HTTPS 工作流程</strong></p>
<p>\1. 客户端（浏览器）访问 <code>https://www.baidu.com</code> 百度网站；</p>
<p>\2. 百度服务器返回 <code>HTTPS</code> 使用的 <code>CA</code> 证书；</p>
<p>\3. 浏览器验证 <code>CA</code> 证书是否为合法证书；</p>
<p>\4. 验证通过，证书合法，生成一串随机数并使用公钥（证书中提供的）进行加密；</p>
<p>\5. 发送公钥加密后的随机数给百度服务器；</p>
<p>\6. 百度服务器拿到密文，通过私钥进行解密，获取到随机数（公钥加密，私钥解密，反之也可以）；</p>
<p>\7. 百度服务器把要发送给浏览器的内容，使用随机数进行加密后传输给浏览器；</p>
<p>\8. 此时浏览器可以使用随机数进行解密，获取到服务器的真实传输内容；</p>
<p>这就是 <code>HTTPS</code> 的基本运作原理，使用对称加密和非对称机密配合使用，保证传输内容的安全性。</p>
<p>关于HTTPS更多知识，可以查看作者的另外一篇文章《学习 HTTP 协议》。</p>
<h3 id="配置证书"><a href="#配置证书" class="headerlink" title="配置证书"></a>配置证书</h3><p>下载证书的压缩文件，里面有个 <code>Nginx</code> 文件夹，把 <code>xxx.crt</code> 和 <code>xxx.key</code> 文件拷贝到服务器目录，再进行如下配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen 443 ssl http2 default_server; # SSL 访问端口号为 443</span><br><span class="line">  server_name lion.club; # 填写绑定证书的域名(我这里是随便写的)</span><br><span class="line">  ssl_certificate &#x2F;etc&#x2F;nginx&#x2F;https&#x2F;lion.club_bundle.crt; # 证书地址</span><br><span class="line">  ssl_certificate_key &#x2F;etc&#x2F;nginx&#x2F;https&#x2F;lion.club.key; # 私钥地址</span><br><span class="line">  ssl_session_timeout 10m;</span><br><span class="line">  ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # 支持ssl协议版本，默认为后三个，主流版本是[TLSv1.2]</span><br><span class="line"> </span><br><span class="line">  location &#x2F; &#123;</span><br><span class="line">    root         &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line">    index        index.html index.htm;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如此配置后就能正常访问 <code>HTTPS</code> 版的网站了。</p>
<p><strong>配置跨域 CORS</strong></p>
<p>先简单回顾下跨域究竟是怎么回事。</p>
<p><strong>跨域的定义</strong></p>
<p>同源策略限制了从同一个源加载的文档或脚本如何与来自另一个源的资源进行交互。这是一个用于隔离潜在恶意文件的重要安全机制。通常不允许不同源间的读操作。</p>
<p><strong>同源的定义</strong></p>
<p>如果两个页面的协议，端口（如果有指定）和域名都相同，则两个页面具有相同的源。</p>
<p>下面给出了与 URL <code>http://store.company.com/dir/page.html</code> 的源进行对比的示例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;store.company.com&#x2F;dir2&#x2F;other.html 同源</span><br><span class="line">https:&#x2F;&#x2F;store.company.com&#x2F;secure.html 不同源，协议不同</span><br><span class="line">http:&#x2F;&#x2F;store.company.com:81&#x2F;dir&#x2F;etc.html 不同源，端口不同</span><br><span class="line">http:&#x2F;&#x2F;news.company.com&#x2F;dir&#x2F;other.html 不同源，主机不同</span><br></pre></td></tr></table></figure>

<p>不同源会有如下限制：</p>
<ul>
<li><code>Web</code> 数据层面，同源策略限制了不同源的站点读取当前站点的 <code>Cookie</code> 、 <code>IndexDB</code> 、<code>LocalStorage</code> 等数据。</li>
<li><code>DOM</code> 层面，同源策略限制了来自不同源的 <code>JavaScript</code> 脚本对当前 <code>DOM</code> 对象读和写的操作。</li>
<li>网络层面，同源策略限制了通过 <code>XMLHttpRequest</code> 等方式将站点的数据发送给不同源的站点。</li>
</ul>
<h3 id="Nginx-解决跨域的原理"><a href="#Nginx-解决跨域的原理" class="headerlink" title="Nginx 解决跨域的原理"></a>Nginx 解决跨域的原理</h3><p>例如：</p>
<ul>
<li>前端 <code>server</code> 的域名为：<code>fe.server.com</code></li>
<li>后端服务的域名为：<code>dev.server.com</code></li>
</ul>
<p>现在我在 <code>fe.server.com</code> 对 <code>dev.server.com</code> 发起请求一定会出现跨域。</p>
<p>现在我们只需要启动一个 <code>Nginx</code> 服务器，将 <code>server_name</code> 设置为 <code>fe.server.com</code> 然后设置相应的 <code>location</code> 以拦截前端需要跨域的请求，最后将请求代理回 <code>dev.server.com</code> 。如下面的配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line"> listen      80;</span><br><span class="line"> server_name  fe.server.com;</span><br><span class="line"> location &#x2F; &#123;</span><br><span class="line">  proxy_pass dev.server.com;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样可以完美绕过浏览器的同源策略：<code>fe.server.com</code> 访问 <code>Nginx</code> 的 <code>fe.server.com</code> 属于同源访问，而 <code>Nginx</code> 对服务端转发的请求不会触发浏览器的同源策略。</p>
<p><strong>配置开启 gzip 压缩</strong></p>
<p><code>GZIP</code> 是规定的三种标准 <code>HTTP</code> 压缩格式之一。目前绝大多数的网站都在使用 <code>GZIP</code> 传输 <code>HTML</code>、<code>CSS</code> 、 <code>JavaScript</code> 等资源文件。</p>
<p>对于文本文件， <code>GZiP</code> 的效果非常明显，开启后传输所需流量大约会降至 <code>1/4~1/3</code> 。</p>
<p>并不是每个浏览器都支持 <code>gzip</code> 的，如何知道客户端是否支持 <code>gzip</code> 呢，请求头中的 <code>Accept-Encoding</code> 来标识对压缩的支持。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1CxxiaXXtjSM4U1Y0r7AeZtQ9PJYOamEYj5iaicj56RYTkgZIy3f99kB6wRibzA6jaqPGPbiceKG1QsCA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>启用 <code>gzip</code> 同时需要客户端和服务端的支持，如果客户端支持 <code>gzip</code> 的解析，那么只要服务端能够返回 <code>gzip</code> 的文件就可以启用 <code>gzip</code> 了,我们可以通过 <code>Nginx</code> 的配置来让服务端支持 <code>gzip</code> 。下面的 <code>respone</code> 中 <code>content-encoding:gzip</code> ，指服务端开启了 <code>gzip</code> 的压缩方式。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1CxxiaXXtjSM4U1Y0r7AeZtywHU7es5DM2kDNfU3jChbCnVr3RNYZlv5ekHgbGE5JvffWlPuMseibQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>在 <code>/etc/nginx/conf.d/</code> 文件夹中新建配置文件 <code>gzip.conf</code> ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># # 默认off，是否开启gzip</span><br><span class="line">gzip on; </span><br><span class="line"># 要采用 gzip 压缩的 MIME 文件类型，其中 text&#x2F;html 被系统强制启用；</span><br><span class="line">gzip_types text&#x2F;plain text&#x2F;css application&#x2F;json application&#x2F;x-javascript text&#x2F;xml application&#x2F;xml application&#x2F;xml+rss text&#x2F;javascript;</span><br><span class="line"></span><br><span class="line"># ---- 以上两个参数开启就可以支持Gzip压缩了 ---- #</span><br><span class="line"></span><br><span class="line"># 默认 off，该模块启用后，Nginx 首先检查是否存在请求静态文件的 gz 结尾的文件，如果有则直接返回该 .gz 文件内容；</span><br><span class="line">gzip_static on;</span><br><span class="line"></span><br><span class="line"># 默认 off，nginx做为反向代理时启用，用于设置启用或禁用从代理服务器上收到相应内容 gzip 压缩；</span><br><span class="line">gzip_proxied any;</span><br><span class="line"></span><br><span class="line"># 用于在响应消息头中添加 Vary：Accept-Encoding，使代理服务器根据请求头中的 Accept-Encoding 识别是否启用 gzip 压缩；</span><br><span class="line">gzip_vary on;</span><br><span class="line"></span><br><span class="line"># gzip 压缩比，压缩级别是 1-9，1 压缩级别最低，9 最高，级别越高压缩率越大，压缩时间越长，建议 4-6；</span><br><span class="line">gzip_comp_level 6;</span><br><span class="line"></span><br><span class="line"># 获取多少内存用于缓存压缩结果，16 8k 表示以 8k*16 为单位获得；</span><br><span class="line">gzip_buffers 16 8k;</span><br><span class="line"></span><br><span class="line"># 允许压缩的页面最小字节数，页面字节数从header头中的 Content-Length 中进行获取。默认值是 0，不管页面多大都压缩。建议设置成大于 1k 的字节数，小于 1k 可能会越压越大；</span><br><span class="line"># gzip_min_length 1k;</span><br><span class="line"></span><br><span class="line"># 默认 1.1，启用 gzip 所需的 HTTP 最低版本；</span><br><span class="line">gzip_http_version 1.1;</span><br></pre></td></tr></table></figure>



<p>其实也可以通过前端构建工具例如 <code>webpack</code> 、<code>rollup</code> 等在打生产包时就做好 <code>Gzip</code> 压缩，然后放到 <code>Nginx</code> 服务器中，这样可以减少服务器的开销，加快访问速度。</p>
<p>关于 <code>Nginx</code> 的实际应用就学习到这里，相信通过掌握了 <code>Nginx</code> 核心配置以及实战配置，之后再遇到什么需求，我们也能轻松应对。接下来，让我们再深入一点学习下 <code>Nginx</code> 的架构。</p>
<p><strong>Nginx 架构</strong></p>
<p><strong>进程结构</strong></p>
<p>多进程结构 <code>Nginx</code> 的进程模型图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1CxxiaXXtjSM4U1Y0r7AeZtjISwuYtV601flgG5sgMTvqKOM6hf0jbzwvgrB7iafwlBkVSvmPp6lVw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>多进程中的 <code>Nginx</code> 进程架构如下图所示，会有一个父进程（ <code>Master Process</code> ），它会有很多子进程（ <code>Child Processes</code> ）。</p>
<ul>
<li><p><code>Master Process</code> 用来管理子进程的，其本身并不真正处理用户请求。</p>
</li>
<li><ul>
<li>某个子进程 <code>down</code> 掉的话，它会向 <code>Master</code> 进程发送一条消息，表明自己不可用了，此时<code>Master</code> 进程会去新起一个子进程。</li>
<li>某个配置文件被修改了 <code>Master</code> 进程会去通知 <code>work</code> 进程获取新的配置信息，这也就是我们所说的热部署。</li>
</ul>
</li>
<li><p>子进程间是通过共享内存的方式进行通信的。</p>
</li>
</ul>
<h2 id="配置文件重载原理"><a href="#配置文件重载原理" class="headerlink" title="配置文件重载原理"></a>配置文件重载原理</h2><p><code>reload</code> 重载配置文件的流程：</p>
<p>\1. 向 <code>master</code> 进程发送 <code>HUP</code> 信号（ <code>reload</code> 命令）；</p>
<p><code>2. master</code> 进程检查配置语法是否正确；</p>
<p><code>3. master</code> 进程打开监听端口；</p>
<p><code>4. master</code> 进程使用新的配置文件启动新的 <code>worker</code> 子进程；</p>
<p><code>5. master</code> 进程向老的 <code>worker</code> 子进程发送 <code>QUIT</code> 信号；</p>
<p>\6. 老的 <code>worker</code> 进程关闭监听句柄，处理完当前连接后关闭进程；</p>
<p>\7. 整个过程 <code>Nginx</code> 始终处于平稳运行中，实现了平滑升级，用户无感知；</p>
<h2 id="Nginx-模块化管理机制"><a href="#Nginx-模块化管理机制" class="headerlink" title="Nginx 模块化管理机制"></a>Nginx 模块化管理机制</h2><p><code>Nginx</code> 的内部结构是由核心部分和一系列的功能模块所组成。这样划分是为了使得每个模块的功能相对简单，便于开发，同时也便于对系统进行功能扩展。<code>Nginx</code> 的模块是互相独立的,低耦合高内聚。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib1CxxiaXXtjSM4U1Y0r7AeZtxkGzdXVSdAyy7KoYhFC2IoyfNaLNH87X6e5bEAXicC7xaqwfYbicsvVQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h1 id="配置示例"><a href="#配置示例" class="headerlink" title="配置示例"></a>配置示例</h1><p><img src="C:\Users\swx\AppData\Roaming\Typora\typora-user-images\image-20210330153357593.png" alt="image-20210330153357593"></p>
<p>修改root文件下的ngnix,新加一个server()</p>
<h2 id="default-conf"><a href="#default-conf" class="headerlink" title="/default.conf"></a>/default.conf</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;     <span class="comment">#ipv4的端口</span></span><br><span class="line">    <span class="attribute">listen</span>  [::]:<span class="number">80</span>;     <span class="comment">#ipv6的端口</span></span><br><span class="line">    <span class="attribute">server_name</span>  localhost;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#charset koi8-r;   在Unicode未流行之前，KOI8-R 是最为广泛使用的俄语编码，使用率甚至比ISO 8859-5还高</span></span><br><span class="line">    <span class="comment">#access_log  /var/log/nginx/host.access.log  main;</span></span><br><span class="line"></span><br><span class="line">  <span class="attribute">location</span> <span class="regexp">~ .*\.(gif|jpg|jpeg|png)$</span> &#123;  </span><br><span class="line">    <span class="attribute">expires</span> <span class="number">24h</span>;  </span><br><span class="line">      <span class="attribute">root</span> /yxtl/data/;<span class="comment">#鎸囧畾鍥剧墖瀛樻斁璺緞  </span></span><br><span class="line">      <span class="attribute">access_log</span> /usr/local/websrv/nginx-<span class="number">1</span>.<span class="number">9</span>.<span class="number">4</span>/logs/images.log;<span class="comment">#鏃ュ織瀛樻斁璺緞  </span></span><br><span class="line">      <span class="attribute">proxy_store</span> <span class="literal">on</span>;  </span><br><span class="line">      <span class="attribute">proxy_store_access</span> user:rw group:rw all:rw;  </span><br><span class="line">      <span class="attribute">proxy_temp_path</span>     /home/images/;<span class="comment">#鍥剧墖璁块棶璺緞  </span></span><br><span class="line">      <span class="attribute">proxy_redirect</span>     <span class="literal">off</span>;  </span><br><span class="line">      <span class="attribute">proxy_set_header</span>    Host <span class="number">127.0.0.1</span>;  </span><br><span class="line">      <span class="attribute">client_max_body_size</span>  <span class="number">10m</span>;  </span><br><span class="line">      <span class="attribute">client_body_buffer_size</span> <span class="number">1280k</span>;  </span><br><span class="line">      <span class="attribute">proxy_connect_timeout</span>  <span class="number">900</span>;  </span><br><span class="line">      <span class="attribute">proxy_send_timeout</span>   <span class="number">900</span>;  </span><br><span class="line">      <span class="attribute">proxy_read_timeout</span>   <span class="number">900</span>;  </span><br><span class="line">      <span class="attribute">proxy_buffer_size</span>    <span class="number">40k</span>;  </span><br><span class="line">      <span class="attribute">proxy_buffers</span>      <span class="number">40</span> <span class="number">320k</span>;  </span><br><span class="line">      <span class="attribute">proxy_busy_buffers_size</span> <span class="number">640k</span>;  </span><br><span class="line">      <span class="attribute">proxy_temp_file_write_size</span> <span class="number">640k</span>;  </span><br><span class="line">      <span class="attribute">if</span> ( !-e $request_filename)  </span><br><span class="line">      &#123;  </span><br><span class="line">         <span class="attribute">proxy_pass</span> http://elinktech.cn;<span class="comment">#榛樿80绔彛  </span></span><br><span class="line">      &#125;  </span><br><span class="line">  &#125;   </span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">        <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="attribute">location</span> /api &#123;</span><br><span class="line">          <span class="attribute">proxy_pass</span> http://elinktech.cn:9005;</span><br><span class="line">	  <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">	  <span class="attribute">proxy_set_header</span> Upgrade $http_upgrade;</span><br><span class="line">	  <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;	</span><br><span class="line">       &#125;</span><br><span class="line">    <span class="attribute">location</span> /daohang.html &#123;</span><br><span class="line">          <span class="attribute">proxy_pass</span> http://elinktech.cn/#/;</span><br><span class="line">          <span class="attribute">proxy_redirect</span> default;</span><br><span class="line">       &#125;</span><br><span class="line">     <span class="attribute">location</span> /shop.html &#123;</span><br><span class="line">          <span class="attribute">proxy_pass</span> http://elinktech.cn/#/shophome;</span><br><span class="line">          <span class="attribute">proxy_redirect</span> default;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#error_page  404              /404.html;</span></span><br><span class="line">    <span class="comment"># redirect server error pages to the static page /50x.html</span></span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">    <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">    <span class="comment">#    proxy_pass   http://127.0.0.1;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">    <span class="comment">#    root           html;</span></span><br><span class="line">    <span class="comment">#    fastcgi_pass   127.0.0.1:9000;</span></span><br><span class="line">    <span class="comment">#    fastcgi_index  index.php;</span></span><br><span class="line">    <span class="comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span></span><br><span class="line">    <span class="comment">#    include        fastcgi_params;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># deny access to .htaccess files, if Apache&#x27;s document root</span></span><br><span class="line">    <span class="comment"># concurs with nginx&#x27;s one</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#location ~ /\.ht &#123;</span></span><br><span class="line">    <span class="comment">#    deny  all;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="nginx-default-conf"><a href="#nginx-default-conf" class="headerlink" title="/nginx/default/conf"></a>/nginx/default/conf</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span>  [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> elinktech.cn  localhost;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#charset koi8-r;</span></span><br><span class="line">    <span class="comment">#access_log  /var/log/nginx/host.access.log  main;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#location ~ .*\.(gif|jpg|jpeg|png)$ &#123;  </span></span><br><span class="line">  <span class="comment">#  expires 24h;  </span></span><br><span class="line">  <span class="comment">#    root /yxtl/data/; </span></span><br><span class="line">  <span class="comment">#    access_log /usr/local/websrv/nginx-1.9.4/logs/images.log; </span></span><br><span class="line">  <span class="comment">#    proxy_store on;  </span></span><br><span class="line">  <span class="comment">#    proxy_store_access user:rw group:rw all:rw;  </span></span><br><span class="line">  <span class="comment">#    proxy_temp_path     /home/images/ </span></span><br><span class="line">  <span class="comment">#    proxy_redirect     off;  </span></span><br><span class="line">  <span class="comment">#    proxy_set_header    Host 127.0.0.1;  </span></span><br><span class="line">  <span class="comment">#    client_max_body_size  10m;  </span></span><br><span class="line">  <span class="comment">#    client_body_buffer_size 1280k;  </span></span><br><span class="line">  <span class="comment">#    proxy_connect_timeout  900;  </span></span><br><span class="line">  <span class="comment">#    proxy_send_timeout   900;  </span></span><br><span class="line">  <span class="comment">#    proxy_read_timeout   900;  </span></span><br><span class="line">  <span class="comment">#    proxy_buffer_size    40k;  </span></span><br><span class="line">  <span class="comment">#    proxy_buffers      40 320k;  </span></span><br><span class="line">  <span class="comment">#    proxy_busy_buffers_size 640k;  </span></span><br><span class="line">  <span class="comment">#    proxy_temp_file_write_size 640k;  </span></span><br><span class="line">  <span class="comment">#    if ( !-e $request_filename)  </span></span><br><span class="line">  <span class="comment">#    &#123;  </span></span><br><span class="line">  <span class="comment">#       proxy_pass http://elinktech.cn; </span></span><br><span class="line">  <span class="comment">#    &#125;  </span></span><br><span class="line">  <span class="comment">#&#125;   </span></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span>   /yxtl/data/shop;</span><br><span class="line">        <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">location</span> /api/yxtl/data/ &#123;</span><br><span class="line">        <span class="attribute">alias</span>   /yxtl/data/;</span><br><span class="line">        <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">       <span class="attribute">location</span> /api &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://elinktech.cn:9005;</span><br><span class="line">    	  <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">    	  <span class="attribute">proxy_set_header</span> Upgrade $http_upgrade;</span><br><span class="line">    	  <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;	</span><br><span class="line">     &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">location</span> /daohang.html &#123;</span><br><span class="line">          <span class="attribute">proxy_pass</span> http://elinktech.cn/#/;</span><br><span class="line">          <span class="attribute">proxy_redirect</span> default;</span><br><span class="line">       &#125;</span><br><span class="line">     <span class="attribute">location</span> /shop.html &#123;</span><br><span class="line">          <span class="attribute">proxy_pass</span> http://elinktech.cn/#/shophome;</span><br><span class="line">          <span class="attribute">proxy_redirect</span> default;</span><br><span class="line">       &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">location</span> /about.html &#123;</span><br><span class="line">          <span class="attribute">proxy_pass</span> http://elinktech.cn/#/auth/index;</span><br><span class="line">          <span class="attribute">proxy_redirect</span> default;</span><br><span class="line">       &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#error_page  404              /404.html;</span></span><br><span class="line">    <span class="comment"># redirect server error pages to the static page /50x.html</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">    <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">    <span class="comment">#    proxy_pass   http://127.0.0.1;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">    <span class="comment">#    root           html;</span></span><br><span class="line">    <span class="comment">#    fastcgi_pass   127.0.0.1:9000;</span></span><br><span class="line">    <span class="comment">#    fastcgi_index  index.php;</span></span><br><span class="line">    <span class="comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span></span><br><span class="line">    <span class="comment">#    include        fastcgi_params;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># deny access to .htaccess files, if Apache&#x27;s document root</span></span><br><span class="line">    <span class="comment"># concurs with nginx&#x27;s one</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#location ~ /\.ht &#123;</span></span><br><span class="line">    <span class="comment">#    deny  all;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="nginx-guanwang-conf"><a href="#nginx-guanwang-conf" class="headerlink" title="/nginx/guanwang.conf"></a>/nginx/guanwang.conf</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span>  [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  www.elinktek.com.cn elinktek.com.cn;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span> /yxtl/data/myindex/index;</span><br><span class="line">        <span class="attribute">index</span> index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">location</span> /mystatics/ &#123;</span><br><span class="line">   		<span class="attribute">alias</span>  /yxtl/data/myindex/mystatics/;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">    <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="root-nginx-conf-nginx-conf"><a href="#root-nginx-conf-nginx-conf" class="headerlink" title="/root/nginx/conf/nginx.conf"></a>/root/nginx/conf/nginx.conf</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">user</span>  nginx;</span><br><span class="line"><span class="attribute">worker_processes</span>  <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">error_log</span>  /var/log/nginx/error.log <span class="literal">warn</span>;</span><br><span class="line"><span class="attribute">pid</span>        /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">include</span>       /etc/nginx/mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">log_format</span>  main  <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">access_log</span>  /var/log/nginx/access.log  main;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">sendfile</span>        <span class="literal">on</span>;</span><br><span class="line">    <span class="comment">#tcp_nopush     on;</span></span><br><span class="line">    </span><br><span class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#gzip  on;</span></span><br><span class="line">    </span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="root-nginx-conf-default-conf"><a href="#root-nginx-conf-default-conf" class="headerlink" title="/root/nginx/conf/default.conf"></a>/root/nginx/conf/default.conf</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span>  [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  localhost;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#charset koi8-r;</span></span><br><span class="line">    <span class="comment">#access_log  /var/log/nginx/host.access.log  main;</span></span><br><span class="line">    </span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">        <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="attribute">location</span> /api &#123;</span><br><span class="line">          <span class="attribute">proxy_pass</span> http://elinktech.cn:9005;</span><br><span class="line">          <span class="attribute">proxy_redirect</span> default;</span><br><span class="line">       &#125;</span><br><span class="line">    <span class="attribute">location</span> /daohang.html &#123;</span><br><span class="line">          <span class="attribute">proxy_pass</span> http://39.101.193.57/#/;</span><br><span class="line">          <span class="attribute">proxy_redirect</span> default;</span><br><span class="line">       &#125;</span><br><span class="line">     <span class="attribute">location</span> /shop/index &#123;</span><br><span class="line">          <span class="attribute">proxy_pass</span> http://39.101.193.57/#/shophome;</span><br><span class="line">          <span class="attribute">proxy_redirect</span> default;</span><br><span class="line">       &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#error_page  404              /404.html;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># redirect server error pages to the static page /50x.html</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">    <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">    <span class="comment">#    proxy_pass   http://127.0.0.1;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">    <span class="comment">#    root           html;</span></span><br><span class="line">    <span class="comment">#    fastcgi_pass   127.0.0.1:9000;</span></span><br><span class="line">    <span class="comment">#    fastcgi_index  index.php;</span></span><br><span class="line">    <span class="comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span></span><br><span class="line">    <span class="comment">#    include        fastcgi_params;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># deny access to .htaccess files, if Apache&#x27;s document root</span></span><br><span class="line">    <span class="comment"># concurs with nginx&#x27;s one</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#location ~ /\.ht &#123;</span></span><br><span class="line">    <span class="comment">#    deny  all;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="etc-nginx-nginx-conf"><a href="#etc-nginx-nginx-conf" class="headerlink" title="/etc/nginx/nginx.conf"></a>/etc/nginx/nginx.conf</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For more information on configuration, see:</span></span><br><span class="line"><span class="comment">#   * Official English Documentation: http://nginx.org/en/docs/</span></span><br><span class="line"><span class="comment">#   * Official Russian Documentation: http://nginx.org/ru/docs/</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">user</span> root;</span><br><span class="line"><span class="attribute">worker_processes</span> auto;</span><br><span class="line"><span class="attribute">error_log</span> /var/log/nginx/error.log;</span><br><span class="line"><span class="attribute">pid</span> /run/nginx.pid;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span></span><br><span class="line"><span class="attribute">include</span> /usr/share/nginx/modules/<span class="regexp">*.conf</span>;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span> <span class="number">1024</span>;</span><br><span class="line">   	<span class="attribute">use</span> <span class="literal">epoll</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">log_format</span>  main  <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span>  /var/log/nginx/access.log  main;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">sendfile</span>            <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">tcp_nopush</span>          <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">tcp_nodelay</span>         <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">keepalive_timeout</span>   <span class="number">65</span>;</span><br><span class="line">    <span class="attribute">types_hash_max_size</span> <span class="number">2048</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">include</span>             /etc/nginx/mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>        application/octet-stream;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Load modular configuration files from the /etc/nginx/conf.d directory.</span></span><br><span class="line">    <span class="comment"># See http://nginx.org/en/docs/ngx_core_module.html#include</span></span><br><span class="line">    <span class="comment"># for more information.</span></span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line">    <span class="attribute">proxy_next_upstream</span> <span class="literal">error</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">upstream</span> tornado&#123;</span><br><span class="line">        <span class="attribute">server</span> <span class="number">127.0.0.1:8081</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">upstream</span> admin&#123;</span><br><span class="line">        <span class="attribute">server</span> <span class="number">127.0.0.1:8080</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span> default_server;</span><br><span class="line">        <span class="comment"># listen       [::]:80 default_server;</span></span><br><span class="line">        <span class="attribute">server_name</span>  www.elinktech.cn;</span><br><span class="line">        <span class="attribute">root</span>         /usr/share/nginx/html;</span><br><span class="line">    </span><br><span class="line">  <span class="comment"># Load configuration files for the default server block.</span></span><br><span class="line">  <span class="attribute">include</span> /etc/nginx/default.d/<span class="regexp">*.conf</span>;</span><br><span class="line">    <span class="attribute">location</span> /admin &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span>  http://admin ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">location</span> /static/admin &#123;</span><br><span class="line">        <span class="attribute">alias</span> /root/project_helmet/tornado_admin/mystatics;</span><br><span class="line">                <span class="attribute">if</span> ($query_string) &#123;</span><br><span class="line">                    <span class="attribute">expires</span> max;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="attribute">location</span> /static &#123;</span><br><span class="line">        <span class="attribute">alias</span> /root/project_helmet/weixin_0.<span class="number">1</span>/mystatics;</span><br><span class="line">                <span class="attribute">if</span> ($query_string) &#123;</span><br><span class="line">                    <span class="attribute">expires</span> max;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span>  http://tornado ;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="attribute">error_page</span> <span class="number">404</span> /<span class="number">404</span>.html;</span><br><span class="line">        <span class="attribute">location</span> = /<span class="number">404</span>.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="attribute">error_page</span> <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span> /50x.html;</span><br><span class="line">        <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Settings for a TLS enabled server.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#    server &#123;</span></span><br><span class="line"><span class="comment">#        listen       443 ssl http2 default_server;</span></span><br><span class="line"><span class="comment">#        listen       [::]:443 ssl http2 default_server;</span></span><br><span class="line"><span class="comment">#        server_name  _;</span></span><br><span class="line"><span class="comment">#        root         /usr/share/nginx/html;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#        ssl_certificate &quot;/etc/pki/nginx/server.crt&quot;;</span></span><br><span class="line"><span class="comment">#        ssl_certificate_key &quot;/etc/pki/nginx/private/server.key&quot;;</span></span><br><span class="line"><span class="comment">#        ssl_session_cache shared:SSL:1m;</span></span><br><span class="line"><span class="comment">#        ssl_session_timeout  10m;</span></span><br><span class="line"><span class="comment">#        ssl_ciphers HIGH:!aNULL:!MD5;</span></span><br><span class="line"><span class="comment">#        ssl_prefer_server_ciphers on;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#        # Load configuration files for the default server block.</span></span><br><span class="line"><span class="comment">#        include /etc/nginx/default.d/*.conf;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#        location / &#123;</span></span><br><span class="line"><span class="comment">#        &#125;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#        error_page 404 /404.html;</span></span><br><span class="line"><span class="comment">#        location = /404.html &#123;</span></span><br><span class="line"><span class="comment">#        &#125;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#        error_page 500 502 503 504 /50x.html;</span></span><br><span class="line"><span class="comment">#        location = /50x.html &#123;</span></span><br><span class="line"><span class="comment">#        &#125;</span></span><br><span class="line"><span class="comment">#    &#125;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="etc-nginx-nginx-conf-default"><a href="#etc-nginx-nginx-conf-default" class="headerlink" title="/etc/nginx/nginx.conf.default"></a>/etc/nginx/nginx.conf.default</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#user  nobody;</span></span><br><span class="line"><span class="attribute">worker_processes</span>  <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#error_log  logs/error.log;</span></span><br><span class="line"><span class="comment">#error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="comment">#error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#pid        logs/nginx.pid;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">include</span>       mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><br><span class="line">    <span class="comment">#                  &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><br><span class="line">    <span class="comment">#                  &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#access_log  logs/access.log  main;</span></span><br><span class="line">    </span><br><span class="line">    <span class="attribute">sendfile</span>        <span class="literal">on</span>;</span><br><span class="line">    <span class="comment">#tcp_nopush     on;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#keepalive_timeout  0;</span></span><br><span class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#gzip  on;</span></span><br><span class="line">    </span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  localhost;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">#charset koi8-r;</span></span><br><span class="line">    </span><br><span class="line">        <span class="comment">#access_log  logs/host.access.log  main;</span></span><br><span class="line">    </span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="attribute">root</span>   html;</span><br><span class="line">            <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">#error_page  404              /404.html;</span></span><br><span class="line">    </span><br><span class="line">        <span class="comment"># redirect server error pages to the static page /50x.html</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">        <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">            <span class="attribute">root</span>   html;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">        <span class="comment">#    proxy_pass   http://127.0.0.1;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line">    </span><br><span class="line">        <span class="comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">        <span class="comment">#    root           html;</span></span><br><span class="line">        <span class="comment">#    fastcgi_pass   127.0.0.1:9000;</span></span><br><span class="line">        <span class="comment">#    fastcgi_index  index.php;</span></span><br><span class="line">        <span class="comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span></span><br><span class="line">        <span class="comment">#    include        fastcgi_params;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line">    </span><br><span class="line">        <span class="comment"># deny access to .htaccess files, if Apache&#x27;s document root</span></span><br><span class="line">        <span class="comment"># concurs with nginx&#x27;s one</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment">#location ~ /\.ht &#123;</span></span><br><span class="line">        <span class="comment">#    deny  all;</span></span><br><span class="line">        <span class="comment">#&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># another virtual host using mix of IP-, name-, and port-based configuration</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#server &#123;</span></span><br><span class="line">    <span class="comment">#    listen       8000;</span></span><br><span class="line">    <span class="comment">#    listen       somename:8080;</span></span><br><span class="line">    <span class="comment">#    server_name  somename  alias  another.alias;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#    location / &#123;</span></span><br><span class="line">    <span class="comment">#        root   html;</span></span><br><span class="line">    <span class="comment">#        index  index.html index.htm;</span></span><br><span class="line">    <span class="comment">#    &#125;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># HTTPS server</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#server &#123;</span></span><br><span class="line">    <span class="comment">#    listen       443 ssl;</span></span><br><span class="line">    <span class="comment">#    server_name  localhost;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#    ssl_certificate      cert.pem;</span></span><br><span class="line">    <span class="comment">#    ssl_certificate_key  cert.key;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#    ssl_session_cache    shared:SSL:1m;</span></span><br><span class="line">    <span class="comment">#    ssl_session_timeout  5m;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#    ssl_ciphers  HIGH:!aNULL:!MD5;</span></span><br><span class="line">    <span class="comment">#    ssl_prefer_server_ciphers  on;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#    location / &#123;</span></span><br><span class="line">    <span class="comment">#        root   html;</span></span><br><span class="line">    <span class="comment">#        index  index.html index.htm;</span></span><br><span class="line">    <span class="comment">#    &#125;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="nginx部署静态网站"><a href="#nginx部署静态网站" class="headerlink" title="nginx部署静态网站"></a>nginx部署静态网站</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span>  [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  www.elinktek.com.cn;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#charset koi8-r;</span></span><br><span class="line">    <span class="comment">#access_log  /var/log/nginx/host.access.log  main;</span></span><br><span class="line">    </span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/mystatics;</span><br><span class="line">        <span class="attribute">index</span>  index.html; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">    <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<h2 id="nginx在一个服务器上部署多个网站"><a href="#nginx在一个服务器上部署多个网站" class="headerlink" title="nginx在一个服务器上部署多个网站"></a>nginx在一个服务器上部署多个网站</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"><span class="attribute">listen</span> <span class="number">80</span> default_server;<span class="comment">#只能配一个默认监听</span></span><br><span class="line"><span class="attribute">servername</span> aa.com;</span><br><span class="line"></span><br><span class="line"><span class="attribute">server_name_in_redirect</span> <span class="literal">off</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> Host $host:$server_port;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Real-IP $remote_addr;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> REMOTE-HOST $remote_addr;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line"></span><br><span class="line"><span class="attribute">access_log</span>  /home/wwwlogs/access_default.log;</span><br><span class="line"></span><br><span class="line"><span class="attribute">location</span> / &#123;            </span><br><span class="line">    <span class="attribute">proxy_pass</span> http://localhost:8080;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"><span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line"><span class="attribute">server_name</span> bb.com;</span><br><span class="line"></span><br><span class="line"><span class="attribute">server_name_in_redirect</span> <span class="literal">off</span>;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> Host $host:$server_port;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Real-IP $remote_addr;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> REMOTE-HOST $remote_addr;</span><br><span class="line">    <span class="attribute">proxy_set_header</span> X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line"></span><br><span class="line"><span class="attribute">location</span> / &#123;            </span><br><span class="line">    <span class="attribute">proxy_pass</span> http://localhost:8008;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>




<p>另：</p>
<p>Nginx 是一个高性能的 HTTP 和反向代理服务器，特点是占用内存少，并发能力强，事实上 Nginx 的并发能力确实在同类型的网页服务器中表现较好。Nginx 专为性能优化而开发，性能是其最重要的要求，十分注重效率，有报告 Nginx 能支持高达 50000 个并发连接数。</p>
<p><strong>01</strong></p>
<p><strong>Nginx 知识网结构图</strong></p>
<p>Nginx 的知识网结构图如下：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070f2NxYCRUkenCHGZCibFJicDiaCv9BcXgL4kRDibhCteU6zwOCEOvH5mO3Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>02</strong></p>
<p><strong>反向代理</strong></p>
<p><strong>正向代理：</strong>局域网中的电脑用户想要直接访问网络是不可行的，只能通过代理服务器来访问，这种代理服务就被称为正向代理。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070PPlwbISQSBzhf1sAeeqNwUHQagLPtWwvHjA00mWluTYThibZnqnnia4g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>反向代理：</strong>客户端无法感知代理，因为客户端访问网络不需要配置，只要把请求发送到反向代理服务器，由反向代理服务器去选择目标服务器获取数据，然后再返回到客户端。</p>
<p>此时反向代理服务器和目标服务器对外就是一个服务器，暴露的是代理服务器地址，隐藏了真实服务器 IP 地址。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070CW3mYFhBcrgyGPrAXajVNPYB77RxkwVMjjY6HzEMIGCRaQXkWnbMxg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>03</strong></p>
<p><strong>负载均衡</strong></p>
<p>客户端发送多个请求到服务器，服务器处理请求，有一些可能要与数据库进行交互，服务器处理完毕之后，再将结果返回给客户端。</p>
<p>普通请求和响应过程如下图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070ElynCNRq7Pwz1v2fjupnaIib9ury1RpHVfqicNeYsymMB1Lsh6yZLjHA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>但是随着信息数量增长，访问量和数据量飞速增长，普通架构无法满足现在的需求。</p>
<p>我们首先想到的是升级服务器配置，可以由于摩尔定律的日益失效，单纯从硬件提升性能已经逐渐不可取了，怎么解决这种需求呢？</p>
<p>我们可以增加服务器的数量，构建集群，将请求分发到各个服务器上，将原来请求集中到单个服务器的情况改为请求分发到多个服务器，也就是我们说的负载均衡。</p>
<p>图解负载均衡：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070mYLYl3fEeXcNmh01c5Ue9cf72y8JVHPujiabqzn3PRG0icicrKg5jvibiag/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>假设有 15 个请求发送到代理服务器，那么由代理服务器根据服务器数量，平均分配，每个服务器处理 5 个请求，这个过程就叫做负载均衡。</p>
<p>**04<br>**</p>
<p><strong>动静分离</strong></p>
<p>为了加快网站的解析速度，可以把动态页面和静态页面交给不同的服务器来解析，加快解析的速度，降低由单个服务器的压力。</p>
<p>动静分离之前的状态：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070FwK0Z5yaibzTV33iccaV5HuMQaLr1oibDbXJyRnphUdrNePibbibNLLJORw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>动静分离之后：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u0701NlibJ7Qibnr5AoewJdI8nMEhLO3tqEUqQV9X60HvqXcQh5g7yib2kYlg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>**06<br>**</p>
<p><strong>Nginx安装</strong></p>
<p>Nginx 如何在 Linux 安装</p>
<p>参考链接：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;blog.csdn.net&#x2F;yujing1314&#x2F;article&#x2F;details&#x2F;97267369</span><br></pre></td></tr></table></figure>

<p>Nginx 常用命令</p>
<p>查看版本：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;nginx -v</span><br></pre></td></tr></table></figure>



<p>启动：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;nginx</span><br></pre></td></tr></table></figure>



<p>关闭（有两种方式，推荐使用 ./nginx -s quit）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;nginx -s stop</span><br><span class="line">.&#x2F;nginx -s quit</span><br></pre></td></tr></table></figure>



<p>重新加载 Nginx 配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;nginx -s reload</span><br></pre></td></tr></table></figure>



<p>Nginx 的配置文件</p>
<p>配置文件分三部分组成：</p>
<h5 id="①全局块"><a href="#①全局块" class="headerlink" title="①全局块"></a><strong>①全局块</strong></h5><p>从配置文件开始到 events 块之间，主要是设置一些影响 Nginx 服务器整体运行的配置指令。</p>
<p>并发处理服务的配置，值越大，可以支持的并发处理量越多，但是会受到硬件、软件等设备的制约。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070ceEurAwxEr7fReXN8soaFFM0UVYoEN5nxmSl1Nmh2F5Sx07lCuFxrA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h5 id="②events-块"><a href="#②events-块" class="headerlink" title="②events 块"></a><strong>②events 块</strong></h5><p>影响 Nginx 服务器与用户的网络连接，常用的设置包括是否开启对多 workprocess 下的网络连接进行序列化，是否允许同时接收多个网络连接等等。</p>
<p>支持的最大连接数：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070ZSQBARRvI1m3ictwCkCIc7FT5lpxZXED9Oz7EpAUI3viaQEtuZuOercA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h5 id="③HTTP-块"><a href="#③HTTP-块" class="headerlink" title="③HTTP 块"></a><strong>③HTTP 块</strong></h5><p>诸如反向代理和负载均衡都在此配置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location[ &#x3D; | ~ | ~* | ^~] url&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>location 指令说明，该语法用来匹配 url，语法如上：</p>
<ul>
<li><strong>=：</strong>用于不含正则表达式的 url 前，要求字符串与 url 严格匹配，匹配成功就停止向下搜索并处理请求。</li>
<li><strong>~：</strong>用于表示 url 包含正则表达式，并且区分大小写。</li>
<li><strong>~*：</strong>用于表示 url 包含正则表达式，并且不区分大小写。</li>
<li><strong>^~：</strong>用于不含正则表达式的 url 前，要求 Nginx 服务器找到表示 url 和字符串匹配度最高的 location 后，立即使用此 location 处理请求，而不再匹配。</li>
<li>如果有 url 包含正则表达式，不需要有 ~ 开头标识。</li>
</ul>
<p><strong>07</strong></p>
<p><strong>反向代理实战</strong></p>
<h3 id="①配置反向代理"><a href="#①配置反向代理" class="headerlink" title="①配置反向代理"></a><strong>①配置反向代理</strong></h3><p>目的：在浏览器地址栏输入地址 <a target="_blank" rel="noopener" href="http://www.123.com/">www.123.com</a> 跳转 Linux 系统 Tomcat 主页面。</p>
<p><strong>②具体实现</strong></p>
<p>先配置 Tomcat，因为比较简单，此处不再赘叙，并在 Windows 访问：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070H8YfyRgdjbvTxU07bdqckAczlpC9Edc71DDkuwd2TW1he4PD3qhiaNA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>具体流程如下图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070k1odBlOv9xC0smZE7f9KMaJ4askgGh8Sic5bPKNg0t7fIC89mcxFibfg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>修改之前：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070PpzocXYnpJebzLmIDLKHmGOfr5AVCmquota4ylIuDEu6H19z37tCbA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>配置如下：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070yLGd7yicBY5tYMlAlgA6iag3rH7c7YR6ZXhQforXDAayQUvrr2amUV9w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>再次访问：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070Y5UQ5Cf1JrrMy2t3wr4p8NQqHFLzeRpWqicsfpRk0frVnATteHNZTzQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>③反向代理 2</strong></p>
<p>目标：</p>
<ul>
<li>访问 <a target="_blank" rel="noopener" href="http://192.168.25.132:9001/edu/">http://192.168.25.132:9001/edu/</a> 直接跳转到 192.168.25.132:8080</li>
<li>访问 <a target="_blank" rel="noopener" href="http://192.168.25.132:9001/vod/">http://192.168.25.132:9001/vod/</a> 直接跳转到 192.168.25.132:8081</li>
</ul>
<p><strong>准备：</strong>配置两个 Tomcat，端口分别为 8080 和 8081，都可以访问，端口修改配置文件即可。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u0706H62Sg72IoxrTBEuUu8aFsNiarB0LiaGIe6pzK1oOUfKbyunkHdcwwqg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070I2fsgic1O8TY0C0hJGxM7X0VnYxzXk14ehDrBuW1Xzib8kskB7jPzcVw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>新建文件内容分别添加 8080！！！和 8081！！！</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070g0gdPTzx0m4vS6WyBtKBicUDTQHG0j7qTEY424lmib7hX4EXPriaHZ8lg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070BMfElQMuXK2zRvPbYaTu5scZzQDcU3ibE1QIV3NzCecULNibefre4WiaQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>响应如下图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070kBsRZwMwG8XwkplKFFtbqZxF08QXFHYSXwsIkl8gt4WYQmA1ib32WPg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070bGAacKJzwPq2Dtsb3ufOOXhuZbRu084EptVAJg5QJXUknTNZic00rTw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>具体配置如下：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070OHYLoHb3ewhcQZUE9VQklNYia7vKbgBYfpoMuvTHy8XJHic9MiaOqDyVA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>重新加载 Nginx：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;nginx -s reload</span><br></pre></td></tr></table></figure>





<p>访问：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070kBdTVdKNOSdE3MTicS4cSulTIWSibueLrVFMOkEIEEgdSyaacRc5ibLLg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070kBdTVdKNOSdE3MTicS4cSulTIWSibueLrVFMOkEIEEgdSyaacRc5ibLLg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>实现了同一个端口代理，通过 edu 和 vod 路径的切换显示不同的页面。</p>
<p>**<br>**</p>
<p><strong>反向代理小结</strong></p>
<p><strong>第一个例子：</strong>浏览器访问 <a target="_blank" rel="noopener" href="http://www.123.com,由/">www.123.com，由</a> host 文件解析出服务器 ip 地址<br>192.168.25.132 <a target="_blank" rel="noopener" href="http://www.123.com./">www.123.com。</a></p>
<p>然后默认访问 80 端口，而通过 Nginx 监听 80 端口代理到本地的 8080 端口上，从而实现了访问 <a target="_blank" rel="noopener" href="http://www.123.com,最终转发到/">www.123.com，最终转发到</a> tomcat 8080 上去。</p>
<p>第二个例子：</p>
<ul>
<li>访问 <a target="_blank" rel="noopener" href="http://192.168.25.132:9001/edu/">http://192.168.25.132:9001/edu/</a> 直接跳转到 192.168.25.132:8080</li>
<li>访问 <a target="_blank" rel="noopener" href="http://192.168.25.132:9001/vod/">http://192.168.25.132:9001/vod/</a> 直接跳转到 192.168.25.132:8081</li>
</ul>
<p>实际上就是通过 Nginx 监听 9001 端口，然后通过正则表达式选择转发到 8080 还是 8081 的 Tomcat 上去。</p>
<p>**08<br>**</p>
<p><strong>负载均衡实战</strong></p>
<p>①修改 nginx.conf，如下图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u0706HibdMeX4ZGoOloiaytW9cbmZUevic7zhCjhaCrIRuaIzVdricUZd5oLsQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070tZR9ow4AbibMy4IS5ibBydBAwvhexiatORjMMoMfiac4F7k4Hyru0OeKHA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>②重启 Nginx：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;nginx -s reload</span><br></pre></td></tr></table></figure>



<p>③在 8081 的 Tomcat 的 webapps 文件夹下新建 edu 文件夹和 a.html 文件，填写内容为 8081！！！！</p>
<p>④在地址栏回车，就会分发到不同的 Tomcat 服务器上：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070AE4cFBZV8poPm4yMX6OLqODKktFOGPwrfNRPicqlMicEzUO6o8owE1JA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u0704MwPKwdyKKByy7QmFXjC2wjnHWDRBsaKv9tODDtCyFbWGnRIX7Zdww/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>负载均衡方式如下：</p>
<ul>
<li>轮询（默认）。</li>
<li>weight，代表权，权越高优先级越高。</li>
<li>fair，按后端服务器的响应时间来分配请求，相应时间短的优先分配。</li>
<li>ip_hash，每个请求按照访问 ip 的 hash 结果分配，这样每一个访客固定的访问一个后端服务器，可以解决 Session 的问题。</li>
</ul>
<h2 id=""><a href="#" class="headerlink" title=""></a><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u0701YP460onMRSUz1EViaG60zFc3eibkJVibsOpD4sI4e2W4AOQ5qeTSW9eg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></h2><h2 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u0703OL89ibL8iag83gRicVLLicv4j7CVZE57FickVCHF6gdJvglic38fYP1G9AQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></h2><h2 id="-2"><a href="#-2" class="headerlink" title=""></a><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070tLvpqiaUJST9yzwS78snQnANPBwkcNfmAYTict12ry4ibfjnvE8k1AtTw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></h2><h2 id="09"><a href="#09" class="headerlink" title="09"></a><strong>09</strong></h2><h2 id="动静分离实战"><a href="#动静分离实战" class="headerlink" title="动静分离实战"></a><strong>动静分离实战</strong></h2><p>什么是动静分离？把动态请求和静态请求分开，不是讲动态页面和静态页面物理分离，可以理解为 Nginx 处理静态页面，Tomcat 处理动态页面。</p>
<p>动静分离大致分为两种：</p>
<ul>
<li>纯粹将静态文件独立成单独域名放在独立的服务器上，也是目前主流方案。</li>
<li>将动态跟静态文件混合在一起发布，通过 Nginx 分开。</li>
</ul>
<h4 id="-3"><a href="#-3" class="headerlink" title=""></a></h4><h4 id="动静分离图析："><a href="#动静分离图析：" class="headerlink" title="动静分离图析："></a>动静分离图析：</h4><p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070LdXqsEJibWwcVz4zFdQamlpIp5FZlxh4AU3lxibTqSFyo2vr9VfkUJYg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>实战准备，准备静态文件：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070bO5Fp4GaokbPWMUQVN5qVTEezeTnmy9t6qCibIOeOvfGQDj6HofJ2rA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070V5pH79DnRABQFtmCTaibBwoNcRd2iaMeNle8FqLNrn2xZ75I2uO5WEOg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>配置 Nginx，如下图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070iaVlGlNUe0fjsAxYU2v21rhaZZ0JuPOXfsVMibC2AESt5blIPkoRL1gA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>Nginx 高可用</p>
<p>如果 Nginx 出现问题：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070r6rib3ltNLZicw5iceYtRvz7sgY8yZQmMXldgpG3Q3ZOWZ5o0rbkibib9qA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>解决办法：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070AbQ0KH4Wu5y5pRwUnUbOXibR3UQoldXQ0lqMibXUhTvNGSQ6rTicIfxfA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>前期准备：</p>
<ul>
<li><strong>两台 Nginx 服务器</strong></li>
<li><strong>安装 Keepalived</strong></li>
<li><strong>虚拟 ip</strong></li>
</ul>
<h2 id="安装-Keepalived："><a href="#安装-Keepalived：" class="headerlink" title="安装 Keepalived："></a>安装 Keepalived：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@192 usr]# yum install keepalived -y</span><br><span class="line">[root@192 usr]# rpm -q -a keepalived</span><br><span class="line">keepalived-1.3.5-16.el7.x86_64</span><br></pre></td></tr></table></figure>



<p>修改配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@192 keepalived]# cd &#x2F;etc&#x2F;keepalived</span><br><span class="line">[root@192 keepalived]# vi keepalived.conf</span><br></pre></td></tr></table></figure>



<p>分别将如下配置文件复制粘贴，覆盖掉 keepalived.conf，虚拟 ip 为 192.168.25.50。</p>
<p>对应主机 ip 需要修改的是：</p>
<ul>
<li>smtp_server 192.168.25.147（主）smtp_server 192.168.25.147（备）</li>
<li>state MASTER（主） state BACKUP（备）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">global_defs &#123;</span><br><span class="line">   notification_email &#123;</span><br><span class="line">     acassen@firewall.loc</span><br><span class="line">     failover@firewall.loc</span><br><span class="line">     sysadmin@firewall.loc</span><br><span class="line">   &#125;</span><br><span class="line">   notification_email_from Alexandre.Cassen@firewall.loc</span><br><span class="line">   smtp_server 192.168.25.147</span><br><span class="line">   smtp_connect_timeout 30</span><br><span class="line">   router_id LVS_DEVEL # 访问的主机地址</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vrrp_script chk_nginx &#123;</span><br><span class="line">  script &quot;&#x2F;usr&#x2F;local&#x2F;src&#x2F;nginx_check.sh&quot;  # 检测文件的地址</span><br><span class="line">  interval 2   # 检测脚本执行的间隔</span><br><span class="line">  weight 2   # 权重</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    state BACKUP    # 主机MASTER、备机BACKUP    </span><br><span class="line">    interface ens33   # 网卡</span><br><span class="line">    virtual_router_id 51 # 同一组需一致</span><br><span class="line">    priority 90  # 访问优先级，主机值较大，备机较小</span><br><span class="line">    advert_int 1</span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass 1111</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        192.168.25.50  # 虚拟ip</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>启动代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@192 sbin]# systemctl start keepalived.service</span><br></pre></td></tr></table></figure>



<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070rxeYx90zzrcUfHmnJwRelYdnJr1sXrBScUPSD8yIib6D4nQkxKdqweQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>访问虚拟 ip 成功：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070JJMVSYVJnVhySneVp7C1Y7jMmcMoPwbVjZzGVe1iczcqJzpDrSRLVoA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>关闭主机 147 的 Nginx 和 Keepalived，发现仍然可以访问。</p>
<p>原理解析</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u0706jB3SfG0RrqdmaU8HE6e5A4qTynwactlhBMmM0wqNicGGws98kCdiaqQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>如下图，就是启动了一个 master，一个 worker，master 是管理员，worker是具体工作的进程。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070muQU3rnx4KFwDOmx2ovwgFbmpu6o6ey0kZKWuWgjhSwDhohkpVNeCA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>worker 如何工作？如下图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQrRD4Mcr0icGmGAj3uB9u070giaYRsmv7NU97QWqHra8HENYBGZib3DyEnVg0Qbky5Xzk1D9Tu87DFqA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>worker 数应该和 CPU 数相等；一个 master 多个 worker 可以使用热部署，同时 worker 是独立的，一个挂了不会影响其他的。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/30/6.1.nginx%E9%85%8D%E7%BD%AE/" data-id="ckqk8k3hs006v2wwd2k6nbtt5" data-title="nginx配置" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ngnix/" rel="tag">ngnix</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-4.2.java基础概念" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/29/4.2.java%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" class="article-date">
  <time class="dt-published" datetime="2021-03-29T06:56:50.000Z" itemprop="datePublished">2021-03-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/29/4.2.java%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/">java基础知识</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>java的一些基本概念</p>
<h1 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h1><p>关键字：是被java语言赋予特定含义的单词</p>
<p>特点：组成关键字的字母全部小写</p>
<p>goto和const作为保留字存在，目前并不使用（jdk1.7中）</p>
<p>保留字：在jdk新版中可能提升为关键字</p>
<p>关键字</p>
<p>用于定义数据类型的关键字：class    interface[接口]    byte short  int  long  float  double  char  boolean  void</p>
<p>用于定义数据类型值的关键字：true  false  null</p>
<p>用于定义流程控制的关键字：if  else switch  case  default  while  do  for  break  continue  return</p>
<p>用于定义访问权限修饰符的关键字：public protected private</p>
<p>用于定义类，函数，变量修饰符的关键字：abstract  final  static synchronized[同步]</p>
<p>用于定义类与类之间关系的关键字：extends  implements</p>
<p>用于定义建立实例与引用实例，判断实例的关键字：new  this super instanceof [实例]</p>
<p>用于异常处理的关键字：try  catch  finally throw  throws </p>
<p>用于包的关键字：packge  import  </p>
<p>其他修饰符关键字：native[本地]  strictfp[精确浮点]  transient[短暂的,用于无需序列化]  volatile[易变的，保证单次读/写的原子性]  assert[宣称]</p>
<h1 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h1><p>标识符就是给类，接口，方法，变量等起名字时使用的字符序列</p>
<p>组成规则：英文字母，数字字符，美元符$和下划线_（只有这几种，不能出现#￥之类的）</p>
<p>Tips：不能以数字开头，不能是java的关键字，严格区分大小写，不能出现空格。</p>
<p>常见命名规则：见名知意</p>
<p>包：其实就是文件夹，用于把相同的类名进行区分（全部小写）</p>
<p>单级：xxx</p>
<p>多级：cn.xxx</p>
<p>类或者接口：</p>
<p> 一个单词：单词的首字母必须大写</p>
<p> 多个单词：每个单词的首字母必须大写[驼峰原则]</p>
<p>方法或者变量：</p>
<p> 一个单词：单词的首字母必须小写</p>
<p> 多个单词：从第二个单词开始，每个单词的首字母大写[驼峰原则]</p>
<p>常量：</p>
<p> 一个单词：全部大写</p>
<p> 多个单词：每个字母都大写，用_隔开</p>
<h1 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h1><p>在程序执行的过程中其值不可以发生改变</p>
<p>分类：</p>
<p>1.字面值常量</p>
<p>字符串常量：用双引号括起来的内容</p>
<p>整数常量：所有整数</p>
<p>小数常量：所有小数</p>
<p>字符常量：用单引号括起来的单个字符</p>
<p>布尔常量：较为特有，只有false和true</p>
<p>空常量：null</p>
<p>2.自定义常量（final int x=10;）</p>
<p>整数常量提供了4种表现形式：</p>
<p>​    二进制（binary）：由0，1组成，以0b开头，或者结尾+B</p>
<p>​    八进制(octal)：由0，1，…7组成，以0开头，或者结尾+O</p>
<p>​    十进制(decimal)：由0，1，…9组成，默认是十进制,或者结尾+D</p>
<p>​    十六进制(hex)：由0，1，…，9，a，b，c，d，e，f（大小写均可），以0x开头,或者结尾+H</p>
<p>1byte=8bit     1个字节=8位</p>
<p>1k=1024byte   </p>
<p>1m=1024k</p>
<p>1g=1024m</p>
<p>1t=1024g</p>
<p>进制越大，表现形式越短。</p>
<p>二、八、十、十六进制间转换：</p>
<p>​    二进制转换为八进制：把二进制的数据，从右开始，每三位一组合，最左边不够的时候补0。然后分别计算出对应的十进制数值，最后把每个十进制的数据组合起来就是一个八进制数据。</p>
<p>​    二进制转换为十六进制：十六进制就是每4位组合。</p>
<p>​    二进制转换为十进制：8421码。8421码是中国大陆的叫法，8421码是BCD码中最常用的一种。在这种编码方式中每一位二值代码的1都是代表一个固定数值，把每一位的1代表的十进制数加起来，得到的结果就是它所代表的十进制数码。</p>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><p>在程序执行的过程中，在一定范围内其值可以发生改变的量。本质上来说，变量其实是内存中的一小块区域，使用变量名来访问这块区域。因此，每个变量使用前必须要先申请（声明），然后必须进行赋值（填充内容）才能使用。</p>
<p>变量可以用来不断的存放<strong>同一类型</strong>的常量，并且可以重复使用。</p>
<p>定义格式(固定的)：</p>
<p>​    数据类型 变量名=初始化值；</p>
<p>Java是强类型语言，对于每一种数据类型都定义了明确的具体数据类型，由内存总分配了不同大小的内存空间。</p>
<p>作用域：变量定义在那一级大括号中，哪个大括号的范围就是这个变量的作用域。相同的作用域中不能定义两个同名变量。</p>
<p>没有初始化值不能直接使用，只要在使用前给值即可，不一定非要在定义的时候给值，推荐在定义的时候给值。</p>
<p>eg：  数据类型 变量名；</p>
<p>​          变量名=初始化值；</p>
<p>一行建议只定义一个变量，可以定义多个，但是不建议。</p>
<p>数据类型：</p>
<p>1.基本数据类型：4类8种</p>
<ul>
<li><p>数值型：</p>
<p>⑴整数型</p>
<p>byte  1字节      -2^7^<del>2^7^           -128</del>127</p>
<p>short  2字节   -2^15^<del>2^15^-1     -32768</del>32767</p>
<p>int  4字节        -2^31^<del>2^31^-1     -2,147,483,648</del>2,147,483,647     默认为int</p>
<p>long  8字节     -2^63^~2^63^-1    19位数      长的整数型变量后缀使用L或l，建议使用L。因为l会和1分不清</p>
<p>⑵浮点类型</p>
<p>float  4字节   -3.403 E^38^<del>3.403E^38^ （2^-127^</del>2^128^）   单精度浮点数用F或f，建议使用F</p>
<p>double  8字节   -1.798E^308^<del>1.798E^308^  （2^-1023^</del>2^1024^） 默认为 double</p>
</li>
<li><p>字符型：char  2字节  （可以存储中文汉字）</p>
</li>
<li><p>布尔型：boolean  1字节</p>
</li>
</ul>
<p>2.引用数据类型：</p>
<ul>
<li><p>类：class</p>
</li>
<li><p>接口：interface</p>
</li>
<li><p>数组：[]</p>
</li>
</ul>
<p>一般来说，我们在运算的时候，要求运算的数据类型必须一致。boolean类型不能转换为其他数据类型</p>
<p>默认转换，隐式转换（从小到大的转换）：</p>
<p>byte,short,char→int→long→float→double 出现后面的数据类型，结果必须为最后面的数据类型</p>
<p>byte,short,char相互之间不转换，他们一旦参与运算首先要转换成int数据类型</p>
<p>long是8字节，float是4字节，可以转换是因为它们的底层的存储结构不同；float表示的数据范围比long 的范围要大。</p>
<p>强制转换，显示转换（从大到小的转换）：</p>
<p>格式：目标数据类型 变量=（目标数据类型） （被转换的数据）；</p>
<p>不要随意使用强制转换，因为它隐含了精度损失的问题。其结果是数据的补码在计算机内被截断后的值。</p>
<p>byte的范围是-128~127，当（byte）128，其实输出的是-128。（byte）129输出的是-127</p>
<p>128：10000000</p>
<p>-128：10000000（这里的1既是符号位，也是数值位）</p>
<p>变量相加，会首先看类型问题，最终把结果赋值的时候也会考虑类型问题。</p>
<p>常量相加，首先做加法，然后看结果是否在赋值的数据类型范围内，如果不是，才会报错。</p>
<p>eg：</p>
<p>1.一个字符，结果就是一个字符。</p>
<p>2.一个字符+一个整数：参考ASCII表，结果为int整数型</p>
<p>   ‘0’ 48                                     ‘A’ 65                                 ‘a’ 97</p>
<p><img src="C:\Users\swx\AppData\Roaming\Typora\typora-user-images\image-20210323162019525.png" alt="image-20210323162019525"></p>
<p>3.字符串+一个字符+整数：第一个+是连接符。字符串+整数</p>
<p>4.一个字符+整数+字符串：第一个+是加号，ASCII表运算成整数类型。整数+字符串</p>
<p>规则：第一个东西和第二个东西先进行运算并输出，在计算第三个，第四个。</p>
<p>局部变量和成员变量的区别：</p>
<p>1.在类中的位置不同：</p>
<p>局部变量：在方法定义中或者方法声明上。</p>
<p>成员变量:在类中方法外。</p>
<p>2.在内存中的位置不同：</p>
<p>局部变量：在栈内存</p>
<p>成员变量：在堆内存</p>
<p>3.生命周期不同：</p>
<p>局部变量：随着方法的调用而存在，随着方法的调用完毕而消失</p>
<p>成员变量：随着对象的创建而存在，随着对象的消失而消失</p>
<p>4.初始化值不同：</p>
<p>局部变量：没有默认初始化值，必须定义，赋值然后才能使用</p>
<p>成员变量：有默认的初始化值</p>
<p>注意事项：局部变量名称可以和成员变量名称一样，在方法中使用的时候，采用的是就近原则。</p>
<h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><p>运算：对常量和变量进行操作的过程称为运算</p>
<p>运算符:对常量和变量进行操作的符号称为运算符</p>
<p>操作数：参与运算的数据称为操作数</p>
<p>表达式：用运算符把常量或变量连接起来符合java语法的句子可以称为表达式<br>1.算术运算符：   +，-，*，/，%，++，–</p>
<p>+的用法：a.加法    b.正号     c.字符串连接符</p>
<p>整数相除只能得到整数，若要得到小数，需要把操作的数据中的任意一个数据变为浮点数类型。</p>
<p>/获取的是除法操作的商，%获取的是除法操作的余数。</p>
<p>++自增1，–自减1。就是对<strong>变量</strong>进行自增或者自减。只能对变量</p>
<p>单独使用：放在操作数前或者操作数后效果一样（常用）</p>
<p>参与运算使用：放在操作数的前面++a，先自增或自减再参与运算（赋值）。放在操作数的后面a++，先参与运算（赋值）再自增或自减。</p>
<p>2.赋值运算符</p>
<p>基本的赋值运算符：=</p>
<p>把=右边的数据赋值给左边（左边必须是变量）</p>
<p>扩展的赋值运算符：+=，-=，*=，/=，%=</p>
<p>+=把左边和右边做加法，然后赋值给左边。（左边必须是变量）</p>
<p>s +=1;不是等价于s = s+1;而是等价于s = （s的数据类型）（s+1）；      扩展的赋值运算符其实隐含了一个强制类型转换。</p>
<p>3.比较运算符（关系运算符）</p>
<p>==，！=，&lt;,&gt;,&lt;=,&gt;=,instanceof(检查是否是类的对象)</p>
<p>无论操作是简单还是复杂，比较运算符的结果都是boolean型，要么是true，要么是false。</p>
<p>“==”不能写成”=”</p>
<p>4.逻辑运算符</p>
<p>&amp;与（AND）  ()&amp;()  有false则false</p>
<p>|或（OR）    ()|()  有true则true</p>
<p>^异或（XOR）  ()^()  相同为false，不同为true</p>
<p>！非（NOT）   !()  非false则true，非true则false，偶数个不改变本身。</p>
<p>&amp;&amp;短路与（AND） ()&amp;&amp;()</p>
<p>||短路或（OR）   ()||()</p>
<p>逻辑运算符用于连接布尔型表达式，不能写3&lt;x&lt;6,而应该是x&gt;3&amp;x&lt;6。</p>
<p>&amp;和&amp;&amp;的区别（|和||同理）：最终结果一样</p>
<p>单&amp;时，左边无论真假，右边都会进行运算。</p>
<p>双&amp;时，若左边为真，右边参与运算，若左边为假，右边不参与运算（不执行）。</p>
<p>开发中常用的逻辑运算符：&amp;&amp;，||，！</p>
<p>5.位运算符</p>
<p>&amp;位与运算   有0则0</p>
<p>|位或运算   有1则1 </p>
<p>^位异或运算  相同为0，不同为1</p>
<p>~按位取反运算符  0变1，1变0   （在计算机中，所有参与运算的都是补码）</p>
<p>&lt;&lt;左移  左边最高位丢弃，右边补齐0                把&lt;&lt;左边的数据乘以2的移动次幂</p>
<p>&gt;&gt;右移  最高位是0，左边补齐0；最高位是1，左边补齐1            把&gt;&gt;右边的数据除以2的移动次幂</p>
<p>&gt;&gt;&gt;无符号右移  无论最高位是0还是1，左边都补齐0</p>
<p>要做位运算，首先要把数据转换为二进制。</p>
<p>&amp;和|：两边是boolean型，代表逻辑与/或短路         两边是数据类型，代表的是位运算。</p>
<p>^的特点：一个数据对另一个数据位异或两次，该数本身不变。（应用：数据加密，异或后发给你，你在异或一下就得到原数据）</p>
<p>eg：实现两个整数变量的交换：a  b </p>
<ul>
<li><p>使用第三方变量（开发中用）</p>
<p>c=a  a=b  b=c</p>
</li>
<li><p>使用位异或实现(面试用)</p>
<p>左边aba，右边a^b：    a=a^b  b=a^b   a=a^b</p>
</li>
<li><p>用变量相加的做法</p>
<p>a=a+b  b=a-b  a=a-b</p>
</li>
<li><p>一句话搞定</p>
<p>b=(a+b)-(a=b)</p>
</li>
</ul>
<p>6.三目运算符</p>
<p>（关系表达式）？表达式1：表达式2</p>
<p>关系表达式结果为true，则结果为表达式1，为false，则结果为表达式2.</p>
<p>（单目运算符：~3            双目运算符：3+4  ）</p>
<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><p>存储同一数据类型的多个元素的容器。</p>
<p>定义格式：（2种）</p>
<ul>
<li><p>数据类型[]  数组名;  定义一个该数据类型的数组（数组名）变量</p>
</li>
<li><p>数据类型  数组名[];  定义一个该数据类型的（数组名）数组变量</p>
</li>
</ul>
<p>建议使用第一种，因为其他语言（如C#）正在淘汰第二种。</p>
<p>数组的初始化：java中的数组必须先初始化，然后才能使用。</p>
<p>初始化就是为数组中的每个元素分配内存空间，并为每个元素赋值。</p>
<p>初始化方式：（2种）</p>
<ul>
<li>动态初始化：初始化时只指定数组的长度，由系统为数组分配初始值。</li>
</ul>
<p>格式：  数据类型[]  数组名= new 数据类型[数组长度];</p>
<p>eg：      int[]  arr = new int [4];</p>
<p>​    int：说明数组中元素的数据类型是int类型</p>
<p>​    []：说明这是一个数组</p>
<p>​    arr：数组的名称</p>
<p>​    new：为数组分配内存空间</p>
<p>​    int：说明数组中元素的数据类型是int类型</p>
<p>​    [4]：说明这是一个长度为4的数组，数组中元素的个数为4</p>
<p>这时候直接打印输出arr的值 就是arr的内存地址值。</p>
<p>数组中的每个元素都是有编号的，并且是从0开始，最大编号是数组的长度-1。</p>
<p>用数组名和编号的组合就可以获取数组中的指定编号的元素，这个编号叫索引。</p>
<p>通过数组名访问数据的格式是：数组名  [索引]</p>
<p>arr[0]、arr[1]、arr[2]、arr[3]没有赋值时，均为默认值。</p>
<ul>
<li>静态初始化：初始化时指定每个数组元素的初始值，由系统决定数组长度。</li>
</ul>
<p>格式：   数据类型[]  数组名 = new  数据类型[]{元素1，元素2，…}；</p>
<p>eg:          int[] arr = new int[]{1,2,3};</p>
<p>简化写法int[] arr={1,2,3};</p>
<p>arr的输出值就是arr的地址值。</p>
<p>注意 不要同时动态和静态进行初始化。</p>
<p>数组操作的两个常见小问题：</p>
<p>1.数组索引越界异常（<code>ArrayIndexOutOfBoundsException</code>）：你访问了不存在的索引。</p>
<p>2.空指针异常(<code>NullPointerException</code>)：数组已经不再指向堆内存了，而你还用数组名去访问元素。引用类型的常量：空常量  null  </p>
<p>eg：arr=null；</p>
<h2 id="数组常见方法"><a href="#数组常见方法" class="headerlink" title="数组常见方法"></a>数组常见方法</h2><ul>
<li>数组遍历：依次输出数组中的每一个元素。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printArray</span><span class="params">(<span class="keyword">int</span>[] arr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</span><br><span class="line">        System.out.println(arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>数组获取最值：获取数组中的最大值、最小值。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getMax</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> max = arr[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">1</span>; x &lt; arr.length; x++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[x] &gt; max) &#123;</span><br><span class="line">            max = arr[x];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>数组元素逆序：元素对调。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; arr.length / <span class="number">2</span>; x++) &#123;</span><br><span class="line">        <span class="keyword">int</span> temp = arr[x];</span><br><span class="line">       arr[x] = arr[arr.length - <span class="number">1</span> - x];</span><br><span class="line">        arr[arr.length - <span class="number">1</span>] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>数组查表法：根据键盘录入索引，查找对应元素。</p>
</li>
<li><p>数组元素查找：查找指定元素第一次在数组中出现的索引。如果找不到数据，我们一般返回一个负数即可，一般是-1。</p>
</li>
<li><p>数组排序和二分查找。</p>
</li>
</ul>
<p>二维数组：元素为一维数组的数组。</p>
<p>格式1：</p>
<p>列是一样的用:       数据类型[] []  数组名=new 数据类型[m] [n];</p>
<p>​    m表示这个二维数组有多少个一维数组。</p>
<p>​    n表示每一个一维数组的元素个数。</p>
<p>以下两个格式也可以但是不推荐：</p>
<p>数据类型  数组名[] []=new  数据类型[m] [n];</p>
<p>数据类型[]  数组名[]=new  数据类型[m] [n];</p>
<p>int x,y;  定义了一个x，一个y的int型数据。</p>
<p>int[] x,y[];  定义了一个x的一维数组和一个y的二维数组。</p>
<p>格式2：</p>
<p>列是变化的用:       数据类型[] []  数组名=new  数据类型[m] [];</p>
<p>m表示这个二维数组有m个一维数组</p>
<p>一维数组的元素个数可以动态给出。</p>
<p>格式3：</p>
<p>静态初始化：   <code>数据类型[][]  数组名=new  数据类型[][]&#123;&#123; 元素1，元素2，.... &#125;, &#123; 元素1，元素2，.... &#125;, &#123; 元素1，元素2，.... &#125;&#125;;</code></p>
<p>简化版：<code>数据类型[][]  数组名=&#123;&#123;元素1，元素2，....&#125;, &#123;元素1，元素2，....&#125;, &#123;元素1，元素2，....&#125;&#125;;</code></p>
<p>二维数组的遍历：</p>
<p>外循环控制的是二维数组的长度，也就是一维数组的个数。</p>
<p>内循环控制的是一维数组的长度。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> x = <span class="number">0</span>;x&lt;arr.length;x++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> y = <span class="number">0</span>; y &lt; arr[x].length; y++) &#123;</span><br><span class="line">            System.out.println(arr[x][y]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h1 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h1><p>方法就是完成特定功能的代码块。（在很多语言里面都有函数的定义，函数在java中被称为方法）</p>
<p>格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">修饰符  返回值类型  方法名（参数类型 参数名<span class="number">1</span>，参数类型 参数名<span class="number">2</span>，...）｛</span><br><span class="line">	函数体；</span><br><span class="line">	<span class="keyword">return</span> 返回值；</span><br><span class="line">｝</span><br></pre></td></tr></table></figure>

<p>修饰符： public static</p>
<p>返回值类型：就是返回结果的数据类型。</p>
<p>方法名：符合命名规则即可，方便我们调用。</p>
<p>参数：</p>
<p>​    实际参数：就是实际参与运算时填入的参数。</p>
<p>​    形式参数:就是方法定义上的，用于接收实际参数。</p>
<p>​    形式参数的类型有2种：基本类型和引用类型。</p>
<p>​        基本类型（4类8种）中形式参数的改变不影响实际参数。</p>
<p>​        引用类型（类、接口、数组）中形式参数的改变直接影响实际参数。</p>
<p>如果一个方法的形式参数是一个类类型（引用类型），实际参数需要的是这个类的对象。</p>
<p>​    参数类型：参数的数据类型</p>
<p>​    参数名：变量名</p>
<p>​    方法体语句：完成功能的代码。</p>
<p>​    return：结束方法，用于返回结果。</p>
<p>​    返回值：就是功能的结果，由return带给调用者。</p>
<p>要写一个方法，必须明确两个东西：</p>
<p>A：返回值类型：结果的数据类型</p>
<p>B：参数列表：要传递的参数及参数类型。</p>
<p>方法的执行特点：不调用，不执行。</p>
<p>调用：</p>
<p>​    A：单独调用，一般来说没有意义，所以不推荐</p>
<p>​    B：输出调用，但是不够好，因为可能需要针对结果进行进一步的操作。</p>
<p>​    C：赋值调用，推荐方案。</p>
<p>方法的注意事项：</p>
<p>​    1.方法不调用，不执行。</p>
<p>​    2. 方法与方法之间是平级关系，不能嵌套定义。</p>
<p>​    3.方法定义的时候参数之间用逗号隔开。</p>
<p>​    4.方法调用的时候不用再传递数据类型。</p>
<p>​    5. 如果方法有明确的返回值，一定要有return带回一个值。</p>
<p>void类型返回值的方法调用：无返回结果，只有单独调用一种。</p>
<p>方法的<strong>重载</strong>：方法的功能相同，参数列表不同的情况，为了见名知意，java允许它们起一样的名字。jvm会根据不同的参数调用不同的功能。</p>
<p>方法重载的特点：与返回值类型无关，只看方法名和参数列表。在调用时，虚拟机通过参数列表的不同（参数个数、类型不同）来区分同名方法。</p>
<p>//一个方法不能访问另一个方法中的局部变量。</p>
<h1 id="类"><a href="#类" class="headerlink" title="类"></a>类</h1><p>单独开一个文章总结。</p>
<h1 id="包"><a href="#包" class="headerlink" title="包"></a>包</h1><p>其实就是文件夹。</p>
<p>作用：把相同的类名放到不同的包中；对类进行分类管理。</p>
<p>1.可以按照功能分（增加、删除、修改、查找）</p>
<p>2.可以按照模块分（推荐）</p>
<p>包的定义：  package 包名；</p>
<p>多级包用.分开即可</p>
<p>注意事项：</p>
<p>package语句必须是程序的第一条可执行（可被虚拟机识别）的代码。package语句在一个java文件中只能有一个。如果没有package，默认表示无包名</p>
<p>带包的编译和运行：</p>
<ul>
<li><p>手动式：</p>
<p>a.编写一个java文件</p>
<p>b.通过javac命令编译该java文件</p>
<p>c.在文件夹中的当前目录下手动创建包名</p>
<p>d.把b步骤的class文件放到c步骤的最底层包</p>
<p>e.回到和包根目录在同一目录的地方，然后带包运行<code>java  cn.xxx.类名</code></p>
</li>
<li><p>自动式：</p>
<p>a. javac编译的时候带上-d即可（eg： <code>javac  -d  .  类名.java</code>）</p>
<p>b.通过java命令执行。和手动式一样</p>
</li>
</ul>
<p>不同包下类之间的访问，每次都需要加包的全路径，会很麻烦，所以java提供了导包功能。</p>
<p>导包格式：import 包名；</p>
<p>注意：</p>
<p>这种方式导入是到类的名称<code>import cn.xxx.类名</code>；虽然可以写<code>import cn.xxx.</code>代表导入这个cn.xxx包下的所有类，但是不建议。建议我们用谁导入谁。</p>
<p>package(只能有一个)-&gt;import(可以有多个)-&gt;class(可以有多个，以后建议是一个，使结构清晰)</p>
<p>权限修饰符：</p>
<p>​    public:同一个类中；同一个包下子类，无关类；不同包下该类是那个包的类的子类；不同包下无关类</p>
<p>​    protected:同一个类中；同一个包下子类，无关类；不同包下该类是那个包的类的子类</p>
<p>​    默认：同一个类中；同一个包下子类，无关类</p>
<p>​    private:同一个类中</p>
<p>总结：如果想都访问，用public；如果想访问不同包的子类，用protected（pretected是用来修饰子类的）；如果只想同一个包内访问用默认，不加；如果只想在本类中访问，用private。</p>
<p>修饰符：</p>
<p>​    权限修饰符：private，默认的，protected，public</p>
<p>​    状态修饰符：static，final</p>
<p>​    抽象修饰符：abstract</p>
<p>类及其组成可以用的修饰符：</p>
<p>​    类：默认，public；final，abstract   经常使用的是public</p>
<p>​    成员变量：四种权限修饰符均可；final,static   经常使用的是private</p>
<p>​    构造方法：四种权限修饰符均可；其他不可   经常使用的是public</p>
<p>​    成员方法：四种权限修饰符均可；final,static,abstract  经常使用的是public</p>
<p>注：自己写项目时的类名不要和常用的API的类名相同。</p>
<p>​    复制代码的时候，很容易把那个类所在的包也导入过来，容易出现不能理解的问题。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/29/4.2.java%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" data-id="ckqk8k3eb004i2wwdd50k6v0u" data-title="java基础知识" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" rel="tag">基础概念</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-4.9.java中常用类" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/26/4.9.java%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%B1%BB/" class="article-date">
  <time class="dt-published" datetime="2021-03-26T11:03:45.000Z" itemprop="datePublished">2021-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/26/4.9.java%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%B1%BB/">java中常用类</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>API（Application Programming Interface）概述：就是java提供给我们使用的类，这些类将底层的实现封装了起来，我们不需要关心这些类是如何实现的，只需要学习这些类如何使用，我们可以通过查找帮助文档来了解java提供的API如何使用。</p>
<h1 id="Object类"><a href="#Object类" class="headerlink" title="Object类"></a>Object类</h1><p>JDK1.0</p>
<p>类层次结构的根类，每个类都直接或者间接继承自Object类。 所有对象（包括数组）都实现了这个类的方法。</p>
<p>构造方法： public Object()  </p>
<p>成员方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span></span><br></pre></td></tr></table></figure>



<p>public int hashCode()  返回该对象的哈希码值</p>
<p>哈希值是根据哈希算法计算出来的一个值，这个值和地址值有关，但不是实际地址值，可以理解为地址值。</p>
<p>public final Class getClass()  返回此Object的运行时类。</p>
<p>//Class也是一个类，是Class对象建模的类的类型。它其中有个方法：</p>
<p>//public String getName()  以String的形式返回此Class对象所表示的全类名称</p>
<p>public String toString()  返回该对象的字符串表示</p>
<p>toString()方法的值等价于：<a href="mailto:getClass().getName()+’@’+Integer.toHexString(hashCode())">getClass().getName()+’@’+Integer.toHexString(hashCode())</a></p>
<p>这个信息是没有任何意义的，所以建议所有子类都重写此方法。</p>
<p>重写：建议重写成把该类的所有成员变量值组成返回。（右键–resources–toString 自动生成，重写的最终版方案就是自动生成）</p>
<p>注意：直接输出一个对象的名称，其实就是调用该对象的toString()方法。</p>
<p>public boolean equals(Object obj)  指示其他某个对象是否与此对象“相等”</p>
<p>这个方法默认情况下比较的是地址值。</p>
<p>比较地址值一般意义不大，所以我们要重写该方法。重写完的方法一般是用来比较对象的成员变量值是否相同。</p>
<p>String的equals()方法是重写自Object类的，比较的是字符串的内容是否相同</p>
<p>重写的代码优化：提高效率，提高代码的健壮性。</p>
<p>最终版其实是自动生成。</p>
<p>==：基本类型：比较的就是值是否相同</p>
<p>引用类型：比较的就是地址值是否相同</p>
<p>equals：</p>
<p>只能比较引用类型：默认情况比较的是地址值，不过我们可以根据自己的情况重写该方法。一般重写都是自动生成，比较对象的成员变量值是否相同。</p>
<p>protected void finalize()  当垃圾回收器不存在对该对象的更多引用时，由对象的垃圾回收器调用此方法。永远垃圾回收，但是什么时候回收不确定。</p>
<p>protected Object clone()  创建并返回此对象的一个副本。</p>
<p>因为是prtected，所以需要重写该方法。</p>
<p>Cloneable：此类实现了Cloneable接口，以指示Object.clone()方法可以合法的对该类实力进行按字段复制。这个接口是****标记****接口，告诉我们实现该接口的类就可以实现对象的复制了。（就只是起个标记的作用，只有实现该接口的类才能被clone）</p>
<p>意义：clone之后改动对以前的数据无影响。而直接赋值引用改动会对以前的数据产生影响。（这只是浅克隆）</p>
<h1 id="Scanner类"><a href="#Scanner类" class="headerlink" title="Scanner类"></a>Scanner类</h1><p>需要导包：import java.util.Scanner</p>
<p>JDK5以后用于获取用户的键盘输入</p>
<p>构造方法：public Scanner(InputStreamsource)</p>
<p>System类下有一个静态的字段： public static final InputStream in; 标准的输入流，对应着键盘录入。</p>
<p>成员方法：</p>
<p>hasNextXxx() ****判断****是否还有下一个输入项，其中Xxx可以是Int，Double等。如果需要判断的是否包含下一个字符串，可以省略Xxx</p>
<p>nextXxx() 获取下一个输入项。</p>
<p>默认情况下，Scanner使用空格，回车等作为分隔符。</p>
<p>常用的方法：</p>
<p>public int nextInt()</p>
<p>public String nextLine()</p>
<p>先获取一个数值，在获取一个字符串，就会出现问题（因为换行符号被当成是字符串输入）</p>
<p>解决：A.先获取一个数值后，再创建一个新的键盘录入对象获取字符串。</p>
<p>B.把所有的数据都先按照字符串获取，然后要什么在对应转换成什么。</p>
<p>键盘录入数据</p>
<p>1.导包：import java.util.Scanner  （import必须出现在所有的class前面）</p>
<p>2.创建对象：Scanner sc=new Scanner(System.in)</p>
<p>3.接收数据：int x=sc.nextInt();</p>
<p>String s=sc.nextLine();</p>
<h1 id="String类-StringBuffer类-StringBuilder类"><a href="#String类-StringBuffer类-StringBuilder类" class="headerlink" title="String类/StringBuffer类/StringBuilder类"></a>String类/StringBuffer类/StringBuilder类</h1><p>字符串是由多个字符组成的一串数据（字符序列）</p>
<p>字符串可以看成是字符数组。</p>
<p>字符串字面值”abc”也可以看成是一个字符串对象。</p>
<p>字符串是常量，一旦被赋值，就不能被改变。字符串直接赋值的方式是先到方法区中的字符串常量池里面去找，如果有就直接返回，没有就创建返回。（赋的值不能变，引用可以变）</p>
<ol>
<li>String s=”hello”;  s+=”world”; 则s的输出结果是：helloworld</li>
</ol>
<p>因为s的赋值hello不能改变，但是+world后在方法区的常量池中会重新生成一个地址值指向栈的s。</p>
<ol start="2">
<li>String s=new String(“hello”);和String s=”hello”; 的区别？</li>
</ol>
<p>区别就是前者会生成2个或1个（可能常量池中已经存在hello常量）对象，而后者只会生成1个或0个对象。（因为前者会在堆内存中生成一个地址值，而后者是方法区中的常量池直接指向栈内存）</p>
<p>字符串如果是变量相加，先开空间，在拼接。</p>
<p>字符串如果是常量相加，直接加，然后在常量池中找，如果有就直接返回，否则就创建。</p>
<p>构造方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">()</span>   <span class="comment">//空构造</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">(<span class="keyword">byte</span>[] bytes)</span>  <span class="comment">//把字节数组转成字符串</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">(<span class="keyword">byte</span>[] bytes,<span class="keyword">int</span> index,<span class="keyword">int</span> length)</span><span class="comment">//把字节数组的一部分转成字符串</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">(<span class="keyword">char</span>[] value)</span>  <span class="comment">//把字符数组转成字符串</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">(<span class="keyword">char</span>[] value,<span class="keyword">int</span> index,<span class="keyword">int</span> count)</span><span class="comment">//把字符数组的一部分转成字符串</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">(String original)</span>  <span class="comment">//把字符串常量值转成字符串</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">String s</span>=”hello”; <span class="comment">//这个虽然不是构造方法，但结果也是一个字符串对象</span></span><br></pre></td></tr></table></figure>

<p>方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">length</span><span class="params">()</span>  ：返回此字符串的长度。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">String类的判断功能：</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span>   比较字符串的内容是否相同，区分大小写</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">equalsIgnoreCase</span><span class="params">(String str)</span>比较字符串的内容是否相同，忽略大小写</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(String str)</span>  判断大串中是否包含小串<span class="params">(连续的)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">startsWith</span><span class="params">(String str)</span> 判断字符串是否以某个指定的字符串开头</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">endsWith</span><span class="params">(String str)</span> 判断字符串是否以某个指定的字符串结尾</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> 判断字符串是否为空</span></span><br></pre></td></tr></table></figure>

<p>字符串内容为空（“”）和字符串对象为空（null）是两个概念。</p>
<p>空指针不能调用方法。</p>
<p>String类的获取功能：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">length</span><span class="params">()</span>   获取字符串的长度</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">charAt</span><span class="params">(<span class="keyword">int</span> index)</span>  获取指定索引位置的字符</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(<span class="keyword">int</span> ch)</span>  返回指定字符在此字符串中第一次出现的索引</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">为什么是<span class="keyword">int</span>类型不是字符类型：因为’a’和97都可以代表’a’，但是如果写字符类型的话就不能写数字了，因为<span class="keyword">int</span>类型的范围比字符<span class="keyword">char</span>的类型范围大，要强转，可能会出错。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(String str)</span>  返回指定字符串在此字符串中第一次出现的索引</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(<span class="keyword">int</span> ch,<span class="keyword">int</span> fromIndex)</span>  返回指定字符在此字符串中从指定位置后第一次出现的索引</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(String str,<span class="keyword">int</span> fromIndex)</span>  返回指定字符串在此字符串中从指定位置后第一次出现的索引</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">String <span class="title">substring</span><span class="params">(<span class="keyword">int</span> start)</span>  从指定位置开始截取字符串，默认到末尾（包括start索引）</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">String <span class="title">substring</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span>  从指定位置开始到指定位置结束截取字符串（包括start索引但是不包括end索引）</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">遍历数组：<span class="title">length</span><span class="params">()</span>和<span class="title">charAt</span><span class="params">()</span>即可。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">统计一个字符串中大、小写字母、数字出现的次数：定义统计变量，遍历数组，每个字符判断。（判断就直接判断，因为字符判断时候都会转化成<span class="keyword">int</span>型在判断）</span></span><br></pre></td></tr></table></figure>

<p>String类的转换功能：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span>[] getBytes()   把字符串转换成字节数组</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span>[] toCharArray() 把字符串转换成字符数组</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> String <span class="title">valueOf</span><span class="params">(<span class="keyword">char</span>[] chs)</span> 把字符数组转换成字符串</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">static</span> String <span class="title">valueOf</span><span class="params">(<span class="keyword">int</span> i)</span> 把<span class="keyword">int</span>类型转换成字符串</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">String类的valueOf方法可以把任意类型的数据转成字符串（方法的重载）</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">String <span class="title">toLowerCase</span><span class="params">()</span> 把字符串转成小写（原字符串不变）</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">String <span class="title">toUpperCase</span><span class="params">()</span> 把字符串转成大写</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">String <span class="title">concat</span><span class="params">(String str)</span> 把字符串拼接</span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function">String format（）</span></span><br></pre></td></tr></table></figure>

<p>String类的其他功能：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">替换功能：</span><br><span class="line"></span><br><span class="line"><span class="function">String <span class="title">replace</span><span class="params">(<span class="keyword">char</span> old,<span class="keyword">char</span> new)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">String <span class="title">replace</span><span class="params">(String old,String new)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">去除字符串的两端空格（不去除中间的）：</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">String <span class="title">trim</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">按字典顺序比较两个字符串 ： （依次比较字符串的<span class="keyword">int</span>值，再做减法，返回值。如果两个字符串的长度不同，返回长度差。（都是看源码得知））</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(String str)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compareToIgnoreCase</span><span class="params">(String str)</span></span></span><br></pre></td></tr></table></figure>

<p>字符串反转：定义一个新的字符串，将给定的字符串倒着遍历，拼接到新的字符串。</p>
<p>统计大串中小串出现的次数：定义一个统计变量，获取小串在大串中第一次出现的索引（用indexOf()方法，不存在的话会返回-1），将索引+小串的长度作为起始位置截取原始大串并赋值给原始大串（用int indexOf(String str,int fromIndex)方法），继续获取小串在大串中第一次出现的索引（用indexOf()方法，不存在的话会返回-1）。</p>
<h2 id="StringBuffer类"><a href="#StringBuffer类" class="headerlink" title="StringBuffer类"></a>StringBuffer类</h2><p>如果对字符串进行拼接操作，每次拼接都会构建一个新的String对象，既耗时又耗空间，所以产生了StringBuffer类。</p>
<p>线程安全的可变字符序列。</p>
<p>安全–同步–数据是安全的</p>
<p>不安全–不同步–效率高一些</p>
<p>StringBuffer和String的区别：前者长度和内容可变，后者不可变。</p>
<p>当字符串拼接时，前者不会浪费太多的资源。</p>
<p>StringBuffer的构造方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">StringBuffer</span><span class="params">()</span>  无参构造方法</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">StringBuffer</span><span class="params">(<span class="keyword">int</span> capacity)</span> 指定容量的字符串缓冲区对象 默认为16</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">StringBuffer</span><span class="params">(String str)</span> 指定字符串内容的字符串缓冲区对象</span></span><br></pre></td></tr></table></figure>

<p>StringBuffer的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">capacity</span><span class="params">()</span>:返回当前容量。  理论值</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">length</span><span class="params">()</span>:返回长度（字符数）。实际值</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">StringBuffer添加功能</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> StringBuffer <span class="title">append</span><span class="params">(String str)</span> 可以把任意类型的数据添加到字符串缓冲区里面，并返回字符串缓冲区本身。（所以可以使用链式编程）</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> StringBuffer <span class="title">insert</span><span class="params">(<span class="keyword">int</span> offset,String str)</span> 在指定位置把任意类型的数据插入到字符串缓冲区里面，并返回字符串缓冲区本身</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">StringBuffer删除功能</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> StringBuffer <span class="title">deleteCharAt</span><span class="params">(<span class="keyword">int</span> index)</span> 删除指定位置的字符，并返回本身</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> StringBuffer <span class="title">delete</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span> 删除从指定位置开始指定位置结束的内容，并返回本身 [) 包左不包右</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> StringBuffer <span class="title">delete</span><span class="params">(<span class="number">0</span>,x.length()</span>)用于初始化清空容器。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">StringBuffer替换功能</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> StringBuffer <span class="title">replace</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end,String str)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">StringBuffer反转功能	</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> <span class="keyword">public</span> StringBuffer <span class="title">reverse</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">StringBuffer截取功能</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">substring</span><span class="params">(<span class="keyword">int</span> start)</span>这个索引后的所有字符串输出并返回到String</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">substring</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span>  把这段截取出来输出String</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">截取功能的返回值类型是String类型，本身String Buffer没有发生改变（前面的都是容器内容发生了变化，所以值都改变了，但是容器本身没有变化）</span></span><br></pre></td></tr></table></figure>

<p>类之间的转换：</p>
<p>A–B的转换：把A转换成B是为了使用B的功能</p>
<p>B–A的转换：要的结果是A类型，所以需要再转回来。</p>
<p>String和StringBuffer的相互转换：</p>
<p>String转成StringBuffer：</p>
<p>不能把字符串的值直接赋值给StringBuffer</p>
<p>方法1：通过构造方法：StringBuffer sb=new StringBuffer(s);</p>
<p>方法2：通过append方法：StringBuffer sb2=new StringBuffer();    sb2.append(s);</p>
<p>StringBuffer转成String：</p>
<p>方法1：通过构造方法：String s=new String(buffer);</p>
<p>方法2：通过toString方法：String str2 = buffer.toString();    </p>
<h2 id="StringBuilder类"><a href="#StringBuilder类" class="headerlink" title="StringBuilder类"></a>StringBuilder类</h2><p>一个可变的字符序列，此类提供一个与StringBuffer兼容的API（在单线程中完全可以替代StringBuffer），但不保证同步。在单个线程使用时很普遍，因为不保证安全，但是比StringBuffer类快。</p>
<p>1.String，StringBuffer，String Builder的区别：</p>
<p>String内容是不可变的，而StringBuffer、StringBuilder都是内容可变的。</p>
<p>StringBuffer是同步的，数据安全，效率低；StringBuilder是不同步的，数据不安全，效率高。</p>
<p>2.StringBuffer和数组的区别：</p>
<p>二者都可以看成是容器装其他数据，但是StringBuffer的数据最终是一个字符串数据，而数组可以放置多种数据，但必须是同一种数据类型。</p>
<p>\3. 形式参数问题：</p>
<p>基本类型：形式参数的改变不影响实际参数</p>
<p>引用类型：形式参数的改变直接影响实际参数</p>
<p>String作为参数传递：效果和基本类型作为参数传递是一样的。（因为String是一种特殊的基本类型，常量池）</p>
<p>StringBuffer作为参数传递：只有调用方法时才改变了值，一般的赋值=不改变原来值。</p>
<h1 id="Arrays类和数组高级"><a href="#Arrays类和数组高级" class="headerlink" title="Arrays类和数组高级"></a>Arrays类和数组高级</h1><p>Arrays类：需要导包import java.util.Arrays</p>
<p>是针对数组进行操作的工具类，提供了排序，查找等功能。</p>
<p>无构造方法。成员方法全是静态方法。</p>
<p>成员方法：不懂就去看源码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toString</span><span class="params">(<span class="keyword">int</span>[] a)</span> 把数组转成字符串</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span>[] a)</span>  对数组进行排序（底层是快速排序）</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(<span class="keyword">int</span>[] a,<span class="keyword">int</span> key)</span> 二分查找（必须是有序的）</span></span><br></pre></td></tr></table></figure>



<p>数组高级：排序和查找</p>
<p>排序：</p>
<p>\1. 插入排序类：</p>
<p>（1）直接插入排序：（在小规模数据集或是基本有序时，该算法效率较高）每一步将一个待排序的元素，按其排序码的大小，插入到前面已经排好序的一组元素的适当位置上去，直到元素全部插入为止</p>
<p>（2）希尔排序：先对数据进行预处理，使其基本有序，然后再用直接插入排序算法排序。</p>
<p>\2. 选择排序类：</p>
<p>（1）简单选择排序：（每次选择一个最大(小)的，直到所有元素都被输出）从0索引开始，依次和后面元素比较，小的回到0索引；第一次完毕后，最小值出现在了最小索引处；第二次比较，有1个元素不比；比较的次数是array.length-1。</p>
<p>（2）堆排序：根节点是整个堆的最大值，将它移走；将剩余n-1个节点重新构造成一个堆，再将根节点移走；重复执行1,2。直到没有节点可移动，就生成了有序序列。</p>
<p>\3. 交换排序类：</p>
<p>（1）冒泡排序：（该算法比较简单，几乎所有语言涉及到算法时，都会涉及到冒泡算法）相邻元素两两比较，大的往后放；第一次完毕，最大值出现在最大索引处；第二次比较，有1个元素不比；比较的次数是array.length-1。</p>
<p>（2）快速排序：（利用“分而治之”的思想对集合进行排序）</p>
<p>4.归并排序类：</p>
<p>归并排序：归并排序（MERGE-SORT）是利用归并的思想实现的排序方法，该算法采用经典的分治策略（分治法将问题分成一些小的问题然后递归求解，而治的阶段则将分的阶段得到的各答案”修补”在一起，即分而治之)。</p>
<p>5.计数排序：计数排序统计小于等于该元素值的元素的个数i，于是该元素就放在目标数组的索引i位（i≥0）。</p>
<p>计数排序基于一个假设，待排序数列的所有数均为整数，且出现在（0，k）的区间之内。</p>
<p>如果 k（待排数组的最大值） 过大则会引起较大的空间复杂度，一般是用来排序 0 到 100 之间的数字的最好的算法，但是它不适合按字母顺序排序人名。</p>
<p>计数排序不是比较排序，排序的速度快于任何比较排序算法。</p>
<p>6.桶排序：将值为i的元素放入i号桶，最后依次把桶里的元素倒出来。</p>
<p>7.基数排序：取得数组中的最大数，并取得位数；arr为原始数组，从最低位开始取每个位组成radix数组；对radix进行计数排序（利用计数排序适用于小范围数的特点）</p>
<table>
<thead>
<tr>
<th><em><strong>*排序算法*</strong></em></th>
<th><em><strong>*平均时间复杂度*</strong></em></th>
<th><em><strong>*最差时间复杂度*</strong></em></th>
<th><em><strong>*空间复杂度*</strong></em></th>
<th><em><strong>*数据对象稳定性*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td>冒泡排序</td>
<td>O(n2)</td>
<td>O(n2)</td>
<td>O(1)</td>
<td>稳定</td>
</tr>
<tr>
<td>选择排序</td>
<td>O(n2)</td>
<td>O(n2)</td>
<td>O(1)</td>
<td>数组不稳定、链表稳定</td>
</tr>
<tr>
<td>插入排序</td>
<td>O(n2)</td>
<td>O(n2)</td>
<td>O(1)</td>
<td>稳定</td>
</tr>
<tr>
<td>快速排序</td>
<td>O(n*log2n)</td>
<td>O(n2)</td>
<td>O(log2n)</td>
<td>不稳定</td>
</tr>
<tr>
<td>堆排序</td>
<td>O(n*log2n)</td>
<td>O(n*log2n)</td>
<td>O(1)</td>
<td>不稳定</td>
</tr>
<tr>
<td>归并排序</td>
<td>O(n*log2n)</td>
<td>O(n*log2n)</td>
<td>O(n)</td>
<td>稳定</td>
</tr>
<tr>
<td>希尔排序</td>
<td>O(n*log2n)</td>
<td>O(n2)</td>
<td>O(1)</td>
<td>不稳定</td>
</tr>
<tr>
<td>计数排序</td>
<td>O(n+m)</td>
<td>O(n+m)</td>
<td>O(n+m)</td>
<td>稳定</td>
</tr>
<tr>
<td>桶排序</td>
<td>O(n)</td>
<td>O(n)</td>
<td>O(m)</td>
<td>稳定</td>
</tr>
<tr>
<td>基数排序</td>
<td>O(k*n)</td>
<td>O(n2)</td>
<td></td>
<td>稳定</td>
</tr>
</tbody></table>
<p>查找：</p>
<p>\1. 基本查找：查找的数组无序（从头找到尾）</p>
<p>\2. 二分（折半）查找：查找的数组有序</p>
<p>只要是无序的就不能使用二分查找，因为二分查找一旦排序就改变了元素在数组中的位置，其索引也就不对了。</p>
<table>
<thead>
<tr>
<th><em><strong>*查找算法*</strong></em></th>
<th><em><strong>*平均时间复杂度*</strong></em></th>
<th><em><strong>*空间复杂度*</strong></em></th>
<th><em><strong>*查找条件*</strong></em></th>
</tr>
</thead>
<tbody><tr>
<td>顺序查找</td>
<td>O(n)</td>
<td>O(1)</td>
<td>无序或有序</td>
</tr>
<tr>
<td>二分查找（折半查找）</td>
<td>O(log2n)</td>
<td>O(1)</td>
<td>有序</td>
</tr>
<tr>
<td>插值查找</td>
<td>O(log2(log2n))</td>
<td>O(1)</td>
<td>有序</td>
</tr>
<tr>
<td>斐波那契查找</td>
<td>O(log2n)</td>
<td>O(1)</td>
<td>有序</td>
</tr>
<tr>
<td>哈希查找</td>
<td>O(1)</td>
<td>O(n)</td>
<td>无序或有序</td>
</tr>
<tr>
<td>二叉查找树（二叉搜索树查找）</td>
<td>O(log2n)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>红黑树</td>
<td>O(log2n)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>2-3树</td>
<td>O(log2n - log3n)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>B树/B+树</td>
<td>O(log2n)</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h1 id="基本类型包装类（Interger，Character）"><a href="#基本类型包装类（Interger，Character）" class="headerlink" title="基本类型包装类（Interger，Character）"></a>基本类型包装类（Interger，Character）</h1><p>为了对基本数据类型进行更多的操作，更方便的操作，java就对每一种基本类型提供了对应的类类型，包装类类型。</p>
<table>
<thead>
<tr>
<th>基本类型</th>
<th>包装类类型</th>
</tr>
</thead>
<tbody><tr>
<td>byte</td>
<td>Byte</td>
</tr>
<tr>
<td>short</td>
<td>Short</td>
</tr>
<tr>
<td>int</td>
<td><strong>Integer</strong></td>
</tr>
<tr>
<td>long</td>
<td>Long</td>
</tr>
<tr>
<td>char</td>
<td><strong>Character</strong></td>
</tr>
<tr>
<td>boolean</td>
<td>Boolean</td>
</tr>
<tr>
<td>float</td>
<td>Float</td>
</tr>
<tr>
<td>double</td>
<td>Double</td>
</tr>
</tbody></table>
<p>常用于基本数据类型与字符串之间的转换。</p>
<p>Integer类：</p>
<p>Integer 类在对象中包装了一个基本类型 int 的值</p>
<p>该类提供了多个方法，能在 int 类型和 String 类型之间互相转换，还提供了处理 int 类型时非常有用的其他一些常量和方法</p>
<p>构造方法：</p>
<p>public Integer(int value)</p>
<p>public Integer(String s) 这个字符串s必须是由数字字符组成，不然就会报错。</p>
<p>int类型和String类型的相互转换</p>
<p>int – String：</p>
<p>\1. 字符串拼接：String s=””+number</p>
<p>\2. 调用String的方法：String  s= String.valueOf(number);</p>
<p>\3. int–Integer–String:： Integer i=new Integer(number);    String  s= i.toString();</p>
<p>\4. 调用Integer的方法：String  s= Integer.toString(number);</p>
<p>String – int:</p>
<p>\1. String–Integer–int: Integer  ii= new Integer(s);    int x = ii.intValue();</p>
<p>\2. 调用Integer的方法**:int x=Integer.parseInt(s); （这个方法很重要，是将字符串类型转换为基本数据类型，调用的是该基本数据类型的包装类的parseXxx方法）</p>
<p>成员方法：</p>
<p>常用的基本进制转换：</p>
<p>public static String toBinaryString(int i)   十进制到二进制</p>
<p>public static String toOctalString(int i)   十进制到八进制</p>
<p>public static String toHexString(int i)   十进制到十六进制</p>
<p>十进制到其他进制：</p>
<p>public static String toString(int i,int radix) radix代表int型数字（2-36），表示二到三十六进制（0-9，a-z）</p>
<p>其他进制到十进制</p>
<p>public static int parseInt(String s,int radix) 给出的s必须是radix可以转换的，不然会报错。</p>
<p>JDK5新特性：（通过反编译就可以发现）</p>
<p>自动装箱：把基本类型转换为包装类类型。</p>
<p>Integer x = new Integer(4);可以直接写成Integer x = 4;//自动装箱。</p>
<p>自动拆箱：把包装类类型转换为基本类型。</p>
<p>x  = x + 5;//自动拆箱。通过intValue方法。</p>
<p>在使用时，Integer  x = null;上面的代码就会出现NullPointerException。（所以要先判断对象是否为null）</p>
<p>1.5之后，加了个byte常量池：Integer的数据直接赋值，如果在-128到127之间，会直接从缓冲池里获取数据，而不会new一个新对象。</p>
<p>Character类：</p>
<p>Character 类在对象中包装一个基本类型 char 的值</p>
<p>此外，该类提供了几种方法，以确定字符的类别（小写字母，数字，等等），并将字符从大写转换成小写，小写转成大写</p>
<p>构造方法</p>
<p>public Character(char value)</p>
<p>成员方法：</p>
<p>public static boolean isUpperCase(char ch)  判断给定的字符是否是大写字符</p>
<p>public static boolean isLowerCase(char ch)  判断给定的字符是否是小写字符</p>
<p>public static boolean isDigit(char ch)  判断给定的字符是否是数字字符</p>
<p>public static char toUpperCase(char ch)  把给定的字符转换成大写字符</p>
<p>public static char toLowerCase(char ch)  把给定的字符转换成小写字符</p>
<h1 id="正则表达式regex（Pattern，Matcher）"><a href="#正则表达式regex（Pattern，Matcher）" class="headerlink" title="正则表达式regex（Pattern，Matcher）"></a>正则表达式regex（Pattern，Matcher）</h1><p>是指一个用来描述或者匹配一系列符合某个句法规则的字符串的单个字符串。其实就是一种规则。有自己特殊的应用。</p>
<p>组成规则：</p>
<p>规则字符在java.util.regex  Pattern类中</p>
<p>常见组成规则：</p>
<ol>
<li>字符：</li>
</ol>
<p>x  字符x。举例：’a’ 表示字符a</p>
<p>\  反斜线字符。因为一个\代表了转义。</p>
<p>\n  新行（换行）符  （‘\uoooA’）</p>
<p>\r   回车符  (‘\uoooD’)</p>
<ol start="2">
<li>字符类</li>
</ol>
<p>[abc]  a、b或c(简单类)  abc中的任意一个，但只能是一个</p>
<p>[^abc]  任何字符，除了a、b或c（否定）</p>
<p>[a-zA-Z]  a到z或A到Z，两头的字母包括在内（范围）</p>
<p>[0-9]  0到9的字符都包括</p>
<ol start="3">
<li>预定义字符类</li>
</ol>
<p>.  任何字符。如果就是.本身，应该写为. </p>
<p>\d  数字：[0-9]  在写的时候都是\d表示 因为要先转义。</p>
<p>\w  单词字符：[a-zA-Z_0-9]  在正则表达式里面组成单词的东西必须由这些东西组成（可以是A-Z,a-z，0-9都行）</p>
<ol start="4">
<li>边界匹配器</li>
</ol>
<p>^  行的开头</p>
<p>$  行的结尾</p>
<p>\b  单词边界  就是不是单词字符的地方。（单词间隔就用这个字符占）</p>
<ol start="5">
<li>数量词</li>
</ol>
<p>X？  X，一次或一次也没有</p>
<p>X*  X,零次或多次</p>
<p>X+  X，一次或多次</p>
<p>X{n}  X，恰好n次</p>
<p>X{n,}  X，至少n次</p>
<p>X{n,m}  X，至少n次，但不超过m次</p>
<p>应用：</p>
<p>判断功能</p>
<p>String类的public boolean matches(String regex)方法</p>
<p>分割功能</p>
<p>String类的public String[] split(String regex)方法  根据给定正则表达式的匹配拆分此字符串成字符串数组（相当于是把regex这个字符删除了，剩下的分成小片段）</p>
<p>（硬盘上的路径，我们应该用\替代\，把它分割是\\ 第一个\代表格式，第二个\代表转义，\代表字符串）</p>
<p>替换功能</p>
<p>String类的public String replaceAll(String regex,String replacement)方法： 使用给定的replacement替换此字符串所有匹配给定的正则表达式的子字符串  （应用：可以屏蔽一些子，密码的*等等）</p>
<p>获取功能</p>
<p>Pattern和Matcher类的使用</p>
<p>模式和匹配器的典型调用顺序：</p>
<p>\1. 把正则表达式编译成模式对象:Pattern p= Pattern.compile(“a*b”);</p>
<p>\2. 通过模式对象得到匹配器对象，这个时候需要的是被匹配的字符串:Matcher m=p.matcher(“aaaaab”);</p>
<p>\3. 调用匹配器对象的功能:</p>
<p>(1) boolean b=m.matches();  调用的matches方法尝试将整个输入序列与该模式匹配</p>
<p>(2) lookingAt  尝试将输入序列从头开始与该模式匹配</p>
<p>(3) find方法扫描输入序列以查找玉该模式匹配的下一个子序列</p>
<p>以上三种方法都是返回boolean类型。find方法后还有一个group方法用来获取匹配的子字符串。</p>
<h1 id="Math类-Random类-System类"><a href="#Math类-Random类-System类" class="headerlink" title="Math类/Random类/System类"></a>Math类/Random类/System类</h1><p>Math 类包含用于执行基本数学运算的方法，如初等指数、对数、平方根和三角函数。</p>
<p>成员变量：</p>
<p>publi static final double PI</p>
<p>publi static final double E</p>
<p>成员方法（都是静态，不用创建对象）</p>
<p>public static int abs(int a)  绝对值</p>
<p>public static double ceil(double a)  向上取整</p>
<p>public static double floor(double a)  向下取整</p>
<p>public static int max(int a,int b)  最大值</p>
<p>public static double pow(double a,double b)  a的b次幂</p>
<p>public static double random()  随机数[0.0,1.0)</p>
<p>public static int round(float a)  四舍五入（+0.5后向下取整）</p>
<p>public static double sqrt(double a)  正平方根</p>
<p>如果想得到任意范围的随机数：</p>
<p>int number=(int) (Math.random()*(end-start+1))+start;</p>
<p>Random类：util包中，此类的实例用于生成伪随机数流。</p>
<p>如果用<em>相同的种子</em>创建两个 Random 实例，则对每个实例进行相同的方法调用序列，它们将生成并返回相同的数字序列。</p>
<p>构造方法</p>
<p>public Random() 没有给种子，用的是默认种子，是当前时间的毫秒值</p>
<p>public Random(long seed) 给出指定的种子。  给定种子后，每次得到的随机数是相同的。</p>
<p>Random类成员方法</p>
<p>public int nextInt() 返回的是int范围内的随机数</p>
<p>public int nextInt(int n) 返回的是[0,n)范围内的随机数</p>
<p>System类：lang包</p>
<p>System 类包含一些有用的类字段和方法。它不能被实例化，全是静态。</p>
<p>成员方法</p>
<p>public static void gc() 运行垃圾回收器 不要一直调用们因为每一次执行垃圾回收，jvm都会强制启动垃圾回收器运行，这回耗费更多的系统资源，会与正常的java程序争夺资源，只有执行大量的对象的释放时，才会调用垃圾回收。</p>
<p>public static void exit(int status) 终止当前正在运行的java虚拟机，参数用作状态码，根据惯例，非0的状态码表示异常终止。（所以一般用System.exit（0）；相当于按了x退出，后面的都不运行）</p>
<p>public static long currentTimeMillis() 返回以毫秒为单位的当前时间（可以用来计时）</p>
<p>为什么是1970年1月1日0点：一种说法是java起源于UNIX系统，而UNIX系统认为1970.1.1是时间纪元。因为当时的操作系统是32位，换算下来相当于68.1年就会达到最大值，从而回到起始值，所以将1970.1.1当作起点，让这个时间推迟到2038年，而现在已经出现了64位操作系统，所以时间无线大，解决了这个问题。</p>
<p>public static void arraycopy(Object src,int srcPos,Object dest,int destPos,int length) 从指定原数组中复制一个数组，复制从指定的位置开始，到目标数组的指定位置结束。arraycopy中c小写，因为刚开始命名不规范改不回去了。src代表原数组，srcPos代表原数组中的起始位置。dest目标数组，destPos代表目标数组中的起始位置。length代表要复制的数组元素的数量。相当于原数组不变，新数组的长度也不变，只是把原数组中的length长度元素替换到了新数组中。</p>
<h1 id="BigInterger类-BigDecimal类"><a href="#BigInterger类-BigDecimal类" class="headerlink" title="BigInterger类/BigDecimal类"></a>BigInterger类/BigDecimal类</h1><p>BigInteger类：</p>
<p>可以让超过Integer范围内的数据进行运算</p>
<p>构造方法</p>
<p>public BigInteger(String val)</p>
<p>BigInteger类的成员方法</p>
<p>public BigInteger add(BigInteger val)  +</p>
<p>public BigInteger subtract(BigInteger val)  -</p>
<p>public BigInteger multiply(BigInteger val)  * </p>
<p>public BigInteger divide(BigInteger val)  /</p>
<p>public BigInteger[] divideAndRemainder(BigInteger val)  返回的是商和余数的数组</p>
<p>BigDecimal类：</p>
<p>由于在运算的时候，float类型和double很容易丢失精度，演示案例。所以，为了能精确的表示、计算浮点数，Java提供了BigDecimal（金融方面就要用）</p>
<p>是不可变的、任意精度的有符号十进制数。</p>
<p>构造方法</p>
<p>public BigDecimal(String val)</p>
<p>BigDecimal类的成员方法</p>
<p>public BigDecimal add(BigDecimal augend)</p>
<p>public BigDecimal subtract(BigDecimal subtrahend)</p>
<p>public BigDecimal multiply(BigDecimal multiplicand)</p>
<p>public BigDecimal divide(BigDecimal divisor)</p>
<p>public BigDecimal divide(BigDecimal divisor,int scale, int roundingMode) 商，几位小数，如何取舍</p>
<h1 id="Date类-DateFormat类-Calendar类"><a href="#Date类-DateFormat类-Calendar类" class="headerlink" title="Date类/DateFormat类/Calendar类"></a>Date类/DateFormat类/Calendar类</h1><p>Date类：</p>
<p>类 Date 表示特定的瞬间，精确到毫秒。  大部分方法已经过时。</p>
<p>构造方法</p>
<p>public Date()</p>
<p>public Date(long date)</p>
<p>成员方法</p>
<p>public long getTime()  获取时间，以毫秒为单位</p>
<p>public void setTime(long time)  设置时间</p>
<p>Syste.ou.println(new Date(0));  为什么打印的是8.而不是0.呢：因为存在系统时间和本地时间的间隔，系统时间依然是0点，而电脑的时区设置在东8区，所以打印的结果是8点。</p>
<p>DateFormat类：txt包</p>
<p>Date–String  格式化  public final String format(Date  date)</p>
<p>String–Date  解析   public Date parse(String source)</p>
<p>DateFormat 是日期/时间格式化子类的抽象类，它以与语言无关的方式格式化并解析日期或时间。</p>
<p>DateFormat可以进行日期和字符串的格式化和解析，但由于是抽象类，所以使用其子类SimpleDateFormat</p>
<p>SimpleDateFormat类的构造方法：</p>
<p>public SimpleDateFormat() 默认模式</p>
<p>public SimpleDateFormat(String pattern) 给定的模式</p>
<p>API中有对应的模式举例：</p>
<p>年  y</p>
<p>月  M</p>
<p>日  d</p>
<p>时  H</p>
<p>分  m</p>
<p>秒  s</p>
<p>2020年11月14日 17：58：20</p>
<p>yyyy年MM月dd日 HH:mm：ss</p>
<p>在把一个字符串解析为日期的时候，请注意格式必须和给定的字符串格式匹配。</p>
<p>成员方法</p>
<p>public final String format(Date date)</p>
<p>public Date parse(String source)</p>
<p>Calendar类</p>
<p>Date类的很多都被Calendar类替代了。</p>
<p>Calendar 类是一个抽象类，它为特定瞬间与一组诸如 YEAR、MONTH、DAY_OF_MONTH、HOUR 等 日历字段之间的转换提供了一些方法，并为操作日历字段（例如获得下星期的日期）提供了一些方法。</p>
<p>成员方法</p>
<p>public static Calendar getInstance() 其实相当于多态，表面上返回的是Calendar，其实返回的是Calendar的一个实现子类。</p>
<p>public int get(int field) 返回给定日历字段的值。日历类中的每个日历字段都是静态的成员变量，并且是int类型。</p>
<p>public void add(int field,int amount) 根据给定的日历字段和对应的时间，来对当前的日历进行操作。  amount可以是 -3  3</p>
<p>public final void set(int year,int month,int date) 设置当前日历的年月日。</p>
<p>month都是0-11  所以适当+1</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/26/4.9.java%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%B1%BB/" data-id="ckqk8k3ec004n2wwdeuu14sgz" data-title="java中常用类" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-10.4.项目踩坑" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/26/10.4.%E9%A1%B9%E7%9B%AE%E8%B8%A9%E5%9D%91/" class="article-date">
  <time class="dt-published" datetime="2021-03-26T10:50:02.000Z" itemprop="datePublished">2021-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/26/10.4.%E9%A1%B9%E7%9B%AE%E8%B8%A9%E5%9D%91/">项目踩坑</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>1.R是com.baomidou.mybatisplus.extension.api中写好的一个统一结果返回集。主要包含code，data，msg</p>
<p>**R(IErrorCode errorCode)**：    {data:null,code:errorCode.getCode(),msg:errorCode.getMsg()}</p>
<p><strong>R.ok(T data)</strong>:         默认情况下：{data:data,code:0,msg:执行成功}  如果data为Boolean类型且就是false:{data:false,code:-1,msg:操作失败}</p>
<p><strong>R.failed(String msg)</strong>:        {data:null,code:-1,msg:msg}</p>
<p><strong>R.failed(IErrorCode errorCode)</strong> :            {data:null,code:errorCode.getCode(),msg:errorCode.getMsg()}</p>
<p><strong>R.restResult(T data, IErrorCode errorCode)</strong>  :            {data:data,code:errorCode.getCode(),msg:errorCode.getMsg()}</p>
<p><strong>R.restResult(T data, long code, String msg)</strong>:            {data:data,code:code,msg:msg}</p>
<p>可以自己定义枚举类实现IErrorCode接口</p>
<p>遇到的问题：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">R.restResult(vo, ApiSuccessCode.YELLOW)</span><br><span class="line">当YELLOW定义为（-1，&quot;yellow&quot;)时，前端会toast出yellow。</span><br><span class="line">&#x2F;&#x2F;解决方法：将YELLOW定义为23456的不特殊数字，前端对这个数字进行判断</span><br></pre></td></tr></table></figure>

<p>2.多看文档的API，可能有封装好的方法</p>
<p>3.lombok里的@data可以自动装填get/set</p>
<p>4.docker里的时间比写入到mysql的时间少8小时。java程序在本地运行时间比在docker容器上运行时间迟8小时。</p>
<p>解决容器时区的方法是挂载宿主机的/etc/localtime 到容器的/etc/localtime，这时输入date命令容器时区显示正常，但是跑在容器中的java项目取到的时间却早了8小时。</p>
<p>查阅相关资料后得知： jre是通过<code>/etc/timezone</code> 配置文件读取本地时间的</p>
<p>接着我修改了/etc/timezone配置命令如下：<br><code>echo &quot;Asia/Shanghai&quot; &gt; /etc/timezone</code></p>
<p>重启了下容器，然后java项目中读取的时区恢复正常了</p>
<p>5.程序内微信的acces_token过期，返回值为400001，但是postman正常发送返回值为0。清下服务器上redis的数据库即可。</p>
<p><img src="C:\Users\swx\AppData\Roaming\Typora\typora-user-images\image-20210410201322948.png" alt="image-20210410201322948"></p>
<p>6.关于vue项目打包的问题：</p>
<p>花了一个下午，差不多搞明白了。</p>
<p>node.js有一个版本号，安装好node.js之后，会自动安装了npm。npm也有一个版本号。</p>
<p>npm可以再安装vue，再安装vue的脚手架：vue -cli，这两个的版本号是同一个。</p>
<p>​    1.注意这里的版本号。写vue项目用到什么的版本号都会写在vue项目里的package.json。版本过高或者过低都会报错。还要注意这几个软件的安装位置，最好都在一起。</p>
<p>​    2.特别坑。为什么每次打包都会出错？是因为你运行的VUE的文件外面还包了一个文件。运行的时候一般就是总文件，然后直接打包会成功，如果外面再有一个文件夹（比如你是从git上pull的项目，它外面会自带一个文件夹，你再直接打开这个文件就会出现这种情况），就会报错。</p>
<p>7.String类的int类型hex进制转10进制的时候：00000000会自动转为0，需要转换为00000000再转为string类型，可以用String.format(“%08d”,i)方法</p>
<p>8.vue页面的图片插入问题：require（’相对路径’）</p>
<p>服务器上的/xx/xx/xxx.jpg</p>
<p>9.HttpServletRequest </p>
<p>public void weixin(@RequestParam(name = “openid”, defaultValue = “”) String openid, @RequestBody String xml)</p>
<p>10.将一个xml格式的string类型数据进行解析：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">String str= sb.toString();</span><br><span class="line">        Document doc = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            doc = DocumentHelper.parseText(str);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (DocumentException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        Element root = doc.getRootElement();<span class="comment">// 指向根节点  &lt;root&gt;</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//这里的是Element，需要转换为String类型</span></span><br><span class="line">            Element mark=root.element(<span class="string">&quot;header&quot;</span>).element(<span class="string">&quot;mark&quot;</span>);</span><br><span class="line">            Element second=root.element(<span class="string">&quot;body&quot;</span>).element(<span class="string">&quot;data&quot;</span>).element(<span class="string">&quot;first&quot;</span>).element(<span class="string">&quot;second&quot;</span>);</span><br><span class="line">            <span class="comment">//获取xml的节点内容</span></span><br><span class="line">            System.out.println(mark.getTextTrim());</span><br><span class="line">            System.out.println(second.getTextTrim());</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将xml存入map</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, String&gt; <span class="title">parseXml</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 将解析结果存储在HashMap中</span></span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">        <span class="comment">// 从request中取得输入流</span></span><br><span class="line">        InputStream inputStream = request.getInputStream();</span><br><span class="line">        <span class="comment">// 读取输入流</span></span><br><span class="line">        SAXReader reader = <span class="keyword">new</span> SAXReader();</span><br><span class="line">        Document document = reader.read(inputStream);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 得到xml根元素</span></span><br><span class="line">        Element root = document.getRootElement();</span><br><span class="line"><span class="comment">//获得子元素下的元素</span></span><br><span class="line">        Iterator&lt;Element&gt; iterator = root.elementIterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            Element e = iterator.next();</span><br><span class="line">            map.put(e.getName(), e.getText());</span><br><span class="line">            <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">            List&lt;Element&gt; sonList = e.elements();</span><br><span class="line">            <span class="keyword">for</span> (Element son : sonList) &#123;</span><br><span class="line">                map.put(son.getName(), son.getText());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        inputStream.close();</span><br><span class="line">        inputStream = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<p>11.idea里的文件名字变蓝是因为文件里的内容被修改过，没有提交到版本库。变红是新增的文件。</p>
<p>12.微信回复消息的时候，<code>&lt;Content&gt;&lt;![CDATA[&quot;+text+&quot;]]&gt;&lt;/Content&gt;</code>中的text文本乱码成？？？？？</p>
<p>是由于spring mvc的@ResponseBody注解返回字符串时默认返回的是“ISO-8859-1”而不是utf-8。</p>
<p>  虽然大家的项目里面可能都有字符编码过滤器，但是有一个问题在这里，我们设置response.setContentType(“text/html; charset=utf-8”);时都是在chain.doFilter(request, response);之前设置的，也就是过滤器前处理是设置的响应编码格式，之所以不在后处理时设置是因为后处理时响应内容已经生成此时设置是无效的，必须在响应内容生成之前设置响应编码格式。</p>
<p>问题就出在这个地方，我们虽然设置了响应编码格式，可是spring mvc在有@ResponseBody注解的响应是，篡改了我们的响应编码！<br>  相信大家对spring的Message Converters不会陌生，HttpMessageConverters<T>这个接口是用来把请求信息转化为对象T，把T输出为响应信息的一个接口，在该接口众多的实现类中有一个实现类StringHttpMessageConverter，这个类的作用就是把请求信息转换未字符串，而@ResponseBody注解就是默认调用的这个类，而这个类中默认的编码格式就是ISO-8859-1，所以罪魁祸首找到了</p>
<p>原因：</p>
<p>由于spring默认对String类型的返回的编码采用的是 StringHttpMessageConverter<br>&gt;&gt;&gt; spring mvc的一个bug，spring MVC有一系列HttpMessageConverter去处理用@ResponseBody注解的返回值，如返回list则使用MappingJacksonHttpMessageConverter。返回string，则使用StringHttpMessageConverter。这个convert使用的是字符集是iso-8859-1,而且是final的：<br>public static final Charset DEFAULT_CHARSET = Charset.forName(“ISO-8859-1”);</p>
<p>解决：</p>
<p>在RequestMapping里加上<code> produces = &quot;text/html;charset=UTF-8&quot;</code>//只针对单个方法生效，不全局生效</p>
<p>例：@RequestMapping(value = “/weixin/validation” , method = RequestMethod.POST , produces = “text/html;charset=UTF-8”)</p>
<p>13.程序内是生成6位数字的验证码结果，通过阿里云短信发送出来有时只有5位：因为返回到阿里云里面的验证码，会被识别为数字。然后第一位数字是0就默认去掉了。</p>
<p>提供的解决方法：</p>
<p>​    1.随机生成数开头为0的话，继续随机：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getRandom</span><span class="params">()</span></span>&#123; 	<span class="comment">//递归方法</span></span><br><span class="line">    <span class="keyword">int</span> number = <span class="keyword">new</span> Random().nextInt(<span class="number">10</span>); 	</span><br><span class="line">    <span class="keyword">if</span>(<span class="number">0</span> == number)&#123; 		</span><br><span class="line">        <span class="keyword">return</span> getRandom(); 	</span><br><span class="line">    &#125; 	</span><br><span class="line">    <span class="keyword">return</span> number; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    2.是在验证码外层拼接一个单引号 ：<code>&quot;&#123;code:&quot;+&quot;&#39;&quot;+code+&quot;&#39;&quot;+&quot;&#125;&quot;</code>     为什么加了一个单引号就可以实现？阿里云的接口定义这里应该是一个json格式。</p>
<p>14.记录表和状态表：状态表的主键唯一，unquire。记录表主键为normal，可以重复多条。</p>
<p>15.关于移动端的v-console按钮：</p>
<p><img src="/10.4.%E9%A1%B9%E7%9B%AE%E8%B8%A9%E5%9D%91/image-20210514122852087.png" alt="image-20210514122852087"></p>
<p>当不需要显示时：在main.js文件中将new Vconsole()注释掉即可。</p>
<p>16.spring MVC接收请求体总是多一个等号</p>
<p>例：我发送的请求体是字符串aaa，spring MVC 接收到的是aaa=</p>
<p>//因为请求的content type不对，应该是:<strong>application/json;charset=UTF-8</strong>。而我设置的content type是:application/x-www-form-urlencoded;charset=UTF-8</p>
<p>原因是后端接收的是context-type:application/json<br>而axios的post请求默认是context-type: application/x-www-form-urlencoded<br>这里在前端发起请求前，在请求拦截器中设置一下context-type为json就好了</p>
<p>因为默认是以键值对形式传递<br>前端传过来的内容是放在k中，v为空，这时候取值时，内容就变成了k=,也就是为什么后端接收的数据，末尾多了一个＝</p>
<p>17.qw条件构造器连续使用的问题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QueryWrapper qw = <span class="keyword">new</span> QueryWrapper();</span><br><span class="line">        qw.eq(<span class="string">&quot;node_num&quot;</span>, <span class="string">&quot;123&quot;</span>);</span><br><span class="line">        Nodes nodes = nodesService.getOne(qw);</span><br><span class="line">       </span><br><span class="line">        qw = <span class="keyword">new</span> QueryWrapper();<span class="comment">//需要新加这一行代码才能保证上下两个查询语句互不相连。如果没有这条语句，下面的查询语句会有两个限定条件</span></span><br><span class="line">        qw.eq(<span class="string">&quot;user_id&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">        List&lt;Bind&gt; bind = bindService.list(qw);</span><br></pre></td></tr></table></figure>

<ol start="18">
<li> qs.stringify（this.form）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uid&#x3D;cs11&amp;pwd&#x3D;000000als&amp;username&#x3D;cs11&amp;password&#x3D;000000als</span><br></pre></td></tr></table></figure>

<p>qs是一个npm仓库所管理的包,可通过<code>npm install qs</code>命令进行安装</p>
<ol>
<li>qs.parse()将URL解析成对象的形式</li>
<li>qs.stringify()将对象 序列化成URL的形式，以&amp;进行拼接</li>
</ol>
<p>JSON中同样存在stringify方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;uid&quot;:&quot;cs11&quot;,&quot;pwd&quot;:&quot;000000als&quot;,&quot;username&quot;:&quot;cs11&quot;,&quot;password&quot;:&quot;000000als&quot;&#125;   </span><br></pre></td></tr></table></figure>



<p>当前端页面需要借助url来往后台传递<strong>参数</strong>的时候我们通常会这样写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var  url&#x3D;&quot;base&#x2F;exchangeController&#x2F;1&#x2F;searchExchanges?code&#x3D;&quot;+code+&quot;&amp;name&#x3D;&quot;+name;</span><br></pre></td></tr></table></figure>

<p>   如果你的name传递的是中文的话，在谷歌浏览器中传递到后台的数据是正常的（其他浏览器未测试），但是在IE浏览器中，后台接受到的将会是乱码，这是因为IE浏览器没有将你传递的<strong>参数</strong>序列化<strong>为URL 编码文本字符串，后台在解码你的</strong>参数的时候就会形成乱码，解决方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var  param&#x3D;&#123;&quot;code&quot;:code,&quot;name&quot;:name&#125;;</span><br><span class="line">var  url&#x3D;&quot;base&#x2F;exchangeController&#x2F;1&#x2F;searchExchanges&quot;+&quot;?&quot;+$.param(param);</span><br></pre></td></tr></table></figure>

<p>　　借助jquery的param方法将你要携带的<strong>参数</strong>对象化之后，再<strong>序列化</strong>一下，这样IE浏览器下即使你传递中文，后台接收到的数据也是正常的中文了</p>
<p>19.前端调试的时候：console.log(A) 输出的数组A显示是Object，而不是包含的值，但只是打印出来的log是Object，在引用时候还是数组的值。需要查看打印的值（将数组A转换为json字符串）：console.log(JSON.stringify(A))  </p>
<p>20.前端页面动态赋值时不起作用，在属性前面加<code>:</code>绑定后生效。</p>
<p>21.前端页面的css样式复用问题：原页面a.vue用的v-router去跳转到b.vue，然后退回来时a.vue的样式全乱了，我在b.vue中导入了一个css文件，然后页面调试是看到退回后styles是不变的，也就是说a.vue用的不是原来的样式而是b.vue中导入的样式，刷新一下的话就又可以了。</p>
<p>怎么让vue不去使用上个页面的样式，或者说让当前vue只用自己写的当前样式：两个名字不要起一样的，就是两个css样式了。</p>
<p>22.导航下拉菜单被遮住或显示不全：</p>
<p>原因：层叠关系错误</p>
<p>解决：设置z-index，最上面的层级值越大。但是必须有两个前提条件：1.必须是同级。2.二者分别设定了position:relative 或 absolute 或 fixed；</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/26/10.4.%E9%A1%B9%E7%9B%AE%E8%B8%A9%E5%9D%91/" data-id="ckqk8k3cv000a2wwdawjub8qu" data-title="项目踩坑" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-4.1.初识java：特性、版本、安装" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/26/4.1.%E5%88%9D%E8%AF%86java%EF%BC%9A%E7%89%B9%E6%80%A7%E3%80%81%E7%89%88%E6%9C%AC%E3%80%81%E5%AE%89%E8%A3%85/" class="article-date">
  <time class="dt-published" datetime="2021-03-26T03:42:16.000Z" itemprop="datePublished">2021-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/26/4.1.%E5%88%9D%E8%AF%86java%EF%BC%9A%E7%89%B9%E6%80%A7%E3%80%81%E7%89%88%E6%9C%AC%E3%80%81%E5%AE%89%E8%A3%85/">初识java</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="java概述"><a href="#java概述" class="headerlink" title="java概述"></a>java概述</h1><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><h3 id="1-简单"><a href="#1-简单" class="headerlink" title="1.简单"></a>1.简单</h3><p>语法规则和c++类似，是对C++的简化和提高，使用接口取代了多重继承，并取消了指针，java还有垃圾自动收集。</p>
<p>提供了丰富的类库，API文档和第三方开发包，还有大量基于java 的开源项目。</p>
<h3 id="2-面向对象（Object-Oriented）"><a href="#2-面向对象（Object-Oriented）" class="headerlink" title="2.面向对象（Object Oriented）"></a>2.面向对象（Object Oriented）</h3><p>是对现实世界的一种抽象，面向对象会把相关的数据和方法组织为一个整体来看待。所有的元素都要通过类和对象来访问。</p>
<h3 id="3-分布性"><a href="#3-分布性" class="headerlink" title="3.分布性"></a>3.分布性</h3><p>Java语言支持Internet应用的开发，java中有net.api，他提供了用于网络应用编程的类库，包括URL、URLConnection、Socket、ServerSocket等。Java的RMI（远程方法激活）机制也是开发分布式应用的重要手段。</p>
<p>包括操作分布和数据分布。操作分布是指在多个不同的主机上布置相关操作，而数据分布是将数据分别存放在多个不同的主机上。</p>
<h3 id="4-平台独立性和可移植性（write-once-run-anywhere）"><a href="#4-平台独立性和可移植性（write-once-run-anywhere）" class="headerlink" title="4.平台独立性和可移植性（write once ,run anywhere）"></a>4.平台独立性和<em><strong>可移植性</strong></em>（write once ,run anywhere）</h3><p>核心是jvm。</p>
<p>在应用中编写java代码，用Eclipse或javac把java代码编译为.class文件，然后把.class文件打成.jar文件，.jar文件可以在windows、MacOS、Linux系统下运行。</p>
<h3 id="5-解释性"><a href="#5-解释性" class="headerlink" title="5.解释性"></a>5.解释性</h3><p>运行java程序需要解释器，任何移植了java解释器的计算机或其他设备都可以用java字节码进行解释运行。</p>
<h3 id="6-安全性"><a href="#6-安全性" class="headerlink" title="6. 安全性"></a>6. 安全性</h3><p>删除了类C语言中的指针和内存释放等语法，有效避免了用户对内存的非法操作。Java程序代码要经过代码校验，指针校验等很多测试步骤才能运行。</p>
<h3 id="7-健壮性"><a href="#7-健壮性" class="headerlink" title="7. 健壮性"></a>7. 健壮性</h3><p>Java的强类型机制，异常处理，垃圾的自动收集等。开发工具如：Eclipse、NetBeans。</p>
<h3 id="8-多线程"><a href="#8-多线程" class="headerlink" title="8.多线程"></a>8.多线程</h3><p>Java在用户空间实现的多线程（实现多线程的方式有：在用户空间、在内核空间、在用户和内核空间中混合实现）应用程序在同一时间并行执行多项任务，而且相应的同步机制可以保证不同的线程可以正确的共享数据。</p>
<h3 id="9-高性能"><a href="#9-高性能" class="headerlink" title="9.高性能"></a>9.高性能</h3><p>Hotspot JVM提供了JIT（just in time）编译器即动态编译器，能够在运行时将代码编译为机器码，运行效率比较高。</p>
<h3 id="10-动态"><a href="#10-动态" class="headerlink" title="10.动态"></a>10.动态</h3><p>可以动态调整库内方法和增加变量，而客户端不需要作任何更改。</p>
<h3 id="11-开源"><a href="#11-开源" class="headerlink" title="11.开源"></a>11.<em>开源</em></h3><p> java的这个特性决定了它的广泛应用。</p>
<h2 id="运行和工作原理"><a href="#运行和工作原理" class="headerlink" title="运行和工作原理"></a>运行和工作原理</h2><p>Java源代码（HelloWorld.java）  <a href="%E7%BB%8Fjavac%E7%BC%96%E8%AF%91">–&gt;</a>   java字节码文件（HelloWorld.class）<a href="%E7%BB%8Fjava%E6%89%A7%E8%A1%8C">–&gt;</a>  机器码  –&gt;  运行结果</p>
<p>1.首先编写java源代码程序，扩展名为.java</p>
<p>2.在命令行模式中，输入javac命令:<code>javac 源文件名.java</code>对源代码进行编译，生成字节码文件,扩展名为.class</p>
<p>3.编译完成后，如果没有报错信息，输入java命令:<code>java 类名</code>对class字节码文件进行解释运行，执行时不需要添加.class扩展名</p>
<p>这里是我最早接触java时，还没有用到开发工具，在cmd命令行进行的HelloWorld输出。当时踩得坑如下：</p>
<ul>
<li><p>文件隐藏了扩展名</p>
</li>
<li><p>javac+文件名，java+类名 （所以当时需要文件名和类名一致）</p>
</li>
<li><p>严格区分大小写</p>
</li>
<li><p>非法字符：/65307确是中文问题，要保证全部英文状态</p>
</li>
<li><p>括号成对</p>
</li>
<li><p>最后贴一个梦开始的main方法：</p>
<p>public static void main(String[] args){</p>
<p>​    System.out.println(“HelloWorld”);</p>
<p>}</p>
</li>
</ul>
<h2 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h2><table><thead><tr><th>版本</th><th>名称</th><th>发行日期</th></tr></thead><tbody><tr><td>JDK 1.0</td><td>Oak(橡树)</td><td>1996-01-23</td></tr><tr><td>JDK 1.1</td><td>none（无）</td><td>1997-02-19</td></tr><tr><td>JDK 1.1.4</td><td>Sparkler（宝石）</td><td>1997-09-12</td></tr><tr><td>JDK 1.1.5</td><td>Pumpkin（南瓜）</td><td>1997-12-13</td></tr><tr><td>JDK 1.1.6</td><td>Abigail（阿比盖尔–女子名）</td><td>1998-04-24</td></tr><tr><td>JDK 1.1.7</td><td>Brutus（布鲁图–古罗马政治家和将军）</td><td>1998-09-28</td></tr><tr><td>JDK 1.1.8</td><td>Chelsea（切尔西–城市名）</td><td>1999-04-08</td></tr><tr><td>J2SE 1.2</td><td>Playground（运动场）</td><td>1998-12-04</td></tr><tr><td>J2SE 1.2.1</td><td>none（无）</td><td>1999-03-30</td></tr><tr><td>J2SE 1.2.2</td><td>Cricket（蟋蟀）</td><td>1999-07-08</td></tr><tr><td>J2SE 1.3</td><td>Kestrel（美洲红隼）</td><td>2000-05-08</td></tr><tr><td>J2SE 1.3.1</td><td>Ladybird（瓢虫）</td><td>2001-05-17</td></tr><tr><td>J2SE 1.4.0</td><td>Merlin（灰背隼）</td><td>2002-02-13</td></tr><tr><td>J2SE 1.4.1</td><td>grasshopper（蚱蜢）</td><td>2002-09-16</td></tr><tr><td>J2SE 1.4.2</td><td>Mantis（螳螂）</td><td>2003-06-26</td></tr><tr><td>Java SE 5.0 (1.5.0)</td><td>Tiger（老虎）</td><td>2004-09-30</td></tr><tr><td>Java SE 6.0 (1.6.0)</td><td>Mustang（野马）</td><td>2006-04</td></tr><tr><td>Java SE 7.0 (1.7.0)</td><td>Dolphin（海豚）</td><td>2011-07-28</td></tr><tr><td>Java SE 8.0 (1.8.0)</td><td>Spider（蜘蛛）</td><td>2014-03-18</td></tr><tr><td>Java SE 9.0</td><td>none（无）</td><td>2017-09-21</td></tr><tr><td>Java SE 10.0</td><td>none（无）</td><td>2018-03-21</td></tr><tr><td>Java SE 11.0</td><td>none（无）</td><td>2018-09-25</td></tr></tbody></table>

<p>这里的JAVA就是指JDK开发工具</p>
<h3 id="Java2"><a href="#Java2" class="headerlink" title="Java2"></a>Java2</h3><p>1998年12月8日，Sun公司发布了第二代Java平台（简称为Java2）的3个版本</p>
<p>J2ME（Java2 Micro Edition，Java2平台的微型版）：主要用于嵌入式系统的开发，应用于移动、无线及有限资源的环境</p>
<p>J2SE（Java 2 Standard Edition，Java 2平台的标准版）：应用于桌面应用软件的编程</p>
<p>J2EE（Java 2 Enterprise Edition，Java 2平台的企业版）：应用于基于Java的应用服务器</p>
<h3 id="Java5"><a href="#Java5" class="headerlink" title="Java5"></a>Java5</h3><p>2004年9月30日</p>
<h4 id="1-自动拆装箱"><a href="#1-自动拆装箱" class="headerlink" title="1.自动拆装箱"></a>1.自动拆装箱</h4><h4 id="2-泛型"><a href="#2-泛型" class="headerlink" title="2.泛型"></a>2.泛型</h4><h4 id="3-增强for"><a href="#3-增强for" class="headerlink" title="3.增强for"></a>3.增强for</h4><p>说明：是for循环的一种，简化数组和Collection集合的遍历（增强for就是来替代迭代器的）</p>
<p>格式：</p>
<p>for(元素数据类型 变量 : 数组或者Collection集合) {</p>
<p>​        使用变量即可，该变量就是元素</p>
<p>​    }</p>
<p>注意事项：增强for的目标要先进行不为null的判断，然后再使用</p>
<h4 id="4-静态导入"><a href="#4-静态导入" class="headerlink" title="4.静态导入"></a>4.静态导入</h4><p>说明：可以直接导入到方法级别</p>
<p>格式：import static 包名….类名.方法名;</p>
<p>注意事项：</p>
<p>​    方法必须是静态的</p>
<p>​    如果有多个同名的静态方法，容易不知道使用谁?这个时候要使用的话，就必须在调用前面加静态的包，类名前缀。由此可见，意义不大，所以一般不用。</p>
<h4 id="5-可变参数"><a href="#5-可变参数" class="headerlink" title="5.可变参数"></a>5.可变参数</h4><p>说明：定义方法的时候不知道该定义多少个参数，当调用的时候才知道需要几个参数。</p>
<p>格式：</p>
<p>public static int sunm(int… a){}</p>
<p>​    修饰符 返回值类型 方法名(数据类型…  变量名){</p>
<p>}</p>
<p>注意事项：</p>
<p>​    这里的变量(a)其实是一个数组</p>
<p>​    如果一个方法有可变参数，并且有多个参数，那么，可变参数肯定是最后一个（如果不是最后一个，相当于前面的都包含了，最后单独的多出来了，所以就会报错。只有当可变参数是最后一个才是正常的）</p>
<p>Arrays工具类中的一个方法：把数组转成集合</p>
<p><code>public  static  &lt;T&gt;  List&lt;T&gt;  asList(T... a)</code></p>
<p>注意事项：集合的长度不能改变，因为其本质还是一个数组。（所以对集合进行操作时，只要改变了其长度就会报错）</p>
<h4 id="6-枚举"><a href="#6-枚举" class="headerlink" title="6.枚举"></a>6.枚举</h4><h3 id="Java7"><a href="#Java7" class="headerlink" title="Java7"></a>Java7</h3><h4 id="1-二进制字面量"><a href="#1-二进制字面量" class="headerlink" title="1.二进制字面量"></a>1.二进制字面量</h4><p>JDK7开始，可以用二进制来表示整数（byte,short,int和long）。</p>
<p>好处：可以使代码更容易被理解。语法非常简单，只要在二进制数值前面加 0b或者0B</p>
<h4 id="2-数字字面量可以出现下划线"><a href="#2-数字字面量可以出现下划线" class="headerlink" title="2.数字字面量可以出现下划线"></a>2.数字字面量可以出现下划线</h4><p>为了增强对数值的阅读性，如我们经常把数据用逗号分隔一样。JDK7提供了_对数据进行分隔。</p>
<p>注意事项：</p>
<p>​    不能出现在进制标识和数值之间</p>
<p>​    不能出现在数值开头和结尾</p>
<p>​    不能出现在小数点旁边</p>
<h4 id="3-switch-语句可以用字符串"><a href="#3-switch-语句可以用字符串" class="headerlink" title="3.switch 语句可以用字符串"></a>3.switch 语句可以用字符串</h4><h4 id="4-泛型简化（泛型推断）"><a href="#4-泛型简化（泛型推断）" class="headerlink" title="4.泛型简化（泛型推断）"></a>4.泛型简化（泛型推断）</h4><h4 id="5-异常的多个catch合并"><a href="#5-异常的多个catch合并" class="headerlink" title="5.异常的多个catch合并"></a>5.异常的多个catch合并</h4><p>出现了一个新的异常处理方案：</p>
<p>try {</p>
<p>} catch (异常名1  |  异常名2  |  异常名3   …   变量 ) {</p>
<p>​    }</p>
<p>这个方式虽然简洁，但是也不够好：</p>
<p>A：处理方式是一致的。（实际开发中，好多时候可能就是针对同类型的问题，给出同一个处理）</p>
<p>B：多个异常间必须是平级关系</p>
<h4 id="6-try-with-resources-语句"><a href="#6-try-with-resources-语句" class="headerlink" title="6.try-with-resources 语句"></a>6.try-with-resources 语句</h4><p>try ( 必须是java.lang.AutoCloseable的子类对象 ) { … }</p>
<p>好处：</p>
<p>​    资源自动释放，不需要close()了</p>
<p>​    把需要关闭资源的部分都定义在（）中就ok了</p>
<p>这个接口的子类主要是流体系的对象(JDK7的API中AutoCloseable的子类)</p>
<h3 id="Java8"><a href="#Java8" class="headerlink" title="Java8"></a>Java8</h3><p>2014年3月18日，普遍使用的版本，是java5以来最具革命性的版本。支持32位</p>
<h4 id="1-允许接口中有默认方法，静态方法实现"><a href="#1-允许接口中有默认方法，静态方法实现" class="headerlink" title="1.允许接口中有默认方法，静态方法实现"></a>1.允许接口中有默认方法，静态方法实现</h4><h4 id="2-Lambda表达式"><a href="#2-Lambda表达式" class="headerlink" title="2.Lambda表达式"></a>2.Lambda表达式</h4><p><strong>一、引言</strong></p>
<p>java8最大的特性就是引入Lambda表达式，即函数式编程，可以将行为进行传递。总结就是：使用不可变值与函数，函数对不可变值进行处理，映射成另一个值。</p>
<p><strong>二、Java重要的函数式接口</strong></p>
<p><strong>1、什么是函数式接口</strong></p>
<p>函数接口是只有一个抽象方法的接口，用作 Lambda 表达式的类型。使用@FunctionalInterface注解修饰的类，编译器会检测该类是否只有一个抽象方法或接口，否则，会报错。可以有多个默认方法，静态方法。</p>
<p><strong>1.1 java8自带的常用函数式接口。</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbuflAIHxeAlDrM7xK8JrNAicwEo07y8LxWXMdBEbwsXQIyX0DLuHmbP1RKpKyzU9iavbiaHrwrJdMu5tg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Predicate&lt;Integer&gt; predicate &#x3D; x -&gt; x &gt; 185;</span><br><span class="line">        Student student &#x3D; new Student(&quot;9龙&quot;, 23, 175);</span><br><span class="line">        System.out.println(</span><br><span class="line">            &quot;9龙的身高高于185吗？：&quot; + predicate.test(student.getStature()));</span><br><span class="line"></span><br><span class="line">        Consumer&lt;String&gt; consumer &#x3D; System.out::println;</span><br><span class="line">        consumer.accept(&quot;命运由我不由天&quot;);</span><br><span class="line"></span><br><span class="line">        Function&lt;Student, String&gt; function &#x3D; Student::getName;</span><br><span class="line">        String name &#x3D; function.apply(student);</span><br><span class="line">        System.out.println(name);</span><br><span class="line"></span><br><span class="line">        Supplier&lt;Integer&gt; supplier &#x3D; </span><br><span class="line">            () -&gt; Integer.valueOf(BigDecimal.TEN.toString());</span><br><span class="line">        System.out.println(supplier.get());</span><br><span class="line"></span><br><span class="line">        UnaryOperator&lt;Boolean&gt; unaryOperator &#x3D; uglily -&gt; !uglily;</span><br><span class="line">        Boolean apply2 &#x3D; unaryOperator.apply(true);</span><br><span class="line">        System.out.println(apply2);</span><br><span class="line"></span><br><span class="line">        BinaryOperator&lt;Integer&gt; operator &#x3D; (x, y) -&gt; x * y;</span><br><span class="line">        Integer integer &#x3D; operator.apply(2, 3);</span><br><span class="line">        System.out.println(integer);</span><br><span class="line"></span><br><span class="line">        test(() -&gt; &quot;我是一个演示的函数式接口&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 演示自定义函数式接口使用</span><br><span class="line">     *</span><br><span class="line">     * @param worker</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public static void test(Worker worker) &#123;</span><br><span class="line">        String work &#x3D; worker.work();</span><br><span class="line">        System.out.println(work);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public interface Worker &#123;</span><br><span class="line">        String work();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;9龙的身高高于185吗？：false</span><br><span class="line">&#x2F;&#x2F;命运由我不由天</span><br><span class="line">&#x2F;&#x2F;9龙</span><br><span class="line">&#x2F;&#x2F;10</span><br><span class="line">&#x2F;&#x2F;false</span><br><span class="line">&#x2F;&#x2F;6</span><br><span class="line">&#x2F;&#x2F;我是一个演示的函数式接口</span><br></pre></td></tr></table></figure>

<p>以上演示了lambda接口的使用及自定义一个函数式接口并使用。<strong>下面，我们看看java8将函数式接口封装到流中如何高效的帮助我们处理集合。</strong></p>
<p>注意：Student::getName例子中这种编写lambda表达式的方式称为方法引用。格式为ClassNmae::methodName。是不是很神奇，java8就是这么迷人。</p>
<blockquote>
<p>示例：本篇所有示例都基于以下三个类。OutstandingClass：班级；Student：学生；SpecialityEnum：特长。</p>
</blockquote>
<p><img src="/4.1.%E5%88%9D%E8%AF%86java%EF%BC%9A%E7%89%B9%E6%80%A7%E3%80%81%E7%89%88%E6%9C%AC%E3%80%81%E5%AE%89%E8%A3%85/640" alt="图片"></p>
<p><strong>1.2 惰性求值与及早求值</strong></p>
<p>惰性求值：只描述Stream，操作的结果也是Stream，这样的操作称为惰性求值。惰性求值可以像建造者模式一样链式使用，最后再使用及早求值得到最终结果。</p>
<p>及早求值：得到最终的结果而不是Stream，这样的操作称为及早求值。</p>
<p><strong>2、常用的流</strong></p>
<p><strong>2.1 collect(Collectors.toList())</strong></p>
<p>将流转换为list。还有toSet()，toMap()等。及早求值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class TestCase &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Student&gt; studentList &#x3D; Stream.of(new Student(&quot;路飞&quot;, 22, 175),</span><br><span class="line">                new Student(&quot;红发&quot;, 40, 180),</span><br><span class="line">                new Student(&quot;白胡子&quot;, 50, 185)).collect(Collectors.toList());</span><br><span class="line">        System.out.println(studentList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;输出结果</span><br><span class="line">&#x2F;&#x2F;[Student&#123;name&#x3D;&#39;路飞&#39;, age&#x3D;22, stature&#x3D;175, specialities&#x3D;null&#125;, </span><br><span class="line">&#x2F;&#x2F;Student&#123;name&#x3D;&#39;红发&#39;, age&#x3D;40, stature&#x3D;180, specialities&#x3D;null&#125;, </span><br><span class="line">&#x2F;&#x2F;Student&#123;name&#x3D;&#39;白胡子&#39;, age&#x3D;50, stature&#x3D;185, specialities&#x3D;null&#125;]</span><br></pre></td></tr></table></figure>

<p><strong>2.2 filter</strong></p>
<p>顾名思义，起过滤筛选的作用。内部就是Predicate接口。惰性求值。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/eQPyBffYbuflAIHxeAlDrM7xK8JrNAicwsOWrISBwKtdpkszkznM1Z3OMMupFgvZ8vIw4tWumhm779kibicuiccb1A/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>比如我们筛选出出身高小于180的同学。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class TestCase &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Student&gt; students &#x3D; new ArrayList&lt;&gt;(3);</span><br><span class="line">        students.add(new Student(&quot;路飞&quot;, 22, 175));</span><br><span class="line">        students.add(new Student(&quot;红发&quot;, 40, 180));</span><br><span class="line">        students.add(new Student(&quot;白胡子&quot;, 50, 185));</span><br><span class="line"></span><br><span class="line">        List&lt;Student&gt; list &#x3D; students.stream()</span><br><span class="line">            .filter(stu -&gt; stu.getStature() &lt; 180)</span><br><span class="line">            .collect(Collectors.toList());</span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;输出结果</span><br><span class="line">&#x2F;&#x2F;[Student&#123;name&#x3D;&#39;路飞&#39;, age&#x3D;22, stature&#x3D;175, specialities&#x3D;null&#125;]</span><br></pre></td></tr></table></figure>

<p><strong>2.3 map</strong> </p>
<p>转换功能，内部就是Function接口。惰性求值</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/eQPyBffYbuflAIHxeAlDrM7xK8JrNAicwUcEAL9TC7agTHutUPjfvuBgptdprp6f9hWJibdzSMeKkicBDo4S8qTxw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class TestCase &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Student&gt; students &#x3D; new ArrayList&lt;&gt;(3);</span><br><span class="line">        students.add(new Student(&quot;路飞&quot;, 22, 175));</span><br><span class="line">        students.add(new Student(&quot;红发&quot;, 40, 180));</span><br><span class="line">        students.add(new Student(&quot;白胡子&quot;, 50, 185));</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; names &#x3D; students.stream().map(student -&gt; student.getName())</span><br><span class="line">                .collect(Collectors.toList());</span><br><span class="line">        System.out.println(names);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;输出结果</span><br><span class="line">&#x2F;&#x2F;[路飞, 红发, 白胡子]</span><br></pre></td></tr></table></figure>

<p>例子中将student对象转换为String对象，获取student的名字。</p>
<p><strong>2.4 flatMap</strong></p>
<p>将多个Stream合并为一个Stream。惰性求值</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/eQPyBffYbuflAIHxeAlDrM7xK8JrNAicwgrbFtttUaiadNQce8ficHgoxxIicia9p0xXL7Ce8ibFsk0u0hRYLfvgWPxw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class TestCase &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Student&gt; students &#x3D; new ArrayList&lt;&gt;(3);</span><br><span class="line">        students.add(new Student(&quot;路飞&quot;, 22, 175));</span><br><span class="line">        students.add(new Student(&quot;红发&quot;, 40, 180));</span><br><span class="line">        students.add(new Student(&quot;白胡子&quot;, 50, 185));</span><br><span class="line"></span><br><span class="line">        List&lt;Student&gt; studentList &#x3D; Stream.of(students,</span><br><span class="line">                asList(new Student(&quot;艾斯&quot;, 25, 183),</span><br><span class="line">                        new Student(&quot;雷利&quot;, 48, 176)))</span><br><span class="line">                .flatMap(students1 -&gt; students1.stream()).collect(Collectors.toList());</span><br><span class="line">        System.out.println(studentList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;输出结果</span><br><span class="line">&#x2F;&#x2F;[Student&#123;name&#x3D;&#39;路飞&#39;, age&#x3D;22, stature&#x3D;175, specialities&#x3D;null&#125;, </span><br><span class="line">&#x2F;&#x2F;Student&#123;name&#x3D;&#39;红发&#39;, age&#x3D;40, stature&#x3D;180, specialities&#x3D;null&#125;, </span><br><span class="line">&#x2F;&#x2F;Student&#123;name&#x3D;&#39;白胡子&#39;, age&#x3D;50, stature&#x3D;185, specialities&#x3D;null&#125;, </span><br><span class="line">&#x2F;&#x2F;Student&#123;name&#x3D;&#39;艾斯&#39;, age&#x3D;25, stature&#x3D;183, specialities&#x3D;null&#125;,</span><br><span class="line">&#x2F;&#x2F;Student&#123;name&#x3D;&#39;雷利&#39;, age&#x3D;48, stature&#x3D;176, specialities&#x3D;null&#125;]</span><br></pre></td></tr></table></figure>

<p>调用Stream.of的静态方法将两个list转换为Stream，再通过flatMap将两个流合并为一个。</p>
<p><strong>2.5 max和min</strong></p>
<p>我们经常会在集合中求最大或最小值，使用流就很方便。及早求值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class TestCase &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Student&gt; students &#x3D; new ArrayList&lt;&gt;(3);</span><br><span class="line">        students.add(new Student(&quot;路飞&quot;, 22, 175));</span><br><span class="line">        students.add(new Student(&quot;红发&quot;, 40, 180));</span><br><span class="line">        students.add(new Student(&quot;白胡子&quot;, 50, 185));</span><br><span class="line"></span><br><span class="line">        Optional&lt;Student&gt; max &#x3D; students.stream()</span><br><span class="line">            .max(Comparator.comparing(stu -&gt; stu.getAge()));</span><br><span class="line">        Optional&lt;Student&gt; min &#x3D; students.stream()</span><br><span class="line">            .min(Comparator.comparing(stu -&gt; stu.getAge()));</span><br><span class="line">        &#x2F;&#x2F;判断是否有值</span><br><span class="line">        if (max.isPresent()) &#123;</span><br><span class="line">            System.out.println(max.get());</span><br><span class="line">        &#125;</span><br><span class="line">        if (min.isPresent()) &#123;</span><br><span class="line">            System.out.println(min.get());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;输出结果</span><br><span class="line">&#x2F;&#x2F;Student&#123;name&#x3D;&#39;白胡子&#39;, age&#x3D;50, stature&#x3D;185, specialities&#x3D;null&#125;</span><br><span class="line">&#x2F;&#x2F;Student&#123;name&#x3D;&#39;路飞&#39;, age&#x3D;22, stature&#x3D;175, specialities&#x3D;null&#125;</span><br></pre></td></tr></table></figure>

<p>max、min接收一个Comparator（例子中使用java8自带的静态函数，只需要传进需要比较值即可。）并且返回一个Optional对象，该对象是java8新增的类，专门为了防止null引发的空指针异常。</p>
<p>可以使用max.isPresent()判断是否有值；可以使用max.orElse(new Student())，当值为null时就使用给定值；也可以使用max.orElseGet(() -&gt; new Student());这需要传入一个Supplier的lambda表达式。</p>
<p><strong>2.6 count</strong></p>
<p>统计功能，一般都是结合filter使用，因为先筛选出我们需要的再统计即可。及早求值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class TestCase &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Student&gt; students &#x3D; new ArrayList&lt;&gt;(3);</span><br><span class="line">        students.add(new Student(&quot;路飞&quot;, 22, 175));</span><br><span class="line">        students.add(new Student(&quot;红发&quot;, 40, 180));</span><br><span class="line">        students.add(new Student(&quot;白胡子&quot;, 50, 185));</span><br><span class="line"></span><br><span class="line">        long count &#x3D; students.stream().filter(s1 -&gt; s1.getAge() &lt; 45).count();</span><br><span class="line">        System.out.println(&quot;年龄小于45岁的人数是：&quot; + count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;输出结果</span><br><span class="line">&#x2F;&#x2F;年龄小于45岁的人数是：2</span><br></pre></td></tr></table></figure>

<p><strong>2.7 reduce</strong> </p>
<p>reduce 操作可以实现从一组值中生成一个值。在上述例子中用到的 count 、 min 和 max 方法，因为常用而被纳入标准库中。事实上，这些方法都是 reduce 操作。及早求值。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/eQPyBffYbuflAIHxeAlDrM7xK8JrNAicwvtsrmndy1PguAw1xq8I3tAtf0hwRlt7QSA7icV0icdRmNge6Y0A5UmWA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class TestCase &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Integer reduce &#x3D; Stream.of(1, 2, 3, 4).reduce(0, (acc, x) -&gt; acc+ x);</span><br><span class="line">        System.out.println(reduce);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;输出结果</span><br><span class="line">&#x2F;&#x2F;10</span><br></pre></td></tr></table></figure>

<p>我们看得reduce接收了一个初始值为0的累加器，依次取出值与累加器相加，最后累加器的值就是最终的结果。</p>
<p><strong>三、高级集合类及收集器</strong></p>
<p><strong>3.1 转换成值</strong></p>
<p>收集器，一种通用的、从流生成复杂值的结构。只要将它传给 collect 方法，所有的流就都可以使用它了。标准类库已经提供了一些有用的收集器，以下示例代码中的收集器都是从 java.util.stream.Collectors 类中静态导入的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public class CollectorsTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Student&gt; students1 &#x3D; new ArrayList&lt;&gt;(3);</span><br><span class="line">        students1.add(new Student(&quot;路飞&quot;, 23, 175));</span><br><span class="line">        students1.add(new Student(&quot;红发&quot;, 40, 180));</span><br><span class="line">        students1.add(new Student(&quot;白胡子&quot;, 50, 185));</span><br><span class="line"></span><br><span class="line">        OutstandingClass ostClass1 &#x3D; new OutstandingClass(&quot;一班&quot;, students1);</span><br><span class="line">        &#x2F;&#x2F;复制students1，并移除一个学生</span><br><span class="line">        List&lt;Student&gt; students2 &#x3D; new ArrayList&lt;&gt;(students1);</span><br><span class="line">        students2.remove(1);</span><br><span class="line">        OutstandingClass ostClass2 &#x3D; new OutstandingClass(&quot;二班&quot;, students2);</span><br><span class="line">        &#x2F;&#x2F;将ostClass1、ostClass2转换为Stream</span><br><span class="line">        Stream&lt;OutstandingClass&gt; classStream &#x3D; Stream.of(ostClass1, ostClass2);</span><br><span class="line">        OutstandingClass outstandingClass &#x3D; biggestGroup(classStream);</span><br><span class="line">        System.out.println(&quot;人数最多的班级是：&quot; + outstandingClass.getName());</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;一班平均年龄是：&quot; + averageNumberOfStudent(students1));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 获取人数最多的班级</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private static OutstandingClass biggestGroup(Stream&lt;OutstandingClass&gt; outstandingClasses) &#123;</span><br><span class="line">        return outstandingClasses.collect(</span><br><span class="line">                maxBy(comparing(ostClass -&gt; ostClass.getStudents().size())))</span><br><span class="line">                .orElseGet(OutstandingClass::new);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 计算平均年龄</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private static double averageNumberOfStudent(List&lt;Student&gt; students) &#123;</span><br><span class="line">        return students.stream().collect(averagingInt(Student::getAge));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;输出结果</span><br><span class="line">&#x2F;&#x2F;人数最多的班级是：一班</span><br><span class="line">&#x2F;&#x2F;一班平均年龄是：37.666666666666664</span><br></pre></td></tr></table></figure>

<p>maxBy或者minBy就是求最大值与最小值。</p>
<p><strong>3.2 转换成块</strong></p>
<p>常用的流操作是将其分解成两个集合，Collectors.partitioningBy帮我们实现了，接收一个Predicate函数式接口。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/eQPyBffYbuflAIHxeAlDrM7xK8JrNAicwibrTgiamib8rjT5icBDRkibCTVfgA4koz8AiaC9SXcyVKvQFWHJfia7dj3HDQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>将示例学生分为会唱歌与不会唱歌的两个集合。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class PartitioningByTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;省略List&lt;student&gt; students的初始化</span><br><span class="line">        Map&lt;Boolean, List&lt;Student&gt;&gt; listMap &#x3D; students.stream().collect(</span><br><span class="line">            Collectors.partitioningBy(student -&gt; student.getSpecialities().</span><br><span class="line">                                      contains(SpecialityEnum.SING)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3.3 数据分组</strong></p>
<p>数据分组是一种更自然的分割数据操作，与将数据分成 ture 和 false 两部分不同，可以使用任意值对数据分组。Collectors.groupingBy接收一个Function做转换。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz/eQPyBffYbuflAIHxeAlDrM7xK8JrNAicwRcIpico9nUmTm0G7DVmdXXbF96icwFWbQRZhopibe905VnfyzCR7IWX2w/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>如图，我们使用groupingBy将根据进行分组为圆形一组，三角形一组，正方形一组。</p>
<p>例子：根据学生第一个特长进行分组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class GroupingByTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;省略List&lt;student&gt; students的初始化</span><br><span class="line">         Map&lt;SpecialityEnum, List&lt;Student&gt;&gt; listMap &#x3D; </span><br><span class="line">             students.stream().collect(</span><br><span class="line">             Collectors.groupingBy(student -&gt; student.getSpecialities().get(0)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Collectors.groupingBy与SQL 中的 group by 操作是一样的。</p>
<p><strong>3.4 字符串拼接</strong></p>
<p>如果将所有学生的名字拼接起来，怎么做呢？通常只能创建一个StringBuilder，循环拼接。使用Stream，使用Collectors.joining()简单容易。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class JoiningTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        List&lt;Student&gt; students &#x3D; new ArrayList&lt;&gt;(3);</span><br><span class="line">        students.add(new Student(&quot;路飞&quot;, 22, 175));</span><br><span class="line">        students.add(new Student(&quot;红发&quot;, 40, 180));</span><br><span class="line">        students.add(new Student(&quot;白胡子&quot;, 50, 185));</span><br><span class="line"></span><br><span class="line">         String names &#x3D; students.stream()</span><br><span class="line">             .map(Student::getName).collect(Collectors.joining(&quot;,&quot;,&quot;[&quot;,&quot;]&quot;));</span><br><span class="line">        System.out.println(names);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;输出结果</span><br><span class="line">&#x2F;&#x2F;[路飞,红发,白胡子]</span><br></pre></td></tr></table></figure>

<p>joining接收三个参数，第一个是分界符，第二个是前缀符，第三个是结束符。也可以不传入参数Collectors.joining()，这样就是直接拼接。</p>
<h4 id="3-函数式接口"><a href="#3-函数式接口" class="headerlink" title="3.函数式接口"></a>3.函数式接口</h4><h4 id="4-内置函数式接口"><a href="#4-内置函数式接口" class="headerlink" title="4.内置函数式接口"></a>4.内置函数式接口</h4><h4 id="5-Streams"><a href="#5-Streams" class="headerlink" title="5.Streams"></a>5.Streams</h4><p>得益于Lambda所带来的函数式编程，引入了一个全新的Stream概念，用于解决已有集合类库既有的弊端</p>
<p>传统集合在于使用循环遍历。for循环的语法就是“怎么做”，for循环的循环体才是“做什么”。</p>
<p>Java 8的Lambda让我们可以更加专注于做什么(What)，而不是怎么做(How)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"> </span><br><span class="line">&#x2F;**</span><br><span class="line"> * @author tanglei</span><br><span class="line"> * @date 2020&#x2F;6&#x2F;10 10:28 下午</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class StreamFilter &#123;</span><br><span class="line"> public static void main(String[] args) &#123;</span><br><span class="line">  List&lt;String&gt; list &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">  list.add(&quot;张无忌&quot;);</span><br><span class="line">  list.add(&quot;周芷若&quot;);</span><br><span class="line">  list.add(&quot;赵敏&quot;);</span><br><span class="line">  list.add(&quot;张强&quot;);</span><br><span class="line">  list.add(&quot;张三丰&quot;);</span><br><span class="line"> </span><br><span class="line">  list.stream()</span><br><span class="line">    .filter(s -&gt; s.startsWith(&quot;张&quot;))</span><br><span class="line">    .filter(s -&gt; s.length() &#x3D;&#x3D; 3)</span><br><span class="line">    .forEach(System.out::println);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>“Stream流”其实是一个集合元素的函数模型，它并不是集合，也不是数据结构，其本身并不存储任何 元素(或其地址值</p>
<p>获取流：</p>
<p>所有的 Collection 集合都可以通过 stream 默认方法获取流;</p>
<p>Stream 接口的静态方法 of 可以获取数组对应的流</p>
<p>根据Collection获取流：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    List&lt;String&gt; list &#x3D; new ArrayList&lt;&gt;();</span><br><span class="line">    Stream&lt;String&gt; stream1 &#x3D; list.stream();</span><br><span class="line">    Set&lt;String&gt; set &#x3D; new HashSet&lt;&gt;();</span><br><span class="line">    Stream&lt;String&gt; stream2 &#x3D; set.stream();</span><br><span class="line">    Vector&lt;String&gt; vector &#x3D; new Vector&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>根据Map获取流</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    Map&lt;String, String&gt; map &#x3D; new HashMap&lt;&gt;();</span><br><span class="line">    Stream&lt;String&gt; keyStream &#x3D; map.keySet().stream();</span><br><span class="line">    Stream&lt;String&gt; valueStream &#x3D; map.values().stream();   </span><br><span class="line">    Stream&lt;Map.Entry&lt;String, String&gt;&gt; entryStream &#x3D; map.entrySet().stream();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>根据数组获取流</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    String[] array &#x3D; &#123; &quot;张无忌&quot;, &quot;张翠山&quot;, &quot;张三丰&quot;, &quot;张一元&quot; &#125;;</span><br><span class="line">    Stream&lt;String&gt; stream &#x3D; Stream.of(array); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>常用方法</p>
<p>逐一处理:forEach     会将每一个流元素交给该函数进行处理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    Stream&lt;String&gt; stream &#x3D; Stream.of(&quot;张无忌&quot;, &quot;张三丰&quot;, &quot;周芷若&quot;);</span><br><span class="line">    stream.forEach(name‐&gt; System.out.println(name)); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>过滤:filter     可以通过 filter 方法将一个流转换成另一个子集流</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    Stream&lt;String&gt; original &#x3D; Stream.of(&quot;张无忌&quot;, &quot;张三丰&quot;, &quot;周芷若&quot;);</span><br><span class="line">    Stream&lt;String&gt; result &#x3D; original.filter(s ‐&gt;   s.startsWith(&quot;张&quot;)); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>映射:map    如果需要将流中的元素映射到另一个流中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    Stream&lt;String&gt; original &#x3D; Stream.of(&quot;10&quot;, &quot;12&quot;, &quot;18&quot;);</span><br><span class="line">    Stream&lt;Integer&gt; result &#x3D; original.map(str‐&gt;Integer.parseInt(str)); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>统计个数:count    数一数其中的元素个数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    Stream&lt;String&gt; original &#x3D; Stream.of(&quot;张无忌&quot;, &quot;张三丰&quot;, &quot;周芷若&quot;); </span><br><span class="line"> Stream&lt;String&gt; result &#x3D; original.filter(s ‐&gt; s.startsWith(&quot;张&quot;));</span><br><span class="line"> System.out.println(result.count()); &#x2F;&#x2F; 2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>取用前几个:limit    可以对流进行截取，只取用前n个</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    Stream&lt;String&gt; original &#x3D; Stream.of(&quot;张无忌&quot;, &quot;张三丰&quot;, &quot;周芷若&quot;); </span><br><span class="line"> Stream&lt;String&gt; result &#x3D; original.limit(2);   </span><br><span class="line"> System.out.println(result.count()); &#x2F;&#x2F; 2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>跳过前几个:skip   如果希望跳过前几个元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    Stream&lt;String&gt; original &#x3D; Stream.of(&quot;张无忌&quot;, &quot;张三丰&quot;, &quot;周芷若&quot;); </span><br><span class="line"> Stream&lt;String&gt; result &#x3D; original.skip(2); </span><br><span class="line"> System.out.println(result.count()); &#x2F;&#x2F; 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>组合:concat    如果有两个流，希望合并成为一个流</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    Stream&lt;String&gt; streamA &#x3D; Stream.of(&quot;张无忌&quot;);    </span><br><span class="line"> Stream&lt;String&gt; streamB &#x3D; Stream.of(&quot;张翠山&quot;); </span><br><span class="line"> Stream&lt;String&gt; result &#x3D; Stream.concat(streamA, streamB);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="6-Map"><a href="#6-Map" class="headerlink" title="6.Map"></a>6.Map</h4><h4 id="7-时间日期API"><a href="#7-时间日期API" class="headerlink" title="7. 时间日期API"></a>7. 时间日期API</h4><h4 id="8-Annotations"><a href="#8-Annotations" class="headerlink" title="8.Annotations"></a>8.Annotations</h4><h3 id="Java11"><a href="#Java11" class="headerlink" title="Java11"></a>Java11</h3><p>2018年9月26日</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="明确概念"><a href="#明确概念" class="headerlink" title="明确概念"></a>明确概念</h3><p>1.JDK（java development kit）：java开发工具包JRE+tools</p>
<p>​    是提供给java开发人员使用的，其中包含了java的开发工具，也包括了JRE</p>
<p>​    Java的开发工具：编译工具（javac.exe）和打包工具（jar.exe）</p>
<p>2.JRE（java runtime environment）：java运行环境 JVM+class library</p>
<p>​    包括java虚拟机和java程序所需的核心类库等</p>
<p>3.JVM（java virture machine）：java虚拟机</p>
<p>可以去网上查找jdk并下载安装，这里推荐使用JDK1.8</p>
<h3 id="配置JDK环境变量"><a href="#配置JDK环境变量" class="headerlink" title="配置JDK环境变量"></a>配置JDK环境变量</h3><p>要使java文件写在其他文件下面，仍可以运行，就需要配置环境变量。</p>
<p>我的电脑→属性→高级系统设置→环境变量→系统变量：以下三个环境变量 已存在则点击“编辑”，不存在则点击“新建”</p>
<p>1.新建JAVA_HOME（变量名）指向的是JDK的安装路径（变量值），在此路径下能找到bin、lib等目录。</p>
<p>2.编辑PATH环境变量,目的是为了指向JDK的bin目录，这里面放的是各种编译执行命令。目的是<strong>使javac指令可以在任意目录下运行</strong>。</p>
<p>配置方法一：</p>
<p>​    将javac指令所在目录也就是JDK安装目录下的bin目录配置到path变量下，即可使javac指令在任意目录下运行。系统中本来有path环境变量，直接放后面就行，中间用分号间隔。path环境变量具有先后顺序</p>
<p>具体方法：</p>
<p>​    将JDK安装目录下的bin目录添加到最左边并添加分号</p>
<p>配置方法二（因为jdk可能有多个）：</p>
<p>​    新建变量名为：JAVA_HOME            变量值为：JDK安装目录            将path环境变量中的JDK目录修改为：%JAVA_HOME%\bin；（%%相当于引用）</p>
<p>​    切换JDK时只需修改变量值</p>
<p>Tips：操作系统因不明原因导致%JAVA_HOME%环境变量失效，即使正确配置“Path”中的内容，也无法验证通过。此时可以采用“弃用JAVA_HOME”的办法，在“Path”环境变量中，直接添加JDK下bin文件夹的完整地址（即配置方法一）。</p>
<p>如果“弃用JAVA_HOME”之后依然无法通过验证，则要打开JDK的bin文件夹，检查此文件夹下是否有“java.exe”和“javac.exe”这两个文件，这两个可执行文件实际上就是java命令和javac命令的“本体”，如果缺失了这两个文件，JDK就无法正常使用，环境也就永远无法验证通过。</p>
<p>3.CLASSPATH（class文件的环境变量）一般<strong>不用配置</strong>，仅了解，不推荐配置在系统的环境变量中</p>
<p>​    创建新的变量名称：classpath          变量值设定为指定的含有class文件的目录，多个目录之间使用分号（；）分割。</p>
<p>​    作用：使classpath目录中的.class文件可以在任意目录运行</p>
<p>classpath目录中的配置存在先后顺序，先在第一个目录下查找，没有的话；.再继续查找第二个，依次类推</p>
<p>​    区别：path环境变量里面记录的是可执行性文件，如：.exe文件。</p>
<p>​    classpath环境变量里面记录的是java类的运行文件所在的目录如：.class文件</p>
<h3 id="验证结果"><a href="#验证结果" class="headerlink" title="验证结果"></a>验证结果</h3><p>cmd中输入<code>java -version</code> 或者输入<code>javac</code></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>​    这里的下载安装很简单，最主要的是JDK的环境变量配置。原理就是在path的环境变量中加入java的bin文件夹（这个bin文件夹 中会有javac.exe和java.exe），这样在运行java时，就会找到javac命令和java命令并运行。设置JAVA_HOME的目的是为了防止有多个java时，在切换版本时需要不断更改操作path，为了方便操作，当path中运行到%JAVA_HOME%.bin时，会去再访问JAVA_HOME这个变量下的java文件夹，最终目的是一样的。classpath就是一组目录的集合，它设置了一个搜索路径，当运行某个类时，会依次查找这个目录下的这个类，找到了就会运行，如果找不到就会报错。所以一般情况下，不用配置classpath，用默认的配置在当前文件下查找这个类即可。</p>
<p>​    这里的配置环境变量是接触的第一个环境变量。环境变量这个东西一通百通，以后的环境变量配置也可以参照这个原理，其根本目的都是要使系统的path路径中可以找到你的软件的bin目录。教程只是一方面，背后的原理才是以后会独立配置的关键。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/26/4.1.%E5%88%9D%E8%AF%86java%EF%BC%9A%E7%89%B9%E6%80%A7%E3%80%81%E7%89%88%E6%9C%AC%E3%80%81%E5%AE%89%E8%A3%85/" data-id="ckqk8k3e9004e2wwd8e2v2z2x" data-title="初识java" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java%E6%A6%82%E8%BF%B0/" rel="tag">java概述</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC/" rel="tag">历史版本</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%89%E8%A3%85/" rel="tag">安装</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-3.2.java开发工具之IDEA" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/25/3.2.java%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E4%B9%8BIDEA/" class="article-date">
  <time class="dt-published" datetime="2021-03-25T03:46:22.000Z" itemprop="datePublished">2021-03-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/25/3.2.java%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E4%B9%8BIDEA/">java开发工具之IDEA</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="IDEA介绍"><a href="#IDEA介绍" class="headerlink" title="IDEA介绍"></a>IDEA介绍</h1><p>IDEA 全称 IntelliJ IDEA，是java编程语言开发的集成环境（集成开发环境IDE（Integrated Development Environment）:把开发，运行，编译集成在一起）。IntelliJ在业界被公认为最好的java开发工具，尤其在智能代码助手、代码自动提示、重构、JavaEE支持、各类版本工具(git、svn等)、JUnit、CVS整合、代码分析、 创新的GUI设计等方面的功能可以说是超常的。IDEA属于JetBrains这个公司，旗下的知名软件还有：PyCharm-智能 Python 集成开发工具，WebStorm - 最智能的 JavaScript IDE。</p>
<p>​    在刚接触java的时候，跟着视频下载了eclipse，白色的界面，很有教科书的感觉。当时看到一些博主，微信公众号的推送的代码示例截图，编写代码的工具都是黑色的，感觉很像命令行的风格，以为很高大上，就很羡慕（其实只是界面皮肤的问题）。后来才接触到了idea，默认的一种黑色的界面给了我逼格很高的感觉，想着终于拥有了大佬一样的开发工具，我也算是大佬了，hhhh。就像是长江后浪推前浪，有的人认为eclipse也是在不断完善，认为新兴的idea始终无法替代eclipse；也有的人自从接触了idea就爱不释手，毫不犹豫的抛弃了eclipse。说到底这也只是个工具而已，能够帮助我们更高效、简洁、方便的开发代码，达到我们的目的，使用什么工具又有什么所谓呢。</p>
<h1 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h1><p>目前常用</p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Ctrl + D</strong></td>
<td>复制光标所在行 或 复制选择内容，并把复制内容插入光标位置下面</td>
</tr>
<tr>
<td><strong>Ctrl + /</strong></td>
<td>注释光标所在行代码，会根据当前不同文件类型使用不同的注释符号</td>
</tr>
<tr>
<td>ctrl+shif+/</td>
<td>注释一段代码</td>
</tr>
<tr>
<td><strong>Ctrl + F</strong></td>
<td>在当前文件进行文本查找</td>
</tr>
<tr>
<td>ctrl+shift+f</td>
<td>在全局搜索</td>
</tr>
<tr>
<td><strong>Ctrl  + Z</strong></td>
<td>撤销</td>
</tr>
<tr>
<td><strong>Ctrl + Shift + Z</strong></td>
<td>取消撤销</td>
</tr>
<tr>
<td><strong>Alt + F7</strong></td>
<td>查找光标所在的方法 / 变量 / 类被调用的地方</td>
</tr>
<tr>
<td><strong>Ctrl + Alt + 鼠标左键</strong></td>
<td><strong>在某个调用的方法名上使用会跳到具体的实现处，可以跳过接口</strong></td>
</tr>
<tr>
<td><strong>Ctrl + Alt + ←</strong></td>
<td>跳到上次浏览的位置</td>
</tr>
<tr>
<td>alt+shift+上下键</td>
<td>将某一行或选中的区域整体上下移动</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>ctrl + alt + u</td>
<td>显示类之间的关系</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>sout</td>
<td>System.out.println();</td>
</tr>
<tr>
<td>fori</td>
<td>for(int i=0;i&lt; ;i++)</td>
</tr>
<tr>
<td>itar</td>
<td>Iterate elements of array</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="ctrl"><a href="#ctrl" class="headerlink" title="ctrl"></a>ctrl</h2><table>
<thead>
<tr>
<th>快捷键</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Ctrl + R</strong></td>
<td>在当前文件进行文本替换 （必备）</td>
</tr>
<tr>
<td><strong>Ctrl + O</strong></td>
<td><strong>选择可重写的方法</strong></td>
</tr>
<tr>
<td>Ctrl + W</td>
<td>递进式选择代码块。可选中光标所在的单词或段落，连续按会在原有选中的基础上再扩展选中范围 （必备）</td>
</tr>
<tr>
<td>Ctrl + Y</td>
<td>删除光标所在行 或 删除选中的行 （必备）</td>
</tr>
<tr>
<td>Ctrl + E</td>
<td>显示最近打开的文件记录列表</td>
</tr>
<tr>
<td>Ctrl + U</td>
<td>前往当前光标所在的方法的父类的方法 / 接口定义</td>
</tr>
<tr>
<td>Ctrl + N</td>
<td>根据输入的 类名 查找类文件</td>
</tr>
<tr>
<td>Ctrl + H</td>
<td>显示当前类的层次结构</td>
</tr>
<tr>
<td>Ctrl + I</td>
<td>选择可继承的方法</td>
</tr>
<tr>
<td>Ctrl + G</td>
<td>在当前文件跳转到指定行处</td>
</tr>
<tr>
<td>Ctrl + J</td>
<td>插入自定义动态代码模板</td>
</tr>
<tr>
<td>Ctrl + P</td>
<td>方法参数提示显示</td>
</tr>
<tr>
<td>Ctrl + Q</td>
<td>光标所在的变量 / 类名 / 方法名等上面（也可以在提示补充的时候按），显示文档内容</td>
</tr>
<tr>
<td>Ctrl + B</td>
<td>进入光标所在的方法/变量的接口或是定义出，等效于 Ctrl + 左键单击</td>
</tr>
<tr>
<td>Ctrl + K</td>
<td>版本控制提交项目，需要此项目有加入到版本控制才可用</td>
</tr>
<tr>
<td>Ctrl + T</td>
<td>版本控制更新项目，需要此项目有加入到版本控制才可用</td>
</tr>
<tr>
<td>Ctrl + +</td>
<td>展开代码</td>
</tr>
<tr>
<td>Ctrl + -</td>
<td>折叠代码</td>
</tr>
<tr>
<td>Ctrl + [</td>
<td>移动光标到当前所在代码的花括号开始位置</td>
</tr>
<tr>
<td>Ctrl + ]</td>
<td>移动光标到当前所在代码的花括号结束位置</td>
</tr>
<tr>
<td>Ctrl + Space</td>
<td>基础代码补全，默认在 Windows 系统上被输入法占用，需要进行修改，建议修改为 Ctrl + 逗号 （必备）</td>
</tr>
<tr>
<td>Ctrl + Delete</td>
<td>删除光标后面的单词或是中文句</td>
</tr>
<tr>
<td>Ctrl + BackSpace</td>
<td>删除光标前面的单词或是中文句</td>
</tr>
<tr>
<td>Ctrl + F1</td>
<td>在光标所在的错误代码出显示错误信息</td>
</tr>
<tr>
<td>Ctrl + F3</td>
<td>调转到所选中的词的下一个引用位置</td>
</tr>
<tr>
<td>Ctrl + F4</td>
<td>关闭当前编辑文件</td>
</tr>
<tr>
<td>Ctrl + F8</td>
<td>在 Debug 模式下，设置光标当前行为断点，如果当前已经是断点则去掉断点</td>
</tr>
<tr>
<td>Ctrl + F9</td>
<td>执行 Make Project 操作</td>
</tr>
<tr>
<td>Ctrl + F11</td>
<td>选中文件 / 文件夹，使用助记符设定 / 取消书签</td>
</tr>
<tr>
<td>Ctrl + F12</td>
<td>弹出当前文件结构层，可以在弹出的层上直接输入，进行筛选</td>
</tr>
<tr>
<td>Ctrl + Tab</td>
<td>编辑窗口切换，如果在切换的过程又加按上delete，则是关闭对应选中的窗口</td>
</tr>
<tr>
<td>Ctrl + Enter</td>
<td>智能分隔行</td>
</tr>
<tr>
<td>Ctrl + End</td>
<td>跳到文件尾</td>
</tr>
<tr>
<td>Ctrl + Home</td>
<td>跳到文件头</td>
</tr>
<tr>
<td>Ctrl + 1,2,3…9</td>
<td>定位到对应数值的书签位置</td>
</tr>
<tr>
<td>Ctrl + 左键单击</td>
<td>在打开的文件标题上，弹出该文件路径</td>
</tr>
<tr>
<td>Ctrl + 光标定位</td>
<td>按 Ctrl 不要松开，会显示光标所在的类信息摘要</td>
</tr>
<tr>
<td>Ctrl + 左方向键</td>
<td>光标跳转到当前单词 / 中文句的左侧开头位置</td>
</tr>
<tr>
<td>Ctrl + 右方向键</td>
<td>光标跳转到当前单词 / 中文句的右侧开头位置</td>
</tr>
<tr>
<td>Ctrl + 前方向键</td>
<td>等效于鼠标滚轮向前效果</td>
</tr>
<tr>
<td>Ctrl + 后方向键</td>
<td>等效于鼠标滚轮向后效果</td>
</tr>
</tbody></table>
<h2 id="alt"><a href="#alt" class="headerlink" title="alt"></a>alt</h2><table>
<thead>
<tr>
<th>快捷键</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Alt + Enter</strong></td>
<td><strong>IntelliJ IDEA 根据光标所在问题，提供快速修复选择，光标放在的位置不同提示的结果也不同 （必备）</strong></td>
</tr>
<tr>
<td><strong>Alt + Insert</strong></td>
<td><strong>代码自动生成，如生成对象的 set / get 方法，构造函数，toString() 等</strong></td>
</tr>
<tr>
<td>Alt + Q</td>
<td>弹出一个提示，显示当前类的声明 / 上下文信息</td>
</tr>
<tr>
<td>Alt + `</td>
<td>显示版本控制常用操作菜单弹出层</td>
</tr>
<tr>
<td>Alt + F1</td>
<td>显示当前文件选择目标弹出层，弹出层中有很多目标可以进行选择</td>
</tr>
<tr>
<td>Alt + F2</td>
<td>对于前面页面，显示各类浏览器打开目标选择弹出层</td>
</tr>
<tr>
<td>Alt + F3</td>
<td>选中文本，逐个往下查找相同文本，并高亮显示</td>
</tr>
<tr>
<td>Alt + F8</td>
<td>在 Debug 的状态下，选中对象，弹出可输入计算表达式调试框，查看该输入内容的调试结果</td>
</tr>
<tr>
<td>Alt + Home</td>
<td>定位 / 显示到当前文件的 Navigation Bar</td>
</tr>
<tr>
<td>Alt + 左方向键</td>
<td>按左方向切换当前已打开的文件视图</td>
</tr>
<tr>
<td>Alt + 右方向键</td>
<td>按右方向切换当前已打开的文件视图</td>
</tr>
<tr>
<td>Alt + 前方向键</td>
<td>当前光标跳转到当前文件的前一个方法名位置</td>
</tr>
<tr>
<td>Alt + 后方向键</td>
<td>当前光标跳转到当前文件的后一个方法名位置</td>
</tr>
<tr>
<td>Alt + 1,2,3…9</td>
<td>显示对应数值的选项卡，其中 1 是 Project 用得最多</td>
</tr>
</tbody></table>
<h2 id="shift"><a href="#shift" class="headerlink" title="shift"></a>shift</h2><table>
<thead>
<tr>
<th>快捷键</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Shift + 滚轮前后滚动</strong></td>
<td>当前文件的横向滚动轴滚动</td>
</tr>
<tr>
<td>Shift + F1</td>
<td>如果有外部文档可以连接外部文档</td>
</tr>
<tr>
<td>Shift + F2</td>
<td>跳转到上一个高亮错误 或 警告位置</td>
</tr>
<tr>
<td>Shift + F3</td>
<td>在查找模式下，查找匹配上一个</td>
</tr>
<tr>
<td>Shift + F4</td>
<td>对当前打开的文件，使用新Windows窗口打开，旧窗口保留</td>
</tr>
<tr>
<td>Shift + F6</td>
<td>对文件 / 文件夹 重命名</td>
</tr>
<tr>
<td>Shift + F7</td>
<td>在 Debug 模式下，智能步入。断点所在行上有多个方法调用，会弹出进入哪个方法</td>
</tr>
<tr>
<td>Shift + F8</td>
<td>在 Debug 模式下，跳出，表现出来的效果跟 F9 一样</td>
</tr>
<tr>
<td>Shift + F9</td>
<td>等效于点击工具栏的 Debug 按钮</td>
</tr>
<tr>
<td>Shift + F10</td>
<td>等效于点击工具栏的 Run 按钮</td>
</tr>
<tr>
<td>Shift + F11</td>
<td>弹出书签显示层</td>
</tr>
<tr>
<td>Shift + Tab</td>
<td>取消缩进</td>
</tr>
<tr>
<td>Shift + ESC</td>
<td>隐藏当前 或 最后一个激活的工具窗口</td>
</tr>
<tr>
<td>Shift + End</td>
<td>选中光标到当前行尾位置</td>
</tr>
<tr>
<td>Shift + Home</td>
<td>选中光标到当前行头位置</td>
</tr>
<tr>
<td>Shift + Enter</td>
<td>开始新一行。光标所在行下空出一行，光标定位到新行位置</td>
</tr>
<tr>
<td>Shift + 左键单击</td>
<td>在打开的文件名上按此快捷键，可以关闭当前打开文件</td>
</tr>
</tbody></table>
<h2 id="ctrl-alt"><a href="#ctrl-alt" class="headerlink" title="ctrl+alt"></a>ctrl+alt</h2><table>
<thead>
<tr>
<th>快捷键</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Ctrl + Alt + L</strong></td>
<td>格式化代码，可以对当前文件和整个包目录使用 （必备）</td>
</tr>
<tr>
<td><strong>Ctrl + Alt + T</strong></td>
<td><strong>对选中的代码弹出环绕选项弹出层</strong></td>
</tr>
<tr>
<td>Ctrl + Alt + V</td>
<td>快速引进变量</td>
</tr>
<tr>
<td>Ctrl + Alt + O</td>
<td>优化导入的类，可以对当前文件和整个包目录使用 （必备）</td>
</tr>
<tr>
<td>Ctrl + Alt + I</td>
<td>光标所在行 或 选中部分进行自动代码缩进，有点类似格式化</td>
</tr>
<tr>
<td>Ctrl + Alt + J</td>
<td>弹出模板选择窗口，讲选定的代码加入动态模板中</td>
</tr>
<tr>
<td>Ctrl + Alt + H</td>
<td>调用层次</td>
</tr>
<tr>
<td>Ctrl + Alt + Y</td>
<td>同步、刷新</td>
</tr>
<tr>
<td>Ctrl + Alt + S</td>
<td>打开 IntelliJ IDEA 系统设置</td>
</tr>
<tr>
<td>Ctrl + Alt + F7</td>
<td>显示使用的地方。寻找被该类或是变量被调用的地方，用弹出框的方式找出来</td>
</tr>
<tr>
<td>Ctrl + Alt + F11</td>
<td>切换全屏模式</td>
</tr>
<tr>
<td>Ctrl + Alt + Enter</td>
<td>光标所在行上空出一行，光标定位到新行</td>
</tr>
<tr>
<td>Ctrl + Alt + Home</td>
<td>弹出跟当前文件有关联的文件弹出层</td>
</tr>
<tr>
<td>Ctrl + Alt + Space</td>
<td>类名自动完成</td>
</tr>
</tbody></table>
<h2 id="Ctrl-Shift"><a href="#Ctrl-Shift" class="headerlink" title="Ctrl + Shift"></a>Ctrl + Shift</h2><table>
<thead>
<tr>
<th>快捷键</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Ctrl + Shift + U</strong></td>
<td><strong>对选中的代码进行大 / 小写轮流转换 （必备）</strong></td>
</tr>
<tr>
<td><strong>Ctrl + Shift + F</strong></td>
<td>根据输入内容查找整个项目 或 指定目录内文件 （必备）</td>
</tr>
<tr>
<td><strong>Ctrl + Shift + /</strong></td>
<td>代码块注释 （必备）</td>
</tr>
<tr>
<td><strong>Ctrl + Shift + Space</strong></td>
<td>智能代码提示</td>
</tr>
<tr>
<td><strong>Ctrl + Shift + Enter</strong></td>
<td>自动结束代码，行末自动添加分号 （必备）</td>
</tr>
<tr>
<td><strong>Ctrl + Shift + Backspace</strong></td>
<td>退回到上次修改的地方</td>
</tr>
<tr>
<td>Ctrl + Shift + J</td>
<td>自动将下一行合并到当前行末尾 （必备）</td>
</tr>
<tr>
<td>Ctrl + Shift + R</td>
<td>根据输入内容替换对应内容，范围为整个项目 或 指定目录内文件 （必备）</td>
</tr>
<tr>
<td>Ctrl + Shift + W</td>
<td>递进式取消选择代码块。可选中光标所在的单词或段落，连续按会在原有选中的基础上再扩展取消选中范围 （必备）</td>
</tr>
<tr>
<td>Ctrl + Shift + N</td>
<td>通过文件名定位 / 打开文件 / 目录，打开目录需要在输入的内容后面多加一个正斜杠 （必备）</td>
</tr>
<tr>
<td>Ctrl + Shift + I</td>
<td>快速查看光标所在的方法 或 类的定义</td>
</tr>
<tr>
<td>Ctrl + Shift + E</td>
<td>显示最近修改的文件列表的弹出层</td>
</tr>
<tr>
<td>Ctrl + Shift + T</td>
<td>对当前类生成单元测试类，如果已经存在的单元测试类则可以进行选择</td>
</tr>
<tr>
<td>Ctrl + Shift + C</td>
<td>复制当前文件磁盘路径到剪贴板</td>
</tr>
<tr>
<td>Ctrl + Shift + V</td>
<td>弹出缓存的最近拷贝的内容管理器弹出层</td>
</tr>
<tr>
<td>Ctrl + Shift + H</td>
<td>显示方法层次结构</td>
</tr>
<tr>
<td>Ctrl + Shift + B</td>
<td>跳转到类型声明处</td>
</tr>
<tr>
<td>Ctrl + Shift + A</td>
<td>查找动作 / 设置</td>
</tr>
<tr>
<td>Ctrl + Shift + [</td>
<td>选中从光标所在位置到它的顶部中括号位置</td>
</tr>
<tr>
<td>Ctrl + Shift + ]</td>
<td>选中从光标所在位置到它的底部中括号位置</td>
</tr>
<tr>
<td>Ctrl + Shift + +</td>
<td>展开所有代码</td>
</tr>
<tr>
<td>Ctrl + Shift + -</td>
<td>折叠所有代码</td>
</tr>
<tr>
<td>Ctrl + Shift + F7</td>
<td>高亮显示所有该选中文本，按Esc高亮消失</td>
</tr>
<tr>
<td>Ctrl + Shift + F8</td>
<td>在 Debug 模式下，指定断点进入条件</td>
</tr>
<tr>
<td>Ctrl + Shift + F9</td>
<td>编译选中的文件 / 包 / Module</td>
</tr>
<tr>
<td>Ctrl + Shift + F12</td>
<td>编辑器最大化</td>
</tr>
<tr>
<td>Ctrl + Shift + 1,2,3…9</td>
<td>快速添加指定数值的书签</td>
</tr>
<tr>
<td>Ctrl + Shift + 左方向键</td>
<td>在代码文件上，光标跳转到当前单词 / 中文句的左侧开头位置，同时选中该单词 / 中文句</td>
</tr>
<tr>
<td>Ctrl + Shift + 右方向键</td>
<td>在代码文件上，光标跳转到当前单词 / 中文句的右侧开头位置，同时选中该单词 / 中文句</td>
</tr>
<tr>
<td>Ctrl + Shift + 左方向键</td>
<td>在光标焦点是在工具选项卡上，缩小选项卡区域</td>
</tr>
<tr>
<td>Ctrl + Shift + 右方向键</td>
<td>在光标焦点是在工具选项卡上，扩大选项卡区域</td>
</tr>
<tr>
<td>Ctrl + Shift + 前方向键</td>
<td>光标放在方法名上，将方法移动到上一个方法前面，调整方法排序</td>
</tr>
<tr>
<td>Ctrl + Shift + 后方向键</td>
<td>光标放在方法名上，将方法移动到下一个方法前面，调整方法排序</td>
</tr>
</tbody></table>
<h2 id="Alt-Shift"><a href="#Alt-Shift" class="headerlink" title="Alt + Shift"></a>Alt + Shift</h2><table>
<thead>
<tr>
<th>快捷键</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td>Alt + Shift + F7</td>
<td>在 Debug 模式下，下一步，进入当前方法体内，如果方法体还有方法，则会进入该内嵌的方法中，依此循环进入</td>
</tr>
<tr>
<td>Alt + Shift + N</td>
<td>选择 / 添加 task</td>
</tr>
<tr>
<td>Alt + Shift + F</td>
<td>显示添加到收藏夹弹出层</td>
</tr>
<tr>
<td>Alt + Shift + C</td>
<td>查看最近操作项目的变化情况列表</td>
</tr>
<tr>
<td>Alt + Shift + F</td>
<td>添加到收藏夹</td>
</tr>
<tr>
<td>Alt + Shift + I</td>
<td>查看项目当前文件</td>
</tr>
<tr>
<td>Alt + Shift + F9</td>
<td>弹出 Debug 的可选择菜单</td>
</tr>
<tr>
<td>Alt + Shift + F10</td>
<td>弹出 Run 的可选择菜单</td>
</tr>
<tr>
<td>Alt + Shift + 左键双击</td>
<td>选择被双击的单词 / 中文句，按住不放，可以同时选择其他单词 / 中文句</td>
</tr>
<tr>
<td>Alt + Shift + 前方向键</td>
<td>移动光标所在行向上移动</td>
</tr>
<tr>
<td>Alt + Shift + 后方向键</td>
<td>移动光标所在行向下移动</td>
</tr>
</tbody></table>
<h2 id="Ctrl-Shift-Alt"><a href="#Ctrl-Shift-Alt" class="headerlink" title="Ctrl + Shift + Alt"></a>Ctrl + Shift + Alt</h2><table>
<thead>
<tr>
<th>快捷键</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td>Ctrl + Shift + Alt + V</td>
<td>无格式黏贴</td>
</tr>
<tr>
<td>Ctrl + Shift + Alt + N</td>
<td>前往指定的变量 / 方法</td>
</tr>
<tr>
<td>Ctrl + Shift + Alt + S</td>
<td>打开当前项目设置</td>
</tr>
<tr>
<td>Ctrl + Shift + Alt + C</td>
<td>复制参考信息</td>
</tr>
</tbody></table>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><table>
<thead>
<tr>
<th>快捷键</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td>F2</td>
<td>跳转到下一个高亮错误 或 警告位置 （必备）</td>
</tr>
<tr>
<td>F3</td>
<td>在查找模式下，定位到下一个匹配处</td>
</tr>
<tr>
<td>F4</td>
<td>编辑源</td>
</tr>
<tr>
<td>F7</td>
<td>在 Debug 模式下，进入下一步，如果当前行断点是一个方法，则进入当前方法体内，如果该方法体还有方法，则不会进入该内嵌的方法中</td>
</tr>
<tr>
<td>F8</td>
<td>在 Debug 模式下，进入下一步，如果当前行断点是一个方法，则不进入当前方法体内</td>
</tr>
<tr>
<td>F9</td>
<td>在 Debug 模式下，恢复程序运行，但是如果该断点下面代码还有断点则停在下一个断点上</td>
</tr>
<tr>
<td>F11</td>
<td>添加书签</td>
</tr>
<tr>
<td>F12</td>
<td>回到前一个工具窗口</td>
</tr>
<tr>
<td>Tab</td>
<td>缩进</td>
</tr>
<tr>
<td>ESC</td>
<td>从工具窗口进入代码文件窗口</td>
</tr>
<tr>
<td>连按两次Shift</td>
<td>弹出 Search Everywhere 弹出层</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>使用IDEA读取底层源码的快捷键集合<br>自己常用的两种方式:<br>如果是看接口的底层,就用<strong>ctrl+alt</strong><br>如果是看其他的底层,就双击锁定,然后<strong>两下shift</strong>即可.<br>如果看继承树,<strong>ctrl+h</strong></p>
<p>感觉通常都是<code>ctrl+键</code>是主要功能，shift是全选，alt</p>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Alt+回车</code></td>
<td>导入包,自动修正</td>
</tr>
<tr>
<td><code>Ctrl+Alt+L</code></td>
<td>格式化代码</td>
</tr>
<tr>
<td><code>Alt+Insert</code></td>
<td>生成代码(如get,set方法,构造函数等)</td>
</tr>
<tr>
<td><code>Ctrl+F</code></td>
<td>查找文本</td>
</tr>
<tr>
<td><code>Ctrl+N</code></td>
<td>查找类</td>
</tr>
<tr>
<td><code>Ctrl+Shift+N</code></td>
<td>查找文件</td>
</tr>
<tr>
<td><code>Ctrl+Shift+Alt+N</code></td>
<td>查找类中的方法或变量</td>
</tr>
<tr>
<td><code>Ctrl+R</code></td>
<td>在当前文件进行文本替换</td>
</tr>
<tr>
<td><code>Ctrl+Y</code></td>
<td>删除光标所在行 或 删除选中的行</td>
</tr>
<tr>
<td><code>Ctrl+Space</code></td>
<td>代码提示</td>
</tr>
<tr>
<td><code>Ctrl+Shift+Space</code></td>
<td>自动补全代码(常用)</td>
</tr>
<tr>
<td><code>Ctrl+P</code></td>
<td>方法参数提示</td>
</tr>
<tr>
<td><code>Ctrl+/</code>或<code>Ctrl+Shift+/</code></td>
<td>注释（//或者/…./）</td>
</tr>
<tr>
<td><code>Ctrl+D</code></td>
<td>复制光标所在行 或 复制选择内容，并把复制内容插入光标位置下面</td>
</tr>
<tr>
<td><strong><code>Ctrl+Shift+Up/Down</code></strong></td>
<td>代码向上/下移动</td>
</tr>
<tr>
<td><strong><code>Alt+ Up/Down</code></strong></td>
<td>在方法间快速移动定位</td>
</tr>
<tr>
<td><strong><code>Ctrl + U</code></strong></td>
<td>前往当前光标所在的方法的父类的方法 / 接口定义</td>
</tr>
<tr>
<td><strong><code>Ctrl+Alt+left/right </code></strong></td>
<td>返回至上次浏览的位置</td>
</tr>
<tr>
<td><code>F2 或Shift+F2 </code></td>
<td>高亮错误或警告快速定位</td>
</tr>
<tr>
<td><strong><code>选中文本，按Alt+F3</code></strong></td>
<td>逐个往下查找相同文本，并高亮显示</td>
</tr>
</tbody></table>
<h1 id="IDEA一些问题"><a href="#IDEA一些问题" class="headerlink" title="IDEA一些问题"></a>IDEA一些问题</h1><p>1.idea查看源码时会显示<code>/*compiled code*/</code>，一般新版的idea会自带反编译功能，如果出现了表示反编译没有成功。</p>
<p>解决方案：</p>
<p>File-&gt;setting-&gt;Plugins，然后下拉，找到Java Bytecode Decompiler  打钩  应用保存 重启</p>
<p>如果发现已经打过勾仍出现这种情况，可能是因为用了 java decompiler Intellij Plugin这个插件，取消打勾之后重启也可。</p>
<h1 id="IDEA的一些个人配置"><a href="#IDEA的一些个人配置" class="headerlink" title="IDEA的一些个人配置"></a>IDEA的一些个人配置</h1><p>1.Java文件统一添加固定Header，通过IDE统一配置（code templates）　 File and Code Templates</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">* @author swx</span><br><span class="line">* @site</span><br><span class="line">* @company</span><br><span class="line">* @create $&#123;YEAR&#125;-$&#123;MONTH&#125;-$&#123;DAY&#125;-$&#123;TIME&#125;</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure>





<h1 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h1><p>接下展示如何创建、运行和打包一个打印 Hello，World 的简单 Java 应用程序！熟悉 IntelliJ IDEA 特性，以提高作为开发人员的工作效率: 编码辅助和补充工具。</p>
<h2 id="创建一个新的-Java-项目"><a href="#创建一个新的-Java-项目" class="headerlink" title="创建一个新的 Java 项目"></a><strong>创建一个新的 Java 项目</strong></h2><p>在 IntelliJ IDEA 中，一个项目可以帮助您将源代码、测试、使用的库、构建说明和个人设置组织到一个单元中。</p>
<p>\1. 启动 IntelliJ IDEA。</p>
<p>如果打开欢迎屏幕，请单击“新建项目”。否则，从主菜单中选择 File | New | Project。</p>
<p>\2. 在 New Project 向导中，从左侧的列表中选择 Java。</p>
<p>\3. 要在 intellijidea 中开发 Java 应用程序，您需要 javasdk (JDK)。</p>
<p>如果所需的 JDK 已经在 IntelliJ IDEA 中定义，那么从 Project SDK 列表中选择它。</p>
<p>如果 JDK 安装在您的计算机上，但是没有在 IDE 中定义，那么选择 Add JDK 并指定 JDK home 目录的路径(例如,/library/java/javavialmachines/JDK-13.0.1)。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/ePw3ZeGRruw9I5jwWKz2iaLTicUXmdtMTWfbzkZ1UiapTicga31j6w7oSrPR83iahT0WyyjGViax2MHm7BN4vSV25Mkg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>如果您的计算机上没有必要的 JDK，选择 Download JDK。在下一个对话框中，指定 JDK 供应商(例如 OpenJDK)、版本，如果需要则更改安装路径，然后单击 Download。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/ePw3ZeGRruw9I5jwWKz2iaLTicUXmdtMTWPEfHh4J5MwWia0dJ6OwdoRs7BTZVPsibxgICz0aWYpDEzZE9JBsldIQA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>在本教程中，我们不打算使用任何其他库或框架，因此请单击“下一步”。不要从模板创建项目。在本教程中，我们将从头开始执行所有操作，因此请单击“下一步”。</p>
<p>为项目命名，例如：HelloWorld。 如有必要，请更改默认项目位置并单击“完成”。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruw9I5jwWKz2iaLTicUXmdtMTWQmzbSjUuddQ1M5HolHMoGyOtscdEdibHRaQt0M3xeONvObF3RsrnJfg/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<h2 id="创建-package-和-class"><a href="#创建-package-和-class" class="headerlink" title="创建 package 和 class"></a><strong>创建 package 和 class</strong></h2><p>包用于将属于同一类别或提供类似功能的类组合在一起，用于构造和组织具有数百个类的大型应用程序。</p>
<p>\1. 在 Project 工具窗口中，选择 src 文件夹，按 Alt + Insert，然后选择 Java Class</p>
<p>\2. 在 Name 字段中，键入 com.example.HelloWorld. HelloWorld 并单击 OK. IntelliJ IDEA 创建 com.example.HelloWorld 包和 HelloWorld 类。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruw9I5jwWKz2iaLTicUXmdtMTWQmzbSjUuddQ1M5HolHMoGyOtscdEdibHRaQt0M3xeONvObF3RsrnJfg/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<p>与该文件一起，IntelliJ IDEA 自动为您的类生成了一些内容。在这种情况下，IDE 插入了包语句和类声明。这是通过文件模板来完成的。根据您创建的文件的类型，IDE 插入初始代码和预期在该类型的所有文件中存在的格式。有关如何使用和配置模板的详细信息，请参阅文件模板。</p>
<h2 id="开始编码"><a href="#开始编码" class="headerlink" title="开始编码"></a><strong>开始编码</strong></h2><p>通过动态模板增加 main 方法</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruw9I5jwWKz2iaLTicUXmdtMTWeXJlIYYZ5yU9w0TXqqFApqRfoSbRMSZMu6bOhllCKEiaehIqmvCDdGw/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<h2 id="输出-print-方法"><a href="#输出-print-方法" class="headerlink" title="输出 print 方法"></a>输出 print 方法</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruw9I5jwWKz2iaLTicUXmdtMTWozxeT70eCw3QDjjZEcicXxr7YkPiaAE43lyRXU88EMR03MRtFicRqAQ1g/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<h2 id="运行方法"><a href="#运行方法" class="headerlink" title="运行方法"></a>运行方法</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruw9I5jwWKz2iaLTicUXmdtMTWrwGLeicySTnyUD1ZRH1Ge37bdK3Lr6t4nmd1l5kPBQrPxXzz2EvvQjA/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<h2 id="将工程打包为-Jar-包"><a href="#将工程打包为-Jar-包" class="headerlink" title="将工程打包为 Jar 包"></a>将工程打包为 Jar 包</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruw9I5jwWKz2iaLTicUXmdtMTWjJwY4wwXngccbGVJbL9w92g4vB9xQiaVSTL7xibEoWGLXEH1Ufc7QjOA/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruw9I5jwWKz2iaLTicUXmdtMTWnjsC32TbeR66PK4wr3g92nmdMYYiaNrrQGRxWxEAPCh1Adu5AEfnDnA/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<p>如果你能看到 <code>out/artifacts</code> 文件夹，那么你将能看到 Jar 包</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/ePw3ZeGRruw9I5jwWKz2iaLTicUXmdtMTWPETajnwylHwQvO6QvWfcFvCXNL50lxMyicmW3k7LPg7Yib159OMEiaVdw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h2 id="运行打包的应用程序，执行-Jar"><a href="#运行打包的应用程序，执行-Jar" class="headerlink" title="运行打包的应用程序，执行 Jar"></a>运行打包的应用程序，执行 Jar</h2><h1 id="操作基础"><a href="#操作基础" class="headerlink" title="操作基础"></a>操作基础</h1><p>当你会构建一个应用程序了，接下来就是一些基础操作，你可能不知道的基础操作。为什么使用 IDE？不就是因为想提高效率么？很多有用的特性都不知道，怎么提高效率？</p>
<p><strong>在相同内容后生成光标，一个一个选择</strong> ：</p>
<p>具体什么意思可以看下面这个动图就行了，需要配合快捷键使用，可以在相同的关键字后面生成光标，这样删除、修改添加新的代码不就方便了吗？</p>
<ul>
<li>Windows：<code>Alt + J</code></li>
<li>Mac: <code>Ctrl + ``G</code></li>
</ul>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCqoz4dPTicpfofx0aUICa9dU0ZdGxvvuHv0Gxu85WvLFSRWiah2p6tcDw/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<p><strong>在所有的相同的内容后添加光标，一步到位：</strong></p>
<p>使用快捷键就能在所有的 word 后生成光标</p>
<ul>
<li>Windows：<code>Ctrl + Shift + Alt + J</code></li>
<li>Mac: <code>Ctrl + Command + G</code></li>
</ul>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCp1H6w3F6DPcMM7A93OBmgiaJCJtF9t7XrxvJFtn57ic1icib6AzC6tiaUcw/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<p><strong>数列光标：</strong></p>
<p>方法：alt + 按住鼠标左键拖动就能达到下面动图的效果了，效率 max！</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCiaOTkEVAOYNUKmyYGxTx6qdN8QWDeViaqkcicKsfqMbTLkSkMCndnicjIg/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<p><strong>行尾添加光标</strong> </p>
<p>alt + 按住鼠标左键拖动，从左侧拖动到右侧。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCsBp8625jJrS1SP4LrrDibz2qwcjZibT7XqHlQhoJ55XYxgWe9r9RibJuA/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<p><strong>在指定位置添加光标操作</strong> </p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCAZuEutmsuEmic1lmSClfveKemWXibZqz2ep2A44AsqGSSXSXgveD4liag/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<h2 id="格式批量调整"><a href="#格式批量调整" class="headerlink" title="格式批量调整"></a><strong>格式批量调整</strong></h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCtYIKLt8ZkLQ8rmIO5fCTib51gZvyGGOzwhvWmNxEiblZKNBibsTLwGxLw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>将上访左侧的代码批量变为右侧代码</p>
<blockquote>
<p>ctrl + alt + enter 将光标移动到当前行的上一行</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCSlicmLibmIsRslic8JdFfz2Q1uK3QgEBD5kn2qY7ZbG0kJuVLnf9NeBicw/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<h2 id="批量添加-Swagger-属性注释"><a href="#批量添加-Swagger-属性注释" class="headerlink" title="批量添加 Swagger 属性注释"></a><strong>批量添加 Swagger 属性注释</strong></h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCc70TxcjXYXQlicCbrk5SjzSqf9KBJKMicw6MDcanbe8V7WuM6xIC73CA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>将上图左侧只有注释的类，添加上 swagger 信息</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCRPPpgthYoBj24AlKm6TsCCyRUB5aVruGGxQAicSAj8AuwibDgtEFhHkg/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<p><strong>在多个相同结构 Json 中提取某字段信息</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUC9QFMKzLTrtiaDnU9wUb2a9YvNY0dpJkXN2nEmVhJiaqLTfic1Z6nRdt5Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>提取左侧 Json 中所有的 role 字段</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCE8dU7IxEEoiaknVuNQjQCqHB6rftAEia1BPB4a6Gr4KXqniarOp6JP34w/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<h1 id="IDEA-常用快捷键"><a href="#IDEA-常用快捷键" class="headerlink" title="IDEA 常用快捷键"></a>IDEA 常用快捷键</h1><p>上面介绍了一些配合鼠标使用的快捷键，还有一些常用快捷键。</p>
<p><strong>方法参数提示</strong><br><code>ctrl + p</code></p>
<blockquote>
<p>非常实用的快捷键, 有的时候我们自己写的方法, 或者在看一些源码时, 都非常有用</p>
</blockquote>
<p><strong>文本大小写转换</strong></p>
<p>ctrl + shift + U</p>
<p><strong>折叠代码/展开代码</strong></p>
<p>ctrl + - / ctrl + +</p>
<p><strong>快速查找和打开最近使用过的文件码</strong></p>
<p>ctrl + E</p>
<p><strong>自动代码片</strong></p>
<p>ctrl + j</p>
<p><strong>实现接口方法</strong></p>
<p>ctrl + i</p>
<p><strong>查看当前类的子类</strong></p>
<p>ctrl + h</p>
<p><strong>将当前行和下一行进行合并</strong></p>
<p>ctrl + shfit + j</p>
<p><strong>将光标跳到当前行的上一行</strong></p>
<blockquote>
<p>有时候在写完一行代码的时候需要添加注释, 或者为类属性添加注释的时候需要跳到当前行的上一行, 这个快捷键就非常方便</p>
</blockquote>
<p>ctrl + alt + enter</p>
<p><strong>idea git 提交</strong></p>
<p>ctrl + k</p>
<p><strong>删除当前行</strong></p>
<p>ctrl + y</p>
<p><strong>重写 或者 实现接口或父类方法</strong></p>
<p>ctrl + o</p>
<p><strong>删除类中没有用到的 package</strong></p>
<p>ctrl + alt + o</p>
<p><strong>进入设置界面</strong></p>
<p>ctrl + alt + s</p>
<p><strong>在当前光标在的这样一行的下一行添加一行</strong></p>
<p>ctrl + shfit + enter</p>
<p><strong>弹出， 当前类中的方法集合</strong></p>
<p>ctrl + F12</p>
<blockquote>
<p>最常用的快捷键之一, 快速的查找方法</p>
</blockquote>
<p><strong>添加书签</strong></p>
<p>ctrl + F11</p>
<h5 id="快速生成-try-if-等语句"><a href="#快速生成-try-if-等语句" class="headerlink" title="快速生成 try, if 等语句"></a><strong>快速生成</strong> <strong><code>try, if</code> 等语句</strong></h5><p>alt + shift + t</p>
<blockquote>
<p>当你试用了之后, 你会爱上这个快捷键的</p>
</blockquote>
<p><strong>抽取局部变量</strong></p>
<p>ctrl + alt + v</p>
<blockquote>
<p>将当前选中的代码抽取为一个局部变量</p>
</blockquote>
<p><strong>进入到实现子类中</strong></p>
<p>ctrl + alt + b</p>
<blockquote>
<p>在使用<code>mvc</code>框架的时候, 往往我们只有一个接口的实例 这个快捷键可以直接到实现类中</p>
</blockquote>
<p><strong>格式化代码</strong></p>
<blockquote>
<p>让代码变得优美, 是每个程序员都应该注意的事, 方便自己和他人阅读, 利人利己</p>
</blockquote>
<p><strong>idea 多光标选择</strong></p>
<p><strong>按下滚轮上下拖动鼠标即可</strong></p>
<p>ctrl + alt + L</p>
<h5 id="idea-批量修改相同内容"><a href="#idea-批量修改相同内容" class="headerlink" title="idea 批量修改相同内容"></a><strong>idea 批量修改相同内容</strong></h5><p>ctrl + alt + shift + j</p>
<blockquote>
<p>有的时候数据需要批量处理, 比如, 正常来说我们的实体类, 在使用<code>mybatis</code> 等逆向工程进行生成的时候, 一般属性是有注释的, 但是在针对如果我们使用了<code>swagger</code> 等插件需要来显示传递实体所代表的含义的时候, 就需要我们自己一个个的去写, 就会显得异常麻烦</p>
</blockquote>
<p><strong>运行当前类</strong></p>
<p>ctrl + shift + F10</p>
<blockquote>
<p>在写一些测试代码的时候 这个快捷键就显得特别方便</p>
</blockquote>
<p><strong>从多项目中启动一个 debug 模式</strong></p>
<p>alt + shfit + F9</p>
<blockquote>
<p>在微服务中 多个工程在一个项目中的时候, 这个方法就比较的好用, 这样就不用自己一个一个的去点省去很多没必要的操作</p>
</blockquote>
<p><strong>从多项目中启动一个 正常模式</strong></p>
<p>alt + shfit + F10</p>
<h5 id="重新编译当前项目"><a href="#重新编译当前项目" class="headerlink" title="重新编译当前项目"></a><strong>重新编译当前项目</strong></h5><p>ctrl + shift + F9</p>
<blockquote>
<p>当你发现有的问题 特别的奇怪, 命名表面上没问题, 但就是项目运行不了的时候, 重新编译一下获取就好了</p>
</blockquote>
<p>查看当前类在哪些地方被使用过</p>
<h5 id="快速的查看选中类-选中方法的定义"><a href="#快速的查看选中类-选中方法的定义" class="headerlink" title="快速的查看选中类, 选中方法的定义"></a>快速的查看选中类, 选中方法的定义</h5><blockquote>
<p>有的时候我们不想进入方法内部, 或者进入类的内部查看细节, 想要在外面就探查清楚, 就可以使用此种方法</p>
</blockquote>
<p>ctrl + shift + i</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCQoDia6qpsnAbYDfYYk7kdRxYqqRqXan7IrRkq7vOLIliaEibYb6yczr0w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>比较强大的几个快捷键之一 <code>Ctrl + ~ </code>(感叹号旁边的按键)</p>
<p><strong>共有五种可供选择的操作</strong></p>
<p><strong>Switch Code Formatter (切换代码格式化程序)</strong></p>
<p><strong>1. Color Scheme (配色方案)</strong></p>
<p>可以设置一些常用的配色, 字体样式, 可以一键切换</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCVdTF7EZkNIkfKdyONHp7AA1amyfVmUD1xPCdhibvxtvU58cUia5vgBEw/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"><strong>2.</strong> <strong><code>Code Style Scheme</code></strong></p>
<p><strong>3.</strong> <strong><code>Keymap</code> (快捷键列表)</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCiaNQMn3gO7PelrVHnraSibbX6AqdpwJokibBx4IaX2krm3wOibokmiaglhQ/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<p><strong>4. View Mode (显示模式)</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCoBEhL91j8SL1Oiajx2crej1tIvtkyn5XrRlE0KeMzibml1xOibgRIykuw/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<p><strong>5. Look and Feel (设置软件主题)</strong></p>
<p><strong>idea 调出版本控制操作</strong></p>
<p>alt + ~</p>
<p>\4. IDEA常用设置</p>
<h3 id="IDEA-以新窗口的形式打开多个项目"><a href="#IDEA-以新窗口的形式打开多个项目" class="headerlink" title="IDEA 以新窗口的形式打开多个项目"></a><strong>IDEA 以新窗口的形式打开多个项目</strong></h3><blockquote>
<p>File - Settings - Appearance &amp; Behavior - System Settings</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCAq0TibZIlhbxSI3rhibXnKB9ibubwZVk53waw4DIveOia3IeJEbDhaaRzA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="修改-IDEA-默认编码-gt-UTF-8"><a href="#修改-IDEA-默认编码-gt-UTF-8" class="headerlink" title="修改 IDEA 默认编码 -&gt; UTF-8"></a><strong>修改 IDEA 默认编码 -&gt; UTF-8</strong></h3><blockquote>
<p>File - Settings - Editor - File Encodings</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCXJN0kicBLLO4oce3opDHAdnqicNiaicyMggH83Gu5O93fCQhStTlusKYLg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="设置统一编译器和编译版本"><a href="#设置统一编译器和编译版本" class="headerlink" title="设置统一编译器和编译版本"></a><strong>设置统一编译器和编译版本</strong></h3><blockquote>
<p>File - Setting - Build - Compiler - Java Compiler</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUC9k2ep1cGnGROQbs5qLaA1go7dYGicWzgMI267lIJ155Q1wUBpAKrp6w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="设置类注释"><a href="#设置类注释" class="headerlink" title="设置类注释"></a><strong>设置类注释</strong></h3><blockquote>
<p>File - Editor- File and Code Templates</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCfPSMWDuXZrJcVwDV46f2936yss72wEoaxm1VZ1BSvlevaXOVdNVjXA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><code>$$end$$</code> 可以设置光标结束的位置</p>
<h3 id="自动导包"><a href="#自动导包" class="headerlink" title="自动导包"></a><strong>自动导包</strong></h3><blockquote>
<p>File - Editor- General - Auto Import</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCLGR8H8YgXnIg5Ou1BjXxCJO9brkqa44WViawzrabug9ypkwRCA438Ow/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="内存使用量展示"><a href="#内存使用量展示" class="headerlink" title="内存使用量展示"></a><strong>内存使用量展示</strong></h3><blockquote>
<p>由于日常开发时都是在公司的办公电脑上进行的，所以内存总是不够用，但是又不清楚 IDEA 具体实时的占用了多少内存。这个时候对于一些内存并不是太够的开发人员来说能看到实时的内存使用量还是比较好的</p>
<p>File - Settings - Appearance &amp; Behavior</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCHHCQZaOF9rVYy7xjMW3oGSiaK3iahzic3Ss2xiaZZBDPibIVkbxeEZxsYAA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="开启悬浮提示"><a href="#开启悬浮提示" class="headerlink" title="开启悬浮提示"></a><strong>开启悬浮提示</strong></h3><blockquote>
<p>有时候在看代码的时候，不清楚一个类具体是干什么的，就会点进去看这个类的注释，但是强大的 IDEA 是支持不用点进去就可以看到注释的以及类的相关信息的。</p>
<p>File - Settings - Editor - General</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCnm6GE8SbIbXs5fsQicc9HDpKuG3N5XngeB9zQe1icq6ZicT28TIHDeaBA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="Ctrl-鼠标滚轴修改字体大小"><a href="#Ctrl-鼠标滚轴修改字体大小" class="headerlink" title="Ctrl+鼠标滚轴修改字体大小"></a><strong>Ctrl+鼠标滚轴修改字体大小</strong></h3><blockquote>
<p>IDEA 也支持向浏览器那样按住 Ctrl+鼠标滚轴来改变编辑区的字体的大小</p>
<p>File–&gt;Settings–&gt;Editor–&gt;General。</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCJtwciau1o4EAicf0NemhU46vSsNkIX5Y9wMrTrpz8qKcb0wOK3xIfchw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="显示多行-Tab"><a href="#显示多行-Tab" class="headerlink" title="显示多行 Tab"></a><strong>显示多行 Tab</strong></h3><blockquote>
<p>当我们打开的标签页多了的时候，默认的会隐藏在右侧，当我们需要的时候在右侧找到后再打开。IDEA 是支持多行显示的，这样在大屏幕的显示器上也不用总去点击右侧的去找刚才打开过的文件了</p>
<p>File - Settings - Editor - General - Editor Tabs</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCCeld6NVtO5MaHcNtMh1bCFGHy0yRxqaNiaJQywnnDicMGwjosJicXicXeA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="设置字体-行距-让代码看着更舒服"><a href="#设置字体-行距-让代码看着更舒服" class="headerlink" title="设置字体, 行距 让代码看着更舒服"></a><strong>设置字体, 行距 让代码看着更舒服</strong></h3><blockquote>
<p>File - Settings - Editor - Font</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCW9T5QbNZSmuKv1aV3VmLZHjEOg749d85cvUfGaQp9PfmwT5Hw18TPw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="IDEA-GIT-配置"><a href="#IDEA-GIT-配置" class="headerlink" title="IDEA GIT 配置"></a><strong>IDEA GIT 配置</strong></h3><blockquote>
<p>File - Settings - Version Control - Git</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUC21QpUpdeOZzWHEhSyKiau5DdZ8OFEeeZ77fIAGERJsVdbyZicYh9XYUg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="IDEA-MAVEN-配置"><a href="#IDEA-MAVEN-配置" class="headerlink" title="IDEA MAVEN 配置"></a><strong>IDEA MAVEN 配置</strong></h3><blockquote>
<p>File - Settings - Build - Build Tools - Maven</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCXwFmKicTU9rOUd3mDtGCC1KTibxYicwK8Sc25mia8AycibGgJ37lu1ib1vIg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>maven 阿里镜像配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;mirror&gt;</span><br><span class="line">    &lt;id&gt;nexus&lt;&#x2F;id&gt;</span><br><span class="line">    &lt;mirrorOf&gt;*&lt;&#x2F;mirrorOf&gt;</span><br><span class="line">    &lt;url&gt;http:&#x2F;&#x2F;maven.aliyun.com&#x2F;nexus&#x2F;content&#x2F;groups&#x2F;public&#x2F;&lt;&#x2F;url&gt;</span><br><span class="line">&lt;&#x2F;mirror&gt;</span><br></pre></td></tr></table></figure>

<h2 id="自动编译"><a href="#自动编译" class="headerlink" title="自动编译"></a><strong>自动编译</strong></h2><p>具体步骤：顶部工具栏 File -&gt;Other Settings -&gt; Default Settings -&gt; Auto Import</p>
<p>说明：开启自动编译之后，结合Ctrl+Shift+F9 会有热更新效果。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/QCu849YTaIMwibTxtyZ5ggYDuJKVwq4B9qtGEpF2zibnntvBOD4fRJ8Atdjy2t3TI0qkH6z6m7ciah6ER4GhSA9Ag/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>具体步骤：敲击 Ctrl + Shift + Alt + / 然后双击Shift搜索进入Registry ，找到compiler.automake.allow.when.app.running ，然后勾选上。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/QCu849YTaIMwibTxtyZ5ggYDuJKVwq4B9NQ6URxjciav5STm3AMr6Al1cPFBHlkibNm8AFo22iaSajuQyUMibV90H0w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/QCu849YTaIMwibTxtyZ5ggYDuJKVwq4B9jmk7G9H6NGnyXdCZ9tfopCtiaB0W0d89a5MTu7jZvCLEb3h1Q2Ea4aA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>最后 如果想知道SpringBoot如何具体实现热部署的请点击SpringBoot+IDEA实现热部署教程：</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/f658fed35786">https://www.jianshu.com/p/f658fed35786</a></p>
<h2 id="取消大小写敏感"><a href="#取消大小写敏感" class="headerlink" title="取消大小写敏感"></a><strong>取消大小写敏感</strong></h2><p>具体步骤：</p>
<p>File | Settings | Editor | General | Code Completion Case | Sensitive Completion = None</p>
<p>取消大小敏感，在编写代码的时候，代码的自动提示将更加全面和丰富。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/QCu849YTaIMwibTxtyZ5ggYDuJKVwq4B91Kia9RjAEXo4sdr9QhE0icsybC0Vpt4L55eqqFdJb3VpQwxBO5doQXcw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h2 id="调整字体类型和字体大小"><a href="#调整字体类型和字体大小" class="headerlink" title="调整字体类型和字体大小"></a><strong>调整字体类型和字体大小</strong></h2><p>默认的白色背景和细小的字体会影响大家的编码体验，这里特意提供了调整代码窗的快捷配置。打开配置，搜索Font，然后再Font可以调整字体类型，Size可以调整字体大小，如图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/QCu849YTaIMwibTxtyZ5ggYDuJKVwq4B96r46MRAvpZHP4KoiaLzxB9gHQoWVZTfKzPnzphiaVFicDSnlohPXTRuQA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h2 id="将快捷键设置为跟Eclipse一样"><a href="#将快捷键设置为跟Eclipse一样" class="headerlink" title="将快捷键设置为跟Eclipse一样"></a><strong>将快捷键设置为跟Eclipse一样</strong></h2><p>很多人可能并不习惯IDEA的快捷键，为了方便，这里我们将快捷键设置为跟 Eclipse一样。</p>
<p>具体步骤: File -&gt; Settings -&gt; Keymap - &gt; 选择Eclipse .</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/QCu849YTaIMwibTxtyZ5ggYDuJKVwq4B927IIibSTv7XQEd5DfeBRlmII9px6oYFCxfnodiaEuKnIQr2BEXManmGQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>从Eclipse转过来的小伙伴 可以放心使用</p>
<h2 id="打开常用工具栏"><a href="#打开常用工具栏" class="headerlink" title="打开常用工具栏"></a><strong>打开常用工具栏</strong></h2><p>具体步骤：顶部导航栏 - View -&gt; 勾选 Toolbar &amp; Tool Buttons</p>
<p>\5. IDEA 常用插件</p>
<p><strong>AlibabaCloudToolkit</strong></p>
<p>这个插件更加适用于小型项目，或者在测试环境开发。生产环境 个人感觉不太适用。</p>
<p>个人经常会有这样的需求，每次自己更新完测试环境之后, 就需要 <code>Maven</code> 打包<code>clean install</code>, 然后<code>copy</code> <code>jar</code> 包, 利用<code>ftp</code>工具上传<code>jar</code>包到测试服务器, 然后<code>kill</code> 服务, 在启动服务 <code>java -jar</code> , 有时更新频繁 这就是一件非常麻烦的事</p>
<p><code>Cloud Toolkit</code> 是本地 <code>IDE</code> 插件，帮助开发者更高效地开发、测试、诊断并部署应用。通过插件，您可以将本地应用一键部署到云端<code>（ECS、EDAS 和 Kubernetes 等</code>）和任意服务器；并且它还内置了 <code>Arthas</code> 程序诊断、<code>Dubbo工具</code>、<code>Terminal Shell</code> 终端和 <code>MySQL</code> 执行器等工具。</p>
<p>官方链接：<a target="_blank" rel="noopener" href="https://www.aliyun.com/product/cloudtoolkit">https://www.aliyun.com/product/cloudtoolkit</a></p>
<p>简单的说, 安装了这个插件之后，Idea 就具备了一些 Jenkins 的自动部署的功能</p>
<p><strong>1</strong> 安装</p>
<p>在 Idea 工具中 Plugins 直接搜索安装</p>
<p><strong>2</strong> 使用</p>
<p>在安装完成之后, 在工具栏中就会出现阿里云的按钮, <strong>点击按钮</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCnomY6Mu7RricncKiaGFyBLfm49JM9IB909xZ3asaGJ9rPLqYiapmMLC8g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>然后点击 <code>Deploy to Host</code>, 然后下方就会出现添加主机页面</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCxicp9of0h1ysbxGCbB8YiaPVhicpW8xMdHQaEnrcyWaVEMdIEric1Wqp1w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>点击 <code>Add Host</code></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCLNKc3jFnIKYUYUJicHeQGdj3QQplrZzNJo63NhicAibRSB8fTXvTIwy8g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>以我自己的博客为例, 输入完配置之后, 点击 <code>Test Connection</code>, 出现 <code>Succeeded</code>, 点击 <code>add</code>, 代表添加成功</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCjxkOECykPSpPCxw72fpRQSibrCibeR7ibHibxnUe5Na9qfKkltgSdKo2icg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>然后再点击 <code>Deploy to Host</code></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCqRj0Qibo89LJbnKZRYCeEmvZibYDjFOHPruxZntK3cibWUDxR9ibPmicGsA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>点击<code>Run</code>, <code>idea</code> 便会, 先使用<code>maven</code>打包, 后发送到服务器的指定位置</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCDu6azuO6iavaibIaKjJVkOdffJFkeYQBUVPf3TJQGelkicSK3RUvzmscA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCaW1hKVvt9Wlgop9Wiaw1ukIeuvza4BkuFb96hX0DpWNsPQibntVAOIIg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>后续还可以 监听启动日志, 很简单, 就是 <code>Advanced</code> 里面, 大家看看就知道了,<br>后续有时间再完善笔记吧</p>
<p><strong>IDEA 插件 Git Flow</strong></p>
<h2 id="插件作用：集成-Git-Flow-让我们更加专注在-开发-这件事上。"><a href="#插件作用：集成-Git-Flow-让我们更加专注在-开发-这件事上。" class="headerlink" title="插件作用：集成 Git Flow 让我们更加专注在 开发 这件事上。"></a>插件作用：集成 Git Flow 让我们更加专注在 开发 这件事上。</h2><p>Git Flow：</p>
<p><a target="_blank" rel="noopener" href="https://medium.com/@rafavinnce/gitflow-branch-guide-8a523360c053">https://medium.com/@rafavinnce/gitflow-branch-guide-8a523360c053</a></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a><strong>安装</strong></h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCqknTxMR0rjDZt2kHsgqFlOyjzQ7XcKKIB7YtoCprS6mdRLCFZzoXwA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a><strong>使用</strong></h2><p>最开始还没有初始化的时候，点击右下脚 GitFlow init</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCCRwYLnISXVxFkD5noUicbeS3NgcTwKUWtXUG3WgZbIdt62BLZkGkuNg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>直接 默认 设置就好，点击 Ok 之后，就可以开始使用了。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCBYVzFx98Eyenu25afLXpk4GAnibZcKuOB7XPPxlvPdsuPBVCTMXBoJg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>按照最规范的流程走，可以避免在未来某个阶段掉坑里。</p>
<p>Git 版本管理规范：</p>
<p>master：永远处于production-ready状态</p>
<ul>
<li>主分支，产品的功能全部实现后，最终在master分支对外发布；</li>
<li>只读分支，只能从release或hotfix分支合并，不能修改；</li>
<li>所有在master分支的推送应该做标签记录，方便追溯。</li>
</ul>
<p>develop：最新的下次发布的开发状态</p>
<ul>
<li>主开发分支，基于master分支克隆，发布到下一个release；</li>
<li>只读分支，feature功能分支完成，合并到develop（不推送）；</li>
<li>develop拉取release分支，提测；</li>
<li>release/hotfix分支上线完毕，合并到develop并推送。</li>
</ul>
<p>feature：开发新功能都从develop分支出来，完成后merge回develop</p>
<ul>
<li>功能开发分支，基于develop分支克隆，用于新需求的开发；</li>
<li>功能开发完毕后合并到develop分支（未正式上线之前不能推送到远程中央仓库）</li>
<li>feature可以同时存在多个，用于团队多功能同步开发，属于临时分支，开发完毕后可以删除。</li>
</ul>
<p>release：准备要release的版本，只修bug。从develop出来，完成后merge回master和develop</p>
<ul>
<li>测试分支，feature分支合并到develop分支之后，从develop分支克隆；</li>
<li>只要用于提交给测试人员进行功能测试，测试过程中如果发现BUG在release分支修复，修复完成上线后合并到</li>
<li>develop/master分支并推送完成，做标签记录；</li>
<li>临时分支，上线后可删除。</li>
</ul>
<p>hotfix：等不及release版本就必须马上修复master上线。从master出来，完成后merge回master和develop</p>
<ul>
<li>补丁分支，基于master分支克隆，主要用于对线上的版本进行BUG修复；</li>
<li>修复完毕后合并到develop/master分支并推送，做标签记录；</li>
<li>所有hotfix分支的修改会进入到下一个release；</li>
<li>临时分支，补丁修复上线后可以删除；</li>
</ul>
<p><strong>IDEA 插件 PlantUML</strong></p>
<h3 id="1-背景"><a href="#1-背景" class="headerlink" title="1. 背景"></a><strong>1.</strong> 背景</h3><p>之前介绍过 使用 Vscode 画 UML，实际上 idea 中也有类似的插件 可以画 UML 图。</p>
<p>PlantUML 语法：<a target="_blank" rel="noopener" href="https://plantuml.com/zh/component-diagram">https://plantuml.com/zh/component-diagram</a></p>
<h3 id="安装插件安装地址："><a href="#安装插件安装地址：" class="headerlink" title="安装插件安装地址："></a>安装插件安装地址：</h3><h3 id="https-plugins-jetbrains-com-plugin-7017-plantuml-integration"><a href="#https-plugins-jetbrains-com-plugin-7017-plantuml-integration" class="headerlink" title="https://plugins.jetbrains.com/plugin/7017-plantuml-integration"></a><a target="_blank" rel="noopener" href="https://plugins.jetbrains.com/plugin/7017-plantuml-integration">https://plugins.jetbrains.com/plugin/7017-plantuml-integration</a></h3><p>在安装完官方的插件之后，还需要额外安装一个 graphviz ，不然有的复杂的用例图就没办法展示了。</p>
<p>graphviz：<a target="_blank" rel="noopener" href="https://graphviz.org/download/">https://graphviz.org/download/</a></p>
<p><strong>2.</strong> windows 安装</p>
<p><em>choco install graphviz</em></p>
<p>使用</p>
<blockquote>
<p>新建文件 - PlantUML File - 选择想要创建的类型</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUC6LDoUDUrKhvQ0pJl9FO0Uw4UVm3QE1FYMD60j0rW85DzgymmKsSXNg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a><strong>流程图</strong></h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCfoDwLaAadpVLKI29n57ibhL6MvRBVgqjVgSBgz81BdmlIJTwH49qia9Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>流程图 CODE</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCtDmHNVCNhRkEXQ764ib7a8Z68dU6SCNVJAYBF2T3I5pT1CEGU2YuEKQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p> <strong>用例图</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCQVYUkJiavibPaOfZWdY7B2OHtFM64hyL4OYVQ0srW3E1vibArAmCXkFzg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>用例图 Code</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">@startuml</span><br><span class="line">left to right direction</span><br><span class="line"></span><br><span class="line">actor 普通 as User</span><br><span class="line">actor 审核 as Aduitor</span><br><span class="line">actor 编辑 as Editor</span><br><span class="line">actor 营销 as Marketing</span><br><span class="line">actor 运营 as Operator</span><br><span class="line">actor 管理员 as Admin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Admin --|&gt; User</span><br><span class="line"></span><br><span class="line">rectangle 社区 &#123;</span><br><span class="line">  User -- (查看文章)</span><br><span class="line">  User -- (发布文章&#x2F;帖子)</span><br><span class="line"></span><br><span class="line">  (帖子管理) &lt;|-- (置顶)</span><br><span class="line">  (帖子管理) &lt;|-- (审核)</span><br><span class="line">  (帖子管理) &lt;|-- (推荐)</span><br><span class="line">  (帖子管理) &lt;|-- (删除)</span><br><span class="line"></span><br><span class="line">  (社区运营) &lt;|-- (帖子管理)</span><br><span class="line">   Operator -- (社区运营)</span><br><span class="line">   Aduitor -- (社区运营)</span><br><span class="line">   Editor -- (社区运营)</span><br><span class="line">   Marketing -- (社区运营)</span><br><span class="line"></span><br><span class="line">  (App 配置) &lt;|-- (商品图片配置)</span><br><span class="line">  (App 配置) &lt;|-- (启动页配置)</span><br><span class="line">  (App 配置) &lt;|-- (活动 Banner)</span><br><span class="line">  (App 配置) &lt;|-- (互动 Banner)</span><br><span class="line">  (App 配置) &lt;|-- (商城配置)</span><br><span class="line">  (App 配置) &lt;|-- (功能配置)</span><br><span class="line">  (App 配置) &lt;|-- (产品配置)</span><br><span class="line">  (App 配置) &lt;|-- (系统配置)</span><br><span class="line">  (App 配置) &lt;|-- (新人礼包)</span><br><span class="line">  (App 配置) &lt;|-- (个人中心)</span><br><span class="line">  (App 配置) &lt;|-- (渠道配置)</span><br><span class="line">  Admin -- (App 配置)</span><br><span class="line">&#125;</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure>

<p><strong>类图</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUC2TZkNFGLW3EOibcLVl8Xf6Q6Jv7h0oeGgh9eW08S4zPzoudSA1w3lXQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>彩虹括号 🌈 Rainbow Brackets</p>
<p>由于很多人没有养成好的编码风格，没有随手 format 代码的习惯，甚至有些同事会写代码超过几百行，阅读起来将非常痛苦。</p>
<p>痛苦的原因之一就是找到上下文，由于括号太多，不确定当前代码行是否属于某个代码块，此时这个插件就会帮上大忙.</p>
<h3 id="界面效果"><a href="#界面效果" class="headerlink" title="界面效果"></a>界面效果</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUC1CTXMvUwUAHMicb4Rqd0QPjk1RsOJ9K61KaMOK4pskFXRrJChB97gew/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片">动图</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUClCOXeXS3CNwiczQWXN0Zej2XD4bySqpUOcNo8EvicLekUHhqgsqVwKHw/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<p><strong>阿里巴巴编码规范：Alibaba Java Coding Guidelines</strong></p>
<p>实时监测代码的规范性, 从代码层面减少空指针等异常的出现，阿里巴巴出品的<code>Java代码</code>规范插件, 可以扫描整个项目找到不规范的地方 并且大部分可以自动修复。</p>
<p>虽说检测功能没有 <code>findbugs</code> 强大，但是可以自动修复, 阿里巴巴 Java 编码指南插件支持。</p>
<p>让代码变得更规范， 是我们每一位程序员都应该记在心中的事。</p>
<h3 id="变量驼峰命名规范"><a href="#变量驼峰命名规范" class="headerlink" title="变量驼峰命名规范"></a>变量驼峰命名规范</h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCAI2pa28zw5AP3pniczSNLqanx5kZ1o25ND6ysFLjIckxicNLfUPgACyA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>当鼠标移到变量上时, 就会自动提示 不符合 <code>lowerCamelCase</code>命名风格</p>
<h3 id="字符串比较提示-equals"><a href="#字符串比较提示-equals" class="headerlink" title="字符串比较提示 equals"></a>字符串比较提示 <code>equals</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    String str &#x3D; null;</span><br><span class="line"></span><br><span class="line">    if (str.equals(&quot;test&quot;)) &#123;</span><br><span class="line">      System.out.println(&quot;success&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>WARNING</p>
<p>当我们初学 <code>Java</code>时, 很有可能会犯这样的错误, 这里很明显会报空指针异常, 而在编辑器中</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCgZ5xgF4IeTeXqbg0BT1hOCibX9dAaBmgbiaJA24vcib0FxJnQtdyDY2hA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>安装插件之后, 编辑器已经给出详细提示,<code>&quot;test“</code> 应该做为 <code>equals</code>方法的调用方, 并给出了原因, 应为这样很容易导致空指针异常, 并给出了例子</p>
<h3 id="当你的类命名不规范时"><a href="#当你的类命名不规范时" class="headerlink" title="当你的类命名不规范时"></a>当你的类命名不规范时</h3><p>比如我创建了一个测试类 <code>test.java</code>，就会出现如下提示</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCQiahMxAkt3ILdRM8H111axd1BhKaSEkic6u4QwibNfSe8stbzuUb9BD0w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>类名，首字母需要大写。缺少作者注释。</p>
<p><strong>mybatis 插件：Free Mybatis plugin</strong></p>
<blockquote>
<p>安装此插件后可以节约很多的开发时间, 在 <code>mapper</code> 层接口可以直接进入 <code>xml</code>文件中</p>
</blockquote>
<h3 id="IntelliJ-Lombok-plugin"><a href="#IntelliJ-Lombok-plugin" class="headerlink" title="IntelliJ Lombok plugin"></a><strong>IntelliJ Lombok plugin</strong></h3><p>Lombok pom.xml 文件配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.projectlombok&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;lombok&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.16.18&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;scope&gt;provided&lt;&#x2F;scope&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>生命很宝贵, 没有必要浪费在这个重复的工作上, 尤其是如果我们使用传统的 get set 方法, 在实体类进行变更的时候, 或多添加了列, 或减少了列, 又要重新生成对应的 get set 这难道不就是浪费时间浪费生命吗?</p>
</blockquote>
<p>还不熟悉使用的可以看这篇文章，Java 开发之 Lombok 必知必会：</p>
<p>juejin.im/post/5cf3edf7e51d454f71439c79</p>
<h3 id="GenAllSetter"><a href="#GenAllSetter" class="headerlink" title="GenAllSetter"></a><strong>GenAllSetter</strong></h3><p>在 Java 方法中, 根据 new 关键词, 为 Java Bean 生成所有Setter方法。按 GenAllSetter 键两次, 会为 Setter 方法生成默认值。</p>
<h3 id="GenDaoCode"><a href="#GenDaoCode" class="headerlink" title="GenDaoCode"></a><strong>GenDaoCode</strong></h3><p>一键生成 dao xml service</p>
<h3 id="CodeGlance"><a href="#CodeGlance" class="headerlink" title="CodeGlance"></a><strong>CodeGlance</strong></h3><p>在右侧生成代码地图</p>
<h3 id="RestfulToolkit"><a href="#RestfulToolkit" class="headerlink" title="RestfulToolkit"></a><strong>RestfulToolkit</strong></h3><p>一套 Restful 服务开发辅助工具</p>
<ul>
<li>1.根据 URL 直接跳转到对应的方法定义 ( Ctrl \ or Ctrl Alt N );</li>
<li>2.提供了一个 Services tree 的显示窗口;</li>
<li>3.一个简单的 http 请求工具;</li>
<li>4.在请求方法上添加了有用功能: 复制生成 URL;,复制方法参数…</li>
<li>5.其他功能: java 类上添加 Convert to JSON 功能，格式化 json 数据 ( Windows: Ctrl + Enter; Mac: Command + Enter )。</li>
</ul>
<h3 id="Grep-Console"><a href="#Grep-Console" class="headerlink" title="Grep Console"></a><strong>Grep Console</strong></h3><p>高亮log不同级别日志，看日志的时候一目了然。</p>
<h3 id="MyBatis-Log-Plugin"><a href="#MyBatis-Log-Plugin" class="headerlink" title="MyBatis Log Plugin"></a><strong>MyBatis Log Plugin</strong></h3><p>把 Mybatis 输出的sql日志还原成完整的sql语句，看起来更直观。</p>
<h3 id="GsonFormat"><a href="#GsonFormat" class="headerlink" title="GsonFormat"></a><strong>GsonFormat</strong></h3><blockquote>
<p>快速的讲一个 json转换为一个实体 安装完插件后 alt + s 放入正确的 json格式</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUC03FOSY1FR1ttlCzuB3DED8VQaBFVsaqHrMbEuEXvMolpLDAT6cHb1w/640?wx_fmt=gif&tp=webp&wxfrom=5&wx_lazy=1" alt="图片"></p>
<h3 id="VisualVm-Launcher"><a href="#VisualVm-Launcher" class="headerlink" title="VisualVm Launcher"></a><strong>VisualVm Launcher</strong></h3><p>运行java程序的时候启动visualvm，方便查看jvm的情况 比如堆内存大小的分配</p>
<p>某个对象占用了多大的内存，jvm调优必备工具</p>
<h3 id="jclasslib-bytecode-viewer"><a href="#jclasslib-bytecode-viewer" class="headerlink" title="jclasslib bytecode viewer"></a><strong>jclasslib bytecode viewer</strong></h3><p>一款可视化的字节码查看插件</p>
<h3 id="Codota"><a href="#Codota" class="headerlink" title="Codota"></a><strong>Codota</strong></h3><p>支持智能代码自动提示，该功能可以增强 IDEA 的代码提示功能。</p>
<p>支持 JDK 和知名第三方库的函数的使用方法搜索，可以看到其他知名开源项目对该函数的用法。当我们第一次使用某个类，对某个函数不够熟悉时，可以通过该插件搜索相关用法，快速模仿学习。</p>
<h3 id="Auto-filling-Java-call-arguments"><a href="#Auto-filling-Java-call-arguments" class="headerlink" title="Auto filling Java call arguments"></a><strong>Auto filling Java call arguments</strong></h3><p>开发中，我们通常会调用其它已经编写好的函数，调用后需要填充参数，但是绝大多数情况下，传入的变量名称和该函数的参数名一致，当参数较多时，手动单个填充参数非常浪费时间。</p>
<p>该插件就可以帮你解决这个问题。安装完该插件以后，调用一个函数，使用 Alt+Enter 组合键，调出 “Auto fill call parameters” 自动使用该函数定义的参数名填充。</p>
<h3 id="Rainbow-Brackets"><a href="#Rainbow-Brackets" class="headerlink" title="Rainbow Brackets"></a><strong>Rainbow Brackets</strong></h3><p>由于很多人没有养成好的编码风格，没有随手 format 代码的习惯，甚至有些同事会写代码超过几百行，阅读起来将非常痛苦。</p>
<p>痛苦的原因之一就是找到上下文，由于括号太多，不确定当前代码行是否属于某个代码块，此时这个插件就会帮上大忙。</p>
<h3 id="SequenceDiagram"><a href="#SequenceDiagram" class="headerlink" title="SequenceDiagram"></a><strong>SequenceDiagram</strong></h3><p>SequenceDiagram 可以根据代码调用链路自动生成时序图，超级赞，超级推荐！</p>
<p>这对研究源码，梳理工作中的业务代码有极大的帮助，堪称神器。</p>
<p>安装完成后，在某个类的某个函数中，右键 –&gt; Sequence Diagaram 即可调出。</p>
<h3 id="Java-Stream-Debugger"><a href="#Java-Stream-Debugger" class="headerlink" title="Java Stream Debugger"></a><strong>Java Stream Debugger</strong></h3><p>Stream 非常好用，可以灵活对数据进行操作，但是对很多刚接触的人来说，不好理解。</p>
<p>那么 Java Stream Debugger 这款神器的 IDEA 就可以帮到你。它可以将 Stream 的操作步骤可视化，非常有助于我们的学习。</p>
<p>下面是刚刚介绍的这些插件的名字。</p>
<ul>
<li>AlibabaCloudToolkit</li>
<li>Git Flow</li>
<li>PlantUML</li>
<li>Rainbow Brackets</li>
<li>Alibaba Java Coding Guidelines</li>
<li>翻译插件</li>
<li>mybatis 插件</li>
<li>IntelliJ Lombok plugin</li>
<li>GenAllSetter</li>
<li>GenDaoCode</li>
<li>CodeGlance</li>
<li>RestfulToolkit</li>
<li>Grep Console</li>
<li>MyBatis Log Plugin</li>
<li>GsonFormat</li>
<li>VisualVm Launcher</li>
<li>jclasslib bytecode viewer</li>
<li>Codota</li>
<li>Auto filling Java call arguments</li>
<li>Rainbow Brackets</li>
<li>SequenceDiagram</li>
<li>Java Stream Debugger</li>
<li>Ace Jump</li>
</ul>
<p>\6. 好看字体</p>
<p>最近JetBrains公司推出了一款优雅美观的字体：JetBrainsMono。</p>
<h3 id="对比-Consolas"><a href="#对比-Consolas" class="headerlink" title="对比 Consolas"></a>对比 Consolas</h3><p>对比之前一直在使用 <code>Consolas</code> 字体</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCJY4YB7dWyom6MZmdNFDsy4m3h2UpiaUdzSyS2vfarrOuwicrypPnibjQA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCLfVFrc59HhSzTXsAicRl3ibPgbPQBYTh7moKmVzZIrZ6IWMb2vqWzH4A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="下载字体"><a href="#下载字体" class="headerlink" title="下载字体"></a>下载字体</h3><p>官网下载：<a target="_blank" rel="noopener" href="https://www.jetbrains.com/lp/mono/">https://www.jetbrains.com/lp/mono/</a></p>
<p>坚果云下载：jianguoyun.com/p/DRPh-GkQ_7eJCBiv2uMC</p>
<p>Windows 安装</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCXnz3YErWQH7Y5yXyU0shiaESNuoHLs3mgF1B2n6HnjbKGPeQ5sgk35Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<ul>
<li>下载后，解压文件</li>
<li>直接双击扩展名为 <code>tff</code> 后缀的文件</li>
<li>重启 <code>IDEA</code></li>
<li><code>Perferences/Setting -&gt; Editor -&gt; Font</code>，选择 JetBrains Mono 确认即可</li>
</ul>
<p>\7. 版本控制 </p>
<p>这里主要盘点一下在 IDEA 中进行版本控制时，大部分人没注意到的一些细节吧，主要包括下面这写。</p>
<ul>
<li>查看每一行代码的条件人, 提交时间（大部分人不知道）</li>
<li>克隆远程代码</li>
<li>拉取远程代码</li>
<li>将暂存区代码提交到本地库</li>
<li>将本地库 提交到远程库</li>
<li>切换分支, 或拉取远程分支</li>
<li>查看当前打开类 历史记录</li>
<li>Stash</li>
<li>Check Out</li>
</ul>
<p>查看每一行代码的条件人, 提交时间（大部分人不知道）</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCw1DXaYL0OXmjuib5UUrRJjsfoMMmXV63rCuBda4CloECXGSlWaE78kQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>选择后入下图所示</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCphlxOnqBPc4nyMyUS2tYgbdIA9Hp9yicakyXAKrq6oOSvVlpSQq3vibA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>鼠标移动上去还能看到提交详细信息</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCUibHgHy8sc9Cl4W8sqF3y93gqTvd8ibewV2yEYlIzgEEkyG1PqFrczwg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>克隆远程代码</p>
<blockquote>
<p>git clone origin url</p>
</blockquote>
<p><strong>常规操作</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUC9ZvpmQeXn3snS2ZbRnxOQZBvZMgyc7errfPhicoN324tyDzG7V0kgAg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>装逼操作</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCprERNlI8XrFKe9tJvU5m06MwkGbO93YF696U0404Wg6uBwZ9nzHUnw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>拉取远程代码</p>
<blockquote>
<p>git pull</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCxeKpRrqibNCEJVcXT97icRya8bEOibQA7m8obfd6dL2CgPpw8OfvFIuiaw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>快捷方式</p>
<p>ctrl + t</p>
<p>将暂存区代码提交到本地库</p>
<blockquote>
<p>git commit -m ‘message’</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUC0BmFVuAwI6jymoCm8PMrh27umCSxjd6WSIxhXyWRAGlIsLO6icCxf6w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"> <img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCIj99tVrBhQZHZdp79leg0OqgwuBRib2Yvd3SEqHnlZAPgLEiaNvsxHQg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>将本地库 提交到远程库</p>
<blockquote>
<p>git push</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCAibq15uPsaibBn7WuCiaGJwHDrGVxUbvGxFwDWWQTIKElqD4ukjN2JicnA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>快捷键</p>
<p>ctrl + shif 或 alt + 1 + 8</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">切换分支, 或拉取远程分支</span><br></pre></td></tr></table></figure>

<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUC699vEsKurssqH5eGJtyia1aHQeLsKb4ny78bvrKvqK2hLoxicUOQ256A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>以下提供几种快捷方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctrl + shift + &#96; 或 alt + ~ + 7 或</span><br></pre></td></tr></table></figure>

<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCrbXbiaciblZIkn0rthiaXcd8cpN0jEcoVar7FIjmTKBu3klyb8G9Oj8xw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>查看当前打开类 历史记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alt + ~ + 4查看项目工程历史记录</span><br></pre></td></tr></table></figure>

<p>选中工程后</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alt + ~ + 4</span><br></pre></td></tr></table></figure>

<p>或 <code>alt + 9</code> 切换到 <code>Version Control</code> 面板 选择log</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCVkibroqcHeVrGsnzyEmIUPNrY4nRxwyvLZme5UlQW6wnicFPQiaazK8gg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>Stash</p>
<p>应用场景</p>
<p>我在本地修改好后，发现远程分支已经被改动了，此时我本地也被改动了就造成了冲突，无法push或者pull。此时可以使用git stash</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git stash &#x2F;&#x2F;把本地的改动暂存起来</span><br><span class="line">git pull &#x2F;&#x2F;拉取远端分支（此时本地分支会回滚到上次commit的情况，新的改动都存在了stash中）</span><br><span class="line">git stash pop &#x2F;&#x2F; 将栈顶改动重新加回本地分支，就可以继续修改了，当然，如果改好了就是add,commit,push啥的。。</span><br></pre></td></tr></table></figure>

<p>不小心改动了其他分支，例如忘记切换，直接在master分支上做改动，这里假设我的分支是test分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git stash &#x2F;&#x2F;把本地当前改动暂存起来，此时master分支就恢复到了上次拉取时的状态</span><br><span class="line">git checkout test &#x2F;&#x2F;切换到需要改动的分支</span><br><span class="line">git stash pop &#x2F;&#x2F;将改动pop到自己当前的分支</span><br></pre></td></tr></table></figure>



<p>Idea 将现在本地的修改存储在 Stash 中<code>alt + ~</code>加 <code>9</code></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCpB9sjs9lUQP25nmh2KibxbTS8xZHZhiagynpibFUPI45DLHs0gfY0YtbQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>将 Stash 中的代码还原</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwBkQUFiaMLcXTcEKOFSszUCkq8hSBQLS9UJS5JKyibyQvrDrMuytxubKlILk7AsIiceoSztgmibUN50g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h3 id="Check-Out"><a href="#Check-Out" class="headerlink" title="Check Out"></a>Check Out</h3><p>将本地修改的代码还原对应命令 <code>git checkout &lt;file&gt;</code></p>
<p>\8. Terminal 配置</p>
<p>将 Idea 的 Terminal 改为 Git Bash。使用体验翻倍</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruw9I5jwWKz2iaLTicUXmdtMTWg7sfKREk1jXhGr6tMrlHbeDa6ryODeLkGyicrw0XRuNGbxCEy2fp3vw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>以前用着这么恶心的 CMD Terminal 我居然没有想法去修改。设置看图</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruw9I5jwWKz2iaLTicUXmdtMTWUVWiaEyOT6LQ8em6iaWpiaB2Ftspouqzkegxuu4DV3jScvUz6DpahDpJw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h1 id="调试功能"><a href="#调试功能" class="headerlink" title="调试功能"></a>调试功能</h1><p><strong>1.设置断点</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAgrfXuQGnxW2XeOweZm2iaRic1TqWVeXUUhMUGGRnojWfa00fhpERYAVw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>选定要设置断点的代码行，在行号的区域后面单击鼠标左键即可。</p>
<h3 id="2-开启调试会话"><a href="#2-开启调试会话" class="headerlink" title="2.开启调试会话"></a><strong>2.开启调试会话</strong></h3><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAPh4zkUvZewflv9fFdEM0RK9XFl8ibreIxEejroYpTx2oNR7mJMT5JaA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>点击红色箭头指向的小虫子，开始进入调试。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAfy9CwIdCfN1Z86PM1D5QGspbjCX9ibBlBMD8fAN2ROZaVdvnWh87RPQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>IDE下方出现 Debug 视图，红色的箭头指向的是现在调试程序停留的代码行，方法 f2() 中，程序的第11行。红色箭头悬停的区域是程序的方法调用栈区。在这个区域中显示了程序执行到断点处所调用过的所用方法，越下面的方法被调用的越早。</p>
<h3 id="3-单步调试"><a href="#3-单步调试" class="headerlink" title="3.单步调试"></a><strong>3.单步调试</strong></h3><h4 id="3-1-step-over"><a href="#3-1-step-over" class="headerlink" title="3.1 step over"></a><strong>3.1 step over</strong></h4><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAtes030yYSf7JmkWy8tia4I0EJY8YnTnx5cicBbuYVaWibujRTH3oVtt6g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>点击红色箭头指向的按钮，程序向下执行一行（如果当前行有方法调用，这个方法将被执行完毕返回，然后到下一行）</p>
<h4 id="3-2-step-into"><a href="#3-2-step-into" class="headerlink" title="3.2 step into"></a><strong>3.2 step into</strong></h4><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAIQOdSkBBImQnsva3gDWE12owbO9pibl1rJ1qNukvXmn4cibAAqjibjZPA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>点击红色箭头指向的按钮，程序向下执行一行。如果该行有自定义方法，则运行进入自定义方法（不会进入官方类库的方法）。具体步骤如下：</p>
<p>在自定义方法发f1()处设置断点，执行调试</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAWiaXuIla4x4RFKp1Go7A88Twdj1xxnJ1icF6qbeWPA0picJ7peicwhHcWw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>点击</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeA4t4ibbDhjvUpDSb71E6QwGzZYxeKbIKnkBuCIudI21gzkNibSSTcHxxw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAo8efN5IzFfmqXpKrdj76obiawa6oSeibn2cnLUibXoiaibD7YCTANRgEJug/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h4 id="3-3-Force-step-into"><a href="#3-3-Force-step-into" class="headerlink" title="3.3 Force step into"></a><strong>3.3 Force step into</strong></h4><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAoXCfDC0OSoIt0xoub57lxHolZ8s2HHkZc9bS7ibTEmBQvrfr6INPCfQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>该按钮在调试的时候能进入任何方法。</p>
<h4 id="3-4-step-out"><a href="#3-4-step-out" class="headerlink" title="3.4 step out"></a><strong>3.4 step out</strong></h4><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAMhqygzvWYGw1Lxa7VvmwpUmD2NULEG1icZgj4Ilb73s5vvKRJ0gWnTg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>如果在调试的时候你进入了一个方法(如f2())，并觉得该方法没有问题，你就可以使用stepout跳出该方法，返回到该方法被调用处的下一行语句。值得注意的是，该方法已执行完毕。</p>
<h4 id="3-5-Drop-frame"><a href="#3-5-Drop-frame" class="headerlink" title="3.5 Drop frame"></a><strong>3.5 Drop frame</strong></h4><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAFeCZCJB0iaCtXIHHkJC2icSYp1EmrZQpLNcRhTGYXDgcPas78eexPLiag/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>点击该按钮后，你将返回到当前方法的调用处（如上图，程序会回到main()中）重新执行，并且所有上下文变量的值也回到那个时候。只要调用链中还有上级方法，可以跳到其中的任何一个方法。</p>
<h4 id="3-6-run-to-cursor"><a href="#3-6-run-to-cursor" class="headerlink" title="3.6 run to cursor"></a>3.6 run to cursor</h4><p>运行到光标处</p>
<h3 id="4-高级调试"><a href="#4-高级调试" class="headerlink" title="4. 高级调试"></a><strong>4. 高级调试</strong></h3><h4 id="4-1-跨断点调试"><a href="#4-1-跨断点调试" class="headerlink" title="4.1 跨断点调试"></a><strong>4.1 跨断点调试</strong></h4><p>设置多个断点，开启调试。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAiaYEGgspwTuiaKGYTKQmLTVt05k4HV9SOWPuxF8GzeItvdRQHpg7qYmw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>想移动到下一个断点，点击如下图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeA63tGWv6KriakE42BvsXExiaj4qsgYSnIDh2rHW0yCKiaxicdKBtqIxTasA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>程序将运行一个断点到下一个断点之间需要执行的代码。如果后面代码没有断点，再次点击该按钮将会执行完程序。</p>
<h4 id="4-2-查看断点"><a href="#4-2-查看断点" class="headerlink" title="4.2 查看断点"></a><strong>4.2 查看断点</strong></h4><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAbUmTuWF92qEF8c4Wfzjfq89LcuVsO7gDp4iaWf2m5rYyYibImicUcliaicw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>点击箭头指向的按钮，可以查看你曾经设置过的断点并可设置断点的一些属性。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAAzEZVf34fN0OBAvWGfRia9mVdLRTjGf8v8Eb5Undypfgyia1kSJdWrkQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>箭头1指向的是你曾经设置过的断点，箭头2可以设置条件断点（满足某个条件的时候，暂停程序的执行，如 c==97）。结束调试后，应该在箭头1处把所设的断点删除(选择要删除的断点后，点击上方的红色减号）。</p>
<h4 id="4-3-设置变量值"><a href="#4-3-设置变量值" class="headerlink" title="4.3 设置变量值"></a><strong>4.3 设置变量值</strong></h4><p><img src="https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbueVclsDbEIr99jYCox8jUeAA0zyJcSx4KjibxPDEXcMdpnMy0wp8iabWicOicH8cVEe0oyk2OZib2TyWWg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>调试开始后，在红箭头指向的区域可以给指定的变量赋值（鼠标左键选择变量，右键弹出菜单选择setValue…）。这个功能可以更加快速的检测你的条件语句和循环语句。</p>
<h1 id="idea插件将jar包反编译的命令"><a href="#idea插件将jar包反编译的命令" class="headerlink" title="idea插件将jar包反编译的命令"></a>idea插件将jar包反编译的命令</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp <span class="string">&quot;D:\swx\IntelliJ IDEA 2020.1.2\plugins\java-decompiler\lib&quot;</span> org.jetbrains.java.decompiler.main.decompiler.ConsoleDecompiler -dgs=<span class="keyword">true</span> yxtl1.jar data D:\yxtl</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/25/3.2.java%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E4%B9%8BIDEA/" data-id="ckqk8k3gj006l2wwddkgtbhzq" data-title="java开发工具之IDEA" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IDEA/" rel="tag">IDEA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" rel="tag">快捷键</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-3.开发常用软件汇总" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/24/3.%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E6%B1%87%E6%80%BB/" class="article-date">
  <time class="dt-published" datetime="2021-03-24T10:07:14.000Z" itemprop="datePublished">2021-03-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/24/3.%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E6%B1%87%E6%80%BB/">开发常用软件</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="开发中常接触的软件"><a href="#开发中常接触的软件" class="headerlink" title="开发中常接触的软件"></a>开发中常接触的软件</h1><h2 id="编辑工具"><a href="#编辑工具" class="headerlink" title="编辑工具"></a>编辑工具</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>notepad++</code></strong></td>
<td>看配置文件</td>
</tr>
<tr>
<td><strong><code>typora</code></strong></td>
<td>编辑文档</td>
</tr>
<tr>
<td><code>xmind</code></td>
<td>画思维导图，屡关系，发散思维</td>
</tr>
<tr>
<td><code>ProcessOn</code></td>
<td>免费在线作图工具,画原型图、思维导图、UML图</td>
</tr>
<tr>
<td><code>Sublime Text</code></td>
<td>代码草稿本。对python友好</td>
</tr>
<tr>
<td><code>Microsoft To Do</code></td>
<td>待办事项</td>
</tr>
</tbody></table>
<h2 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>谷歌浏览器</code></strong></td>
<td>chrome，插件好用一些</td>
</tr>
<tr>
<td><code>火狐浏览器</code></td>
<td>F12开发者模式是中文，易懂一些。可以手动设定localStorge的值</td>
</tr>
<tr>
<td><code>Microsoft Edge</code></td>
<td>微软自带的win 10浏览器</td>
</tr>
</tbody></table>
<h2 id="解压工具"><a href="#解压工具" class="headerlink" title="解压工具"></a>解压工具</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>7-zip</code></td>
<td>推荐使用，免费，无广告</td>
</tr>
<tr>
<td><code>winrar</code></td>
<td>广告多</td>
</tr>
<tr>
<td><code>2345</code></td>
<td>不推荐，会安装流氓软件</td>
</tr>
</tbody></table>
<h2 id="JAVA后端"><a href="#JAVA后端" class="headerlink" title="JAVA后端"></a>JAVA后端</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>jdk</code></strong></td>
<td>java版本，常用为1.8</td>
</tr>
<tr>
<td><code>NetBeans</code></td>
<td>java开发工具，可以用于Java、C/C++，PHP等语言的开发</td>
</tr>
<tr>
<td><code>eclipse</code></td>
<td>java开发工具，最早接触，前期常用</td>
</tr>
<tr>
<td><code>MyEclipse</code></td>
<td>在Eclipse基础上追加的功能性插件，对插件收费。在WEB开发中提供强大的系统架构平台</td>
</tr>
<tr>
<td><strong><code>idea</code></strong></td>
<td>java开发工具，目前常用</td>
</tr>
<tr>
<td><code>XJad</code></td>
<td>反编译java的class文件为java文件</td>
</tr>
<tr>
<td><strong><code>spring</code></strong></td>
<td>java框架，核心是IOC和AOP</td>
</tr>
<tr>
<td><code>spring MVC</code></td>
<td></td>
</tr>
<tr>
<td><strong><code>mybatis</code></strong></td>
<td></td>
</tr>
<tr>
<td><strong><code>spring boot</code></strong></td>
<td></td>
</tr>
<tr>
<td><strong><code>mybatis plus</code></strong></td>
<td></td>
</tr>
<tr>
<td><code>spring cloud</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="一些插件"><a href="#一些插件" class="headerlink" title="一些插件"></a>一些插件</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>IDE Eval Reset</code></td>
<td>idea重置插件。（需添加第三方插件仓库<a target="_blank" rel="noopener" href="https://plugins.zhile.io)/">https://plugins.zhile.io）</a></td>
</tr>
<tr>
<td><code>Gitee</code></td>
<td>idea集合的码云</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><code>lombok</code></td>
<td>自动生成get/set等方法</td>
</tr>
<tr>
<td><code>swagger</code></td>
<td>自动生成api文档</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><table>
<thead>
<tr>
<th>种类</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>mysql</code></strong></td>
<td>5.7</td>
</tr>
<tr>
<td><strong><code>redis</code></strong></td>
<td></td>
</tr>
<tr>
<td><code>Minio</code></td>
<td></td>
</tr>
</tbody></table>
<h2 id="数据库工具"><a href="#数据库工具" class="headerlink" title="数据库工具"></a>数据库工具</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>SQLyog</code></td>
<td></td>
</tr>
<tr>
<td><strong><code>navicat</code></strong></td>
<td></td>
</tr>
</tbody></table>
<h2 id="搜索引擎"><a href="#搜索引擎" class="headerlink" title="搜索引擎"></a>搜索引擎</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>ElasticSearch</code></td>
<td></td>
</tr>
<tr>
<td>``</td>
<td></td>
</tr>
</tbody></table>
<h2 id="项目管理工具"><a href="#项目管理工具" class="headerlink" title="项目管理工具"></a>项目管理工具</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>maven</code></strong></td>
<td>3.6.1，pom.xml文件中放依赖</td>
</tr>
<tr>
<td><code>gradle</code></td>
<td>安卓的依赖</td>
</tr>
</tbody></table>
<h2 id="代码管理工具"><a href="#代码管理工具" class="headerlink" title="代码管理工具"></a>代码管理工具</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>svn</code></td>
<td></td>
</tr>
<tr>
<td><strong><code>git</code></strong></td>
<td></td>
</tr>
</tbody></table>
<h2 id="代码托管平台"><a href="#代码托管平台" class="headerlink" title="代码托管平台"></a>代码托管平台</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>gitee</code></strong></td>
<td>码云，国内常用</td>
</tr>
<tr>
<td><strong><code>git hub</code></strong></td>
<td>国外全英文，最火最棒；速度慢，经常打不开</td>
</tr>
</tbody></table>
<h2 id="原型图"><a href="#原型图" class="headerlink" title="原型图"></a>原型图</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>Axure RP</code></td>
<td>快速创建应用软件或Web网站的线框图、流程图、原型和规格说明文档</td>
</tr>
<tr>
<td><code>墨刀</code></td>
<td>移动端原型工具</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>HBuilder</code></td>
<td>HTML开发的工具。快、绿柔护眼、国产</td>
</tr>
<tr>
<td><code>node.js</code></td>
<td></td>
</tr>
<tr>
<td><strong><code>Vue</code></strong></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><strong><code>webstorm</code></strong></td>
<td></td>
</tr>
</tbody></table>
<h2 id="前端样式框架"><a href="#前端样式框架" class="headerlink" title="前端样式框架"></a>前端样式框架</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>bootstrap</code></td>
<td></td>
</tr>
<tr>
<td><code>layui</code></td>
<td></td>
</tr>
<tr>
<td><code>element ui</code></td>
<td></td>
</tr>
<tr>
<td><code>iview</code></td>
<td></td>
</tr>
<tr>
<td><code>vant</code></td>
<td></td>
</tr>
</tbody></table>
<h2 id="linux系统"><a href="#linux系统" class="headerlink" title="linux系统"></a>linux系统</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>VMware</code></td>
<td></td>
</tr>
<tr>
<td><code>Ubuntn</code></td>
<td></td>
</tr>
<tr>
<td><code>Centos</code></td>
<td>7版本常见，服务器用的多</td>
</tr>
<tr>
<td><code>XenServer</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>Tomcat</code></strong></td>
<td></td>
</tr>
<tr>
<td><strong><code>Ngnix</code></strong></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="windows和linux的交互"><a href="#windows和linux的交互" class="headerlink" title="windows和linux的交互"></a>windows和linux的交互</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>Xftp</code></td>
<td>windows上将linux服务器内文件可视化界面</td>
</tr>
<tr>
<td><code>WinSCP</code></td>
<td>windows上访问linux，配合putty可以打开命令行</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><code>MobaXterm_Personal</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="部署项目"><a href="#部署项目" class="headerlink" title="部署项目"></a>部署项目</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>Docker</code></strong></td>
<td></td>
</tr>
<tr>
<td><code>portainer.io</code></td>
<td>可视化的docker容器，支持中文</td>
</tr>
<tr>
<td>``</td>
<td></td>
</tr>
</tbody></table>
<h2 id="抓包工具"><a href="#抓包工具" class="headerlink" title="抓包工具"></a>抓包工具</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>wireshark</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>postman</code></td>
<td></td>
</tr>
<tr>
<td><code>apipost</code></td>
<td></td>
</tr>
<tr>
<td><code>jmeter</code></td>
<td></td>
</tr>
<tr>
<td><code>微信开发者工具</code></td>
<td></td>
</tr>
</tbody></table>
<h2 id="分布式"><a href="#分布式" class="headerlink" title="分布式"></a>分布式</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>RabbitMQ</code></td>
<td></td>
</tr>
<tr>
<td><code>Zookeeper</code></td>
<td></td>
</tr>
<tr>
<td>``</td>
<td></td>
</tr>
</tbody></table>
<h2 id="远程连接服务器"><a href="#远程连接服务器" class="headerlink" title="远程连接服务器"></a>远程连接服务器</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>XShell</code></td>
<td>命令行访问</td>
</tr>
<tr>
<td><code>PuTTY</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><code>FileZilla</code></td>
<td>FTP客户端工具，可以共享文件</td>
</tr>
</tbody></table>
<h2 id="远程办公"><a href="#远程办公" class="headerlink" title="远程办公"></a>远程办公</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>VNC</code></td>
<td></td>
</tr>
<tr>
<td><code>向日葵</code></td>
<td></td>
</tr>
<tr>
<td>``</td>
<td></td>
</tr>
</tbody></table>
<h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>Python</code></td>
<td></td>
</tr>
<tr>
<td><code>VS code</code></td>
<td></td>
</tr>
<tr>
<td><strong><code>pycharm</code></strong></td>
<td></td>
</tr>
<tr>
<td>``</td>
<td></td>
</tr>
</tbody></table>
<h2 id="爬虫"><a href="#爬虫" class="headerlink" title="爬虫"></a>爬虫</h2><table>
<thead>
<tr>
<th>工具</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Selenium</td>
<td>自动化测试工具</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>​    <code>工欲善其事必先利其器</code>，开发中，工具是必不可少的东西，它能帮助我们减轻很多的工作量，让开发变得更容易。工具没有好坏之分，只有适合自己与不适合。以上就是总结的目前所接触过的工具，随着时代的不断发展，工具层出不穷，有新的就会有淘汰旧的，正如逆水行舟，不进则退,只有不断完善自己，开发新功能，才不至于被淘汰。人也是如此，只有不断学习，不断充实自己，才不至于被社会淘汰。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/24/3.%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E6%B1%87%E6%80%BB/" data-id="ckqk8k3d8001d2wwd3ugu7qyd" data-title="开发常用软件" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%96%B0%E7%8E%AF%E5%A2%83/" rel="tag">新环境</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E8%AF%B4%E6%98%8E/" rel="tag">软件说明</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-4.3.java基础知识附录" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/23/4.3.java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E9%99%84%E5%BD%95/" class="article-date">
  <time class="dt-published" datetime="2021-03-23T07:48:20.000Z" itemprop="datePublished">2021-03-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/23/4.3.java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E9%99%84%E5%BD%95/">java基础知识附录</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="原码、反码和补码"><a href="#原码、反码和补码" class="headerlink" title="原码、反码和补码"></a>原码、反码和补码</h1><p>在计算机内，有符号数有三种表示法：原码，反码，补码。计算机中，所有数据的运算都是采用补码进行的。</p>
<p>原码：二进制定点表示法，即最高位为符号位。0表示正，1表示负，其余位表示数值的大小。</p>
<p>反码：正数的反码与其原码相同。负数的反码是对其原码逐位取反，但符号位除外。</p>
<p>补码：正数的补码与其原码相同。负数的补码是在其反码的末位+1。</p>
<h1 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h1><p>浮点数：浮点数是属于有理数中某特定子集的数的数字表示，在计算机中用以近似表示任意某个实数。具体的说，这个实数由一个整数或定点数（即尾数）乘以某个基数（计算机中通常是2）的整数次幂得到，这种表示方法类似于基数为10的科学计数法。</p>
<p>一个浮点数a由两个数m和e来表示：a = m × b^e^。（计算机中b一般为2） 尾数就是小数 二进制的小数点和十进制的小数点是不同的。二进制小数点后是2的负幂，十进制是10的负幂。</p>
<p>float类型数字在计算机中用4个字节存储。遵循IEEE-754格式标准：一个浮点数有2部分组成：底数m和指数e</p>
<p>底数部分m: 使用二进制数来表示此浮点数的实际值</p>
<p>指数部分e: 占用8bit的二进制数，可表示数值范围为0-255</p>
<p>​    但是指数可正可负，所以，IEEE规定，此处算出的次方必须减去127才是真正的指数。所以，float类型的指数可从-126到128</p>
<p>​    底数部分实际是占用24bit的一个值，但是最高位始终为1，所以，最高位省去不存储，在存储中占23bit</p>
<p>格式：</p>
<p>SEEE EEEE EMMM MMMM MMMM MMMM MMMM MMMM</p>
<p>S表示浮点数正负   </p>
<p>E指数加上127后的值得二进制数据，指数位决定了大小范围</p>
<p>M底数，尾数位决定了计算精度</p>
<p>举例：</p>
<p>17.625在内存中的存储</p>
<p>首先要把17.625换算成二进制：10001.101</p>
<p>​    整数部分，除以2，直到商为0，余数反转。</p>
<p>​    小数部分，乘以2，直到乘位0，进位顺序取。</p>
<p>在将10001.101右移，直到小数点前只剩1位：    1.0001101 * 2^4 因为右移动了四位</p>
<p>这个时候，我们的底数和指数就出来了</p>
<p>底数：因为小数点前必为1，所以IEEE规定只记录小数点后的就好。所以，此处的底数为：0001101</p>
<p>指数：实际为4，必须加上127(转出的时候，减去127)，所以为131。也就是10000011</p>
<p>符号部分是正数，所以是0</p>
<p>综上所述，17.625在内存中的存储格式是：</p>
<p>01000001 10001101 00000000 00000000    </p>
<p>float  符号位1bit  指数位e 8bit  尾数位m 23bit  </p>
<p>double 符号位1bit  指数位e 11bit  尾数位m 52bit </p>
<h1 id="boolean占几个字节"><a href="#boolean占几个字节" class="headerlink" title="boolean占几个字节"></a>boolean占几个字节</h1><p>虽然boolean表现出非0即1的“位”特性，但是存储空间的基本计量单位是字节，不是位。所以boolean至少占一个字节。<br>JVM规范中，boolean变量作为int处理，也就是4字节；boolean数组当做byte数组处理</p>
<h1 id="运算符的优先级"><a href="#运算符的优先级" class="headerlink" title="运算符的优先级"></a>运算符的优先级</h1><table>
<thead>
<tr>
<th>优先级</th>
<th>描述</th>
<th>运算符</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>括号</td>
<td>()、[]</td>
</tr>
<tr>
<td>2</td>
<td>正负号</td>
<td>+、-</td>
</tr>
<tr>
<td>3</td>
<td>自增自减，非</td>
<td>++、–、!</td>
</tr>
<tr>
<td>4</td>
<td>乘除，取余</td>
<td>*、/、%</td>
</tr>
<tr>
<td>5</td>
<td>加减</td>
<td>+、-</td>
</tr>
<tr>
<td>6</td>
<td>移位运算</td>
<td>&lt;&lt;、&gt;&gt;、&gt;&gt;&gt;</td>
</tr>
<tr>
<td>7</td>
<td>大小关系</td>
<td>&gt;、&gt;=、&lt;、&lt;=</td>
</tr>
<tr>
<td>8</td>
<td>相等关系</td>
<td>==、!=</td>
</tr>
<tr>
<td>9</td>
<td>按位与</td>
<td>&amp;</td>
</tr>
<tr>
<td>10</td>
<td>按位异或</td>
<td>^</td>
</tr>
<tr>
<td>11</td>
<td>按位或</td>
<td>|</td>
</tr>
<tr>
<td>12</td>
<td>逻辑与</td>
<td>&amp;&amp;</td>
</tr>
<tr>
<td>13</td>
<td>逻辑或</td>
<td>||</td>
</tr>
<tr>
<td>14</td>
<td>条件运算</td>
<td>?:</td>
</tr>
<tr>
<td>15</td>
<td>赋值运算</td>
<td>=、+=、-=、*=、/=、%=</td>
</tr>
<tr>
<td>16</td>
<td>位赋值运算</td>
<td>&amp;=、|=、&lt;&lt;=、&gt;&gt;=、&gt;&gt;&gt;=</td>
</tr>
</tbody></table>
<p>如果在程序中，要改变运算顺序，可以使用()括起来</p>
<h1 id="编码问题"><a href="#编码问题" class="headerlink" title="编码问题"></a>编码问题</h1><p>java语言使用的是Unicode编码。</p>
<p>一般软件中的ANSI指的是对应当前系统 locale 的遗留（legacy）编码。</p>
<p>建议用 Notepad++ 等正常的专业文本编辑器保存为不带 BOM 的 UTF-8。另外，如果文本中所有字符都在 ASCII 范围内，那么其实，记事本保存的所谓的「ANSI」文件，和 ASCII 或无 BOM 的 UTF-8 是一样的。</p>
<p>ASCII码表</p>
<p><img src="file://C:\Users\swx\AppData\Roaming\Typora\typora-user-images\image-20210323162019525.png?lastModify=1618245408" alt="image-20210323162019525"></p>
<p>ASCII码规定最高位必须为0，因此只能有128个，即0~127。</p>
<p>于是需要Unicode（统一码，万国码，单一码）这个东西，就是要把地球上所有的语言的符号，都用<strong>统一的字符集</strong>来表示，一个编码真正做到了唯一，在表示Unicode字符时，通常会用“U+”然后紧跟着一组十六进制的数字来表示。</p>
<p>UTF-8是针对Unicode的一种可变长度字符编码，可以用来表示Unicode标准中的任何字符，而且编码中的第一个字节与ASCII相容。UTF-8使用一至四个字节为每个字符进行编码，汉字一般采用3个字节。</p>
<p>中文网站不需要其他国家的文字出现，用UTF-8进行编码，大多数占用3个字节甚至更多，会造成存储浪费，所以采用一套GB系列的编码，最常用的是GBK。GBK编码英文采用单字节编码，完全兼容ASCII码表，汉字采用2个字节进行编码，范围为0x8140到0xFEFE（剔除xx7F，因为对应的ASCII码表是DEL，意味着要向后删除一个字符）</p>
<p>Unicode定义一个特殊字符�，对应编码为0xFFFD。假如A支持一个特殊字符，但B不支持，在B中就会用�代替。这个字符用UTF-8编码后，十六进制表示为0xEF  0XBF  0XBD，如果连续出现两个符号，即为0xEF  0XBF  0XBD  0xEF  0XBF  0XBD，再转换成GBK码（2个字节一个字符）就成了锟（0xEFBF），斤（0xBDEF），拷（0xBFBD）。出现锟斤拷的原因就是UTF-8转码GBK时出现了问题，至少需要两个字符出现乱码才会出现锟斤拷。</p>
<p>Unicode编码：指的是带有 BOM 的小端序 UTF-16（BOM（byte order mark）也是Unicode标准的一部分，有它特定的适用范围。通常BOM是用来标示Unicode纯文本字节流的，用来提供一种方便的方法让文本处理程序识别读入的.txt文件是哪个Unicode编码（UTF-8，UTF-16BE，UTF-16LE），Linux系统不会识别BOM，直接读取；而windows会先识别，从而会使一些代码加载出问题）</p>
<p>UTF-8编码：指的是带 BOM 的 UTF-8。（对于微软而言）linux系统的UTF-8是不带BOM的，因为他要运行老版本。而windows系统之前是不带BOM的，但是为了考虑兼容性问题，所以以后的UTF-8编码都是带BOM的。（这里推荐使用不带的）</p>
<h1 id="java中的参数传递问题"><a href="#java中的参数传递问题" class="headerlink" title="java中的参数传递问题"></a>java中的参数传递问题</h1><p>基本类型：形式参数的改变对实际参数没有影响。（值传递）</p>
<p>引用类型：形式参数的改变直接影响实际参数。（地址值传递）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/23/4.3.java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E9%99%84%E5%BD%95/" data-id="ckqk8k3dj002c2wwdb1sjeqjp" data-title="java基础知识附录" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2.2.hexo搭建博客" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/23/2.2.hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" class="article-date">
  <time class="dt-published" datetime="2021-03-23T06:44:44.000Z" itemprop="datePublished">2021-03-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/23/2.2.hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">hexo搭建博客</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="用hexo来搭建一个自己的博客"><a href="#用hexo来搭建一个自己的博客" class="headerlink" title="用hexo来搭建一个自己的博客"></a>用hexo来搭建一个自己的博客</h1><p>Hexo是一款基于Node.js的静态博客框架，依赖少易于安装使用，可以方便的生成静态网页托管在GitHub和Coding上，是搭建博客的首选框架。</p>
<p>​    个人理解：GitHub上自己申请一个公共的仓库，这个仓库的地址对应的是你的博客地址。通过hexo这个工具将你本地的一些md文档上传到你的github仓库里，这样别人访问你的网站时，相当于是访问了你的仓库，在你的仓库里get到了你写的这些md文档并可以阅读。</p>
<h2 id="hexo的搭建"><a href="#hexo的搭建" class="headerlink" title="hexo的搭建"></a>hexo的搭建</h2><h3 id="1-安装Git"><a href="#1-安装Git" class="headerlink" title="1.安装Git"></a>1.安装Git</h3><p>​    git属于版本管理工具的一种，是一种分布式的系统，功能确实很强大，在协作开发中会经常性用到，所以很有必要了解。</p>
<p>windows：到git官网上下载,<a target="_blank" rel="noopener" href="https://gitforwindows.org/">Download git</a>，按照安装步骤安装到本地。下载后会有一个Git Bash的命令行工具，以后就用这个工具来使用git。</p>
<p>linux：最早的git就是在linux上编写的，只需要一行代码：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure>

<p>安装好后，用<code>git --version</code> 来查看一下版本<br><img src="/image-20210319151950597.png" alt="image-20210319151950597"></p>
<h3 id="2-安装Node-js"><a href="#2-安装Node-js" class="headerlink" title="2.安装Node.js"></a>2.安装Node.js</h3><p>​    Hexo是基于node.JS编写的，所以需要安装一下node.Js和里面的npm工具。这个属于前端一个常用工具，也有必要了解。</p>
<p>windows：<a target="_blank" rel="noopener" href="https://nodejs.org/en/download/">nodejs</a>选择LTS版本就行了</p>
<p>linux：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nodejs</span><br><span class="line">sudo apt-get install npm</span><br></pre></td></tr></table></figure>

<p>安装完后，打开命令行查看版本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure>



<p>windows在安装完git后，可以使用git bash命令来代替cmd。</p>
<p><img src="/image-20210319152742280.png" alt="image-20210319152742280"></p>
<h3 id="3-安装Hexo"><a href="#3-安装Hexo" class="headerlink" title="3.安装Hexo"></a>3.安装Hexo</h3><p>​    安装完git和node后就可以继续安装hexo。hexo就是我们用来管理博客的工具，之后博客的相关命令都是与hexo相关的。</p>
<p>先创建一个文件夹blog，然后<code>cd</code>到这个文件夹下（或者在这个文件夹下直接右键git bash打开），输入命令（cli是命令行界面）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<p>用<code>hexo -v</code>查看一下版本</p>
<p><img src="/image-20210319153759391.png" alt="image-20210319153759391"></p>
<p>至此安装完成：git，node，hexo。</p>
<p>接下来初始化一下hexo</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init myblog#这个myblog可以自己取什么名字都行，然后</span><br><span class="line">cd myblog #进入这个myblog文件夹</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>


<p>新建完成后，指定文件夹目录下有：</p>
<p>node_modules: 依赖包<br>public：存放生成的页面<br>scaffolds：生成文章的一些模板<br>source：用来存放你的文章<br>themes：主题<br> _config.yml: 博客的配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>


<p>打开hexo的服务，在浏览器输入localhost:4000就可以看到我们博客的预览图</p>
<p>按CTRL+C就可以把这个server关闭</p>
<h3 id="4-GitHub创建个人仓库"><a href="#4-GitHub创建个人仓库" class="headerlink" title="4.GitHub创建个人仓库"></a>4.GitHub创建个人仓库</h3><p>​    github是一个将来很常用的网站，虽然全是英文，但是不影响会有很多优秀的项目，软件需要从GitHub上下载和借鉴，所以掌握并熟用是必须的。注册一个属于自己的GitHub账号是很必需的。</p>
<p>登录GitHub账户后点击你的头像下有一个Your repositories，点击后可以看到你的所有仓库，点击new创建一个和你用户名相同的仓库，后面加.github.io（这里必须要和你用户名相同，只有这样，将来要部署到GitHub page的时候，才会被识别，这是一个大坑）也就是xxxx.github.io，其中xxx就是你注册GitHub的用户名。</p>
<h3 id="5-生成SSH添加到GitHub"><a href="#5-生成SSH添加到GitHub" class="headerlink" title="5.生成SSH添加到GitHub"></a>5.生成SSH添加到GitHub</h3><p>​    SSH是一种安全协议，我记得好像在https，服务器连接好多地方看到过。有用户名/密码，也有密钥。</p>
<p>在git bash中：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;yourname&quot;    #yourname输入你的GitHub用户名</span><br><span class="line">git config --global user.email &quot;youremail&quot;  #youremail输入你GitHub的邮箱</span><br></pre></td></tr></table></figure>

<p>这样GitHub才能知道你是不是对应它的账户。可以在检查一下有没有输对：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git config user.name</span><br><span class="line">git config user.email</span><br><span class="line"><span class="meta">#</span><span class="bash">创建ssh</span></span><br><span class="line">ssh-keygen -t rsa -C &quot;youremail&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash">一路回车，最后提示生成了.ssh的文件夹</span></span><br></pre></td></tr></table></figure>

<p>在电脑中找到.ssh的文件夹：</p>
<p><code>id_rsa</code>是你这台电脑的私人秘钥，不能给别人看的</p>
<p><code>id_rsa.pub</code>是公共秘钥，可以随便给别人看。把这个公钥放在GitHub上，这样当你链接GitHub自己的账户时，它就会根据公钥匹配你的私钥，当能够相互匹配时，才能够顺利的通过git上传你的文件到GitHub上。</p>
<p><code>known_hosts</code>是记录你连接过的ip文件</p>
<p>将公钥部署到你的仓库里：在GitHub的头像下点击setting，找到SSH keys的设置选项，点击<code>New SSH key</code><br>把你的<code>id_rsa.pub</code>里面的信息复制进去</p>
<p>在git bash中输入：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>



<h3 id="6-将hexo部署到GitHub"><a href="#6-将hexo部署到GitHub" class="headerlink" title="6.将hexo部署到GitHub"></a>6.将hexo部署到GitHub</h3><p>​    将hexo和github关联起来主要是修改 _config.yml这个文件的相关内容。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">swx</span>                <span class="comment">#网站的标题名</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;blog&#x27;</span>          <span class="comment">#网站的副标题</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;我的博客&#x27;</span>     <span class="comment">#网站描述。主要用于SEO，告诉搜索引擎一个关于站点的简单描述，通常建议在其中包含网站的关键词。</span></span><br><span class="line"><span class="attr">keywords:</span>                 </span><br><span class="line"><span class="attr">author:</span> <span class="string">swx</span>               <span class="comment">#你的名字。用于主题显示文章的作者</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span>           <span class="comment">#网站使用的语言</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;&#x27;</span>              <span class="comment">#网站的时区。Hexo 默认使用自己电脑的时区、时区列表。比如说：America/New_York, Japan, 和 UTC 。</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">url:</span> <span class="string">https://s-qwer.github.io/</span>         <span class="comment">#你的网站域名</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span>   <span class="comment">#文章的永久链接格式。生成某个文章时的那个链接格式：比如我新建一个文章叫temp.md，那么这个时候他自动生成的地址就是https://s-qwer.github.io/2021/03/18/hexo/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span>                    <span class="comment">#永久链接中各部分的默认值</span></span><br><span class="line"></span><br><span class="line"><span class="attr">theme:</span> <span class="string">landscape</span>          <span class="comment">#设置主题在这里，默认的是landscape。当你需要更换主题时，在官网上下载，把主题的文件放在theme文件夹下，再修改这个参数为theme文件夹下的文件名就可以</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy:</span> <span class="comment">#这个在后面进行双平台部署的时候会再次用到deploy</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/YourgithubName/YourgithubName.github.io.git</span>   <span class="comment">#YourgithubName就是你的GitHub账户</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span>                   <span class="comment">#分支</span></span><br></pre></td></tr></table></figure>

<p>接下来需要先安装<code>deploy-git</code> ，也就是部署的命令,这样你才能用命令部署到GitHub</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br><span class="line"></span><br><span class="line">hexo clean      #清除了之前生成的东西，也可以不加,相当于把public这个文件夹删除了</span><br><span class="line">hexo generate   #生成静态文章，可以用 hexo g缩写</span><br><span class="line">hexo deploy     #部署文章，可以用hexo d缩写 </span><br><span class="line"><span class="meta">#</span><span class="bash">注意deploy时可能要你输入username和password，这是一个很痛苦的过程，每次都需要输入用户名/密码，可以在网上找解决方式。最后我找了一种用git而不是https的方式。repo：git@github.com:s-qwer/s-qwer.github.io.git</span></span><br></pre></td></tr></table></figure>

<p>现在就可以在<code>http://yourname.github.io</code> 这个网站看到自己的博客</p>
<h3 id="7-设置个人域名"><a href="#7-设置个人域名" class="headerlink" title="7.设置个人域名"></a>7.设置个人域名</h3><p>​    域名这个东西相当于是一个网址的后缀名。域名是从后往前算的，依次是一级二级。。。常见的一级域名有.com,.cn,.org你可以在域名查询系统里查询这个域名是否可用，像一些比较火的域名，可能被人先注册的，你如果需要使用就需要花钱。也可以在网上找一些免费的域名。这个东西也只是作为一个标识，本质上还是指向了你的GitHub的仓库里的那个项目的文件。</p>
<p>现在你的个人网站的地址是 yourname.github.io，如果觉得这个网址不太彳亍，就需要你设置个人域名了。</p>
<p>在你的域名控制台中点解析，添加解析。192.30.252.153 和 192.30.252.154 是GitHub的服务器地址。注意，解析线路选择默认。</p>
<p>登录GitHub，进入之前创建的仓库，点击settings，设置Custom domain，输入你的域名</p>
<p>然后在你的博客文件source中创建一个名为CNAME文件，不要后缀。写上你的域名。</p>
<p>最后，在git bash中，输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d    #后两个命令也可以合并为 hexo d -g    hexo g -d  效果是一样的</span><br></pre></td></tr></table></figure>

<h3 id="8-发布文章"><a href="#8-发布文章" class="headerlink" title="8.发布文章"></a>8.发布文章</h3><p>接下来就可以正式开始写文章并发布。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hexo new newpapername      #这里的newpapername就是你要写的文章的标题名，可以是中文，英文</span><br><span class="line"><span class="meta">#</span><span class="bash">然后在<span class="built_in">source</span>/_post中就会生成一个md文件 打开这个markdown文件，就可以开始编辑写自己的文章了。当你写完的时候，再</span></span><br><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br><span class="line"><span class="meta">#</span><span class="bash">接下来就可以在你设置好的域名访问到你的博客了</span></span><br></pre></td></tr></table></figure>

<h3 id="9-Front-matter"><a href="#9-Front-matter" class="headerlink" title="9.Front-matter"></a>9.Front-matter</h3><p>Front-matter 是文件最上方以 <code>---</code> 分隔的区域，用于指定个别文件的变量：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>layout</code></td>
<td>布局</td>
</tr>
<tr>
<td><code>title</code></td>
<td>标题</td>
</tr>
<tr>
<td><code>date</code></td>
<td>建立日期</td>
</tr>
<tr>
<td><code>updated</code></td>
<td>更新日期</td>
</tr>
<tr>
<td><code>comments</code></td>
<td>开启文章的评论功能</td>
</tr>
<tr>
<td><code>tags</code></td>
<td>标签（不适用于分页）</td>
</tr>
<tr>
<td><code>categories</code></td>
<td>分类（不适用于分页）</td>
</tr>
<tr>
<td><code>permalink</code></td>
<td>覆盖文章网址</td>
</tr>
</tbody></table>
<p>分类和标签需要区别一下，分类具有顺序性和层次性，也就是说 <code>Foo, Bar</code> 不等于 <code>Bar, Foo</code>；而标签没有顺序和层次。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line">- Diary</span><br><span class="line">tags:</span><br><span class="line">- PS3</span><br><span class="line">- Games</span><br></pre></td></tr></table></figure>



<h5 id="layout"><a href="#layout" class="headerlink" title="layout"></a>layout</h5><p>当你每一次使用代码  <code>hexo new paper</code>  它其实默认使用的是post这个布局，也就是在source文件夹下的_post里面。</p>
<p>Hexo 有三种默认布局：post、page 和 draft，它们分别对应不同的路径。而自定义的其他布局和 post 相同，都将储存到 source/_posts 文件夹。</p>
<table>
<thead>
<tr>
<th>布局</th>
<th>路径</th>
</tr>
</thead>
<tbody><tr>
<td><code>post</code></td>
<td><code>source/_posts</code></td>
</tr>
<tr>
<td><code>page</code></td>
<td><code>source</code></td>
</tr>
<tr>
<td><code>draft</code></td>
<td><code>source/_drafts</code></td>
</tr>
</tbody></table>
<p>而new这个命令其实是：<code>hexo new [layout] &lt;title&gt;</code>  只不过这个layout默认是post罢了。</p>
<p>page<br>如果你想另起一页，那么可以使用<code>hexo new page board</code>  系统会自动给你在source文件夹下创建一个board文件夹，以及board文件夹中的index.md，这样你访问的board对应的链接就是<a target="_blank" rel="noopener" href="http://xxx.xxx/board">http://xxx.xxx/board</a></p>
<p>draft<br>draft是草稿的意思，也就是你如果想写文章，又不希望被看到，那么可以<code>hexo new draft newpage</code>  这样会在source/_draft中新建一个newpage.md文件，如果你的草稿文件写的过程中，想要预览一下，那么可以使用<code>hexo server --draft</code>  在本地端口中开启服务预览。</p>
<p>如果你的草稿文件写完了，想要发表到post中，<code>hexo publish draft newpage</code>  就会自动把newpage.md发送到post中。</p>
<h3 id="10-更换主题"><a href="#10-更换主题" class="headerlink" title="10.更换主题"></a>10.更换主题</h3><p>可以在<a target="_blank" rel="noopener" href="https://hexo.io/themes/">主题网站</a>上探索你喜欢的主题，然后点击主题的名字，会直接跳转到GitHub上，直接下载下来，然后放到theme文件夹下就行了，（也可以使用git bash命令： <code>git clone 跳转的网址地址</code>，这样会在theme文件夹下自动生成相应的文件夹）然后再在刚才说的配置文件中把theme换成那个主题文件夹的名字，它就会自动在theme文件夹中搜索你配置的主题。</p>
<p>而后进入你下载好的主题文件夹，可以看到里面也有一个配置文件config.xml，貌似它默认是config.xml.example，把它复制一份，重命名为_config.xml就可以了。这个配置文件是修改你整个主题的配置文件。</p>
<h3 id="11-遇到的坑"><a href="#11-遇到的坑" class="headerlink" title="11.遇到的坑"></a>11.遇到的坑</h3><p>​    严格按照步骤进行的操作，可以直接访问到了自己的博客网址。记录下自己遇到的坑：</p>
<p>​    1.因为没有按照说明输入自己的用户名作为博客的网址，从而一直报错，所以按照教程步骤一步一步来复现还是很有必要的。    </p>
<p>​    2.上传的第一篇文章的标题格式没有搞对，于是删除了本地的文件，重新加了title：+文章名字 之后上传就开始一直报错，这期间我不断进行：hexo clean 、hexo d -g的循环操作，而且需要一直输入用户名密码，被折磨了很多次之后，查了相关教程，发现hexo s可以本地预生成，访问localhost：4000可以访问，然后继续进行clean和g -d的循环操作，还是一直出错。最后看了一篇关于简化不用输入那么多次密码的方法教学，把rep里的https改为了git@之后，提交，部署一气呵成。nice！所以有的教程里面推荐rep写https也有的是直接写git格式，原理都是一样的，用的协议不一样，个人感觉git格式更方便一些，同样也是可以连接到仓库的地址。<code>repo：git@github.com:s-qwer/s-qwer.github.io.git</code>   <code>repo: git@github.com:s-qwer/s-qwer.github.io.git</code></p>
<p>​    3.因为修改时，有些配置没有起作用，这里还有个坑，就是相关的配置<code>：</code>后面必须有一个空格！</p>
<p>​    4. <code>数据类型[][]  数组名=new  数据类型[][]&#123;&#123; 元素1，元素2，.... &#125;, &#123; 元素1，元素2，.... &#125;, &#123; 元素1，元素2，.... &#125;&#125;;</code> 这个字段hexo d -g 的时候一直报错：expected name as lookup value, got .   </p>
<p>改为：<code>数据类型[][]  数组名=new  数据类型[][]&#123;&#123; 元素1,元素2... &#125;, &#123; 元素1,元素2... &#125;, &#123; 元素1,元素2... &#125;&#125;;</code> 仍然报错： expected variable end  （应为变量结尾）</p>
<p>改为：<code>数据类型[] []  数组名=new  数据类型[] []&#123;&#123; 元素1,元素2...元素n &#125;, &#123; 元素1,元素2... 元素n&#125;, &#123; 元素1,元素2...元素n &#125; &#125; ;</code></p>
<p>放弃了，加了个引用就不报错了。</p>
<p>​    5.卸载了node，重新安装npm之后，hexo命令找不到。重新安装了一下hexo，可以正常提交了。</p>
<p>​    6.提交报错：</p>
<p><img src="/2.hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/image-20210601181054370.png" alt="image-20210601181054370"></p>
<p>错误说明：YAMLException: unidentified alias “<em>title</em>*:”</p>
<p>解决方法：将*去掉不再报错</p>
<p>​    7.提交报错：</p>
<p><img src="/2.hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/image-20210601181222745.png" alt="image-20210601181222745"></p>
<p>错误说明：Error [Nunjucks Error]: _posts/8.6.VUE.md [Line 520, Column 159] expected name as lookup value, got .</p>
<p>原因猜测：是正文里面出现了多次<code>&#123;% %&#125;</code>这样的语句，网上解释说是Nunjucks引擎会把它解释为其它意思</p>
<p>解决方法：在大括号前加上\转义字符即可。我的解决方法是将内容变为代码块。</p>
<h2 id="hexo的完善"><a href="#hexo的完善" class="headerlink" title="hexo的完善"></a>hexo的完善</h2><h3 id="图片显示问题"><a href="#图片显示问题" class="headerlink" title="图片显示问题"></a>图片显示问题</h3><p>​    将文章<code>hexo d -g</code>之后去网站上查看，发现图片都无法显示。</p>
<p>在md文件中插入图片的语法为<code>![]()</code>。</p>
<p>其中<strong>方括号</strong>是图片描述，<strong>圆括号</strong>是图片路径。</p>
<p>一般来说有三种图片路径，分别是<strong>相对路径，绝对路径和网络路径</strong>。</p>
<p>网络路径就是直接引用网上的图片，直接复制图片地址，放在圆括号中就完事了。</p>
<p>这种方式十分的方便，但是也存在一定的问题：</p>
<ul>
<li>图片失效导致无法加载；</li>
<li>打开网页后要再请求加载图片；</li>
<li>原网站限制，如微信公众号的图片会变得不可见等。</li>
</ul>
<p>这种方式算是有利有弊。</p>
<p>绝对路径是图片在计算机中的绝对位置，相对路径是相对于当前文件的路径。</p>
<p>由于我们的博客是要部署在网站上，部署后会生成新的文件目录，所以我们选择使用相对路径的方式。</p>
<p>在hexo中使用<strong>文章资源文件夹</strong>需要在<code>config.yaml</code>文件中更改一下配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>当该配置被应用后，使用<code>hexo new</code>命令创建新文章时，会生成相同名字的文件夹，也就是文章资源文件夹。</p>
<p>由于项目会生成新的文件目录，同时会解析Markdown中的图片路径，会导致一个问题。<br>如在一个文件目录下，博客名为<code>1.md</code>，相应的存在一个<code>1</code>文件夹存放图片<code>image.jpg</code>。<br>在Typora编辑器中，普通的md文件使用<code>![](1/image.jpg)</code>能在编辑器中正常显示图片。<br>在hexo中，按理说应该是使用<code>![](image.jpg)</code>，但网页中却无法正常显示。<br>此时应该使用这样的方式来引入图片：<code>&#123;% asset_img image.jpg 这是一张图片 %&#125;</code></p>
<p>虽然可以正常引用图片了，但是这种引用图片的方式只有一句话能形容，wtf。</p>
<h4 id="图片插件"><a href="#图片插件" class="headerlink" title="图片插件"></a><strong>图片插件</strong></h4><p>插件<a href="https://link.zhihu.com/?target=https://github.com/hexojs/hexo-renderer-marked">hexo-renderer-marked</a>解决了这个问题。可以只用<code>npm install hexo-renderer-marked</code>命令直接安装，之后在<code>config.yaml</code>中更改配置如下：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">marked:</span></span><br><span class="line">  <span class="attr">prependRoot:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">postAsset:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>之后就可以在使用<code>![](image.jpg)</code>的方式愉快的插入图片了。</p>
<p>我们做了这么多都是为了方便，那么为什么不再方便一点呢。</p>
<h4 id="hexo与Typora的完美结合"><a href="#hexo与Typora的完美结合" class="headerlink" title="hexo与Typora的完美结合"></a><strong>hexo与Typora的完美结合</strong></h4><p>上述是从文章资源文件夹中引用图片，前提是<strong>先将图片放入到文章资源文件夹</strong>，如果图片数量众多的话，一张一张的放很影响效率。但是不用怕，我们有很方便的解决方法。</p>
<p><strong>Typora</strong>是我非常喜欢的Markdown文本编辑器，在之前的文章中也介绍过一点。</p>
<p>Typora对于插入图片的支持做得非常好，在<code>文件-&gt;偏好设置</code>或者直接<code>&lt;C-,&gt;</code>进入设置。</p>
<p><img src="/v2-52220b2dba6901ee2181b72951d25a7b_720w.jpg" alt="img"></p>
<p>使用该配置后，可以直接复制网页中的图片地址，粘贴到Typora中后，会直接复制该图片到文章资源文件夹，同时自动更改路径。</p>
<p>如复制网络路径的图片<code>https://...../image.jpg</code>粘贴到Typora中叫<code>文章名</code>的文章后，图片会自动变为<code>![](文章名/image.jpg)</code>。</p>
<p>但我们知道部署后，文件路径是不同的，所以当我们插入完所有的图片后，我们还需要删除每个图片路径中的<code>文件名/</code>。不慌，也很简单。</p>
<p>在Typora编辑器中，使用<code>&lt;C-f&gt;</code>快捷键，将所有的<code>文章名/</code>替换为空即可删除。</p>
<p><img src="/v2-9202796d27f4659d96ff13b11e6808c1_720w.png" alt="img"></p>
<p>然后再将博客上传，图片就会随着文章一起打包。在网页中就可以看到正常显示的图片，大功告成</p>
<h3 id="多台电脑使用"><a href="#多台电脑使用" class="headerlink" title="多台电脑使用"></a>多台电脑使用</h3><p>使用场景：希望公司、家里电脑都能正常使用，电脑升级更新环境</p>
<ul>
<li>使用网盘或其他方式同步hexo源文件； — git很容易搞定</li>
<li>创建两个repo分别管理站点和源文件；— 没有必要，可以利用git分支</li>
</ul>
<p>这里使用git分支来管理站点、源文件的方式</p>
<p>Hexo生产的静态博客的特点，首先它是一个静态博客生成工具，可以根据你的配置和md文件生成一系列的html、css、js等文件，组成一个站点，部署到github pages，这样网站就可以访问了。</p>
<p>完成hexo的部署命令，其实hexo帮助我们做的事情就是：</p>
<ol>
<li>生成站点有关文件到 <code>.deploy_git</code></li>
<li>把它初始化为git目录，并根据你的配置指定remote和branch(一般是master)</li>
<li>进行<code>git commit</code>，并把修改push到指定的remote branch</li>
<li>命令执行完成后，到github仓库，发现master分支上的内容其实就和’.deploy_git’中一样</li>
</ol>
<p>按照教程建站完成部署后，你的本地源文件其实都没有同步到github，所以只需要想办法把源文件同步即可。最简单的方式就是在你的xx.github.io repo中创建一个source分支，管理源文件，对源文件的修改注意commit/push即可</p>
<p>步骤如下：</p>
<ol>
<li><p>给源文件目录初始化git，并增加remote</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">init</span></span><br><span class="line">git remote <span class="keyword">add</span> origin https:<span class="comment">//github.com/xx/xx.github.io // 填入你的repo地址</span></span><br></pre></td></tr></table></figure></li>
<li><p>创建分支<code>source</code>，commit/push</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b <span class="built_in">source</span></span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&#x27;add source&#x27;</span></span><br><span class="line">git push origin <span class="built_in">source</span></span><br></pre></td></tr></table></figure></li>
<li><p>ok，可以在github上把<code>source</code>设置为主分支。其他电脑上只需clone你的.io repo，切换到<code>source</code>分支操作即可。</p>
</li>
<li><p>初次clone需要切换到<code>source</code>分支，并执行<code>npm install</code>，初始化hexo有关的依赖。</p>
</li>
</ol>
<p>因为服务器上的项目无法创建分支，所以出现了错误，暂时不能跑通。</p>
<h3 id="换电脑-重装系统"><a href="#换电脑-重装系统" class="headerlink" title="换电脑/重装系统"></a>换电脑/重装系统</h3><p>​    如果准备换电脑或者重装系统，那么我们的md文件和相关配置怎么保存或者重新设置呢。</p>
<p>​    以上，就是搭建的全过程了，借鉴了很多文章，很多内容都是复制粘贴下来的，为了给自己以后再次搭建时一个步骤说明。这些只是一些基础的功能，保证了自己写的文章可以被保存在服务器上。hexo还有很多功能我目前没有用到，包括一些互动功能，git分支，国内外分流，SEO等。以后用到了再去查查相关资料完善吧。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/23/2.2.hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" data-id="ckqk8k3e500482wwdgrc29wjw" data-title="hexo搭建博客" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node-js/" rel="tag">node.js</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-10.2.项目架构" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/23/10.2.%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84/" class="article-date">
  <time class="dt-published" datetime="2021-03-23T04:02:26.000Z" itemprop="datePublished">2021-03-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/23/10.2.%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84/">PO,BO,VO，DTO,DAO与POJO</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>UML</strong></p>
<p>不想多讨论 UML 相关的知识，但是我觉得你如果真的会写 Java，请先学会表达自己，UML 就是你说话的语言，做一名优秀的 Java 程序员，请至少学会这两种 UML 图：</p>
<ol>
<li>类图</li>
<li>时序图</li>
</ol>
<p><strong>clean code</strong></p>
<p>我认为保持代码的简洁和可读性是代码的最基本保证，如果有一天为了程序的效率而降低了这两点，我认为是可以谅解的，除此之外，没有任何理由可以让你任意挥霍你的代码。</p>
<ol>
<li>读者可以看一下 Robert C. Martin 出版的《Clean Code》（代码整洁之道） 这本书</li>
<li>可以参考美团文章聊聊 clean code（<a target="_blank" rel="noopener" href="http://tech.meituan.com/clean-code.html%EF%BC%89%EF%BC%9B">http://tech.meituan.com/clean-code.html）；</a></li>
<li>也可以看一下阿里的 Java 编码规范</li>
</ol>
<p>无论如何，请保持你的代码的整洁。</p>
<p><strong>Linux 基础命令</strong></p>
<p>这点其实和会写 Java 没有关系，但是 Linux 很多时候确实承载运行 Java 的容器，请学好 Linux 的基础命令。</p>
<ol>
<li>参考鸟哥的《Linux私房菜》</li>
</ol>
<p>PO：persistent object 持久对象</p>
<p>1 ．有时也被称为Data对象，对应数据库中的entity，可以简单认为一个PO对应数据库中的一条记录。</p>
<p>2 ．在hibernate持久化框架中与insert/delet操作密切相关。</p>
<p>3 ．PO中不应该包含任何对数据库的操作。</p>
<hr>
<p>POJO ：plain ordinary java object 无规则简单java对象</p>
<p>一个中间对象，可以转化为PO、DTO、VO。</p>
<p>1 ．POJO持久化之后==〉PO</p>
<p>（在运行期，由Hibernate中的cglib动态把POJO转换为PO，PO相对于POJO会增加一些用来管理数据库entity状态的属性和方法。PO对于programmer来说完全透明，由于是运行期生成PO，所以可以支持增量编译，增量调试。）</p>
<p>2 ．POJO传输过程中==〉DTO</p>
<p>3 ．POJO用作表示层==〉VO</p>
<p>PO 和VO都应该属于它。</p>
<hr>
<p>BO：business object 业务对象</p>
<p>业务对象主要作用是把业务逻辑封装为一个对象。这个对象可以包括一个或多个其它的对象。</p>
<p>比如一个简历，有教育经历、工作经历、社会关系等等。我们可以把教育经历对应一个PO，工作经历对应一个PO，社会关系对应一个PO。</p>
<p>建立一个对应简历的BO对象处理简历，每个BO包含这些PO。</p>
<p>这样处理业务逻辑时，我们就可以针对BO去处理。</p>
<p>封装业务逻辑为一个对象（可以包括多个PO，通常需要将BO转化成PO，才能进行数据的持久化，反之，从DB中得到的PO，需要转化成BO才能在业务层使用）。</p>
<p>关于BO主要有三种概念</p>
<p>1 、只包含业务对象的属性；</p>
<p>2 、只包含业务方法；</p>
<p>3 、两者都包含。</p>
<p>在实际使用中，认为哪一种概念正确并不重要，关键是实际应用中适合自己项目的需要。</p>
<hr>
<p>VO：value object 值对象 / view object 表现层对象</p>
<p>1 ．主要对应页面显示（web页面/swt、swing界面）的数据对象。</p>
<p>2 ．可以和表对应，也可以不，这根据业务的需要。</p>
<hr>
<p>DTO（TO）：Data Transfer Object 数据传输对象</p>
<p>1 ．用在需要跨进程或远程传输时，它不应该包含业务逻辑。</p>
<p>2 ．比如一张表有100个字段，那么对应的PO就有100个属性（大多数情况下，DTO内的数据来自多个表）。但view层只需显示10个字段，没有必要把整个PO对象传递到client，这时我们就可以用只有这10个属性的DTO来传输数据到client，这样也不会暴露server端表结构。到达客户端以后，如果用这个对象来对应界面显示，那此时它的身份就转为VO。</p>
<hr>
<p>DAO：data access object数据访问对象</p>
<p>1 ．主要用来封装对DB的访问（CRUD操作）。</p>
<p>2 ．通过接收Business层的数据，把POJO持久化为PO。</p>
<p>简易的关系图：</p>
<p><img src="https://img-blog.csdn.net/20180717104224284?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE4NzA1NDc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="偷的图"></p>
<p>为什么偷来这么一篇文章：不同的对象需要用在不同的地方，之前全是POJO，现在传输用DTO，条件查询用BO，查询对象用POJO接收，显示对象用VO，虽然增加了一点代码量，但是代码结构更加清晰，也防止了表结构的暴露。</p>
<p>个人理解：</p>
<p>po，数据库表字段，一个字段对应一个po</p>
<p>dto，数据传输对象，是从数据库表中查询出来的自定义数据封装。</p>
<p>vo，表现层对象，前端页面显示时所需要的所有数据。由dto组装成vo</p>
<p>如果传输的dto刚好是前端表示所需要的值，此时dto也就是vo。</p>
<p>entity里的每一个字段，与数据库相对应，vo里的每一个字段，是和你前台页面相对应， 而dto，是用类做entity和dto之间转换的实体类。</p>
<p>说到代码结构问题，业务分层</p>
<p>所以一个好的应用分层需要具备以下几点：</p>
<ul>
<li><p>方便后续代码进行维护扩展</p>
</li>
<li><p>分层的效果需要让整个团队都接受</p>
</li>
<li><p>各个层职责边界清晰</p>
</li>
</ul>
<p>阿里规范</p>
<p>在阿里的编码规范中约束的分层如下图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQqEAgWRiaA1sb6iaWDTyVBe5YWiaWLRS0C3lEialHhbeOLTMr9BgzLjU6t0ghaTurqHcfWdvGYicklpWjw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>①开放接口层：可直接封装 Service 方法暴露成 RPC 接口；通过 Web 封装成 http 接口；进行网关安全控制、流量控制等。</p>
<p>②终端显示层：各个端的模板渲染并执行显示的层。当前主要是 velocity 渲染，JS 渲染，JSP 渲染，移动端展示等。</p>
<p>③Web 层：主要是对访问控制进行转发，各类基本参数校验，或者不复用的业务简单处理等。</p>
<p>④Service 层：相对具体的业务逻辑服务层。</p>
<p>⑤Manager 层：通用业务处理层。</p>
<p>它有如下特征:</p>
<p>对第三方平台封装的层，预处理返回结果及转化异常信息。</p>
<p>对 Service 层通用能力的下沉，如缓存方案、中间件通用处理。</p>
<p>与 DAO 层交互，对多个 DAO 的组合复用。</p>
<p>⑥DAO 层：数据访问层，与底层 MySQL、Oracle、Hbase 进行数据交互。</p>
<p>下面介绍一下具体业务中应该如何实现分层。</p>
<p>优化分层</p>
<p>从我们的业务开发中总结了一个较为的理想模型,这里要先说明一下由于我们的 RPC 框架选用的是 Thrift 可能会比其他的一些 RPC 框架例如 Dubbo 会多出一层，作用和 controller 层类似。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQqEAgWRiaA1sb6iaWDTyVBe5YLVITibODXlsqmh5EMetyNYuicbmiaCQzOc5Lb0RGbzjSwxiczcpaLXmIgA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>最上层 Controller 和 TService 是阿里分层规范里面的第一层：轻业务逻辑，参数校验，异常兜底。</p>
<p>通常这种接口可以轻易更换接口类型，所以业务逻辑必须要轻，甚至不做具体逻辑。</p>
<p>①Service：业务层，复用性较低，这里推荐每一个 Controller 方法都得对应一个 Service，不要把业务编排放在 Controller 中去做，为什么呢？</p>
<p>如果我们把业务编排放在 Controller 层去做的话，如果以后我们要接入 Thrift，我们这里又需要把业务编排在做一次，这样会导致我们每接入一个入口层这个代码都得重新复制一份。</p>
<p>如下图所示： </p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQqEAgWRiaA1sb6iaWDTyVBe5YnWJTmEDkawjyZZNLy1aSbz1A3E4ib5rbLkkuIOwQZRAichZWh0aCTP6Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>这样大量的重复工作必定会导致我们开发效率下降，所以我们需要把业务编排逻辑都得放进 Service 中去做：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQqEAgWRiaA1sb6iaWDTyVBe5YsUB1r8UL3x5iauKkpk7rLdECodQBZ52hVJsWbPWctKSIx4TAsJksmDQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>Mannager：可复用逻辑层。这里的 Mannager 可以是单个服务的，比如我们的 Cache，MQ 等等，当然也可以是复合的。</p>
<p>当你需要调用多个 Mannager 的时候，这个可以合为一个 Mannager，比如逻辑上的连表查询等。如果是 httpMannager 或 rpcMannager 需要在这一层做一些数据转换。</p>
<p>③DAO：数据库访问层。主要负责“操作数据库的某张表，映射到某个 Java 对象”，DAO 应该只允许自己的 Service 访问，其他 Service 要访问我的数据必须通过对应的 Service。</p>
<p>分层领域模型的转换</p>
<p>在阿里巴巴编码规约中列举了下面几个领域模型规约：</p>
<p>DO（Data Object）：与数据库表结构一一对应，通过 DAO 层向上传输数据源对象。 </p>
<p>DTO（Data Transfer Object）：数据传输对象，Service 或 Manager 向外传输的对象。 </p>
<p>BO（Business Object）：业务对象。由 Service 层输出的封装业务逻辑的对象。 </p>
<p>AO（Application Object）：应用对象。在 Web 层与 Service 层之间抽象的复用对象模型，极为贴近展示层，复用度不高。 </p>
<p>VO（View Object）：显示层对象，通常是 Web 向模板渲染引擎层传输的对象。 </p>
<p>Query：数据查询对象，各层接收上层的查询请求。注意超过2个参数的查询封装，禁止使用 Map 类来传输。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQqEAgWRiaA1sb6iaWDTyVBe5YtqYj5Lx0AiatXmOuibRLUjL7aCTMWHrZBRUpqx6jAG8UCdPjegDFDE0g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>每一个层基本都自己对应的领域模型，这样就导致了有些人过于追求每一层都是用自己的领域模型。</p>
<p>这样就导致了一个对象可能会出现 3 次甚至 4 次转换在一次请求中，当返回的时候同样也会出现 3-4 次转换，这样有可能一次完整的请求-返回会出现很多次对象转换。</p>
<p>如果在开发中真的按照这么来，恐怕就别写其他的了，一天就光写这个重复无用的逻辑算了吧</p>
<p>所以我们得采取一个折中的方案：</p>
<p>允许 Service/Manager 可以操作数据领域模型，对于这个层级来说，本来自己做的工作也是做的是业务逻辑处理和数据组装。 </p>
<p>Controller/TService 层的领域模型不允许传入 DAO 层，这样就不符合职责划分了。 </p>
<p>同理，不允许 DAO 层的数据传入到 Controller/TService。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQqEAgWRiaA1sb6iaWDTyVBe5Yba2L0Glia9PTaWIiadLeRJIzEJAicTjf5Ky9wwb3YZibIdGdzTqgClUNgA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>bean 使我们使用最多的模型之一</p>
<p><strong>domain 包名</strong></p>
<p>根据很多 Java 程序员的”经验”来看，一个数据库表则对应着一个 domain 对象，所以很多程序员在写代码时，包名则使用：com.xxx.domain ，这样写好像已经成为了行业的一种约束，数据库映射对象就应该是 domain。但是你错了，domain 是一个领域对象，往往我们再做传统 Java 软件 Web 开发中，这些 domain 都是贫血模型，是没有行为的，或是没有足够的领域模型的行为的，所以，以这个理论来讲，这些 domain 都应该是一个普通的 entity 对象，并非领域对象，所以请把包名改为:com.xxx.entity。</p>
<p><strong>DTO</strong></p>
<p>数据传输我们应该使用 DTO 对象作为传输对象，这是我们所约定的，因为很长时间我一直都在做移动端 API 设计的工作，有很多人告诉我，他们认为只有给手机端传输数据的时候(input or output)，这些对象成为 DTO 对象。</p>
<p>请注意！这种理解是错误的，只要是用于网络传输的对象，我们都认为他们可以当做是 DTO 对象，比如电商平台中，用户进行下单，下单后的数据，订单会发到 OMS 或者 ERP 系统，这些对接的返回值以及入参也叫 DTO 对象。</p>
<p>我们约定某对象如果是 DTO 对象，就将名称改为 XXDTO，比如订单下发OMS：OMSOrderInputDTO。</p>
<p><strong>DTO 转化</strong></p>
<p>正如我们所知，DTO 为系统与外界交互的模型对象，那么肯定会有一个步骤是将 DTO 对象转化为 BO 对象或者是普通的 entity 对象，让 service 层去处理。</p>
<p><strong>场景</strong></p>
<p>比如添加会员操作，由于用于演示，我只考虑用户的一些简单数据，当后台管理员点击添加用户时，只需要传过来用户的姓名和年龄就可以了，后端接受到数据后，将添加创建时间和更新时间和默认密码三个字段，然后保存数据库。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;&#x2F;v1&#x2F;api&#x2F;user&quot;)</span><br><span class="line">@RestController</span><br><span class="line">public class UserApi &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserService userService;</span><br><span class="line"></span><br><span class="line">    @PostMapping</span><br><span class="line">    public User addUser(UserInputDTO userInputDTO)&#123;</span><br><span class="line">        User user &#x3D; new User();</span><br><span class="line">        user.setUsername(userInputDTO.getUsername());</span><br><span class="line">        user.setAge(userInputDTO.getAge());</span><br><span class="line"></span><br><span class="line">        return userService.addUser(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们只关注一下上述代码中的转化代码，其他内容请忽略：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">User user &#x3D; new User();</span><br><span class="line">user.setUsername(userInputDTO.getUsername());</span><br><span class="line">user.setAge(userInputDTO.getAge());</span><br></pre></td></tr></table></figure>

<p><strong>请使用工具</strong></p>
<p>上边的代码，从逻辑上讲，是没有问题的，只是这种写法让我很厌烦，例子中只有两个字段，如果有 20 个字段，我们要如何做呢？ 一个一个进行 set 数据吗？当然，如果你这么做了，肯定不会有什么问题，但是，这肯定不是一个最优的做法。</p>
<p>网上有很多工具，支持浅拷贝或深拷贝的 Utils。举个例子，我们可以使用 org.springframework.beans.BeanUtils#copyProperties 对代码进行重构和优化：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line">public User addUser(UserInputDTO userInputDTO)&#123;</span><br><span class="line">    User user &#x3D; new User();</span><br><span class="line">    BeanUtils.copyProperties(userInputDTO,user);</span><br><span class="line"></span><br><span class="line">    return userService.addUser(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>BeanUtils.copyProperties 是一个浅拷贝方法，复制属性时，我们只需要把 DTO 对象和要转化的对象两个的属性值设置为一样的名称，并且保证一样的类型就可以了。如果你在做 DTO 转化的时候一直使用 set 进行属性赋值，那么请尝试这种方式简化代码，让代码更加清晰!</p>
<p><strong>转化的语义</strong></p>
<p>上边的转化过程，读者看后肯定觉得优雅很多，但是我们再写 Java 代码时，更多的需要考虑语义的操作，再看上边的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User user &#x3D; new User();</span><br><span class="line">BeanUtils.copyProperties(userInputDTO,user);</span><br></pre></td></tr></table></figure>

<p>虽然这段代码很好的简化和优化了代码，但是他的语义是有问题的，我们需要提现一个转化过程才好，所以代码改成如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line"> public User addUser(UserInputDTO userInputDTO)&#123;</span><br><span class="line">         User user &#x3D; convertFor(userInputDTO);</span><br><span class="line"></span><br><span class="line">         return userService.addUser(user);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> private User convertFor(UserInputDTO userInputDTO)&#123;</span><br><span class="line"></span><br><span class="line">         User user &#x3D; new User();</span><br><span class="line">         BeanUtils.copyProperties(userInputDTO,user);</span><br><span class="line">         return user;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>这是一个更好的语义写法，虽然他麻烦了些，但是可读性大大增加了，在写代码时，我们应该尽量把语义层次差不多的放到一个方法中，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User user &#x3D; convertFor(userInputDTO);</span><br><span class="line">return userService.addUser(user);</span><br></pre></td></tr></table></figure>

<p>这两段代码都没有暴露实现，都是在讲如何在同一个方法中，做一组相同层次的语义操作，而不是暴露具体的实现。</p>
<p><strong>抽象接口定义</strong></p>
<p>当实际工作中，完成了几个 API 的 DTO 转化时，我们会发现，这样的操作有很多很多，那么应该定义好一个接口，让所有这样的操作都有规则的进行。</p>
<p>如果接口被定义以后，那么 convertFor 这个方法的语义将产生变化，它将是一个实现类。</p>
<p>看一下抽象后的接口：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface DTOConvert&lt;S,T&gt; &#123;</span><br><span class="line">    T convert(S s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>虽然这个接口很简单，但是这里告诉我们一个事情，要去使用泛型，如果你是一个优秀的 Java 程序员，请为你想做的抽象接口，做好泛型吧。</p>
<p>我们再来看接口实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class UserInputDTOConvert implements DTOConvert &#123;</span><br><span class="line">@Override</span><br><span class="line">public User convert(UserInputDTO userInputDTO) &#123;</span><br><span class="line">User user &#x3D; new User();</span><br><span class="line">BeanUtils.copyProperties(userInputDTO,user);</span><br><span class="line">return user;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们这样重构后，我们发现现在的代码是如此的简洁，并且那么的规范：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;&#x2F;v1&#x2F;api&#x2F;user&quot;)</span><br><span class="line">@RestController</span><br><span class="line">public class UserApi &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserService userService;</span><br><span class="line"></span><br><span class="line">    @PostMapping</span><br><span class="line">    public User addUser(UserInputDTO userInputDTO)&#123;</span><br><span class="line">        User user &#x3D; new UserInputDTOConvert().convert(userInputDTO);</span><br><span class="line"></span><br><span class="line">        return userService.addUser(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>review code</strong></p>
<p>如果你是一个优秀的 Java 程序员，我相信你应该和我一样，已经数次重复 review 过自己的代码很多次了。</p>
<p>我们再看这个保存用户的例子，你将发现，API 中返回值是有些问题的，问题就在于不应该直接返回 User 实体，因为如果这样的话，就暴露了太多实体相关的信息，这样的返回值是不安全的，所以我们更应该返回一个 DTO 对象，我们可称它为 UserOutputDTO：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line">public UserOutputDTO addUser(UserInputDTO userInputDTO)&#123;</span><br><span class="line">        User user &#x3D; new UserInputDTOConvert().convert(userInputDTO);</span><br><span class="line">        User saveUserResult &#x3D; userService.addUser(user);</span><br><span class="line">        UserOutputDTO result &#x3D; new UserOutDTOConvert().convertToUser(saveUserResult);</span><br><span class="line">        return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样你的 API 才更健全。</p>
<p>不知道在看完这段代码之后，读者有是否发现还有其他问题的存在，作为一个优秀的 Java 程序员，请看一下这段我们刚刚抽象完的代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User user &#x3D; new UserInputDTOConvert().convert(userInputDTO);</span><br></pre></td></tr></table></figure>

<p>你会发现，new 这样一个 DTO 转化对象是没有必要的，而且每一个转化对象都是由在遇到 DTO 转化的时候才会出现，那我们应该考虑一下，是否可以将这个类和 DTO 进行聚合呢，看一下我的聚合结果:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">public class UserInputDTO &#123;</span><br><span class="line">private String username;</span><br><span class="line">private int age;</span><br><span class="line"></span><br><span class="line">    public String getUsername() &#123;</span><br><span class="line">        return username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUsername(String username) &#123;</span><br><span class="line">        this.username &#x3D; username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public User convertToUser()&#123;</span><br><span class="line">        UserInputDTOConvert userInputDTOConvert &#x3D; new UserInputDTOConvert();</span><br><span class="line">        User convert &#x3D; userInputDTOConvert.convert(this);</span><br><span class="line">        return convert;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static class UserInputDTOConvert implements DTOConvert&lt;UserInputDTO,User&gt; &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public User convert(UserInputDTO userInputDTO) &#123;</span><br><span class="line">            User user &#x3D; new User();</span><br><span class="line">            BeanUtils.copyProperties(userInputDTO,user);</span><br><span class="line">            return user;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后 API 中的转化则由：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User user &#x3D; new UserInputDTOConvert().convert(userInputDTO);</span><br><span class="line">User saveUserResult &#x3D; userService.addUser(user);</span><br></pre></td></tr></table></figure>

<p>变成了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User user &#x3D; userInputDTO.convertToUser();</span><br><span class="line">User saveUserResult &#x3D; userService.addUser(user);</span><br></pre></td></tr></table></figure>

<p>我们再 DTO 对象中添加了转化的行为，我相信这样的操作可以让代码的可读性变得更强，并且是符合语义的。</p>
<p><strong>再查工具类</strong></p>
<p>再来看 DTO 内部转化的代码，它实现了我们自己定义的 DTOConvert 接口，但是这样真的就没有问题，不需要再思考了吗？</p>
<p>我觉得并不是，对于 Convert 这种转化语义来讲，很多工具类中都有这样的定义，这中 Convert 并不是业务级别上的接口定义，它只是用于普通 bean 之间转化属性值的普通意义上的接口定义，所以我们应该更多的去读其他含有 Convert 转化语义的代码。</p>
<p>我仔细阅读了一下 GUAVA 的源码，发现了 com.google.common.base.Convert 这样的定义：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Converter&lt;A, B&gt; implements Function&lt;A, B&gt; &#123;</span><br><span class="line">    protected abstract B doForward(A a);</span><br><span class="line">    protected abstract A doBackward(B b);</span><br><span class="line">    &#x2F;&#x2F;其他略</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从源码可以了解到，GUAVA 中的 Convert 可以完成正向转化和逆向转化，继续修改我们 DTO 中转化的这段代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">private static class UserInputDTOConvert implements DTOConvert&lt;UserInputDTO,User&gt; &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public User convert(UserInputDTO userInputDTO) &#123;</span><br><span class="line">                User user &#x3D; new User();</span><br><span class="line">                BeanUtils.copyProperties(userInputDTO,user);</span><br><span class="line">                return user;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改后：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">private static class UserInputDTOConvert extends Converter&lt;UserInputDTO, User&gt; &#123;</span><br><span class="line">         @Override</span><br><span class="line">         protected User doForward(UserInputDTO userInputDTO) &#123;</span><br><span class="line">                 User user &#x3D; new User();</span><br><span class="line">                 BeanUtils.copyProperties(userInputDTO,user);</span><br><span class="line">                 return user;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         @Override</span><br><span class="line">         protected UserInputDTO doBackward(User user) &#123;</span><br><span class="line">                 UserInputDTO userInputDTO &#x3D; new UserInputDTO();</span><br><span class="line">                 BeanUtils.copyProperties(user,userInputDTO);</span><br><span class="line">                 return userInputDTO;</span><br><span class="line">         &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>看了这部分代码以后，你可能会问，那逆向转化会有什么用呢？其实我们有很多小的业务需求中，入参和出参是一样的，那么我们变可以轻松的进行转化，我将上边所提到的 UserInputDTO 和 UserOutputDTO 都转成 UserDTO 展示给大家。</p>
<p>DTO：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">public class UserDTO &#123;</span><br><span class="line">    private String username;</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public String getUsername() &#123;</span><br><span class="line">            return username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUsername(String username) &#123;</span><br><span class="line">            this.username &#x3D; username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">            return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">            this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public User convertToUser()&#123;</span><br><span class="line">            UserDTOConvert userDTOConvert &#x3D; new UserDTOConvert();</span><br><span class="line">            User convert &#x3D; userDTOConvert.convert(this);</span><br><span class="line">            return convert;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public UserDTO convertFor(User user)&#123;</span><br><span class="line">            UserDTOConvert userDTOConvert &#x3D; new UserDTOConvert();</span><br><span class="line">            UserDTO convert &#x3D; userDTOConvert.reverse().convert(user);</span><br><span class="line">            return convert;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static class UserDTOConvert extends Converter&lt;UserDTO, User&gt; &#123;</span><br><span class="line">            @Override</span><br><span class="line">            protected User doForward(UserDTO userDTO) &#123;</span><br><span class="line">                    User user &#x3D; new User();</span><br><span class="line">                    BeanUtils.copyProperties(userDTO,user);</span><br><span class="line">                    return user;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            protected UserDTO doBackward(User user) &#123;</span><br><span class="line">                    UserDTO userDTO &#x3D; new UserDTO();</span><br><span class="line">                    BeanUtils.copyProperties(user,userDTO);</span><br><span class="line">                    return userDTO;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>API：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line"> public UserDTO addUser(UserDTO userDTO)&#123;</span><br><span class="line">         User user &#x3D;  userDTO.convertToUser();</span><br><span class="line">         User saveResultUser &#x3D; userService.addUser(user);</span><br><span class="line">         UserDTO result &#x3D; userDTO.convertFor(saveResultUser);</span><br><span class="line">         return result;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>当然，上述只是表明了转化方向的正向或逆向，很多业务需求的出参和入参的 DTO 对象是不同的，那么你需要更明显的告诉程序：逆向是无法调用的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">private static class UserDTOConvert extends Converter&lt;UserDTO, User&gt; &#123;</span><br><span class="line">         @Override</span><br><span class="line">         protected User doForward(UserDTO userDTO) &#123;</span><br><span class="line">                 User user &#x3D; new User();</span><br><span class="line">                 BeanUtils.copyProperties(userDTO,user);</span><br><span class="line">                 return user;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         @Override</span><br><span class="line">         protected UserDTO doBackward(User user) &#123;</span><br><span class="line">                 throw new AssertionError(&quot;不支持逆向转化方法!&quot;);</span><br><span class="line">         &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>看一下 doBackward 方法，直接抛出了一个断言异常，而不是业务异常，这段代码告诉代码的调用者，这个方法不是准你调用的，如果你调用，我就”断言”你调用错误了。</p>
<p>关于异常处理的更详细介绍，可以参考我之前的文章：如何优雅的设计 Java 异常（<a target="_blank" rel="noopener" href="http://lrwinx.github.io/2016/04/28/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E8%AE%BE%E8%AE%A1java%E5%BC%82%E5%B8%B8/%EF%BC%89">http://lrwinx.github.io/2016/04/28/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E8%AE%BE%E8%AE%A1java%E5%BC%82%E5%B8%B8/）</a> ，应该可以帮你更好的理解异常。</p>
<p><strong>bean 的验证</strong></p>
<p>如果你认为我上边写的那个添加用户 API 写的已经非常完美了，那只能说明你还不是一个优秀的程序员。我们应该保证任何数据的入参到方法体内都是合法的。</p>
<p><strong>为什么要验证</strong></p>
<p>很多人会告诉我，如果这些 API 是提供给前端进行调用的，前端都会进行验证啊，你为什还要验证？</p>
<p>其实答案是这样的，我从不相信任何调用我 API 或者方法的人，比如前端验证失败了，或者某些人通过一些特殊的渠道(比如 Charles 进行抓包)，直接将数据传入到我的 API，那我仍然进行正常的业务逻辑处理，那么就有可能产生脏数据！</p>
<p>“对于脏数据的产生一定是致命”，这句话希望大家牢记在心，再小的脏数据也有可能让你找几个通宵！</p>
<p><strong>jsr 303验证</strong></p>
<p>hibernate 提供的 jsr 303 实现，我觉得目前仍然是很优秀的，具体如何使用，我不想讲，因为谷歌上你可以搜索出很多答案!</p>
<p>再以上班的 API 实例进行说明，我们现在对 DTO 数据进行检查：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class UserDTO &#123;</span><br><span class="line">    @NotNull</span><br><span class="line">    private String username;</span><br><span class="line">    @NotNull</span><br><span class="line">    private int age;</span><br><span class="line">        &#x2F;&#x2F;其他代码略</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>API 验证：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line">    public UserDTO addUser(@Valid UserDTO userDTO)&#123;</span><br><span class="line">            User user &#x3D;  userDTO.convertToUser();</span><br><span class="line">            User saveResultUser &#x3D; userService.addUser(user);</span><br><span class="line">            UserDTO result &#x3D; userDTO.convertFor(saveResultUser);</span><br><span class="line">            return result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>我们需要将验证结果传给前端，这种异常应该转化为一个 api 异常(带有错误码的异常)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line">public UserDTO addUser(@Valid UserDTO userDTO, BindingResult bindingResult)&#123;</span><br><span class="line">     checkDTOParams(bindingResult);</span><br><span class="line"></span><br><span class="line">     User user &#x3D;  userDTO.convertToUser();</span><br><span class="line">     User saveResultUser &#x3D; userService.addUser(user);</span><br><span class="line">     UserDTO result &#x3D; userDTO.convertFor(saveResultUser);</span><br><span class="line">     return result;</span><br><span class="line">&#125;</span><br><span class="line">private void checkDTOParams(BindingResult bindingResult)&#123;</span><br><span class="line">     if(bindingResult.hasErrors())&#123;</span><br><span class="line">             &#x2F;&#x2F;throw new 带验证码的验证错误异常</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>BindingResult 是 Spring MVC 验证 DTO 后的一个结果集，可以参考spring 官方文档（<a target="_blank" rel="noopener" href="http://spring.io/%EF%BC%89%E3%80%82">http://spring.io/）。</a></p>
<p>检查参数后，可以抛出一个“带验证码的验证错误异常”，具体异常设计可以参考如何优雅的设计 Java 异常（<a target="_blank" rel="noopener" href="http://lrwinx.github.io/2016/04/28/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E8%AE%BE%E8%AE%A1java%E5%BC%82%E5%B8%B8/%EF%BC%89%E3%80%82">http://lrwinx.github.io/2016/04/28/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E8%AE%BE%E8%AE%A1java%E5%BC%82%E5%B8%B8/）。</a></p>
<p><strong>拥抱 lombok</strong></p>
<p>上边的 DTO 代码，已经让我看的很累了，我相信读者也是一样，看到那么多的 Getter 和 Setter 方法，太烦躁了，那时候有什么方法可以简化这些呢。</p>
<p>请拥抱 lombok,它会帮助我们解决一些让我们很烦躁的问题</p>
<p><strong>去掉 Setter 和 Getter</strong></p>
<p>其实这个标题，我不太想说，因为网上太多，但是因为很多人告诉我，他们根本就不知道 lombok 的存在，所以为了让读者更好的学习，我愿意写这样一个例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">@Setter</span><br><span class="line">@Getter</span><br><span class="line">public class UserDTO &#123;</span><br><span class="line">    @NotNull</span><br><span class="line">    private String username;</span><br><span class="line">    @NotNull</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public User convertToUser()&#123;</span><br><span class="line">        UserDTOConvert userDTOConvert &#x3D; new UserDTOConvert();</span><br><span class="line">        User convert &#x3D; userDTOConvert.convert(this);</span><br><span class="line">        return convert;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public UserDTO convertFor(User user)&#123;</span><br><span class="line">        UserDTOConvert userDTOConvert &#x3D; new UserDTOConvert();</span><br><span class="line">        UserDTO convert &#x3D; userDTOConvert.reverse().convert(user);</span><br><span class="line">        return convert;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static class UserDTOConvert extends Converter&lt;UserDTO, User&gt; &#123;</span><br><span class="line">        @Override</span><br><span class="line">        protected User doForward(UserDTO userDTO) &#123;</span><br><span class="line">            User user &#x3D; new User();</span><br><span class="line">            BeanUtils.copyProperties(userDTO,user);</span><br><span class="line">            return user;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        protected UserDTO doBackward(User user) &#123;</span><br><span class="line">            throw new AssertionError(&quot;不支持逆向转化方法!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>看到了吧，烦人的 Getter 和 Setter 方法已经去掉了。</p>
<p>但是上边的例子根本不足以体现 lombok 的强大。我希望写一些网上很难查到，或者很少人进行说明的 lombok 的使用以及在使用时程序语义上的说明。</p>
<p>比如:@Data,@AllArgsConstructor,@NoArgsConstructor..这些我就不进行一一说明了，请大家自行查询资料。</p>
<p><strong>bean 中的链式风格</strong></p>
<p>什么是链式风格？我来举个例子，看下面这个 Student 的 bean：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class Student &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Student setName(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Student setAge(int age) &#123;</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>仔细看一下 set 方法，这样的设置便是 chain 的 style，调用的时候，可以这样使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Student student &#x3D; new Student()</span><br><span class="line">        .setAge(24)</span><br><span class="line">        .setName(&quot;zs&quot;);</span><br></pre></td></tr></table></figure>

<p>相信合理使用这样的链式代码，会更多的程序带来很好的可读性，那看一下如果使用 lombok 进行改善呢，请使用 @Accessors(chain = true)，看如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Accessors(chain &#x3D; true)</span><br><span class="line">@Setter</span><br><span class="line">@Getter</span><br><span class="line">public class Student &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样就完成了一个对于 bean 来讲很友好的链式操作。</p>
<p><strong>静态构造方法</strong></p>
<p>静态构造方法的语义和简化程度真的高于直接去 new 一个对象。比如 new 一个 List 对象，过去的使用是这样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list &#x3D; new ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure>

<p>看一下 guava 中的创建方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list &#x3D; Lists.newArrayList();</span><br></pre></td></tr></table></figure>

<p>Lists 命名是一种约定(俗话说：约定优于配置)，它是指 Lists 是 List 这个类的一个工具类，那么使用 List 的工具类去产生 List，这样的语义是不是要比直接 new 一个子类来的更直接一些呢，答案是肯定的，再比如如果有一个工具类叫做 Maps，那你是否想到了创建 Map 的方法呢：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;String, String&gt; objectObjectHashMap &#x3D; Maps.newHashMap();</span><br></pre></td></tr></table></figure>

<p>好了，如果你理解了我说的语义，那么，你已经向成为 Java 程序员更近了一步了。</p>
<p>再回过头来看刚刚的 Student，很多时候，我们去写 Student 这个 bean 的时候，他会有一些必输字段，比如 Student 中的 name 字段，一般处理的方式是将 name 字段包装成一个构造方法，只有传入 name 这样的构造方法，才能创建一个 Student 对象。</p>
<p>接上上边的静态构造方法和必传参数的构造方法，使用 lombok 将更改成如下写法（@RequiredArgsConstructor 和 @NonNull）:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Accessors(chain &#x3D; true)</span><br><span class="line">@Setter</span><br><span class="line">@Getter</span><br><span class="line">@RequiredArgsConstructor(staticName &#x3D; &quot;ofName&quot;)</span><br><span class="line">public class Student &#123;</span><br><span class="line">    @NonNull private String name;</span><br><span class="line">    private int age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student student &#x3D; Student.ofName(&quot;zs&quot;);</span><br></pre></td></tr></table></figure>

<p>这样构建出的 bean 语义是否要比直接 new 一个含参的构造方法(包含 name 的构造方法)要好很多。</p>
<p>当然，看过很多源码以后，我想相信将静态构造方法 ofName 换成 of 会先的更加简洁：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Accessors(chain &#x3D; true)</span><br><span class="line">@Setter</span><br><span class="line">@Getter</span><br><span class="line">@RequiredArgsConstructor(staticName &#x3D; &quot;of&quot;)</span><br><span class="line">public class Student &#123;</span><br><span class="line">        @NonNull private String name;</span><br><span class="line">        private int age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student student &#x3D; Student.of(&quot;zs&quot;);</span><br></pre></td></tr></table></figure>

<p>当然他仍然是支持链式调用的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student student &#x3D; Student.of(&quot;zs&quot;).setAge(24);</span><br></pre></td></tr></table></figure>

<p>这样来写代码，真的很简洁，并且可读性很强。</p>
<p><strong>使用 builder</strong></p>
<p>Builder 模式我不想再多解释了，读者可以看一下《Head First》(设计模式) 的建造者模式。</p>
<p>今天其实要说的是一种变种的 builder 模式，那就是构建 bean 的 builder 模式，其实主要的思想是带着大家一起看一下 lombok 给我们带来了什么。</p>
<p>看一下 Student 这个类的原始 builder 状态:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">public class Student &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">            return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">            this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">            return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">            this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static Builder builder()&#123;</span><br><span class="line">            return new Builder();</span><br><span class="line">    &#125;</span><br><span class="line">    public static class Builder&#123;</span><br><span class="line">            private String name;</span><br><span class="line">            private int age;</span><br><span class="line">            public Builder name(String name)&#123;</span><br><span class="line">                    this.name &#x3D; name;</span><br><span class="line">                    return this;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            public Builder age(int age)&#123;</span><br><span class="line">                    this.age &#x3D; age;</span><br><span class="line">                    return this;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            public Student build()&#123;</span><br><span class="line">                    Student student &#x3D; new Student();</span><br><span class="line">                    student.setAge(age);</span><br><span class="line">                    student.setName(name);</span><br><span class="line">                    return student;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student student &#x3D; Student.builder().name(&quot;zs&quot;).age(24).build();</span><br></pre></td></tr></table></figure>

<p>这样的 builder 代码，让我是在恶心难受，于是我打算用 lombok 重构这段代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Builder</span><br><span class="line">public class Student &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student student &#x3D; Student.builder().name(&quot;zs&quot;).age(24).build();</span><br></pre></td></tr></table></figure>

<p><strong>代理模式</strong></p>
<p>正如我们所知的，在程序中调用 rest 接口是一个常见的行为动作，如果你和我一样使用过 spring 的 RestTemplate，我相信你会我和一样，对他抛出的非 http 状态码异常深恶痛绝。<a target="_blank" rel="noopener" href="http://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247486759&idx=2&sn=6769d8ff9d163babe726b6213c6d15e4&chksm=eb538811dc240107bcf2a6e65b5381b2a68175af8ff12f4e2c1b0a06f7d16850db4acb64a18e&scene=21#wechat_redirect">详解 Java 中的三种代理模式</a>。</p>
<p>所以我们考虑将 RestTemplate 最为底层包装器进行包装器模式的设计：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public abstract class FilterRestTemplate implements RestOperations &#123;</span><br><span class="line">        protected volatile RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">        protected FilterRestTemplate(RestTemplate restTemplate)&#123;</span><br><span class="line">                this.restTemplate &#x3D; restTemplate;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;实现RestOperations所有的接口</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后再由扩展类对 FilterRestTemplate 进行包装扩展：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class ExtractRestTemplate extends FilterRestTemplate &#123;</span><br><span class="line">    private RestTemplate restTemplate;</span><br><span class="line">    public ExtractRestTemplate(RestTemplate restTemplate) &#123;</span><br><span class="line">            super(restTemplate);</span><br><span class="line">            this.restTemplate &#x3D; restTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public &lt;T&gt; RestResponseDTO&lt;T&gt; postForEntityWithNoException(String url, Object request, Class&lt;T&gt; responseType, Object... uriVariables)</span><br><span class="line">                    throws RestClientException &#123;</span><br><span class="line">            RestResponseDTO&lt;T&gt; restResponseDTO &#x3D; new RestResponseDTO&lt;T&gt;();</span><br><span class="line">            ResponseEntity&lt;T&gt; tResponseEntity;</span><br><span class="line">            try &#123;</span><br><span class="line">                    tResponseEntity &#x3D; restTemplate.postForEntity(url, request, responseType, uriVariables);</span><br><span class="line">                    restResponseDTO.setData(tResponseEntity.getBody());</span><br><span class="line">                    restResponseDTO.setMessage(tResponseEntity.getStatusCode().name());</span><br><span class="line">                    restResponseDTO.setStatusCode(tResponseEntity.getStatusCodeValue());</span><br><span class="line">            &#125;catch (Exception e)&#123;</span><br><span class="line">                    restResponseDTO.setStatusCode(RestResponseDTO.UNKNOWN_ERROR);</span><br><span class="line">                    restResponseDTO.setMessage(e.getMessage());</span><br><span class="line">                    restResponseDTO.setData(null);</span><br><span class="line">            &#125;</span><br><span class="line">            return restResponseDTO;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>包装器 ExtractRestTemplate 很完美的更改了异常抛出的行为，让程序更具有容错性。在这里我们不考虑 ExtractRestTemplate 完成的功能，让我们把焦点放在 FilterRestTemplate 上，“实现 RestOperations 所有的接口”,这个操作绝对不是一时半会可以写完的，当时在重构之前我几乎写了半个小时,如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public abstract class FilterRestTemplate implements RestOperations &#123;</span><br><span class="line"></span><br><span class="line">    protected volatile RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    protected FilterRestTemplate(RestTemplate restTemplate) &#123;</span><br><span class="line">            this.restTemplate &#x3D; restTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public &lt;T&gt; T getForObject(String url, Class&lt;T&gt; responseType, Object... uriVariables) throws RestClientException &#123;</span><br><span class="line">            return restTemplate.getForObject(url,responseType,uriVariables);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public &lt;T&gt; T getForObject(String url, Class&lt;T&gt; responseType, Map&lt;String, ?&gt; uriVariables) throws RestClientException &#123;</span><br><span class="line">            return restTemplate.getForObject(url,responseType,uriVariables);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public &lt;T&gt; T getForObject(URI url, Class&lt;T&gt; responseType) throws RestClientException &#123;</span><br><span class="line">            return restTemplate.getForObject(url,responseType);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public &lt;T&gt; ResponseEntity&lt;T&gt; getForEntity(String url, Class&lt;T&gt; responseType, Object... uriVariables) throws RestClientException &#123;</span><br><span class="line">            return restTemplate.getForEntity(url,responseType,uriVariables);</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;其他实现代码略。。。</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我相信你看了以上代码，你会和我一样觉得恶心反胃，后来我用 lombok 提供的代理注解优化了我的代码(@Delegate)：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@AllArgsConstructor</span><br><span class="line">public abstract class FilterRestTemplate implements RestOperations &#123;</span><br><span class="line">    @Delegate</span><br><span class="line">    protected volatile RestTemplate restTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这几行代码完全替代上述那些冗长的代码。</p>
<p>是不是很简洁，做一个拥抱 lombok 的程序员吧。</p>
<h3 id="工具类的设计"><a href="#工具类的设计" class="headerlink" title="工具类的设计"></a>工具类的设计</h3><p>工具类：存放了某一类事物存放工具方法的类。封装了一些常用Java操作方法,便于重复开发利用</p>
<p>　　命名：XxxUtil，XxxUtils，XxxTool，XxxHelper，XxxHelpers等　　比如：JdbcUtil</p>
<p>工具类存放的包：存放工具类</p>
<p>　　命名：util，utils，tool，helper，helpers等</p>
<p>工具类如何设计？</p>
<p>工具在开发中只需要存在一份即可</p>
<p>　　1）如果工具类没有使用static修饰，说明工具方法要用工具类的对象来调用。</p>
<p>　　　　此时把工具类设计成单例模式。</p>
<p>　　2）如果工具类使用static修饰，说明工具方法只需要用工具类的类名来调用即可。</p>
<p>　　　　此时必须把工具类的构造方法私有化（防止工具类的对象来调用静态方法）。</p>
<p>一般首选第二种，简单，在JDK中提供的工具类都是第二种。如java.Util.Arrays类。</p>
<p>1.如果工具类中的方法全部是静态方法，那么可以将工具类作为一个 abstract 抽象类。Spring 框架中存在大量的这样的使用。</p>
<p>2.如果工具类中有异常，请抛出，不要自己去 try-catch。更不要 try 了之后 e.printStackTrace() 。</p>
<p>3.工具类中要不要打印日志问题，尽量不要打印，像 log4j 这样的一些第三方日志框架也不要用。降低于第三方类库的依赖。</p>
<p>4.工具类中的方法非 static 的。那你可以将工具类定义为 final class，考虑到工具类应该不能被继承。在私有化它的构造函数，提供一个单例。</p>
<p>5.工具类的命名应该用 Util 结尾，例如 LogUtil。</p>
<p>工具类中的方法应该设计为静态的还是非静态的，这个没有统一的标准。各有各的好，参加大多数开源框架，static 的多一些。</p>
<p>工具类的设计，推荐大家多看看 Guava、Apache Commons。</p>
<p>像大名鼎鼎的 Hutool，它提到了工具类的 6 大设计思想：</p>
<p>​    方法优先于对象、自动识别优于用户定义、便捷性与灵活性并存、适配与兼容、可选依赖原则、无侵入原则。</p>
<p>Hutool 中的工具类，既没有采用抽象类 abstract class 有没有采用 final class。所以我更喜欢 Spring、Guava、Apache Commons等框架的源码。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/23/10.2.%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84/" data-id="ckqk8k3eo00622wwdbm0o1csq" data-title="PO,BO,VO，DTO,DAO与POJO" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PO-BO-VO%EF%BC%8CDTO-DAO%E4%B8%8EPOJO/" rel="tag">PO-BO-VO，DTO-DAO与POJO</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/9/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/11/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eclipse/" rel="tag">Eclipse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ElasticSearch/" rel="tag">ElasticSearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitee/" rel="tag">Gitee</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HATEOAS/" rel="tag">HATEOAS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDEA/" rel="tag">IDEA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JQuery/" rel="tag">JQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSP/" rel="tag">JSP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" rel="tag">MySQL基础概念</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Navicat/" rel="tag">Navicat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PBOOTCMS/" rel="tag">PBOOTCMS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PO-BO-VO%EF%BC%8CDTO-DAO%E4%B8%8EPOJO/" rel="tag">PO-BO-VO，DTO-DAO与POJO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Portainer-io/" rel="tag">Portainer.io</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RESTful/" rel="tag">RESTful</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tomcat/" rel="tag">Tomcat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Typora/" rel="tag">Typora</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WEB/" rel="tag">WEB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebRTC/" rel="tag">WebRTC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/for%E5%BE%AA%E7%8E%AF/" rel="tag">for循环</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/" rel="tag">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/if/" rel="tag">if</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java%E6%A6%82%E8%BF%B0/" rel="tag">java概述</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/" rel="tag">json</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mqtt/" rel="tag">mqtt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ngnix/" rel="tag">ngnix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/" rel="tag">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servlet/" rel="tag">servlet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springfox/" rel="tag">springfox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swagger/" rel="tag">swagger</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%8E%E4%BA%BA%E6%B2%9F%E9%80%9A/" rel="tag">与人沟通</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B9%A6/" rel="tag">书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8B%E5%8A%A1/" rel="tag">事务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E9%83%A8%E7%B1%BB/" rel="tag">内部类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC/" rel="tag">历史版本</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%8B%E7%BC%A9%E7%AE%97%E6%B3%95/" rel="tag">压缩算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" rel="tag">基础概念</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E8%A3%85/" rel="tag">安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/" rel="tag">小技巧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A7%91%E6%99%AE/" rel="tag">小科普</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1/" rel="tag">微信</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" rel="tag">快捷键</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%93%E5%8C%85/" rel="tag">打包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB/" rel="tag">抽象类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%A5%E5%8F%A3/" rel="tag">接口</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/" rel="tag">搜索技巧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%94%B6%E8%97%8F/" rel="tag">收藏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%B0%E7%8E%AF%E5%A2%83/" rel="tag">新环境</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E8%B0%88/" rel="tag">杂谈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%99%BE%E5%BA%A6/" rel="tag">百度</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" rel="tag">类型转换</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B4%A2%E5%BC%95/" rel="tag">索引</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%8F%E5%8E%86/" rel="tag">经历</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/" rel="tag">编程规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/" rel="tag">设计规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%B7%E6%AD%8C/" rel="tag">谷歌</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E8%AF%B4%E6%98%8E/" rel="tag">软件说明</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD/" rel="tag">逻辑判断</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%94%81/" rel="tag">锁</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" rel="tag">面向对象</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE%E5%90%88%E4%BD%9C/" rel="tag">项目合作</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/Eclipse/" style="font-size: 10px;">Eclipse</a> <a href="/tags/ElasticSearch/" style="font-size: 10px;">ElasticSearch</a> <a href="/tags/Gitee/" style="font-size: 10px;">Gitee</a> <a href="/tags/HATEOAS/" style="font-size: 10px;">HATEOAS</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/IDEA/" style="font-size: 10px;">IDEA</a> <a href="/tags/JQuery/" style="font-size: 10px;">JQuery</a> <a href="/tags/JSP/" style="font-size: 10px;">JSP</a> <a href="/tags/MySQL%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" style="font-size: 10px;">MySQL基础概念</a> <a href="/tags/Navicat/" style="font-size: 10px;">Navicat</a> <a href="/tags/PBOOTCMS/" style="font-size: 10px;">PBOOTCMS</a> <a href="/tags/PO-BO-VO%EF%BC%8CDTO-DAO%E4%B8%8EPOJO/" style="font-size: 10px;">PO-BO-VO，DTO-DAO与POJO</a> <a href="/tags/Portainer-io/" style="font-size: 10px;">Portainer.io</a> <a href="/tags/RESTful/" style="font-size: 10px;">RESTful</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/SQL/" style="font-size: 10px;">SQL</a> <a href="/tags/SpringBoot/" style="font-size: 10px;">SpringBoot</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/Typora/" style="font-size: 10px;">Typora</a> <a href="/tags/WEB/" style="font-size: 10px;">WEB</a> <a href="/tags/WebRTC/" style="font-size: 10px;">WebRTC</a> <a href="/tags/for%E5%BE%AA%E7%8E%AF/" style="font-size: 10px;">for循环</a> <a href="/tags/git/" style="font-size: 20px;">git</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/if/" style="font-size: 10px;">if</a> <a href="/tags/java%E6%A6%82%E8%BF%B0/" style="font-size: 10px;">java概述</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/mqtt/" style="font-size: 10px;">mqtt</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/ngnix/" style="font-size: 10px;">ngnix</a> <a href="/tags/node-js/" style="font-size: 20px;">node.js</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/servlet/" style="font-size: 10px;">servlet</a> <a href="/tags/springfox/" style="font-size: 10px;">springfox</a> <a href="/tags/swagger/" style="font-size: 10px;">swagger</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/%E4%B8%8E%E4%BA%BA%E6%B2%9F%E9%80%9A/" style="font-size: 10px;">与人沟通</a> <a href="/tags/%E4%B9%A6/" style="font-size: 10px;">书</a> <a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 10px;">事务</a> <a href="/tags/%E5%86%85%E9%83%A8%E7%B1%BB/" style="font-size: 10px;">内部类</a> <a href="/tags/%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC/" style="font-size: 10px;">历史版本</a> <a href="/tags/%E5%8E%8B%E7%BC%A9%E7%AE%97%E6%B3%95/" style="font-size: 10px;">压缩算法</a> <a href="/tags/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" style="font-size: 10px;">基础概念</a> <a href="/tags/%E5%AE%89%E8%A3%85/" style="font-size: 10px;">安装</a> <a href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/" style="font-size: 10px;">小技巧</a> <a href="/tags/%E5%B0%8F%E7%A7%91%E6%99%AE/" style="font-size: 10px;">小科普</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 10px;">微信</a> <a href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 20px;">快捷键</a> <a href="/tags/%E6%89%93%E5%8C%85/" style="font-size: 10px;">打包</a> <a href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB/" style="font-size: 10px;">抽象类</a> <a href="/tags/%E6%8E%A5%E5%8F%A3/" style="font-size: 10px;">接口</a> <a href="/tags/%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/" style="font-size: 10px;">搜索技巧</a> <a href="/tags/%E6%94%B6%E8%97%8F/" style="font-size: 10px;">收藏</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10px;">数据库</a> <a href="/tags/%E6%96%B0%E7%8E%AF%E5%A2%83/" style="font-size: 10px;">新环境</a> <a href="/tags/%E6%9D%82%E8%B0%88/" style="font-size: 10px;">杂谈</a> <a href="/tags/%E7%99%BE%E5%BA%A6/" style="font-size: 10px;">百度</a> <a href="/tags/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" style="font-size: 10px;">类型转换</a> <a href="/tags/%E7%B4%A2%E5%BC%95/" style="font-size: 10px;">索引</a> <a href="/tags/%E7%BB%8F%E5%8E%86/" style="font-size: 10px;">经历</a> <a href="/tags/%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/" style="font-size: 10px;">编程规范</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/" style="font-size: 10px;">设计规范</a> <a href="/tags/%E8%B0%B7%E6%AD%8C/" style="font-size: 10px;">谷歌</a> <a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 10px;">软件</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E8%AF%B4%E6%98%8E/" style="font-size: 10px;">软件说明</a> <a href="/tags/%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD/" style="font-size: 10px;">逻辑判断</a> <a href="/tags/%E9%94%81/" style="font-size: 10px;">锁</a> <a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 10px;">面向对象</a> <a href="/tags/%E9%A1%B9%E7%9B%AE%E5%90%88%E4%BD%9C/" style="font-size: 10px;">项目合作</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/30/4.27.%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/">序列化与反序列化</a>
          </li>
        
          <li>
            <a href="/2021/06/28/%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/">电商项目</a>
          </li>
        
          <li>
            <a href="/2021/06/24/4.26.JSR/">JSR</a>
          </li>
        
          <li>
            <a href="/2021/06/24/31.3.%E8%85%BE%E8%AE%AF%E4%BA%91%E9%9F%B3%E8%A7%86%E9%A2%91%E7%9A%84%E5%BC%80%E5%8F%91/">腾讯云音视频的开发</a>
          </li>
        
          <li>
            <a href="/2021/06/23/%E7%94%B3%E8%AF%B7%E8%BD%AF%E8%91%97/">申请软著</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 swx<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>
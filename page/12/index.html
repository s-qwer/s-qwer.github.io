<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>swx</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="我的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="swx">
<meta property="og:url" content="https://s-qwer.github.io/page/12/index.html">
<meta property="og:site_name" content="swx">
<meta property="og:description" content="我的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="swx">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="swx" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">swx</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">blog</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://s-qwer.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-10.2.项目架构" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/23/10.2.%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84/" class="article-date">
  <time class="dt-published" datetime="2021-03-23T04:02:26.000Z" itemprop="datePublished">2021-03-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/23/10.2.%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84/">PO,BO,VO，DTO,DAO与POJO</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>UML</strong></p>
<p>不想多讨论 UML 相关的知识，但是我觉得你如果真的会写 Java，请先学会表达自己，UML 就是你说话的语言，做一名优秀的 Java 程序员，请至少学会这两种 UML 图：</p>
<ol>
<li>类图</li>
<li>时序图</li>
</ol>
<p><strong>clean code</strong></p>
<p>我认为保持代码的简洁和可读性是代码的最基本保证，如果有一天为了程序的效率而降低了这两点，我认为是可以谅解的，除此之外，没有任何理由可以让你任意挥霍你的代码。</p>
<ol>
<li>读者可以看一下 Robert C. Martin 出版的《Clean Code》（代码整洁之道） 这本书</li>
<li>可以参考美团文章聊聊 clean code（<a target="_blank" rel="noopener" href="http://tech.meituan.com/clean-code.html%EF%BC%89%EF%BC%9B">http://tech.meituan.com/clean-code.html）；</a></li>
<li>也可以看一下阿里的 Java 编码规范</li>
</ol>
<p>无论如何，请保持你的代码的整洁。</p>
<p><strong>Linux 基础命令</strong></p>
<p>这点其实和会写 Java 没有关系，但是 Linux 很多时候确实承载运行 Java 的容器，请学好 Linux 的基础命令。</p>
<ol>
<li>参考鸟哥的《Linux私房菜》</li>
</ol>
<p>PO：persistent object 持久对象</p>
<p>1 ．有时也被称为Data对象，对应数据库中的entity，可以简单认为一个PO对应数据库中的一条记录。</p>
<p>2 ．在hibernate持久化框架中与insert/delet操作密切相关。</p>
<p>3 ．PO中不应该包含任何对数据库的操作。</p>
<hr>
<p>POJO ：plain ordinary java object 无规则简单java对象</p>
<p>一个中间对象，可以转化为PO、DTO、VO。</p>
<p>1 ．POJO持久化之后==〉PO</p>
<p>（在运行期，由Hibernate中的cglib动态把POJO转换为PO，PO相对于POJO会增加一些用来管理数据库entity状态的属性和方法。PO对于programmer来说完全透明，由于是运行期生成PO，所以可以支持增量编译，增量调试。）</p>
<p>2 ．POJO传输过程中==〉DTO</p>
<p>3 ．POJO用作表示层==〉VO</p>
<p>PO 和VO都应该属于它。</p>
<hr>
<p>BO：business object 业务对象</p>
<p>业务对象主要作用是把业务逻辑封装为一个对象。这个对象可以包括一个或多个其它的对象。</p>
<p>比如一个简历，有教育经历、工作经历、社会关系等等。我们可以把教育经历对应一个PO，工作经历对应一个PO，社会关系对应一个PO。</p>
<p>建立一个对应简历的BO对象处理简历，每个BO包含这些PO。</p>
<p>这样处理业务逻辑时，我们就可以针对BO去处理。</p>
<p>封装业务逻辑为一个对象（可以包括多个PO，通常需要将BO转化成PO，才能进行数据的持久化，反之，从DB中得到的PO，需要转化成BO才能在业务层使用）。</p>
<p>关于BO主要有三种概念</p>
<p>1 、只包含业务对象的属性；</p>
<p>2 、只包含业务方法；</p>
<p>3 、两者都包含。</p>
<p>在实际使用中，认为哪一种概念正确并不重要，关键是实际应用中适合自己项目的需要。</p>
<hr>
<p>VO：value object 值对象 / view object 表现层对象</p>
<p>1 ．主要对应页面显示（web页面/swt、swing界面）的数据对象。</p>
<p>2 ．可以和表对应，也可以不，这根据业务的需要。</p>
<hr>
<p>DTO（TO）：Data Transfer Object 数据传输对象</p>
<p>1 ．用在需要跨进程或远程传输时，它不应该包含业务逻辑。</p>
<p>2 ．比如一张表有100个字段，那么对应的PO就有100个属性（大多数情况下，DTO内的数据来自多个表）。但view层只需显示10个字段，没有必要把整个PO对象传递到client，这时我们就可以用只有这10个属性的DTO来传输数据到client，这样也不会暴露server端表结构。到达客户端以后，如果用这个对象来对应界面显示，那此时它的身份就转为VO。</p>
<hr>
<p>DAO：data access object数据访问对象</p>
<p>1 ．主要用来封装对DB的访问（CRUD操作）。</p>
<p>2 ．通过接收Business层的数据，把POJO持久化为PO。</p>
<p>简易的关系图：</p>
<p><img src="https://img-blog.csdn.net/20180717104224284?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE4NzA1NDc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="偷的图"></p>
<p>为什么偷来这么一篇文章：不同的对象需要用在不同的地方，之前全是POJO，现在传输用DTO，条件查询用BO，查询对象用POJO接收，显示对象用VO，虽然增加了一点代码量，但是代码结构更加清晰，也防止了表结构的暴露。</p>
<p>个人理解：</p>
<p>po，数据库表字段，一个字段对应一个po</p>
<p>dto，数据传输对象，是从数据库表中查询出来的自定义数据封装。</p>
<p>vo，表现层对象，前端页面显示时所需要的所有数据。由dto组装成vo</p>
<p>如果传输的dto刚好是前端表示所需要的值，此时dto也就是vo。</p>
<p>entity里的每一个字段，与数据库相对应，vo里的每一个字段，是和你前台页面相对应， 而dto，是用类做entity和dto之间转换的实体类。</p>
<p>说到代码结构问题，业务分层</p>
<p>所以一个好的应用分层需要具备以下几点：</p>
<ul>
<li><p>方便后续代码进行维护扩展</p>
</li>
<li><p>分层的效果需要让整个团队都接受</p>
</li>
<li><p>各个层职责边界清晰</p>
</li>
</ul>
<p>阿里规范</p>
<p>在阿里的编码规范中约束的分层如下图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQqEAgWRiaA1sb6iaWDTyVBe5YWiaWLRS0C3lEialHhbeOLTMr9BgzLjU6t0ghaTurqHcfWdvGYicklpWjw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>①开放接口层：可直接封装 Service 方法暴露成 RPC 接口；通过 Web 封装成 http 接口；进行网关安全控制、流量控制等。</p>
<p>②终端显示层：各个端的模板渲染并执行显示的层。当前主要是 velocity 渲染，JS 渲染，JSP 渲染，移动端展示等。</p>
<p>③Web 层：主要是对访问控制进行转发，各类基本参数校验，或者不复用的业务简单处理等。</p>
<p>④Service 层：相对具体的业务逻辑服务层。</p>
<p>⑤Manager 层：通用业务处理层。</p>
<p>它有如下特征:</p>
<p>对第三方平台封装的层，预处理返回结果及转化异常信息。</p>
<p>对 Service 层通用能力的下沉，如缓存方案、中间件通用处理。</p>
<p>与 DAO 层交互，对多个 DAO 的组合复用。</p>
<p>⑥DAO 层：数据访问层，与底层 MySQL、Oracle、Hbase 进行数据交互。</p>
<p>下面介绍一下具体业务中应该如何实现分层。</p>
<p>优化分层</p>
<p>从我们的业务开发中总结了一个较为的理想模型,这里要先说明一下由于我们的 RPC 框架选用的是 Thrift 可能会比其他的一些 RPC 框架例如 Dubbo 会多出一层，作用和 controller 层类似。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQqEAgWRiaA1sb6iaWDTyVBe5YLVITibODXlsqmh5EMetyNYuicbmiaCQzOc5Lb0RGbzjSwxiczcpaLXmIgA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>最上层 Controller 和 TService 是阿里分层规范里面的第一层：轻业务逻辑，参数校验，异常兜底。</p>
<p>通常这种接口可以轻易更换接口类型，所以业务逻辑必须要轻，甚至不做具体逻辑。</p>
<p>①Service：业务层，复用性较低，这里推荐每一个 Controller 方法都得对应一个 Service，不要把业务编排放在 Controller 中去做，为什么呢？</p>
<p>如果我们把业务编排放在 Controller 层去做的话，如果以后我们要接入 Thrift，我们这里又需要把业务编排在做一次，这样会导致我们每接入一个入口层这个代码都得重新复制一份。</p>
<p>如下图所示： </p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQqEAgWRiaA1sb6iaWDTyVBe5YnWJTmEDkawjyZZNLy1aSbz1A3E4ib5rbLkkuIOwQZRAichZWh0aCTP6Q/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>这样大量的重复工作必定会导致我们开发效率下降，所以我们需要把业务编排逻辑都得放进 Service 中去做：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQqEAgWRiaA1sb6iaWDTyVBe5YsUB1r8UL3x5iauKkpk7rLdECodQBZ52hVJsWbPWctKSIx4TAsJksmDQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>Mannager：可复用逻辑层。这里的 Mannager 可以是单个服务的，比如我们的 Cache，MQ 等等，当然也可以是复合的。</p>
<p>当你需要调用多个 Mannager 的时候，这个可以合为一个 Mannager，比如逻辑上的连表查询等。如果是 httpMannager 或 rpcMannager 需要在这一层做一些数据转换。</p>
<p>③DAO：数据库访问层。主要负责“操作数据库的某张表，映射到某个 Java 对象”，DAO 应该只允许自己的 Service 访问，其他 Service 要访问我的数据必须通过对应的 Service。</p>
<p>分层领域模型的转换</p>
<p>在阿里巴巴编码规约中列举了下面几个领域模型规约：</p>
<p>DO（Data Object）：与数据库表结构一一对应，通过 DAO 层向上传输数据源对象。 </p>
<p>DTO（Data Transfer Object）：数据传输对象，Service 或 Manager 向外传输的对象。 </p>
<p>BO（Business Object）：业务对象。由 Service 层输出的封装业务逻辑的对象。 </p>
<p>AO（Application Object）：应用对象。在 Web 层与 Service 层之间抽象的复用对象模型，极为贴近展示层，复用度不高。 </p>
<p>VO（View Object）：显示层对象，通常是 Web 向模板渲染引擎层传输的对象。 </p>
<p>Query：数据查询对象，各层接收上层的查询请求。注意超过2个参数的查询封装，禁止使用 Map 类来传输。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQqEAgWRiaA1sb6iaWDTyVBe5YtqYj5Lx0AiatXmOuibRLUjL7aCTMWHrZBRUpqx6jAG8UCdPjegDFDE0g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>每一个层基本都自己对应的领域模型，这样就导致了有些人过于追求每一层都是用自己的领域模型。</p>
<p>这样就导致了一个对象可能会出现 3 次甚至 4 次转换在一次请求中，当返回的时候同样也会出现 3-4 次转换，这样有可能一次完整的请求-返回会出现很多次对象转换。</p>
<p>如果在开发中真的按照这么来，恐怕就别写其他的了，一天就光写这个重复无用的逻辑算了吧</p>
<p>所以我们得采取一个折中的方案：</p>
<p>允许 Service/Manager 可以操作数据领域模型，对于这个层级来说，本来自己做的工作也是做的是业务逻辑处理和数据组装。 </p>
<p>Controller/TService 层的领域模型不允许传入 DAO 层，这样就不符合职责划分了。 </p>
<p>同理，不允许 DAO 层的数据传入到 Controller/TService。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/MOwlO0INfQqEAgWRiaA1sb6iaWDTyVBe5Yba2L0Glia9PTaWIiadLeRJIzEJAicTjf5Ky9wwb3YZibIdGdzTqgClUNgA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>bean 使我们使用最多的模型之一</p>
<p><strong>domain 包名</strong></p>
<p>根据很多 Java 程序员的”经验”来看，一个数据库表则对应着一个 domain 对象，所以很多程序员在写代码时，包名则使用：com.xxx.domain ，这样写好像已经成为了行业的一种约束，数据库映射对象就应该是 domain。但是你错了，domain 是一个领域对象，往往我们再做传统 Java 软件 Web 开发中，这些 domain 都是贫血模型，是没有行为的，或是没有足够的领域模型的行为的，所以，以这个理论来讲，这些 domain 都应该是一个普通的 entity 对象，并非领域对象，所以请把包名改为:com.xxx.entity。</p>
<p><strong>DTO</strong></p>
<p>数据传输我们应该使用 DTO 对象作为传输对象，这是我们所约定的，因为很长时间我一直都在做移动端 API 设计的工作，有很多人告诉我，他们认为只有给手机端传输数据的时候(input or output)，这些对象成为 DTO 对象。</p>
<p>请注意！这种理解是错误的，只要是用于网络传输的对象，我们都认为他们可以当做是 DTO 对象，比如电商平台中，用户进行下单，下单后的数据，订单会发到 OMS 或者 ERP 系统，这些对接的返回值以及入参也叫 DTO 对象。</p>
<p>我们约定某对象如果是 DTO 对象，就将名称改为 XXDTO，比如订单下发OMS：OMSOrderInputDTO。</p>
<p><strong>DTO 转化</strong></p>
<p>正如我们所知，DTO 为系统与外界交互的模型对象，那么肯定会有一个步骤是将 DTO 对象转化为 BO 对象或者是普通的 entity 对象，让 service 层去处理。</p>
<p><strong>场景</strong></p>
<p>比如添加会员操作，由于用于演示，我只考虑用户的一些简单数据，当后台管理员点击添加用户时，只需要传过来用户的姓名和年龄就可以了，后端接受到数据后，将添加创建时间和更新时间和默认密码三个字段，然后保存数据库。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;&#x2F;v1&#x2F;api&#x2F;user&quot;)</span><br><span class="line">@RestController</span><br><span class="line">public class UserApi &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserService userService;</span><br><span class="line"></span><br><span class="line">    @PostMapping</span><br><span class="line">    public User addUser(UserInputDTO userInputDTO)&#123;</span><br><span class="line">        User user &#x3D; new User();</span><br><span class="line">        user.setUsername(userInputDTO.getUsername());</span><br><span class="line">        user.setAge(userInputDTO.getAge());</span><br><span class="line"></span><br><span class="line">        return userService.addUser(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们只关注一下上述代码中的转化代码，其他内容请忽略：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">User user &#x3D; new User();</span><br><span class="line">user.setUsername(userInputDTO.getUsername());</span><br><span class="line">user.setAge(userInputDTO.getAge());</span><br></pre></td></tr></table></figure>

<p><strong>请使用工具</strong></p>
<p>上边的代码，从逻辑上讲，是没有问题的，只是这种写法让我很厌烦，例子中只有两个字段，如果有 20 个字段，我们要如何做呢？ 一个一个进行 set 数据吗？当然，如果你这么做了，肯定不会有什么问题，但是，这肯定不是一个最优的做法。</p>
<p>网上有很多工具，支持浅拷贝或深拷贝的 Utils。举个例子，我们可以使用 org.springframework.beans.BeanUtils#copyProperties 对代码进行重构和优化：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line">public User addUser(UserInputDTO userInputDTO)&#123;</span><br><span class="line">    User user &#x3D; new User();</span><br><span class="line">    BeanUtils.copyProperties(userInputDTO,user);</span><br><span class="line"></span><br><span class="line">    return userService.addUser(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>BeanUtils.copyProperties 是一个浅拷贝方法，复制属性时，我们只需要把 DTO 对象和要转化的对象两个的属性值设置为一样的名称，并且保证一样的类型就可以了。如果你在做 DTO 转化的时候一直使用 set 进行属性赋值，那么请尝试这种方式简化代码，让代码更加清晰!</p>
<p><strong>转化的语义</strong></p>
<p>上边的转化过程，读者看后肯定觉得优雅很多，但是我们再写 Java 代码时，更多的需要考虑语义的操作，再看上边的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User user &#x3D; new User();</span><br><span class="line">BeanUtils.copyProperties(userInputDTO,user);</span><br></pre></td></tr></table></figure>

<p>虽然这段代码很好的简化和优化了代码，但是他的语义是有问题的，我们需要提现一个转化过程才好，所以代码改成如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line"> public User addUser(UserInputDTO userInputDTO)&#123;</span><br><span class="line">         User user &#x3D; convertFor(userInputDTO);</span><br><span class="line">         return userService.addUser(user);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> private User convertFor(UserInputDTO userInputDTO)&#123;</span><br><span class="line">         User user &#x3D; new User();</span><br><span class="line">         BeanUtils.copyProperties(userInputDTO,user);</span><br><span class="line">         return user;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>这是一个更好的语义写法，虽然他麻烦了些，但是可读性大大增加了，在写代码时，我们应该尽量把语义层次差不多的放到一个方法中，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User user &#x3D; convertFor(userInputDTO);</span><br><span class="line">return userService.addUser(user);</span><br></pre></td></tr></table></figure>

<p>这两段代码都没有暴露实现，都是在讲如何在同一个方法中，做一组相同层次的语义操作，而不是暴露具体的实现。</p>
<p><strong>抽象接口定义</strong></p>
<p>当实际工作中，完成了几个 API 的 DTO 转化时，我们会发现，这样的操作有很多很多，那么应该定义好一个接口，让所有这样的操作都有规则的进行。</p>
<p>如果接口被定义以后，那么 convertFor 这个方法的语义将产生变化，它将是一个实现类。</p>
<p>看一下抽象后的接口：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface DTOConvert&lt;S,T&gt; &#123;</span><br><span class="line">    T convert(S s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>虽然这个接口很简单，但是这里告诉我们一个事情，要去使用泛型，如果你是一个优秀的 Java 程序员，请为你想做的抽象接口，做好泛型吧。</p>
<p>我们再来看接口实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class UserInputDTOConvert implements DTOConvert &#123;</span><br><span class="line">@Override</span><br><span class="line">public User convert(UserInputDTO userInputDTO) &#123;</span><br><span class="line">User user &#x3D; new User();</span><br><span class="line">BeanUtils.copyProperties(userInputDTO,user);</span><br><span class="line">return user;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们这样重构后，我们发现现在的代码是如此的简洁，并且那么的规范：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;&#x2F;v1&#x2F;api&#x2F;user&quot;)</span><br><span class="line">@RestController</span><br><span class="line">public class UserApi &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserService userService;</span><br><span class="line"></span><br><span class="line">    @PostMapping</span><br><span class="line">    public User addUser(UserInputDTO userInputDTO)&#123;</span><br><span class="line">        User user &#x3D; new UserInputDTOConvert().convert(userInputDTO);</span><br><span class="line"></span><br><span class="line">        return userService.addUser(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>review code</strong></p>
<p>如果你是一个优秀的 Java 程序员，我相信你应该和我一样，已经数次重复 review 过自己的代码很多次了。</p>
<p>我们再看这个保存用户的例子，你将发现，API 中返回值是有些问题的，问题就在于不应该直接返回 User 实体，因为如果这样的话，就暴露了太多实体相关的信息，这样的返回值是不安全的，所以我们更应该返回一个 DTO 对象，我们可称它为 UserOutputDTO：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line">public UserOutputDTO addUser(UserInputDTO userInputDTO)&#123;</span><br><span class="line">        User user &#x3D; new UserInputDTOConvert().convert(userInputDTO);</span><br><span class="line">        User saveUserResult &#x3D; userService.addUser(user);</span><br><span class="line">        UserOutputDTO result &#x3D; new UserOutDTOConvert().convertToUser(saveUserResult);</span><br><span class="line">        return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样你的 API 才更健全。</p>
<p>不知道在看完这段代码之后，读者有是否发现还有其他问题的存在，作为一个优秀的 Java 程序员，请看一下这段我们刚刚抽象完的代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User user &#x3D; new UserInputDTOConvert().convert(userInputDTO);</span><br></pre></td></tr></table></figure>

<p>你会发现，new 这样一个 DTO 转化对象是没有必要的，而且每一个转化对象都是由在遇到 DTO 转化的时候才会出现，那我们应该考虑一下，是否可以将这个类和 DTO 进行聚合呢，看一下我的聚合结果:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">public class UserInputDTO &#123;</span><br><span class="line">private String username;</span><br><span class="line">private int age;</span><br><span class="line"></span><br><span class="line">    public String getUsername() &#123;</span><br><span class="line">        return username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUsername(String username) &#123;</span><br><span class="line">        this.username &#x3D; username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public User convertToUser()&#123;</span><br><span class="line">        UserInputDTOConvert userInputDTOConvert &#x3D; new UserInputDTOConvert();</span><br><span class="line">        User convert &#x3D; userInputDTOConvert.convert(this);</span><br><span class="line">        return convert;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static class UserInputDTOConvert implements DTOConvert&lt;UserInputDTO,User&gt; &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public User convert(UserInputDTO userInputDTO) &#123;</span><br><span class="line">            User user &#x3D; new User();</span><br><span class="line">            BeanUtils.copyProperties(userInputDTO,user);</span><br><span class="line">            return user;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后 API 中的转化则由：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User user &#x3D; new UserInputDTOConvert().convert(userInputDTO);</span><br><span class="line">User saveUserResult &#x3D; userService.addUser(user);</span><br></pre></td></tr></table></figure>

<p>变成了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User user &#x3D; userInputDTO.convertToUser();</span><br><span class="line">User saveUserResult &#x3D; userService.addUser(user);</span><br></pre></td></tr></table></figure>

<p>我们再 DTO 对象中添加了转化的行为，我相信这样的操作可以让代码的可读性变得更强，并且是符合语义的。</p>
<p><strong>再查工具类</strong></p>
<p>再来看 DTO 内部转化的代码，它实现了我们自己定义的 DTOConvert 接口，但是这样真的就没有问题，不需要再思考了吗？</p>
<p>我觉得并不是，对于 Convert 这种转化语义来讲，很多工具类中都有这样的定义，这中 Convert 并不是业务级别上的接口定义，它只是用于普通 bean 之间转化属性值的普通意义上的接口定义，所以我们应该更多的去读其他含有 Convert 转化语义的代码。</p>
<p>我仔细阅读了一下 GUAVA 的源码，发现了 com.google.common.base.Convert 这样的定义：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Converter&lt;A, B&gt; implements Function&lt;A, B&gt; &#123;</span><br><span class="line">    protected abstract B doForward(A a);</span><br><span class="line">    protected abstract A doBackward(B b);</span><br><span class="line">    &#x2F;&#x2F;其他略</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从源码可以了解到，GUAVA 中的 Convert 可以完成正向转化和逆向转化，继续修改我们 DTO 中转化的这段代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">private static class UserInputDTOConvert implements DTOConvert&lt;UserInputDTO,User&gt; &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public User convert(UserInputDTO userInputDTO) &#123;</span><br><span class="line">                User user &#x3D; new User();</span><br><span class="line">                BeanUtils.copyProperties(userInputDTO,user);</span><br><span class="line">                return user;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改后：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">private static class UserInputDTOConvert extends Converter&lt;UserInputDTO, User&gt; &#123;</span><br><span class="line">         @Override</span><br><span class="line">         protected User doForward(UserInputDTO userInputDTO) &#123;</span><br><span class="line">                 User user &#x3D; new User();</span><br><span class="line">                 BeanUtils.copyProperties(userInputDTO,user);</span><br><span class="line">                 return user;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         @Override</span><br><span class="line">         protected UserInputDTO doBackward(User user) &#123;</span><br><span class="line">                 UserInputDTO userInputDTO &#x3D; new UserInputDTO();</span><br><span class="line">                 BeanUtils.copyProperties(user,userInputDTO);</span><br><span class="line">                 return userInputDTO;</span><br><span class="line">         &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>看了这部分代码以后，你可能会问，那逆向转化会有什么用呢？其实我们有很多小的业务需求中，入参和出参是一样的，那么我们变可以轻松的进行转化，我将上边所提到的 UserInputDTO 和 UserOutputDTO 都转成 UserDTO 展示给大家。</p>
<p>DTO：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">public class UserDTO &#123;</span><br><span class="line">    private String username;</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public String getUsername() &#123;</span><br><span class="line">            return username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUsername(String username) &#123;</span><br><span class="line">            this.username &#x3D; username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">            return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">            this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public User convertToUser()&#123;</span><br><span class="line">            UserDTOConvert userDTOConvert &#x3D; new UserDTOConvert();</span><br><span class="line">            User convert &#x3D; userDTOConvert.convert(this);</span><br><span class="line">            return convert;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public UserDTO convertFor(User user)&#123;</span><br><span class="line">            UserDTOConvert userDTOConvert &#x3D; new UserDTOConvert();</span><br><span class="line">            UserDTO convert &#x3D; userDTOConvert.reverse().convert(user);</span><br><span class="line">            return convert;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static class UserDTOConvert extends Converter&lt;UserDTO, User&gt; &#123;</span><br><span class="line">            @Override</span><br><span class="line">            protected User doForward(UserDTO userDTO) &#123;</span><br><span class="line">                    User user &#x3D; new User();</span><br><span class="line">                    BeanUtils.copyProperties(userDTO,user);</span><br><span class="line">                    return user;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            protected UserDTO doBackward(User user) &#123;</span><br><span class="line">                    UserDTO userDTO &#x3D; new UserDTO();</span><br><span class="line">                    BeanUtils.copyProperties(user,userDTO);</span><br><span class="line">                    return userDTO;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>API：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line"> public UserDTO addUser(UserDTO userDTO)&#123;</span><br><span class="line">         User user &#x3D;  userDTO.convertToUser();</span><br><span class="line">         User saveResultUser &#x3D; userService.addUser(user);</span><br><span class="line">         UserDTO result &#x3D; userDTO.convertFor(saveResultUser);</span><br><span class="line">         return result;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>当然，上述只是表明了转化方向的正向或逆向，很多业务需求的出参和入参的 DTO 对象是不同的，那么你需要更明显的告诉程序：逆向是无法调用的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">private static class UserDTOConvert extends Converter&lt;UserDTO, User&gt; &#123;</span><br><span class="line">         @Override</span><br><span class="line">         protected User doForward(UserDTO userDTO) &#123;</span><br><span class="line">                 User user &#x3D; new User();</span><br><span class="line">                 BeanUtils.copyProperties(userDTO,user);</span><br><span class="line">                 return user;</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         @Override</span><br><span class="line">         protected UserDTO doBackward(User user) &#123;</span><br><span class="line">                 throw new AssertionError(&quot;不支持逆向转化方法!&quot;);</span><br><span class="line">         &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>看一下 doBackward 方法，直接抛出了一个断言异常，而不是业务异常，这段代码告诉代码的调用者，这个方法不是准你调用的，如果你调用，我就”断言”你调用错误了。</p>
<p>关于异常处理的更详细介绍，可以参考我之前的文章：如何优雅的设计 Java 异常（<a target="_blank" rel="noopener" href="http://lrwinx.github.io/2016/04/28/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E8%AE%BE%E8%AE%A1java%E5%BC%82%E5%B8%B8/%EF%BC%89">http://lrwinx.github.io/2016/04/28/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E8%AE%BE%E8%AE%A1java%E5%BC%82%E5%B8%B8/）</a> ，应该可以帮你更好的理解异常。</p>
<p><strong>bean 的验证</strong></p>
<p>如果你认为我上边写的那个添加用户 API 写的已经非常完美了，那只能说明你还不是一个优秀的程序员。我们应该保证任何数据的入参到方法体内都是合法的。</p>
<p><strong>为什么要验证</strong></p>
<p>很多人会告诉我，如果这些 API 是提供给前端进行调用的，前端都会进行验证啊，你为什还要验证？</p>
<p>其实答案是这样的，我从不相信任何调用我 API 或者方法的人，比如前端验证失败了，或者某些人通过一些特殊的渠道(比如 Charles 进行抓包)，直接将数据传入到我的 API，那我仍然进行正常的业务逻辑处理，那么就有可能产生脏数据！</p>
<p>“对于脏数据的产生一定是致命”，这句话希望大家牢记在心，再小的脏数据也有可能让你找几个通宵！</p>
<p><strong>jsr 303验证</strong></p>
<p>hibernate 提供的 jsr 303 实现，我觉得目前仍然是很优秀的，具体如何使用，我不想讲，因为谷歌上你可以搜索出很多答案!</p>
<p>再以上班的 API 实例进行说明，我们现在对 DTO 数据进行检查：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class UserDTO &#123;</span><br><span class="line">    @NotNull</span><br><span class="line">    private String username;</span><br><span class="line">    @NotNull</span><br><span class="line">    private int age;</span><br><span class="line">        &#x2F;&#x2F;其他代码略</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>API 验证：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line">    public UserDTO addUser(@Valid UserDTO userDTO)&#123;</span><br><span class="line">            User user &#x3D;  userDTO.convertToUser();</span><br><span class="line">            User saveResultUser &#x3D; userService.addUser(user);</span><br><span class="line">            UserDTO result &#x3D; userDTO.convertFor(saveResultUser);</span><br><span class="line">            return result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>我们需要将验证结果传给前端，这种异常应该转化为一个 api 异常(带有错误码的异常)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line">public UserDTO addUser(@Valid UserDTO userDTO, BindingResult bindingResult)&#123;</span><br><span class="line">     checkDTOParams(bindingResult);</span><br><span class="line"></span><br><span class="line">     User user &#x3D;  userDTO.convertToUser();</span><br><span class="line">     User saveResultUser &#x3D; userService.addUser(user);</span><br><span class="line">     UserDTO result &#x3D; userDTO.convertFor(saveResultUser);</span><br><span class="line">     return result;</span><br><span class="line">&#125;</span><br><span class="line">private void checkDTOParams(BindingResult bindingResult)&#123;</span><br><span class="line">     if(bindingResult.hasErrors())&#123;</span><br><span class="line">             &#x2F;&#x2F;throw new 带验证码的验证错误异常</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>BindingResult 是 Spring MVC 验证 DTO 后的一个结果集，可以参考spring 官方文档（<a target="_blank" rel="noopener" href="http://spring.io/%EF%BC%89%E3%80%82">http://spring.io/）。</a></p>
<p>检查参数后，可以抛出一个“带验证码的验证错误异常”，具体异常设计可以参考如何优雅的设计 Java 异常（<a target="_blank" rel="noopener" href="http://lrwinx.github.io/2016/04/28/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E8%AE%BE%E8%AE%A1java%E5%BC%82%E5%B8%B8/%EF%BC%89%E3%80%82">http://lrwinx.github.io/2016/04/28/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E8%AE%BE%E8%AE%A1java%E5%BC%82%E5%B8%B8/）。</a></p>
<p><strong>拥抱 lombok</strong></p>
<p>上边的 DTO 代码，已经让我看的很累了，我相信读者也是一样，看到那么多的 Getter 和 Setter 方法，太烦躁了，那时候有什么方法可以简化这些呢。</p>
<p>请拥抱 lombok,它会帮助我们解决一些让我们很烦躁的问题</p>
<p><strong>去掉 Setter 和 Getter</strong></p>
<p>其实这个标题，我不太想说，因为网上太多，但是因为很多人告诉我，他们根本就不知道 lombok 的存在，所以为了让读者更好的学习，我愿意写这样一个例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">@Setter</span><br><span class="line">@Getter</span><br><span class="line">public class UserDTO &#123;</span><br><span class="line">    @NotNull</span><br><span class="line">    private String username;</span><br><span class="line">    @NotNull</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public User convertToUser()&#123;</span><br><span class="line">        UserDTOConvert userDTOConvert &#x3D; new UserDTOConvert();</span><br><span class="line">        User convert &#x3D; userDTOConvert.convert(this);</span><br><span class="line">        return convert;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public UserDTO convertFor(User user)&#123;</span><br><span class="line">        UserDTOConvert userDTOConvert &#x3D; new UserDTOConvert();</span><br><span class="line">        UserDTO convert &#x3D; userDTOConvert.reverse().convert(user);</span><br><span class="line">        return convert;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static class UserDTOConvert extends Converter&lt;UserDTO, User&gt; &#123;</span><br><span class="line">        @Override</span><br><span class="line">        protected User doForward(UserDTO userDTO) &#123;</span><br><span class="line">            User user &#x3D; new User();</span><br><span class="line">            BeanUtils.copyProperties(userDTO,user);</span><br><span class="line">            return user;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        protected UserDTO doBackward(User user) &#123;</span><br><span class="line">            throw new AssertionError(&quot;不支持逆向转化方法!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>看到了吧，烦人的 Getter 和 Setter 方法已经去掉了。</p>
<p>但是上边的例子根本不足以体现 lombok 的强大。我希望写一些网上很难查到，或者很少人进行说明的 lombok 的使用以及在使用时程序语义上的说明。</p>
<p>比如:@Data,@AllArgsConstructor,@NoArgsConstructor..这些我就不进行一一说明了，请大家自行查询资料。</p>
<p><strong>bean 中的链式风格</strong></p>
<p>什么是链式风格？我来举个例子，看下面这个 Student 的 bean：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class Student &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Student setName(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Student setAge(int age) &#123;</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>仔细看一下 set 方法，这样的设置便是 chain 的 style，调用的时候，可以这样使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Student student &#x3D; new Student()</span><br><span class="line">        .setAge(24)</span><br><span class="line">        .setName(&quot;zs&quot;);</span><br></pre></td></tr></table></figure>

<p>相信合理使用这样的链式代码，会更多的程序带来很好的可读性，那看一下如果使用 lombok 进行改善呢，请使用 @Accessors(chain = true)，看如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Accessors(chain &#x3D; true)</span><br><span class="line">@Setter</span><br><span class="line">@Getter</span><br><span class="line">public class Student &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样就完成了一个对于 bean 来讲很友好的链式操作。</p>
<p><strong>静态构造方法</strong></p>
<p>静态构造方法的语义和简化程度真的高于直接去 new 一个对象。比如 new 一个 List 对象，过去的使用是这样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list &#x3D; new ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure>

<p>看一下 guava 中的创建方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list &#x3D; Lists.newArrayList();</span><br></pre></td></tr></table></figure>

<p>Lists 命名是一种约定(俗话说：约定优于配置)，它是指 Lists 是 List 这个类的一个工具类，那么使用 List 的工具类去产生 List，这样的语义是不是要比直接 new 一个子类来的更直接一些呢，答案是肯定的，再比如如果有一个工具类叫做 Maps，那你是否想到了创建 Map 的方法呢：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HashMap&lt;String, String&gt; objectObjectHashMap &#x3D; Maps.newHashMap();</span><br></pre></td></tr></table></figure>

<p>好了，如果你理解了我说的语义，那么，你已经向成为 Java 程序员更近了一步了。</p>
<p>再回过头来看刚刚的 Student，很多时候，我们去写 Student 这个 bean 的时候，他会有一些必输字段，比如 Student 中的 name 字段，一般处理的方式是将 name 字段包装成一个构造方法，只有传入 name 这样的构造方法，才能创建一个 Student 对象。</p>
<p>接上上边的静态构造方法和必传参数的构造方法，使用 lombok 将更改成如下写法（@RequiredArgsConstructor 和 @NonNull）:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Accessors(chain &#x3D; true)</span><br><span class="line">@Setter</span><br><span class="line">@Getter</span><br><span class="line">@RequiredArgsConstructor(staticName &#x3D; &quot;ofName&quot;)</span><br><span class="line">public class Student &#123;</span><br><span class="line">    @NonNull private String name;</span><br><span class="line">    private int age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student student &#x3D; Student.ofName(&quot;zs&quot;);</span><br></pre></td></tr></table></figure>

<p>这样构建出的 bean 语义是否要比直接 new 一个含参的构造方法(包含 name 的构造方法)要好很多。</p>
<p>当然，看过很多源码以后，我想相信将静态构造方法 ofName 换成 of 会先的更加简洁：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Accessors(chain &#x3D; true)</span><br><span class="line">@Setter</span><br><span class="line">@Getter</span><br><span class="line">@RequiredArgsConstructor(staticName &#x3D; &quot;of&quot;)</span><br><span class="line">public class Student &#123;</span><br><span class="line">        @NonNull private String name;</span><br><span class="line">        private int age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student student &#x3D; Student.of(&quot;zs&quot;);</span><br></pre></td></tr></table></figure>

<p>当然他仍然是支持链式调用的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student student &#x3D; Student.of(&quot;zs&quot;).setAge(24);</span><br></pre></td></tr></table></figure>

<p>这样来写代码，真的很简洁，并且可读性很强。</p>
<p><strong>使用 builder</strong></p>
<p>Builder 模式我不想再多解释了，读者可以看一下《Head First》(设计模式) 的建造者模式。</p>
<p>今天其实要说的是一种变种的 builder 模式，那就是构建 bean 的 builder 模式，其实主要的思想是带着大家一起看一下 lombok 给我们带来了什么。</p>
<p>看一下 Student 这个类的原始 builder 状态:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">public class Student &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">            return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">            this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">            return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">            this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static Builder builder()&#123;</span><br><span class="line">            return new Builder();</span><br><span class="line">    &#125;</span><br><span class="line">    public static class Builder&#123;</span><br><span class="line">            private String name;</span><br><span class="line">            private int age;</span><br><span class="line">            public Builder name(String name)&#123;</span><br><span class="line">                    this.name &#x3D; name;</span><br><span class="line">                    return this;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            public Builder age(int age)&#123;</span><br><span class="line">                    this.age &#x3D; age;</span><br><span class="line">                    return this;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            public Student build()&#123;</span><br><span class="line">                    Student student &#x3D; new Student();</span><br><span class="line">                    student.setAge(age);</span><br><span class="line">                    student.setName(name);</span><br><span class="line">                    return student;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student student &#x3D; Student.builder().name(&quot;zs&quot;).age(24).build();</span><br></pre></td></tr></table></figure>

<p>这样的 builder 代码，让我是在恶心难受，于是我打算用 lombok 重构这段代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Builder</span><br><span class="line">public class Student &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student student &#x3D; Student.builder().name(&quot;zs&quot;).age(24).build();</span><br></pre></td></tr></table></figure>

<p><strong>代理模式</strong></p>
<p>正如我们所知的，在程序中调用 rest 接口是一个常见的行为动作，如果你和我一样使用过 spring 的 RestTemplate，我相信你会我和一样，对他抛出的非 http 状态码异常深恶痛绝。<a target="_blank" rel="noopener" href="http://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247486759&idx=2&sn=6769d8ff9d163babe726b6213c6d15e4&chksm=eb538811dc240107bcf2a6e65b5381b2a68175af8ff12f4e2c1b0a06f7d16850db4acb64a18e&scene=21#wechat_redirect">详解 Java 中的三种代理模式</a>。</p>
<p>所以我们考虑将 RestTemplate 最为底层包装器进行包装器模式的设计：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public abstract class FilterRestTemplate implements RestOperations &#123;</span><br><span class="line">        protected volatile RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">        protected FilterRestTemplate(RestTemplate restTemplate)&#123;</span><br><span class="line">                this.restTemplate &#x3D; restTemplate;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;实现RestOperations所有的接口</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后再由扩展类对 FilterRestTemplate 进行包装扩展：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class ExtractRestTemplate extends FilterRestTemplate &#123;</span><br><span class="line">    private RestTemplate restTemplate;</span><br><span class="line">    public ExtractRestTemplate(RestTemplate restTemplate) &#123;</span><br><span class="line">            super(restTemplate);</span><br><span class="line">            this.restTemplate &#x3D; restTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public &lt;T&gt; RestResponseDTO&lt;T&gt; postForEntityWithNoException(String url, Object request, Class&lt;T&gt; responseType, Object... uriVariables)</span><br><span class="line">                    throws RestClientException &#123;</span><br><span class="line">            RestResponseDTO&lt;T&gt; restResponseDTO &#x3D; new RestResponseDTO&lt;T&gt;();</span><br><span class="line">            ResponseEntity&lt;T&gt; tResponseEntity;</span><br><span class="line">            try &#123;</span><br><span class="line">                    tResponseEntity &#x3D; restTemplate.postForEntity(url, request, responseType, uriVariables);</span><br><span class="line">                    restResponseDTO.setData(tResponseEntity.getBody());</span><br><span class="line">                    restResponseDTO.setMessage(tResponseEntity.getStatusCode().name());</span><br><span class="line">                    restResponseDTO.setStatusCode(tResponseEntity.getStatusCodeValue());</span><br><span class="line">            &#125;catch (Exception e)&#123;</span><br><span class="line">                    restResponseDTO.setStatusCode(RestResponseDTO.UNKNOWN_ERROR);</span><br><span class="line">                    restResponseDTO.setMessage(e.getMessage());</span><br><span class="line">                    restResponseDTO.setData(null);</span><br><span class="line">            &#125;</span><br><span class="line">            return restResponseDTO;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>包装器 ExtractRestTemplate 很完美的更改了异常抛出的行为，让程序更具有容错性。在这里我们不考虑 ExtractRestTemplate 完成的功能，让我们把焦点放在 FilterRestTemplate 上，“实现 RestOperations 所有的接口”,这个操作绝对不是一时半会可以写完的，当时在重构之前我几乎写了半个小时,如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public abstract class FilterRestTemplate implements RestOperations &#123;</span><br><span class="line"></span><br><span class="line">    protected volatile RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    protected FilterRestTemplate(RestTemplate restTemplate) &#123;</span><br><span class="line">            this.restTemplate &#x3D; restTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public &lt;T&gt; T getForObject(String url, Class&lt;T&gt; responseType, Object... uriVariables) throws RestClientException &#123;</span><br><span class="line">            return restTemplate.getForObject(url,responseType,uriVariables);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public &lt;T&gt; T getForObject(String url, Class&lt;T&gt; responseType, Map&lt;String, ?&gt; uriVariables) throws RestClientException &#123;</span><br><span class="line">            return restTemplate.getForObject(url,responseType,uriVariables);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public &lt;T&gt; T getForObject(URI url, Class&lt;T&gt; responseType) throws RestClientException &#123;</span><br><span class="line">            return restTemplate.getForObject(url,responseType);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public &lt;T&gt; ResponseEntity&lt;T&gt; getForEntity(String url, Class&lt;T&gt; responseType, Object... uriVariables) throws RestClientException &#123;</span><br><span class="line">            return restTemplate.getForEntity(url,responseType,uriVariables);</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;其他实现代码略。。。</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我相信你看了以上代码，你会和我一样觉得恶心反胃，后来我用 lombok 提供的代理注解优化了我的代码(@Delegate)：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@AllArgsConstructor</span><br><span class="line">public abstract class FilterRestTemplate implements RestOperations &#123;</span><br><span class="line">    @Delegate</span><br><span class="line">    protected volatile RestTemplate restTemplate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这几行代码完全替代上述那些冗长的代码。</p>
<p>是不是很简洁，做一个拥抱 lombok 的程序员吧。</p>
<h3 id="工具类的设计"><a href="#工具类的设计" class="headerlink" title="工具类的设计"></a>工具类的设计</h3><p>工具类：存放了某一类事物存放工具方法的类。封装了一些常用Java操作方法,便于重复开发利用</p>
<p>　　命名：XxxUtil，XxxUtils，XxxTool，XxxHelper，XxxHelpers等　　比如：JdbcUtil</p>
<p>工具类存放的包：存放工具类</p>
<p>　　命名：util，utils，tool，helper，helpers等</p>
<p>工具类如何设计？</p>
<p>工具在开发中只需要存在一份即可</p>
<p>　　1）如果工具类没有使用static修饰，说明工具方法要用工具类的对象来调用。</p>
<p>　　　　此时把工具类设计成单例模式。</p>
<p>　　2）如果工具类使用static修饰，说明工具方法只需要用工具类的类名来调用即可。</p>
<p>　　　　此时必须把工具类的构造方法私有化（防止工具类的对象来调用静态方法）。</p>
<p>一般首选第二种，简单，在JDK中提供的工具类都是第二种。如java.Util.Arrays类。</p>
<p>1.如果工具类中的方法全部是静态方法，那么可以将工具类作为一个 abstract 抽象类。Spring 框架中存在大量的这样的使用。</p>
<p>2.如果工具类中有异常，请抛出，不要自己去 try-catch。更不要 try 了之后 e.printStackTrace() 。</p>
<p>3.工具类中要不要打印日志问题，尽量不要打印，像 log4j 这样的一些第三方日志框架也不要用。降低于第三方类库的依赖。</p>
<p>4.工具类中的方法非 static 的。那你可以将工具类定义为 final class，考虑到工具类应该不能被继承。在私有化它的构造函数，提供一个单例。</p>
<p>5.工具类的命名应该用 Util 结尾，例如 LogUtil。</p>
<p>工具类中的方法应该设计为静态的还是非静态的，这个没有统一的标准。各有各的好，参加大多数开源框架，static 的多一些。</p>
<p>工具类的设计，推荐大家多看看 Guava、Apache Commons。</p>
<p>像大名鼎鼎的 Hutool，它提到了工具类的 6 大设计思想：</p>
<p>​    方法优先于对象、自动识别优于用户定义、便捷性与灵活性并存、适配与兼容、可选依赖原则、无侵入原则。</p>
<p>Hutool 中的工具类，既没有采用抽象类 abstract class 有没有采用 final class。所以我更喜欢 Spring、Guava、Apache Commons等框架的源码。</p>
<h3 id="权限的设计"><a href="#权限的设计" class="headerlink" title="权限的设计"></a>权限的设计</h3><p>权限控制主要分为两块，认证（Authentication）与授权（Authorization）。认证之后确认了身份正确，业务系统就会进行授权，现在业界比较流行的模型就是RBAC（Role-Based Access Control）。</p>
<p>RBAC包含为下面四个要素：用户、角色、权限、资源。用户是源头，资源是目标，用户绑定至角色，资源与权限关联，最终将角色与权限关联，就形成了比较完整灵活的权限控制模型。<br>资源是最终需要控制的标的物，但是我们在一个业务系统中要将哪些元素作为待控制的资源呢？我将系统中待控制的资源分为三类：</p>
<ol>
<li>URL访问资源（接口以及网页）</li>
<li>界面元素资源（增删改查导入导出的按钮，重要的业务数据展示与否等）</li>
<li>数据资源</li>
</ol>
<p> <img src="/10.2.%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84/597441af5c636b2fd27fb36c603a80d0.JPEG" alt="img"></p>
<p>用户对应角色，（用户多的时候可以用用户组扩展），角色对应多个权限，权限对应多个资源（每个资源都有各自的表和其维护表），权限操作需要有记录表</p>
<p>现在业内普遍的实现方案实际上很粗放，就是单纯的“<strong>菜单控制</strong>”，通过菜单显示与否来达到控制权限的目的。<br>我仔细分析过，现在大家做的平台分为To C和To B两种：</p>
<ol>
<li>To C一般不会有太多的复杂权限控制，甚至大部分连菜单控制都不用，全部都可以访问。</li>
<li>To B一般都不是开放的，只要做好认证关口，能够进入系统的只有内部员工。大部分企业内部的员工互联网知识有限，而且作为内部员工不敢对系统进行破坏性的尝试。</li>
</ol>
<p>所以针对现在的情况，考虑成本与产出，大部分设计者也不愿意在权限上进行太多的研发力量。<br>菜单和界面元素一般都是由前端编码配合存储数据实现，URL访问资源的控制也有一些框架比如SpringSecurity，Shiro。<br>目前我还没有找到过数据权限控制的框架或者方法，所以自己整理了一份。</p>
<h2 id="数据权限控制原理"><a href="#数据权限控制原理" class="headerlink" title="数据权限控制原理"></a>数据权限控制原理</h2><p>数据权限控制最终的效果是会要求在同一个数据请求方法中，根据不同的权限返回不同的数据集，而且无需并且不能由研发编码控制。这样大家的第一想法应该就是AOP，拦截所有的底层方法，加入过滤条件。这样的方式兼容性较强，但是复杂程度也会更高。我们这套系统中，采用的是利用Mybatis的plugin机制，在底层SQL解析时替换增加过滤条件。<br>这样一套控制机制存在很明显的优缺点，首先缺点：</p>
<ol>
<li>适用性有限，基于底层的Mybatis。</li>
<li>方言有限，针对了某种数据库（我们使用Mysql），而且由于需要在底层解析处理条件所以有可能造成不同的数据库不能兼容。当然Redis和NoSQL也无法限制。</li>
</ol>
<p>当然，假如你现在就用Mybatis，而且数据库使用的是Mysql，这方面就没有太大影响了。</p>
<p>接下来说说优点：</p>
<ol>
<li>减少了接口数量及接口复杂度。原本针对不同的角色，可能会区分不同的接口或者在接口实现时利用流程控制逻辑来区分不同的条件。有了数据权限控制，代码中只用写基本逻辑，权限过滤由底层机制自动处理。</li>
<li>提高了数据权限控制的灵活性。例如原本只有主管能查本部门下组织架构/订单数据，现在新增助理角色，能够查询本部门下组织架构，不能查询订单。这样的话普通的写法就需要调整逻辑控制，使用数据权限控制的话，直接修改配置就好。</li>
</ol>
<h2 id="数据权限实现"><a href="#数据权限实现" class="headerlink" title="数据权限实现"></a>数据权限实现</h2><p>上一节就提及了实现原理，是基于Mybatis的plugins<a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/configuration.html#plugins">（查看官方文档）</a>实现。</p>
<blockquote>
<p>MyBatis 允许你在已映射语句执行过程中的某一点进行拦截调用。默认情况下，MyBatis 允许使用插件来拦截的方法调用包括：<br>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)<br>ParameterHandler (getParameterObject, setParameters)<br>ResultSetHandler (handleResultSets, handleOutputParameters)<br>StatementHandler (prepare, parameterize, batch, update, query)</p>
</blockquote>
<p>Mybatis的插件机制目前比较出名的实现应该就是<a target="_blank" rel="noopener" href="https://github.com/pagehelper/Mybatis-PageHelper">PageHelper</a>项目了，在做这个实现的时候也参考了PageHelper项目的实现方式。所以权限控制插件的类命名为PermissionHelper。<br>机制是依托于Mybatis的plugins机制，实际SQL处理的时候基于jsqlparser这个包。<br>设计中包含两个类，一个是保存角色与权限的实体类命名为PermissionRule，一个是根据实体变更底层SQL语句的主体方法类PermissionHelper。</p>
<p>首先来看下PermissionRule的结构：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PermissionRule</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Log log = LogFactory.getLog(PermissionRule.class);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * codeName&lt;br&gt;</span></span><br><span class="line"><span class="comment">     * 适用角色列表&lt;br&gt;</span></span><br><span class="line"><span class="comment">     * 格式如: ,RoleA,RoleB,</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String roles;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * codeValue&lt;br&gt;</span></span><br><span class="line"><span class="comment">     * 主实体，多表联合</span></span><br><span class="line"><span class="comment">     * 格式如: ,SystemCode,User,</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String fromEntity;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * codeDesc&lt;br&gt;</span></span><br><span class="line"><span class="comment">     * 过滤表达式字段, &lt;br&gt;</span></span><br><span class="line"><span class="comment">     * &lt;code&gt;&#123;uid&#125;&lt;/code&gt;会自动替换为当前用户的userId&lt;br&gt;</span></span><br><span class="line"><span class="comment">     * &lt;code&gt;&#123;me&#125;&lt;/code&gt; main entity 主实体名称</span></span><br><span class="line"><span class="comment">     * &lt;code&gt;&#123;me.a&#125;&lt;/code&gt; main entity alias 主实体别名</span></span><br><span class="line"><span class="comment">     * 格式如：</span></span><br><span class="line"><span class="comment">     * &lt;ul&gt;</span></span><br><span class="line"><span class="comment">     * &lt;li&gt;userId = &#123;uid&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">     * &lt;li&gt;(userId = &#123;uid&#125; AND authType &gt; 3)&lt;/li&gt;</span></span><br><span class="line"><span class="comment">     * &lt;li&gt;((userId = &#123;uid&#125; AND authType) &gt; 3 OR (dept in (select dept from depts where manager.id = &#123;uid&#125;)))&lt;/li&gt;</span></span><br><span class="line"><span class="comment">     * &lt;/ul&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String exps;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * codeShowName&lt;br&gt;</span></span><br><span class="line"><span class="comment">     * 规则说明</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String ruleComment;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>看完这个结构，基本能够理解设计的思路了。数据结构中保存如下几个字段：</p>
<ul>
<li>角色列表：需要使用此规则的角色，可以多个，使用英文逗号隔开。</li>
<li>实体列表：对应的规则应用的实体（这里指的是表结构中的表名，可能你的实体是驼峰而数据库是蛇形，所以这里要放蛇形那个），可以多个，使用英文逗号隔开。</li>
<li><strong>表达式</strong>：表达式就是数据权限控制的核心了。简单的说这里的表达式就是一段SQL语句，其中设置了一些可替换值，底层会用对应运行时的变量替换对应内容，从而达到增加条件的效果。</li>
<li>规则说明：单纯的一个说明字段。</li>
</ul>
<p><strong>核心流程</strong><br>系统启动时，首先从数据库加载出所有的规则。底层利用插件机制来拦截所有的查询语句，进入查询拦截方法后，首先根据当前用户的权限列表筛选出PermissionRule列表，然后循环列表中的规则，对语句中符合实体列表的表进行条件增加，最终生成处理后的SQL语句，退出拦截器，Mybatis执行处理后SQL并返回结果。</p>
<p>讲完PermissionRule，再来看看PermissionHelper，首先是头：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Intercepts(&#123;@Signature(type = Executor.class, method = &quot;update&quot;, args = &#123;MappedStatement.class, Object.class&#125;),</span></span><br><span class="line"><span class="meta">        @Signature(type = Executor.class, method = &quot;query&quot;, args = &#123;MappedStatement.class, Object.class, RowBounds.class, ResultHandler.class&#125;)&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PermissionHelper</span> <span class="keyword">implements</span> <span class="title">Interceptor</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>头部只是标准的Mybatis拦截器写法，注解中的Signature决定了你的代码对哪些方法拦截，update实际上针对<strong>修改（Update）、删除（Delete）</strong>生效，query是对<strong>查询（Select）</strong>生效。</p>
<p>下面给出针对<em>Select</em>注入查询条件限制的完整代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">processSelectSql</span><span class="params">(String sql, List&lt;PermissionRule&gt; rules, UserDefaultZimpl principal)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        String replaceSql = <span class="keyword">null</span>;</span><br><span class="line">        Select select = (Select) CCJSqlParserUtil.parse(sql);</span><br><span class="line">        PlainSelect selectBody = (PlainSelect) select.getSelectBody();</span><br><span class="line">        String mainTable = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (selectBody.getFromItem() <span class="keyword">instanceof</span> Table) &#123;</span><br><span class="line">            mainTable = ((Table) selectBody.getFromItem()).getName().replace(<span class="string">&quot;`&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (selectBody.getFromItem() <span class="keyword">instanceof</span> SubSelect) &#123;</span><br><span class="line">            replaceSql = processSelectSql(((SubSelect) selectBody.getFromItem()).getSelectBody().toString(), rules, principal);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!ValidUtil.isEmpty(replaceSql)) &#123;</span><br><span class="line">            sql = sql.replace(((SubSelect) selectBody.getFromItem()).getSelectBody().toString(), replaceSql);</span><br><span class="line">        &#125;</span><br><span class="line">        String mainTableAlias = mainTable;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            mainTableAlias = selectBody.getFromItem().getAlias().getName();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.debug(<span class="string">&quot;当前sql中， &quot;</span> + mainTable + <span class="string">&quot; 没有设置别名&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        String condExpr = <span class="keyword">null</span>;</span><br><span class="line">        PermissionRule realRuls = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (PermissionRule rule :</span><br><span class="line">                rules) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Object roleStr :</span><br><span class="line">                    principal.getRoles()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (rule.getRoles().indexOf(<span class="string">&quot;,&quot;</span> + roleStr + <span class="string">&quot;,&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (rule.getFromEntity().indexOf(<span class="string">&quot;,&quot;</span> + mainTable + <span class="string">&quot;,&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">                        <span class="comment">// 若主表匹配规则主体，则直接使用本规则</span></span><br><span class="line">                        realRuls = rule;</span><br><span class="line"></span><br><span class="line">                        condExpr = rule.getExps().replace(<span class="string">&quot;&#123;uid&#125;&quot;</span>, UserDefaultUtil.getUserId().toString()).replace(<span class="string">&quot;&#123;bid&#125;&quot;</span>, UserDefaultUtil.getBusinessId().toString()).replace(<span class="string">&quot;&#123;me&#125;&quot;</span>, mainTable).replace(<span class="string">&quot;&#123;me.a&#125;&quot;</span>, mainTableAlias);</span><br><span class="line">                        <span class="keyword">if</span> (selectBody.getWhere() == <span class="keyword">null</span>) &#123;</span><br><span class="line">                            selectBody.setWhere(CCJSqlParserUtil.parseCondExpression(condExpr));</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            AndExpression and = <span class="keyword">new</span> AndExpression(selectBody.getWhere(), CCJSqlParserUtil.parseCondExpression(condExpr));</span><br><span class="line">                            selectBody.setWhere(and);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        String joinTable = <span class="keyword">null</span>;</span><br><span class="line">                        String joinTableAlias = <span class="keyword">null</span>;</span><br><span class="line">                        <span class="keyword">for</span> (Join j :</span><br><span class="line">                                selectBody.getJoins()) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (rule.getFromEntity().indexOf(<span class="string">&quot;,&quot;</span> + ((Table) j.getRightItem()).getName() + <span class="string">&quot;,&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">                                <span class="comment">// 当主表不能匹配时，匹配所有join，使用符合条件的第一个表的规则。</span></span><br><span class="line">                                realRuls = rule;</span><br><span class="line">                                joinTable = ((Table) j.getRightItem()).getName();</span><br><span class="line">                                joinTableAlias = j.getRightItem().getAlias().getName();</span><br><span class="line"></span><br><span class="line">                                condExpr = rule.getExps().replace(<span class="string">&quot;&#123;uid&#125;&quot;</span>, UserDefaultUtil.getUserId().toString()).replace(<span class="string">&quot;&#123;bid&#125;&quot;</span>, UserDefaultUtil.getBusinessId().toString()).replace(<span class="string">&quot;&#123;me&#125;&quot;</span>, joinTable).replace(<span class="string">&quot;&#123;me.a&#125;&quot;</span>, joinTableAlias);</span><br><span class="line">                                <span class="keyword">if</span> (j.getOnExpression() == <span class="keyword">null</span>) &#123;</span><br><span class="line">                                    j.setOnExpression(CCJSqlParserUtil.parseCondExpression(condExpr));</span><br><span class="line">                                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                    AndExpression and = <span class="keyword">new</span> AndExpression(j.getOnExpression(), CCJSqlParserUtil.parseCondExpression(condExpr));</span><br><span class="line">                                    j.setOnExpression(and);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                        log.debug(<span class="string">&quot;当前sql没有join的部分！&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (realRuls == <span class="keyword">null</span>) <span class="keyword">return</span> sql; <span class="comment">// 没有合适规则直接退出。</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (sql.indexOf(<span class="string">&quot;limit ?,?&quot;</span>) != -<span class="number">1</span> &amp;&amp; select.toString().indexOf(<span class="string">&quot;LIMIT ? OFFSET ?&quot;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">            sql = select.toString().replace(<span class="string">&quot;LIMIT ? OFFSET ?&quot;</span>, <span class="string">&quot;limit ?,?&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            sql = select.toString();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (JSQLParserException e) &#123;</span><br><span class="line">        log.error(<span class="string">&quot;change sql error .&quot;</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sql;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>重点思路</strong><br>重点其实就在于Sql的解析和条件注入，使用开源项目<a target="_blank" rel="noopener" href="https://github.com/JSQLParser/JSqlParser">JSqlParser</a>。</p>
<ul>
<li>解析出MainTable和JoinTable。from之后跟着的称为MainTable，join之后跟着的称为JoinTable。这两个就是我们PermissionRule需要匹配的表名，<em>PermissionRule::fromEntity</em>字段。</li>
<li>解析出MainTable的where和JoinTable的on后面的条件。使用and连接原本的条件和待注入的条件，<em>PermissionRule::exps</em>字段。</li>
<li>使用当前登录的用户信息（放在缓存中），替换条件表达式中的值。</li>
<li>某些情况需要忽略权限，可以考虑使用ThreadLocal（单机）/Redis（集群）来控制。</li>
</ul>
<p>想要达到无感知的数据权限控制，只有机制控制这么一条路。本文选择的是通过底层拦截Sql语句，并且针对对应表注入条件语句这么一种做法。应该是非常经济的做法，只是基于文本处理，不会给系统带来太大的负担，而且能够达到理想中的效果。大家也可以提出其他的见解和思路</p>
<h2 id="电商项目"><a href="#电商项目" class="headerlink" title="电商项目"></a>电商项目</h2><h4 id="SPU表"><a href="#SPU表" class="headerlink" title="SPU表"></a>SPU表</h4><p><img src="/10.2.%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84/image-20210820094429308.png" alt="image-20210820094429308"></p>
<p>标题（商品名称），副标题（商品描述），几个ID（所属的目录），是否上架，是否有效，添加时间，删除时间。</p>
<h4 id="SKU表"><a href="#SKU表" class="headerlink" title="SKU表"></a>SKU表</h4><p><img src="/10.2.%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84/image-20210820094502744.png" alt="image-20210820094502744"></p>
<p>spu_id，商品标题，图片（多个以，分开），销售价格，参数，是否有效，创建时间和修改时间。</p>
<h4 id="kind表"><a href="#kind表" class="headerlink" title="kind表"></a>kind表</h4><p>商品的种类，上级菜单分类</p>
<h4 id="订单号的生成"><a href="#订单号的生成" class="headerlink" title="订单号的生成"></a>订单号的生成</h4><p>常见的订单基本都14-20位，(年月日时分秒和随机数)基本上就有14位</p>
<p>要求：</p>
<p>1.全局唯一性：不能出现重复的ID号，既然是唯一标识，这是最基本的要求。<br>2.趋势递增：在MySQL InnoDB引擎中使用的是聚集索引，由于多数RDBMS使用B-tree的数据结构来存储索引数据，在主键的选择上面我们应该尽量使用有序的主键保证写入性能。<br>3.单调递增：保证下一个ID一定大于上一个ID，例如事务版本号、IM增量消息、排序等特殊需求。<br>4.信息安全：如果ID是连续的，恶意用户的扒取工作就非常容易做了，直接按照顺序下载指定URL即可；如果是订单号就更危险了，竞对可以直接知道我们一天的单量。所以在一些应用场景下，会需要ID无规则、不规则。</p>
<p>123对应三类不同的场景，3和4需求还是互斥的，无法使用同一个方案满足</p>
<p>所以ID生产系统：</p>
<p>1.平均延迟和TP999延迟都要尽可能低；<br>2.可用性5个9；<br>3.高QPS。</p>
<p>考虑客户体验：</p>
<p>1.订单号无重复性；<br>2.如果方便客服的话，最好是“日期+自增数”样式的订单号，客服一看便知道订单是否在退货保障期限内容；<br>3.订单号长度尽量保持短（10位以内），方便用户，尤其电话投诉时，长的号码报错几率高，影响客服效率；<br>4.订单号尽量保持数字型(纯整数)，在数据库订单索引查询中，长整数字型的数据索引与检索效率，远远高于文本型，因此尽量避免“字母+数字字符串式”！</p>
<p>在复杂的分布式系统中，很多场景需要的都是全局唯一ID的场景，一般为了防止冲突可以考虑的有36位的UUID,twitter的snowflake（雪花算法）等。</p>
<ol>
<li>UUID, 组成：当前日期+时间+时钟序列+机器识别号（Mac地址或其他）没有mac网卡的话会有别的东西识别。在分布式系统中，所有元素（WEB服务器）都不需要通过中央控制端来判断数据唯一性。几十年之内可以达到全球唯一性。</li>
<li>Mysql通过AUTO_INCREMENT实现、Oracle通过Sequence序列实现。在数据库集群环境下，不同数据库节点可设置不同起步值、相同步长来实现集群下生产全局唯一、递增ID</li>
<li>Snowflake算法 雪花算法。41位时间戳+10位机器ID+12位序列号（自增） 转化长度为18位的长整型。Twitter为满足美秒上万条消息的创建，且ID需要趋势递增，方便客户端排序。Snowflake虽然有同步锁，但是比uuid效率高。</li>
<li>Redis自增ID。实现了incr(key)用于将key的值递增1，并返回结果。如果key不存在，创建默认并赋值为0。 具有原子性，保证在并发的时候。</li>
<li>拼接应用所在的网络ip。或者应用所在的端口号。或者进程ID。或者以上的组合保证唯一。</li>
</ol>
<p>例：</p>
<p>0/1:0为游客下单，1为公司下单</p>
<ul>
<li>商户ID的传入(传入商户ID是为了防止重复订单的，但是不起作用)</li>
<li>毫秒仅保留三位(缩减长度同时保证应用切换不存在重复的可能)</li>
<li>使用线程安全的计数器做数字递增(三位数最低保证并发800不重复,代码中我给了4位)</li>
<li>更换日期转换为java8的日期类以格式化(线程安全及代码简洁性考量) </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;** 订单号生成(NEW) **&#x2F;</span><br><span class="line">private static final AtomicInteger SEQ &#x3D; new AtomicInteger(1000);</span><br><span class="line">private static final DateTimeFormatter DF_FMT_PREFIX &#x3D; DateTimeFormatter.ofPattern(&quot;yyMMddHHmmssSS&quot;);</span><br><span class="line">private static ZoneId ZONE_ID &#x3D; ZoneId.of(&quot;Asia&#x2F;Shanghai&quot;);</span><br><span class="line">public static String generateOrderNo()&#123;</span><br><span class="line">    LocalDateTime dataTime &#x3D; LocalDateTime.now(ZONE_ID);</span><br><span class="line">    if(SEQ.intValue()&gt;9990)&#123;</span><br><span class="line">        SEQ.getAndSet(1000);</span><br><span class="line">    &#125;</span><br><span class="line">    return  dataTime.format(DF_FMT_PREFIX)+SEQ.getAndIncrement();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>雪花算法：100万个ID 耗时２秒</p>
<p><img src="/10.2.%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84/01888770c8f84b1df258ddd1d424535c68559.png@1112w_282h_80q" alt="image"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IdWorker</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 起始的时间戳</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> START_STMP = <span class="number">1530795377086L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每一部分占用的位数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 序列号占用的位数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> SEQUENCE_BIT = <span class="number">12</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 机器标识占用的位数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> MACHINE_BIT = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据中心占用的位数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> DATACENTER_BIT = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每一部分的最大值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> MAX_DATACENTER_NUM = -<span class="number">1L</span> ^ (-<span class="number">1L</span> &lt;&lt; DATACENTER_BIT);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> MAX_MACHINE_NUM = -<span class="number">1L</span> ^ (-<span class="number">1L</span> &lt;&lt; MACHINE_BIT);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> MAX_SEQUENCE = -<span class="number">1L</span> ^ (-<span class="number">1L</span> &lt;&lt; SEQUENCE_BIT);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每一部分向左的位移</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> MACHINE_LEFT = SEQUENCE_BIT;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> DATACENTER_LEFT = SEQUENCE_BIT + MACHINE_BIT;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">long</span> TIMESTMP_LEFT = DATACENTER_LEFT + DATACENTER_BIT;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据中心</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> datacenterId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 机器标识</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> machineId;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 序列号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> sequence = <span class="number">0L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上一次时间戳</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> lastStmp = -<span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">IdWorker</span><span class="params">(<span class="keyword">long</span> datacenterId, <span class="keyword">long</span> machineId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (datacenterId &gt; MAX_DATACENTER_NUM || datacenterId &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;datacenterId can&#x27;t be greater than MAX_DATACENTER_NUM or less than 0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (machineId &gt; MAX_MACHINE_NUM || machineId &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;machineId can&#x27;t be greater than MAX_MACHINE_NUM or less than 0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.datacenterId = datacenterId;</span><br><span class="line">        <span class="keyword">this</span>.machineId = machineId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 产生下一个ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">long</span> <span class="title">nextId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> currStmp = getNewstmp();</span><br><span class="line">        <span class="keyword">if</span> (currStmp &lt; lastStmp) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;Clock moved backwards.  Refusing to generate id&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (currStmp == lastStmp) &#123;</span><br><span class="line">            <span class="comment">//相同毫秒内，序列号自增</span></span><br><span class="line">            sequence = (sequence + <span class="number">1</span>) &amp; MAX_SEQUENCE;</span><br><span class="line">            <span class="comment">//同一毫秒的序列数已经达到最大</span></span><br><span class="line">            <span class="keyword">if</span> (sequence == <span class="number">0L</span>) &#123;</span><br><span class="line">                currStmp = getNextMill();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//不同毫秒内，序列号置为0</span></span><br><span class="line">            sequence = <span class="number">0L</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        lastStmp = currStmp;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">                <span class="comment">//时间戳部分</span></span><br><span class="line">                currStmp - START_STMP) &lt;&lt; TIMESTMP_LEFT</span><br><span class="line">                <span class="comment">//数据中心部分</span></span><br><span class="line">                | datacenterId &lt;&lt; DATACENTER_LEFT</span><br><span class="line">                <span class="comment">//机器标识部分</span></span><br><span class="line">                | machineId &lt;&lt; MACHINE_LEFT</span><br><span class="line">                <span class="comment">//序列号部分</span></span><br><span class="line">                | sequence;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">long</span> <span class="title">getNextMill</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> mill = getNewstmp();</span><br><span class="line">        <span class="keyword">while</span> (mill &lt;= lastStmp) &#123;</span><br><span class="line">            mill = getNewstmp();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mill;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">long</span> <span class="title">getNewstmp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> System.currentTimeMillis();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        IdWorker snowFlake = <span class="keyword">new</span> IdWorker(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++) &#123;</span><br><span class="line">            System.out.println(snowFlake.nextId());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(System.currentTimeMillis() - start);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="一致性和性能的思考"><a href="#一致性和性能的思考" class="headerlink" title="一致性和性能的思考"></a>一致性和性能的思考</h2><p>1、性能和一致性不能同时满足，为了性能考虑，通常会采用「最终一致性」的方案</p>
<p>2、掌握缓存和数据库一致性问题，核心问题有 3 点：缓存利用率、并发、缓存 + 数据库一起成功问题</p>
<p>3、失败场景下要保证一致性，常见手段就是「重试」，同步重试会影响吞吐量，所以通常会采用异步重试的方案</p>
<p>4、订阅变更日志的思想，本质是把权威数据源（例如 MySQL）当做 leader 副本，让其它异质系统（例如 Redis / Elasticsearch）成为它的 follower 副本，通过同步变更日志的方式，保证 leader 和 follower 之间保持一致</p>
<h2 id="项目的思考"><a href="#项目的思考" class="headerlink" title="项目的思考"></a>项目的思考</h2><p>1.如果前端需要多个DTO，而不同业务的DTO有99%可以复用，我是需要根据业务生成多个DTO（一个接口一个DTO）传还是都复用一个DTO（多个接口公用一个DTO，虽然很多属性没有用到）？</p>
<p>答：</p>
<p>2.向项目里使用新技术时，我在加的时候是否需要重写之前的方法以适用新技术？这是否违反了开闭原则？</p>
<p>答：</p>
<p>3.如果业务里只有一个方法需要处理，需要等待这个方法的结果再返回给前端，还是异步这个方法，交给其他线程去处理？哪种客户体验更好？</p>
<p>答：</p>
<p>4.web端项目后端怎么主动发消息给前端？前端可能关闭了网页则连接就断了</p>
<p>答：</p>
<p>5.延时处理：过期自动收货，到期自动删除？</p>
<p>答：</p>
<p>6.springboot项目的DTO和VO的分类？Controller层、Service层代码应该放什么？Service层的接口是否真的有必要？</p>
<p>7.业务代码里重复的方法太多，不知道怎么提取公共部分，如果提取了公共部分，一些切面就无法执行，如果为了执行再加切面，是否会影响性能？如果存在两个方法的大致逻辑都一样，只是一些不一样，我该怎么抽取公共？比如说一个方法A，参数是1，业务里根据参数1查对应的表得出11，在根据11继续逻辑；方法B，参数是2，业务里根据参数2查对应的表得出22，在根据22继续逻辑。11和22是不同的表，我该怎么抽取公共代码？</p>
<p>8.功能重要还是性能重要？比如加一个新东西可以实现某项功能，但是会严重消耗性能，我该怎么取舍？（这个功能可能有用可能鸡肋，这个功能和性能的平衡点在哪）</p>
<p>9.对于一个新功能或者新技术的引用，可能会耗费大量时间，在这期间产品不会更新或者进度很慢，是否值得？（怎么向老板解释长时间不出活是为了后期更高的性能）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/23/10.2.%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84/" data-id="ckxho8wmg006rh8vw5ypza50b" data-title="PO,BO,VO，DTO,DAO与POJO" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PO-BO-VO%EF%BC%8CDTO-DAO%E4%B8%8EPOJO/" rel="tag">PO-BO-VO，DTO-DAO与POJO</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-10.1.项目初建" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/23/10.1.%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%BB%BA/" class="article-date">
  <time class="dt-published" datetime="2021-03-23T03:09:18.000Z" itemprop="datePublished">2021-03-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/23/10.1.%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%BB%BA/">项目初建</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h1><p>​    程序员与代码密不可分，而代码又是为了项目服务的，项目又可以集合成一个产品，而产品最终是要为我们服务的。为什么会有计算机的存在，是因为人类想要一种机器帮助我们简化计算，为什么会有代码的存在，是因为人类想要计算机更易懂我们的想法，为什么会有项目的存在，是因为我们需要计算机可以将我们的想法完整表达出来，为什么会有产品存在，说到底，是人类的进化使我们想要更高效的生活。所以说，如何做一个产品？产品是我们最终想要的结果，项目明确了我们的需求，代码只是底层实现，计算机，执行者罢了。所以这篇文章，写一写怎样开始着手于写一个项目。</p>
<h2 id="项目前的准备"><a href="#项目前的准备" class="headerlink" title="项目前的准备"></a>项目前的准备</h2><p>​    写项目之前，首先要明确，你的需求是什么，你想要一个什么样的产品。明确需求很重要，否则你写出来的东西很有可能不是你或者别人想要的东西。<code>一千个哈姆雷特</code>，每个人都有自己的想法，而完成一个别人的项目，需要完成的，就是实现别人的想法。所以大方向很重要。</p>
<p>​    明确真实需求后，怎么样实现需求呢？要做到心中有数，需要我们在自己心中建立起一个框架。要明确分为几个模块，每个模块会用到什么东西,具体的流程是什么样的，做到心中有数，自可万法归一，行云流水。</p>
<p>​    <code>工欲善其事必先利其器</code>，为了更高效简洁的开发，我们需要准备好我们的工具。首先就是自己常用且顺手的各种工具，然后是可能已有的框架，一个逻辑的既定代码，造轮子固然可以提高自己的技术，但是重复造轮子就属实没有必要了。</p>
<p>需求文档，定义功能，界面，原型图，数据库设计，接口设计</p>
<p>具体流程</p>
<p>1.明确需求</p>
<p>2.搭建环境</p>
<p>3.找轮子</p>
<p>4.建数据库，建表</p>
<p>5.建类</p>
<p>6.思考设计模式</p>
<p>7.梳理接口，确定开发排期</p>
<p>8.写代码，写单测</p>
<p>9.前后端对接</p>
<p>10.产品验收，上线</p>
<h2 id="项目构思框架"><a href="#项目构思框架" class="headerlink" title="项目构思框架"></a>项目构思框架</h2><p>​    一个完整的项目，必定会有前后端。前端负责展示效果，后端负责处理逻辑。</p>
<h3 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h3><p>1.router.js</p>
<p>路由页面。负责网页地址的跳转</p>
<p>2.main.js</p>
<p>导入资源页面。负责导入用到的相关框架或者包。</p>
<p>3.view</p>
<p>vue的前端显示的页面。</p>
<p>包括三部分：</p>
<pre><code>- html元素
- js代码
- css样式
</code></pre>
<p>components：部件。可以在这里设定上端、下端的固定样式，可以用到每个页面。</p>
<p>4.utils</p>
<p>工具类。</p>
<p>5.assets/static/public</p>
<p>存放静态资源。</p>
<p>6.request</p>
<p>跨域请求</p>
<h3 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h3><p>1.pom.xml</p>
<p>maven的配置文件。</p>
<p>2.controller层</p>
<p>控制层，一般在src下的java下。</p>
<p>3.service层</p>
<p>逻辑层，一般在src下的java下。</p>
<p>4.Mapper层</p>
<p>数据库层，src下的resources下的是数据库表字段的配置文件，src下的java下的是sql语句。</p>
<p>5.entity，pojo</p>
<p>实体类，一般在src下的java下。</p>
<p>6.exception</p>
<p>异常</p>
<p>7.utils</p>
<p>工具</p>
<p>8.filter</p>
<p>过滤，拦截器</p>
<p>9.config</p>
<p>配置</p>
<p>10.dto</p>
<p>自定义数据结构</p>
<h4 id="用到的相关依赖"><a href="#用到的相关依赖" class="headerlink" title="用到的相关依赖"></a>用到的相关依赖</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis-plus-boot-starter.version</span>&gt;</span>3.4.0<span class="tag">&lt;/<span class="name">mybatis-plus-boot-starter.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.40<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commons-lang3.version</span>&gt;</span>3.6<span class="tag">&lt;/<span class="name">commons-lang3.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hutool-all.version</span>&gt;</span>4.6.2<span class="tag">&lt;/<span class="name">hutool-all.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">springfox.version</span>&gt;</span>2.9.1<span class="tag">&lt;/<span class="name">springfox.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">fastjson.version</span>&gt;</span>1.2.13<span class="tag">&lt;/<span class="name">fastjson.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>sonatype-nexus-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://oss.sonatype.org/content/repositories/snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>sonatype-nexus-staging<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://oss.sonatype.org/service/local/staging/deploy/maven2/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scm</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">connection</span>&gt;</span><span class="tag">&lt;/<span class="name">connection</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">developerConnection</span>&gt;</span><span class="tag">&lt;/<span class="name">developerConnection</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span><span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">scm</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-java-sdk-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span> <span class="comment">&lt;!-- 注：如提示报错，先升级基础包版，无法解决可联系技术支持 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-java-sdk-dysmsapi<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- mybatis-plus begin =================================== --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-plus-boot-starter.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- mybatis-plus end --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ========================= 数据库相关 ========================== --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ========================= 常用库依赖 ========================== --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- lombok插件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Hutool工具类 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hutool-all.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- StringUtils工具类 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-lang3.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 阿里FastJson转换工具依赖 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;fastjson.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- AOP依赖 【注：系统日记需要此依赖】 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--httpclient--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpmime<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- swagger--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springfox.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mapstruct<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapstruct<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springfox.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-bean-validators<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;springfox.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--poi相关--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-ooxml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 注：maven默认是不编译，因此加上如下resources才会生产对应的xml文件 目的：解决mybatis映射关系不对应问题  start =============== --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.*<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--是否替换资源中的属性--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">testResources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">testResource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">testResource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">testResources</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注：maven默认是不编译，因此加上如下resources才会生产对应的xml文件 目的：解决mybatis映射关系不对应问题  end =============== --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.sonatype.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>nexus-staging-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">extensions</span>&gt;</span>true<span class="tag">&lt;/<span class="name">extensions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">serverId</span>&gt;</span>sonatype-nexus-staging<span class="tag">&lt;/<span class="name">serverId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">nexusUrl</span>&gt;</span>https://oss.sonatype.org/<span class="tag">&lt;/<span class="name">nexusUrl</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">autoReleaseAfterClose</span>&gt;</span>true<span class="tag">&lt;/<span class="name">autoReleaseAfterClose</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">skip</span>&gt;</span>true<span class="tag">&lt;/<span class="name">skip</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="前后端的对接规范"><a href="#前后端的对接规范" class="headerlink" title="前后端的对接规范"></a>前后端的对接规范</h3><p>1.使用MybatisPlus的R返回值。</p>
<p>R是com.baomidou.mybatisplus.extension.api中写好的一个统一结果返回集。主要包含code，data，msg</p>
<p>**R(IErrorCode errorCode)**：    {data:null,code:errorCode.getCode(),msg:errorCode.getMsg()}</p>
<p><strong>R.ok(T data)</strong>:         默认情况下：{data:data,code:0,msg:执行成功}  如果data为Boolean类型且就是false:{data:false,code:-1,msg:操作失败}</p>
<p><strong>R.failed(String msg)</strong>:        {data:null,code:-1,msg:msg}</p>
<p><strong>R.failed(IErrorCode errorCode)</strong> :            {data:null,code:errorCode.getCode(),msg:errorCode.getMsg()}</p>
<p><strong>R.restResult(T data, IErrorCode errorCode)</strong>  :            {data:data,code:errorCode.getCode(),msg:errorCode.getMsg()}</p>
<p><strong>R.restResult(T data, long code, String msg)</strong>:            {data:data,code:code,msg:msg}</p>
<p>可以自己定义枚举类实现IErrorCode接口,例如自定义一个IErrorCode</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">ResApiFailCode</span> <span class="keyword">implements</span> <span class="title">IErrorCode</span> </span>&#123;</span><br><span class="line">    FAILED(-<span class="number">1L</span>, <span class="string">&quot;出错了&quot;</span>),</span><br><span class="line">    INVALID_PARAM(-<span class="number">2L</span>, <span class="string">&quot;参数异常&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> code;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String msg;</span><br><span class="line"></span><br><span class="line">    ResApiFailCode(<span class="keyword">final</span> <span class="keyword">long</span> code, <span class="keyword">final</span> String msg) &#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> String.format(<span class="string">&quot; ErrorCode:&#123;code=%s, msg=%s&#125; &quot;</span>, <span class="keyword">this</span>.code, <span class="keyword">this</span>.msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    使用时使用：<span class="keyword">return</span> R.restResult(<span class="keyword">null</span>, ResApiFailCode.FAILED);</span><br></pre></td></tr></table></figure>

<p>对于异常也需要做处理：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="meta">@Component(&quot;myGlobalExceptionHandler&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> R&lt;?&gt; defaultExceptionHandler(Exception e) &#123;</span><br><span class="line">        log.info(<span class="string">&quot;这里处理错误，错误信息是：&#123;&#125;&quot;</span>, e.toString());</span><br><span class="line">        <span class="comment">//常见异常返回</span></span><br><span class="line">        <span class="keyword">if</span> (e <span class="keyword">instanceof</span> CommonException) &#123;</span><br><span class="line">            String message = e.getMessage();</span><br><span class="line">            <span class="keyword">return</span> R.failed(message);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> UserNotExistException) &#123;</span><br><span class="line">            <span class="keyword">return</span> R.failed(ResApiFailCode.NO_PERMISSION);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> ClientException) &#123;</span><br><span class="line">            <span class="keyword">return</span> R.failed(ResApiFailCode.WRONG_SERVER);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//运行时异常返回</span></span><br><span class="line">        <span class="keyword">return</span> R.restResult(<span class="keyword">null</span>, ResApiFailCode.FAILED);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.使用SpringBoot提供的<code>ResponseBodyAdvice</code></p>
<p>ResponseBodyAdvice的作用：拦截Controller方法的返回值，统一处理返回值/响应体，一般用来统一返回格式，加解密，签名等等</p>
<p>首先需要定义返回格式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResultData</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="comment">/** 结果状态 ,具体状态码参见ResultData.java*/</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> status;</span><br><span class="line">  <span class="keyword">private</span> String message;</span><br><span class="line">  <span class="keyword">private</span> T data;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">long</span> timestamp ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">ResultData</span> <span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.timestamp = System.currentTimeMillis();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">ResultData&lt;T&gt; <span class="title">success</span><span class="params">(T data)</span> </span>&#123;</span><br><span class="line">    ResultData&lt;T&gt; resultData = <span class="keyword">new</span> ResultData&lt;&gt;();</span><br><span class="line">    resultData.setStatus(ReturnCode.RC100.getCode());</span><br><span class="line">    resultData.setMessage(ReturnCode.RC100.getMessage());</span><br><span class="line">    resultData.setData(data);</span><br><span class="line">    <span class="keyword">return</span> resultData;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">ResultData&lt;T&gt; <span class="title">fail</span><span class="params">(<span class="keyword">int</span> code, String message)</span> </span>&#123;</span><br><span class="line">    ResultData&lt;T&gt; resultData = <span class="keyword">new</span> ResultData&lt;&gt;();</span><br><span class="line">    resultData.setStatus(code);</span><br><span class="line">    resultData.setMessage(message);</span><br><span class="line">    <span class="keyword">return</span> resultData;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再定义状态码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">ReturnCode</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**操作成功**/</span></span><br><span class="line">    RC100(<span class="number">100</span>,<span class="string">&quot;操作成功&quot;</span>),</span><br><span class="line">    <span class="comment">/**操作失败**/</span></span><br><span class="line">    RC999(<span class="number">999</span>,<span class="string">&quot;操作失败&quot;</span>),</span><br><span class="line">    <span class="comment">/**服务限流**/</span></span><br><span class="line">    RC200(<span class="number">200</span>,<span class="string">&quot;服务开启限流保护,请稍后再试!&quot;</span>),</span><br><span class="line">    <span class="comment">/**服务降级**/</span></span><br><span class="line">    RC201(<span class="number">201</span>,<span class="string">&quot;服务开启降级保护,请稍后再试!&quot;</span>),</span><br><span class="line">    <span class="comment">/**热点参数限流**/</span></span><br><span class="line">    RC202(<span class="number">202</span>,<span class="string">&quot;热点参数限流,请稍后再试!&quot;</span>),</span><br><span class="line">    <span class="comment">/**系统规则不满足**/</span></span><br><span class="line">    RC203(<span class="number">203</span>,<span class="string">&quot;系统规则不满足要求,请稍后再试!&quot;</span>),</span><br><span class="line">    <span class="comment">/**授权规则不通过**/</span></span><br><span class="line">    RC204(<span class="number">204</span>,<span class="string">&quot;授权规则不通过,请稍后再试!&quot;</span>),</span><br><span class="line">    <span class="comment">/**access_denied**/</span></span><br><span class="line">    RC403(<span class="number">403</span>,<span class="string">&quot;无访问权限,请联系管理员授予权限&quot;</span>),</span><br><span class="line">    <span class="comment">/**access_denied**/</span></span><br><span class="line">    RC401(<span class="number">401</span>,<span class="string">&quot;匿名用户访问无权限资源时的异常&quot;</span>),</span><br><span class="line">    <span class="comment">/**服务异常**/</span></span><br><span class="line">    RC500(<span class="number">500</span>,<span class="string">&quot;系统异常，请稍后重试&quot;</span>),</span><br><span class="line"></span><br><span class="line">    INVALID_TOKEN(<span class="number">2001</span>,<span class="string">&quot;访问令牌不合法&quot;</span>),</span><br><span class="line">    ACCESS_DENIED(<span class="number">2003</span>,<span class="string">&quot;没有权限访问该资源&quot;</span>),</span><br><span class="line">    CLIENT_AUTHENTICATION_FAILED(<span class="number">1001</span>,<span class="string">&quot;客户端认证失败&quot;</span>),</span><br><span class="line">    USERNAME_OR_PASSWORD_ERROR(<span class="number">1002</span>,<span class="string">&quot;用户名或密码错误&quot;</span>),</span><br><span class="line">    UNSUPPORTED_GRANT_TYPE(<span class="number">1003</span>, <span class="string">&quot;不支持的认证模式&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**自定义状态码**/</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> code;</span><br><span class="line">    <span class="comment">/**自定义描述**/</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String message;</span><br><span class="line"></span><br><span class="line">    ReturnCode(<span class="keyword">int</span> code, String message)&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再需要编写一个具体实现类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResponseAdvice</span> <span class="keyword">implements</span> <span class="title">ResponseBodyAdvice</span>&lt;<span class="title">Object</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ObjectMapper objectMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">supports</span><span class="params">(MethodParameter methodParameter, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; aClass)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SneakyThrows</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">beforeBodyWrite</span><span class="params">(Object o, MethodParameter methodParameter, MediaType mediaType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; aClass, ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(o <span class="keyword">instanceof</span> String)&#123;</span><br><span class="line">            <span class="comment">//如果Controller直接返回String的话，SpringBoot是直接返回，故我们需要手动转换成json</span></span><br><span class="line">            <span class="keyword">return</span> objectMapper.writeValueAsString(ResultData.success(o));</span><br><span class="line">        &#125;      </span><br><span class="line">        <span class="keyword">if</span>(o <span class="keyword">instanceof</span> ResultData)&#123;</span><br><span class="line">   			<span class="keyword">return</span> o;</span><br><span class="line">  		&#125;</span><br><span class="line">        <span class="keyword">return</span> ResultData.success(o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：<code>@RestControllerAdvice</code>注解<code>@RestControllerAdvice</code>是<code>@RestController</code>注解的增强，可以实现三个方面的功能：</p>
<p>1.全局异常处理</p>
<p>2.全局数据绑定</p>
<p>3.全局数据预处理</p>
<p>对于异常，也需要统一返回格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RestExceptionHandler</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 默认全局异常处理。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> e the e</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ResultData</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResultData&lt;String&gt; <span class="title">exception</span><span class="params">(Exception e)</span> </span>&#123;</span><br><span class="line">        log.error(<span class="string">&quot;全局异常信息 ex=&#123;&#125;&quot;</span>, e.getMessage(), e);</span><br><span class="line">        <span class="keyword">return</span> ResultData.fail(ReturnCode.RC500.getCode(),e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：</p>
<p>1.@RestControllerAdvice，RestController的增强类，可用于实现全局异常处理器</p>
<p>2.@ExceptionHandler,统一处理某一类异常，从而减少代码重复率和复杂度，比如要获取自定义异常可以@ExceptionHandler(BusinessException.class)</p>
<p>3.@ResponseStatus指定客户端收到的http状态码</p>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>参考文章：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/macoffee/p/13475320.html">https://www.cnblogs.com/macoffee/p/13475320.html</a></p>
<p>单表行数超过 500 万行或者单表容量超过 2GB，推荐进行分库分表。预计三年后的数据量根本达不到这个级别，不要在创建表时就分库分表</p>
<ul>
<li>1.数据库设计和表创建时就要考虑性能</li>
<li>2.sql的编写需要注意优化</li>
<li>4.分区</li>
<li>4.分表</li>
<li>5.分库</li>
</ul>
<p>设计表时要注意：</p>
<p>表字段避免null值出现，null值很难查询优化且占用额外的索引空间，推荐默认数字0代替null。<br>尽量使用INT而非BIGINT，如果非负则加上UNSIGNED（这样数值容量会扩大一倍），当然能使用TINYINT、SMALLINT、MEDIUM_INT更好。</p>
<p>数据库表的id的类型：最好int，数据量大的用bigint<br>使用枚举或整数代替字符串类型<br>尽量使用TIMESTAMP而非DATETIME<br>单表不要有太多字段，建议在20以内<br>用整型来存IP<br>索引</p>
<p>索引并不是越多越好，要根据查询有针对性的创建，考虑在WHERE和ORDER BY命令上涉及的列建立索引，可根据EXPLAIN来查看是否用了索引还是全表扫描<br>应尽量避免在WHERE子句中对字段进行NULL值判断，否则将导致引擎放弃使用索引而进行全表扫描<br>值分布很稀少的字段不适合建索引，例如”性别”这种只有两三个值的字段<br>字符字段只建前缀索引<br>字符字段最好不要做主键<br>不用外键，由程序保证约束<br>尽量不用UNIQUE，由程序保证约束<br>使用多列索引时主意顺序和查询条件保持一致，同时删除不必要的单列索引<br>简言之就是使用合适的数据类型，选择合适的索引</p>
<p>选择合适的数据类型</p>
<p>（1）使用可存下数据的最小的数据类型，整型 &lt; date,time &lt; char,varchar &lt; blob<br>（2）使用简单的数据类型，整型比字符处理开销更小，因为字符串的比较更复杂。如，int类型存储时间类型，bigint类型转ip函数<br>（3）使用合理的字段属性长度，固定长度的表会更快。使用enum、char而不是varchar<br>（4）尽可能使用not null定义字段<br>（5）尽量少用text，非用不可最好分表</p>
<p>选择合适的索引列</p>
<p>（1）查询频繁的列，在where，group by，order by，on从句中出现的列<br>（2）where条件中&lt;，&lt;=，=，&gt;，&gt;=，between，in，以及like 字符串+通配符（%）出现的列<br>（3）长度小的列，索引字段越小越好，因为数据库的存储单位是页，一页中能存下的数据越多越好<br>（4）离散度大（不同的值多）的列，放在联合索引前面。查看离散度，通过统计不同的列值来实现，count越大，离散程度越高：</p>
<p>2.sql的编写需要注意优化</p>
<p>使用limit对查询结果的记录进行限定<br>避免select *，将需要查找的字段列出来<br>使用连接（join）来代替子查询<br>拆分大的delete或insert语句<br>可通过开启慢查询日志来找出较慢的SQL<br>不做列运算：SELECT id WHERE age + 1 = 10，任何对列的操作都将导致表扫描，它包括数据库教程函数、计算表达式等等，查询时要尽可能将操作移至等号右边<br>sql语句尽可能简单：一条sql只能在一个cpu运算；大语句拆小语句，减少锁时间；一条大sql可以堵死整个库<br>OR改写成IN：OR的效率是n级别，IN的效率是log(n)级别，in的个数建议控制在200以内<br>不用函数和触发器，在应用程序实现<br>避免%xxx式查询<br>少用JOIN<br>使用同类型进行比较，比如用’123’和’123’比，123和123比<br>尽量避免在WHERE子句中使用!=或&lt;&gt;操作符，否则将引擎放弃使用索引而进行全表扫描<br>对于连续数值，使用BETWEEN不用IN：SELECT id FROM t WHERE num BETWEEN 1 AND 5<br>列表数据不要拿全表，要使用LIMIT来分页，每页数量也不要太大</p>
<p>引擎</p>
<p>目前广泛使用的是MyISAM和InnoDB两种引擎：</p>
<ol>
<li>MyISAM</li>
<li>MyISAM引擎是MySQL 5.1及之前版本的默认引擎，它的特点是：</li>
</ol>
<ul>
<li>不支持行锁，读取时对需要读到的所有表加锁，写入时则对表加排它锁</li>
<li>不支持事务</li>
<li>不支持外键</li>
<li>不支持崩溃后的安全恢复</li>
<li>在表有读取查询的同时，支持往表中插入新纪录</li>
<li>支持BLOB和TEXT的前500个字符索引，支持全文索引</li>
<li>支持延迟更新索引，极大提升写入性能</li>
<li>对于不会进行修改的表，支持压缩表，极大减少磁盘空间占用</li>
</ul>
<ol>
<li>InnoDB</li>
<li>InnoDB在MySQL 5.5后成为默认索引，它的特点是：</li>
</ol>
<ul>
<li>支持行锁，采用MVCC来支持高并发</li>
<li>支持事务</li>
<li>支持外键</li>
<li>支持崩溃后的安全恢复</li>
<li>不支持全文索引</li>
</ul>
<p>总体来讲，MyISAM适合SELECT密集型的表，而InnoDB适合INSERT和UPDATE密集型的表</p>
<blockquote>
<p>MyISAM速度可能超快，占用存储空间也小，但是程序要求事务支持，故InnoDB是必须的，故该方案无法执行，放弃！</p>
</blockquote>
<p>3.分区</p>
<p>MySQL在5.1版引入的分区是一种简单的水平拆分，用户需要在建表的时候加上分区参数，对应用是透明的无需修改代码</p>
<p>对用户来说，分区表是一个独立的逻辑表，但是底层由多个物理子表组成，实现分区的代码实际上是通过对一组底层表的对象封装，但对SQL层来说是一个完全封装底层的黑盒子。MySQL实现分区的方式也意味着索引也是按照分区的子表定义，没有全局索引</p>
<p>用户的SQL语句是需要针对分区表做优化，SQL条件中要带上分区条件的列，从而使查询定位到少量的分区上，否则就会扫描全部分区，可以通过EXPLAIN PARTITIONS来查看某条SQL语句会落在那些分区上，从而进行SQL优化，我测试，查询时不带分区条件的列，也会提高速度，故该措施值得一试。</p>
<p>分区的好处是：</p>
<ul>
<li>可以让单表存储更多的数据</li>
<li>分区表的数据更容易维护，可以通过清楚整个分区批量删除大量数据，也可以增加新的分区来支持新插入的数据。另外，还可以对一个独立分区进行优化、检查、修复等操作</li>
<li>部分查询能够从查询条件确定只落在少数分区上，速度会很快</li>
<li>分区表的数据还可以分布在不同的物理设备上，从而搞笑利用多个硬件设备</li>
<li>可以使用分区表赖避免某些特殊瓶颈，例如InnoDB单个索引的互斥访问、ext3文件系统的inode锁竞争</li>
<li>可以备份和恢复单个分区</li>
</ul>
<p>分区的限制和缺点：</p>
<ul>
<li>一个表最多只能有1024个分区</li>
<li>如果分区字段中有主键或者唯一索引的列，那么所有主键列和唯一索引列都必须包含进来</li>
<li>分区表无法使用外键约束</li>
<li>NULL值会使分区过滤无效</li>
<li>所有分区必须使用相同的存储引擎</li>
</ul>
<p>分区的类型：</p>
<ul>
<li>RANGE分区：基于属于一个给定连续区间的列值，把多行分配给分区</li>
<li>LIST分区：类似于按RANGE分区，区别在于LIST分区是基于列值匹配一个离散值集合中的某个值来进行选择</li>
<li>HASH分区：基于用户定义的表达式的返回值来进行选择的分区，该表达式使用将要插入到表中的这些行的列值进行计算。这个函数可以包含MySQL中有效的、产生非负整数值的任何表达式</li>
<li>KEY分区：类似于按HASH分区，区别在于KEY分区只支持计算一列或多列，且MySQL服务器提供其自身的哈希函数。必须有一列或多列包含整数值</li>
<li>具体关于mysql分区的概念请自行google或查询官方文档，我这里只是抛砖引玉了。</li>
</ul>
<blockquote>
<p>我首先根据月份把上网记录表RANGE分区了12份，查询效率提高6倍左右，效果不明显，故：换id为HASH分区，分了64个分区，查询速度提升显著。问题解决！</p>
<p>结果如下：PARTITION BY HASH (id)PARTITIONS 64</p>
<p>select count(<em>) from readroom_website; –11901336行记录</em></p>
<p><em>/</em> 受影响行数: 0 已找到记录: 1 警告: 0 持续时间 1 查询: 5.734 sec. <em>/</em></p>
<p><em>select * from readroom_website where month(accesstime) =11 limit 10;</em></p>
<p><em>/</em> 受影响行数: 0 已找到记录: 10 警告: 0 持续时间 1 查询: 0.719 sec. */</p>
</blockquote>
<p>4.分表</p>
<p>分表就是把一张大表，按照如上过程都优化了，还是查询卡死，那就把这个表分成多张表，把一次查询分成多次查询，然后把结果组合返回给用户。</p>
<p>分表分为垂直拆分和水平拆分，通常以某个字段做拆分项。比如以id字段拆分为100张表： 表名为 tableName_id%100</p>
<p>但：分表需要修改源程序代码，会给开发带来大量工作，极大的增加了开发成本，故：只适合在开发初期就考虑到了大量数据存在，做好了分表处理，不适合应用上线了再做修改，成本太高！！！而且选择这个方案，都不如选择我提供的第二第三个方案的成本低！故不建议采用。</p>
<p>5.分库</p>
<p>把一个数据库分成多个，建议做个读写分离就行了，真正的做分库也会带来大量的开发成本，得不偿失！不推荐使用</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/23/10.1.%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%BB%BA/" data-id="ckxho8wkt0044h8vwhqr335af" data-title="项目初建" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1.4.正确使用搜索" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/22/1.4.%E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8%E6%90%9C%E7%B4%A2/" class="article-date">
  <time class="dt-published" datetime="2021-03-22T03:52:48.000Z" itemprop="datePublished">2021-03-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/22/1.4.%E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8%E6%90%9C%E7%B4%A2/">正确使用搜索</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="搜索的正确顺序"><a href="#搜索的正确顺序" class="headerlink" title="搜索的正确顺序"></a>搜索的正确顺序</h1><p>google</p>
<p>stackoverflow</p>
<p>csdn/知乎/博客园等论坛网站</p>
<p>gitee/github查源码或者类似配置</p>
<h1 id="搜索结果的显示"><a href="#搜索结果的显示" class="headerlink" title="搜索结果的显示"></a>搜索结果的显示</h1><p>可以使用浏览器的脚本，将搜索结果的广告进行屏蔽，将结果更直观的展示出来。</p>
<p>谷歌浏览器需要先下载谷歌上网助手。</p>
<p>汇总了一些常用的浏览器插件：收藏猫插件：<a target="_blank" rel="noopener" href="https://chrome.pictureknow.com/">https://chrome.pictureknow.com/</a></p>
<p>脚本管理工具：油猴，暴力猴。</p>
<p>提供脚本的网站：<a target="_blank" rel="noopener" href="https://greasyfork.org/zh-CN">https://greasyfork.org/zh-CN</a></p>
<h1 id="搜索的格式"><a href="#搜索的格式" class="headerlink" title="搜索的格式"></a>搜索的格式</h1><h2 id="正常搜索"><a href="#正常搜索" class="headerlink" title="正常搜索"></a>正常搜索</h2><p>各个名词之间，加空格搜索。</p>
<p><code>手机 苹果</code></p>
<h2 id="英文半角双引号搜索"><a href="#英文半角双引号搜索" class="headerlink" title="英文半角双引号搜索"></a>英文半角双引号搜索</h2><p>是一种比较精确的搜索方法：最关键的是可以将推广页面剔除掉。双引号可以实现精确的查询，这种方法要求查询结果要精确匹配，不包括演变形式</p>
<p><code>&quot;手机&quot;</code></p>
<h2 id="圆括号搜索"><a href="#圆括号搜索" class="headerlink" title="圆括号搜索"></a>圆括号搜索</h2><p>是完全部分匹配搜索：完全，是不会将搜索结果拆开去搜索；部分，是将搜索结果去匹配部分内容符合的内容。这种方法针对搜索结果有特殊要求的内容,有圆括号的搜索方式，搜索结果的数量变少且范围缩小了。</p>
<p><code>(苹果手机)</code></p>
<h2 id="通配符搜索-建议在谷歌使用，百度不太适合"><a href="#通配符搜索-建议在谷歌使用，百度不太适合" class="headerlink" title="通配符搜索(建议在谷歌使用，百度不太适合)"></a>通配符搜索(建议在谷歌使用，百度不太适合)</h2><p>*号不限制字符匹配数量，?号正好与其相反，限制字符匹配数量</p>
<p><code>computer*</code>,可以找到“computer、computers、computerised、computerized”等单词，</p>
<p><code>comp?ter</code>，只能找到“computer、compater、competer”等单词。</p>
<h2 id="利用加号减号【-】、【-】搜索"><a href="#利用加号减号【-】、【-】搜索" class="headerlink" title="利用加号减号【+】、【-】搜索"></a>利用加号减号【+】、【-】搜索</h2><p>在想要搜索的关键词前使用加号，也就等于告诉搜索引擎你搜索的这个词<strong>必须出现在搜索结果的网页中</strong>，如果只是网页标题中含这个关键词的就不出现。在想要搜索的关键词前使用减号，实质是与上面有些相反的意思，则在搜索结果中不能出现前面带减号的关键词，</p>
<p><code>我+要去+英国+留学</code>,就表示要查找的网页内容中必须要同时包含“我、要去、英国、留学”这三个关键词</p>
<h2 id="搜索范围限定在网页标题中"><a href="#搜索范围限定在网页标题中" class="headerlink" title="搜索范围限定在网页标题中"></a>搜索范围限定在网页标题中</h2><p>网页标题就是在打开网站的时候浏览器上显示的文字，但是网页标题中所包含的关键词有可能是不出现在网页中的，所以你只想搜索网页标题里面的关键词，就需要用到intitle：语法</p>
<p><code>intitle+标题</code></p>
<h2 id="限定网站搜索方式"><a href="#限定网站搜索方式" class="headerlink" title="限定网站搜索方式"></a>限定网站搜索方式</h2><p><code>site:www.baidu.com 百度</code>  </p>
<p>“site:”后面跟的站点域名，不要带“//”;site:后面带不带www结果可能是不一样的，因为有些域名还包括二级域名，如：site:<a href="http://www.XX.com和site:XX.com，搜索结果就不一样。另外，site:和站点名之间，不要带空格。使用site:语法限定在某站上搜索特定关键词（只在当前网站进行搜索）">www.XX.com和site:XX.com，搜索结果就不一样。另外，site:和站点名之间，不要带空格。使用site:语法限定在某站上搜索特定关键词（只在当前网站进行搜索）</a></p>
<h2 id="限定链接url搜索"><a href="#限定链接url搜索" class="headerlink" title="限定链接url搜索"></a>限定链接url搜索</h2><p><code>inurl:douban 电影</code></p>
<p>与site的区别就是inurl中的所有网页URL中都包含了douban但是是不同的网站</p>
<p>inurl的作用是限定在url中搜索，利用这种相关性，来缩小范围，快速准确地找到所需信息</p>
<h2 id="专业文档搜索"><a href="#专业文档搜索" class="headerlink" title="专业文档搜索"></a>专业文档搜索</h2><p><code>filetype:doc 电脑</code></p>
<p>搜索结果都是word格式并且包含了 电脑 这个关键词</p>
<p>以上也可以在百度的高级搜索中进行设置。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/22/1.4.%E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8%E6%90%9C%E7%B4%A2/" data-id="ckxho8wik0003h8vw632j8smz" data-title="正确使用搜索" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/" rel="tag">搜索技巧</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%99%BE%E5%BA%A6/" rel="tag">百度</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%B0%B7%E6%AD%8C/" rel="tag">谷歌</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-1.3.沟通技巧" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/19/1.3.%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/" class="article-date">
  <time class="dt-published" datetime="2021-03-19T11:35:25.000Z" itemprop="datePublished">2021-03-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/19/1.3.%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/">沟通技巧</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>日常工作中的交流沟通合作技巧。</p>
<p>1.发送文件，带个说明，对方会回答收到与否。</p>
<p>2.聊天多带个表情。不要直接指出对方错误，应该说：这样会不会好一点。</p>
<p>3.多人合作项目，文件带个日期，尽量不要搞多个文件，会混淆。最好搞个在线文档，随时更新随时看。</p>
<p>4.不要推卸责任，要想办法弥补，即使那不是你的问题。你需要做的是表达清楚，而不是再去要求他重新干嘛。</p>
<p>5.描述问题的时候不要加语气词之类的东西，就只用客观描述问题就可以，加了语气词会让人感到你很不耐烦。</p>
<p>6.截图的时候不要截部分，可以截全部，然后将其中的部分圈起来。</p>
<p>7.不要说我以为，会被认为是在推卸责任。</p>
<p>8.讨论，需要的是互动，不然汇报一样会让人容易听不进去。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/19/1.3.%E6%B2%9F%E9%80%9A%E6%8A%80%E5%B7%A7/" data-id="ckxho8wig0001h8vwcmbf0k1e" data-title="沟通技巧" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B8%8E%E4%BA%BA%E6%B2%9F%E9%80%9A/" rel="tag">与人沟通</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE%E5%90%88%E4%BD%9C/" rel="tag">项目合作</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-1.2.小知识" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/18/1.2.%E5%B0%8F%E7%9F%A5%E8%AF%86/" class="article-date">
  <time class="dt-published" datetime="2021-03-18T02:09:41.000Z" itemprop="datePublished">2021-03-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/18/1.2.%E5%B0%8F%E7%9F%A5%E8%AF%86/">小知识</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>平常生活工作中遇到的感兴趣的名词和计算机方面的知识，专有名词，会收录在这个文档中。</p>
<h3 id="一些名词"><a href="#一些名词" class="headerlink" title="一些名词"></a>一些名词</h3><p> 1.<strong>wiki</strong>:多人协作的写作系统，来源于夏威夷语，它最大的特点就是分享性，开放性以及互动性。wiki站点允许任何访问它的用户都可以修改、编辑以及创建上面的内容。</p>
<p>wiki软件，是一种运行在php+mysql运行环境的百科系统软件。用wiki软件可以迅速地搭建起一个wiki网站。</p>
<p>国内目前使用最普遍的wiki软件有HDwiki(互动中文wiki系统)以及mediawiki。两者各有特点：</p>
<p>HDwiki，是中国第一家拥有自主知识产权的中文wiki系统，适用于国内wiki爱好者；<br>mediawiki是世界上使用最多的wiki系统，在世界范围内使用比较广泛。</p>
<p>  2.**<code>.zip</code>**是程序的压缩包    **<code>.msi</code>**是程序安装包</p>
<p>.msi文件是Windows Installer的数据包，它实际上是一个数据库，包含安装一种产品所需要的信息和在很多安装情形下安装（和卸载）程序所需的指令和数据，只要系统中包含windows installer支持就能够使用。</p>
<p>.msi是Windows installer开发出来的程序安装文件，它可以让你安装，修改，卸载你所安装的程序。说白了.msi就是Windows installer的数据包，把所有和安装文件相关的内容封装在一个包里。</p>
<p> 3.备份（backup）文件的时候，可以加后缀名.<strong>bak</strong>，等到需要回退到这个版本的时候，放开.bak即可。</p>
<p> 4.<code>.html</code>转换为帮助文档就是**<code>.chm</code>**文档</p>
<p> 5.<strong>坐标系</strong>：84坐标可以定位到国外，但是GCJ02和BD09只能在国内使用。（相当于是为了保密，在国内不使用gps坐标系，而是加密了一下，使用加密版的坐标系：GCJ02坐标系、BD09坐标系）</p>
<p>​    WGS84坐标系： 地球坐标系，国际通用坐标系<br>​    GCJ02坐标系：火星坐标系，WGS84坐标系加密后的坐标系；Google国内地图、高德、QQ地图 使用<br>​    BD09坐标系：百度坐标系，GCJ02坐标系加密后的坐标系</p>
<p>6.<strong>像素</strong></p>
<p>像素即一个小方块，它具有特定的位置和颜色。图片、电子屏幕(手机、电脑)就是由无数个具有特定颜色和特定位置的小方块拼接而成。</p>
<p>像素可以作为图片或电子屏幕的最小组成单位。</p>
<p><strong>分辨率</strong></p>
<p>通常我们所说的分辨率有两种，屏幕分辨率和图像分辨率</p>
<p>屏幕分辨率指一个屏幕具体由多少个像素点组成。分辨率高不代表屏幕就清晰，屏幕的清晰程度还与<strong>尺寸</strong>有关</p>
<p>图片分辨率其实是指图片含有的像素数，比如一张图片的分辨率为800 x 400。这表示图片分别在垂直和水平上所具有的像素点数为800和400。同一尺寸的图片，分辨率越高，图片越清晰</p>
<p><strong>PPI</strong></p>
<p>PPI(Pixel Per Inch)：<strong>每英寸</strong>包括的<strong>像素数</strong>。</p>
<p>PPI可以用于描述<strong>屏幕</strong>的清晰度以及一张<strong>图片</strong>的质量。</p>
<p>使用PPI描述图片时，PPI越高，图片质量越高，使用PPI描述屏幕时，PPI越高，屏幕越清晰。</p>
<p>描述手机分辨率：iPhone XS Max 和 iPhone SE的PPI分别为458和326，说明前者的屏幕更清晰。</p>
<p>由于手机尺寸为手机<strong>对角线</strong>的长度，我们通常使用如下的方法计算PPI:</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/d579cc5294ca4dccad7890d3be2e5c58.png" alt="d579cc5294ca4dccad7890d3be2e5c58.png"></p>
<p><strong>DPI</strong></p>
<p>DPI(Dot Per Inch)：即每英寸包括的<strong>点数</strong>。</p>
<p>这里的点是一个抽象的单位，它可以是屏幕像素点、图片像素点也可以是打印机的墨点。</p>
<p>平时你可能会看到使用DPI来描述图片和屏幕，这时的DPI应该和PPI是等价的，DPI最常用的是用于描述打印机，表示打印机每英寸可以打印的点数。</p>
<p>一张图片在屏幕上显示时，它的像素点数是规则排列的，每个像素点都有特定的位置和颜色。</p>
<p>当使用打印机进行打印时，打印机可能不会规则的将这些点打印出来，而是使用一个个打印点来呈现这张图像，这些打印点之间会有一定的空隙，这就是DPI所描述的：打印点的密度。</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/ed0d0df7d34698d3d025653552e1d2ae.png" alt="ed0d0df7d34698d3d025653552e1d2ae.png"></p>
<p>在上面的图像中我们可以清晰的看到，打印机是如何使用墨点来打印一张图像。</p>
<p>所以，打印机的DPI越高，打印图像的精细程度就越高，同时这也会消耗更多的墨点和时间</p>
<p><strong>DPR</strong></p>
<p>设备像素比（dpr） =  设备像素（分辨率）/设备独立像素（屏幕尺寸）</p>
<p>布局视窗：屏幕大小</p>
<p>视觉视窗：为了解决PC端网站在移动端显示不佳，布局视窗比设备屏幕宽度宽，一般为980</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width:device-width, initial-scale&#x3D;1.0, maximum&#x3D;1.0, minimum&#x3D;1.0, user-scalable&#x3D;no&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>这行代码把视觉视窗大小设置成和布局视窗大小相等，这样我们在代码设置css像素时，设置的跟渲染出来效果也是一样。</p>
<p><strong>手机分辨率</strong>指的是屏幕能够达到的清晰度，液晶排列点阵数量，通常用乘号或者 * 表示，如320 * 240，480 * 800，1280 * 720 表示的是像素，越大屏幕分辨率越高，同等尺寸情况下越清晰，当然跟屏幕生产商，材质也有关系。</p>
<p>像素指的是相机，通常在摄像头后面有标记，如2M，8M等，指的是200万，800万像素</p>
<p>像素越高，最大输出的影像分辨率也越高；分辨率越大，图片的面积越大</p>
<p><strong>手机尺寸</strong>   1英寸 = 2.54 厘米  手机屏幕的大小还和屏幕的长宽比有关，同样的对角线长度16:9的长宽比和4:3的长宽比，屏幕大小是不一样的</p>
<p>比如：苹果5的是4英寸：1136 * 640 像素密度330PPI     （浏览器调试的时候就可以设置为：568 * 320）  </p>
<p> <strong>7.robots.txt</strong>：Web机器人（爬虫）</p>
<p>8.<strong>ORM</strong>：Object Relational Mapping，对象关系映射。</p>
<p>9.<strong>Thrift</strong> 是一个软件框架（远程过程调用框架），用来进行可扩展且跨语言的服务的开发。它结合了功能强大的软件堆栈和代码生成引 擎，以构建在 C++, Java, Python, PHP, Ruby, Erlang, Perl, Haskell, C#, Cocoa, JavaScript, Node.js, Smalltalk, and OCaml 这些编程语言间无缝结合的、高效的服务</p>
<p>10.<strong>百度指数</strong>：查看数据可以去百度指数，查看这个数据的搜索热度。</p>
<p>11.**<code>.DS_Store</code>**：是Mac OS保存文件夹的自定义属性的隐藏文件，如文件的图标位置或背景色，相当于Windows的desktop.ini</p>
<p>12.<strong>CDN</strong>：内容分发网络（Content Delivery Network），是建立并覆盖在承载网之上，由分布在不同区域的边缘节点服务器群组成的分布式网络。CDN应用广泛，支持多种行业、多种场景内容加速。例如：图片小文件、大文件下载、视音频点播、直播流媒体、全站加速、安全加速</p>
<p>CDN通过广泛的网络节点分布，提供快速、稳定、安全、可编程的全球内容分发加速服务，支持将网站、音视频、下载等内容分发至接近用户的节点，使用户可就近取得所需内容，提高用户访问的响应速度和成功率。</p>
<p>CND加速主要是加速静态资源，CND加速需要依靠各个网络节点，CND服务器通过缓存或者主动抓取主服务器的内容来实现资源储备</p>
<p>13.<strong>ERP系统</strong>：是企业资源计划（Enterprise Resource Planning）的简称，是指建立在信息技术基础上，集信息技术与先进管理思想于一身，以系统化的管理思想，为企业员工及决策层提供决策手段的管理平台。</p>
<p>14.<strong>Dashboard</strong>：仪表板，一般为后台管理系统的首页</p>
<p>15.**<code>.sh</code>**结尾的文件：脚本文件，被称为脚本Bash的应用程序和使用开发人员文件。可以使用sh命令运行“sh xxx.sh”，并且由于在linux中sh是链接到bash上的，所以sh与bash在功能上是没有区别的。</p>
<p>windows系统下可以通过git bash打开到这个.sh文件所在位置，然后运行<code>sh xxx.sh</code></p>
<p>16.在xml中，被**<code>&lt;![CDATA[]]&gt;</code><strong>这个标记所包含的内容将表示为</strong>纯文本**，比如<code>&lt;![CDATA[&lt;]]&gt;</code>表示文本内容<code>“&lt;”</code></p>
<p>在xml中，<code>”&lt;”</code>、<code>”&gt;”</code>、<code>”&amp;”</code>等字符是不能直接存入的，否则xml语法检查时会<strong>报错</strong>，如果想在xml中使用这些符号，必须将其转义为实体，如<code>”&amp;lt;”</code>、<code>”&amp;gt;”</code>、<code>”&amp;amp;”</code>，这样才能保存进xml文档。</p>
<p>　　(1)转义序列字符之间不能有空格；<br>　　(2) 转义序列必须以”;”结束；<br>　　(3) 单独出现的”&amp;”不会被认为是转义的开始；<br>　　(4) 区分大小写。</p>
<p>　在XML中，需要转义的字符有：<br>　　(1)&amp;　　　<code>&amp;amp;</code><br>　　(2)&lt;　　　<code>&amp;lt;</code><br>　　(3)&gt;　　　<code>&amp;gt;</code><br>　　(4)＂　　　<code>&amp;quot;</code><br>　　(5)＇　　　<code>&amp;apos;</code></p>
<p>17.关于大于小于的简写：</p>
<p><code>EQ 就是 EQUAL等于</code></p>
<p><code>NE 就是 NOT EQUAL不等于</code> </p>
<p><code>GT 就是 GREATER THAN大于　</code> </p>
<p><code>LT 就是 LESS THAN小于</code> </p>
<p><code>GE 就是 GREATER THAN OR EQUAL 大于等于</code> </p>
<p><code>LE 就是 LESS THAN OR EQUAL 小于等于</code></p>
<p>18.<strong>psd</strong>文件是Photoshop图片软件保存的一种文件格式，保存这种格式后可以在下次打开这个文件的时候继续以前的操作而不会断掉。</p>
<p>19.<code> </code>  <strong>U+2006</strong>  ios手机输入法如果只输入拼音，但是未选择汉字时直接回车会在拼音的`之间插入这个字符。复制在idea里会显示，但是其他地方都只会显示一个空格。</p>
<p>20.进程：应用程序的启动实例。进程拥有代码和打开的文件资源、数据资源、独立的内存空间</p>
<p>线程：线程从属于进程，是程序的实际执行者。一个进程至少包含一个主线程，也可以有更多的子线程。线程拥有自己的栈空间。具有经典的五种状态：初始化，就绪，阻塞，运行，销毁</p>
<p>协程：一个线程可以拥有多个协程。在单线程下，由用户自己控制，一个任务遇到io阻塞了就切换另外一个任务去执行，以此来提升效率</p>
<p>管程：用来管理共享变量以及对共享变量操作的过程。<strong>MESA模型</strong>、Hasen模型、Hoare模型。解决了互斥与同步：管程保证了同时只允许一个线程进入。</p>
<p><strong>线程是最小的执行单元，进程是最小的资源管理单元</strong>。无论进程还是线程，都是由操作系统所管理的。</p>
<p>协程不是被操作系统内核所管理，而完全是由程序所控制（也就是在用户态执行）</p>
<h3 id="微信"><a href="#微信" class="headerlink" title="微信"></a>微信</h3><p> 1.<strong>微信</strong>发送安卓相关的安装包会自动屏蔽。</p>
<p>2.微信的<strong>浏览器内核</strong>：</p>
<p>安卓（Android）手机：微信6.1版本以上的android用户，都是使用的QQ浏览器的X5内核。5.4-6.1之间的版本，若用户安装了QQ浏览器就是使用的X5内核，若用户未安装浏览器，使用的是系统内核。</p>
<p>苹果（IOS）手机：safari</p>
<p>WKWebview（此网页由）和UIWebview（网页由）</p>
<p>从ios8开始支持WKWebview</p>
<h3 id="电脑知识"><a href="#电脑知识" class="headerlink" title="电脑知识"></a>电脑知识</h3><p> 1.<strong>usb2.0和usb3.0</strong>：</p>
<p>颜色：USB2.0接口处为黑色或白色，USB3.0接口处为蓝色</p>
<p>标志符号：USB3.0接口比2.0多了个ss</p>
<p>兼容性：USB2.0：可以兼容USB1.0、USB2.0。</p>
<p>​                USB3.0：可以兼容USB1.0、USB2.0、USB3.0</p>
<p>传输速率：USB2.0的理论传输速率：480Mbps (60MB/s)</p>
<p>​                    USB3.0的理论传输速率：5Gbps (500MB/s)</p>
<p>硬件结构：USB2.0：采用了半双工二线制总线，只能提供单向数据流传输；</p>
<p>​                    USB3.0：采用了对偶单纯形四线制差分信号线，可以双向并发数据传输</p>
<p> 2.下载好的软件，如果桌面没有<strong>快捷方式</strong>图标，需要重新在软件位置右击创建快捷方式到桌面，直接拉到桌面不能启动。</p>
<p> 3.windows下<strong>打开</strong>到某个<strong>文件</strong>，在地址栏输入cmd，可以直接跳转到cmd命令行的这个文件目录。</p>
<p> 4.windows系统下，windows键+上下左右箭头键可以进行<strong>分屏</strong>。</p>
<p> 5.<strong>x64</strong>是64位系统。<strong>x86</strong>是32位系统。</p>
<p>x86指的是一种cpu的架构。因为intel的8086，286，386～586而得名，amd开发的大部分cpu也是基于x86架构的。x86架构的特点是cpu的寄存器是32位的，因此也叫32位cpu。</p>
<p>X86的32位体系结构通常称为IA－32，全称为“英特尔体系结构，32位”。它的64位体系结构最早由AMD推出，被称为“AMD64”。后来，它也被英特尔采用，被称为“英特尔64”。也称为“x86－64”、“x64”。</p>
<p>早期英特尔曾以80x86的数字格式命名处理器，包括8086、80186、80286、80386和80486。</p>
<p>因为它以“86”结尾，所以它的体系结构被称为“x86”。由于digital不是注册商标，英特尔及其竞争对手在新一代处理器中使用可注册名称，如奔腾、酷睿和ryzen（由AMD推出）</p>
<p> 6.查看本机IP：cmd中输入  <code>ipconfig</code></p>
<p>​    查看网络连接状况：cmd中输入：<code>ping baidu.com</code></p>
<p>​    查看本机外网的ip：直接在百度输入<code>ip</code>第一条就是本机的ip信息</p>
<p>​    查看本机有没有装好TCP/IP协议：<code>ping 127.0.0.1</code>  （本机无论在联网或是没有联网的状态下的地址.用这个都可以访问到自己的机子）</p>
<p>本地Socks Proxy的地址是localhost:1080或127.0.0.1:1080</p>
<p> 7.打开文件之后，不要急着关闭，以防会再用到，再去打开找。浏览器不要打开多个窗口，否则会很卡，因为会占用内存。</p>
<p> 8.<strong>硬编码</strong></p>
<p>​    硬编码是将数据直接嵌入到程序或其他可执行对象的源代码中的软件开发实践，与从外部获取数据或在运行时生成数据不同。 </p>
<p>​    硬编码数据通常只能通过编辑源代码和重新编译可执行文件来修改，尽管可以使用调试器或十六进制编辑器在内存或磁盘上进行更改。 </p>
<p>​    硬编码的数据通常表示不变的信息，例如物理常量，版本号和静态文本元素。 另一方面，软编码数据对用户输入，HTTP服务器响应或配置文件等任意信息进行编码，并在运行时确定。</p>
<p>它和普通编码的区别是：</p>
<ul>
<li>编码方式不同：</li>
</ul>
<p>普通编码：使用CPU进行编码。</p>
<p>硬编码：使用非CPU进行编码，如显卡GPU、专用的DSP、FPGA、ASIC芯片等。</p>
<ul>
<li>使用方式不同：</li>
</ul>
<p>普通编码：实现直接、简单，参数调整方便，升级易，但CPU负载重，性能较硬编码低，低码率下质量通常比硬编码要好一点</p>
<p>硬编码：性能高，低码率下通常质量低于软编码器，但部分产品在GPU硬件平台移植了优秀的软编码算法（如X264）的，质量基本等同于软编码</p>
<ul>
<li>复杂程度不同：</li>
</ul>
<p>普通编码比硬编码要复杂一些，对以后的考虑要周到一些。普通编码是一种设计，而硬编码不过是一种具体的实现。软件开发不只是需要一个软件的实现，更需要软件能够很好的修改，方便得扩展，所以需要一些设计技巧在里面。</p>
<p> 9.<strong>注册表</strong>：注册表的作用是保存程序所需要的信息,当程序需要这些信息时,就从注册表里读出.因此,注册表最基本的功能就是保存信息</p>
<p>​    win+r，输入“regedit”。解决了谷歌浏览器下载的图片格式问题，右键git bash here命令消失的问题。</p>
<p> 10.<strong>图片的格式</strong>类型：</p>
<p>图片格式是计算机存储图片的格式，常见的存储的格式有bmp，jpg，png，tif，gif，pcx，tga，exif，fpx，svg，psd，cdr，pcd，dxf，ufo，eps，ai，raw，WMF，webp，avif等</p>
<p> 11.<strong>中文</strong>的：和<strong>英文</strong>的:</p>
<p>中文的”“和英文的””</p>
<p>中文的（）和英文的()</p>
<p>明显发现中文的格式都有一点空格，英文没有</p>
<ol start="12">
<li><p><strong>路径</strong>指示：</p>
<p>./表示当前目录</p>
<p>../表示父级目录</p>
<p>/表示根目录</p>
</li>
<li><p><strong>转义字符</strong></p>
</li>
</ol>
<p>​    ‘/x’      x表示任意</p>
<p>​    ‘/t’      tab键</p>
<p>​    ‘/r’      回车</p>
<p>​    ‘/n’      换行</p>
<p> 14.斜杠/和反斜杠\</p>
<ul>
<li>反斜线“\”是电脑出现了之后为了表示程序设计里的特殊含义才发明的专用标点。就是说，除了程序设计领域外，任何地方都不应该有使用反斜杠的时候，请永远使用正斜线“/”</li>
<li>Windows系统中用反斜线“\”来表示目录，但是Linux下用正斜线“/”来表示</li>
<li>Windows：“/”是表示参数，“\”是表示本地路径。<br>Linux和Unix：“/”表示路径，“\”表示转义，“-”和“–”表示参数。<br>网络：由于网络使用Unix标准，所以网络路径用“/”。</li>
</ul>
<p>例：</p>
<p>url地址：<a target="_blank" rel="noopener" href="https://www.baidu.com/">https://www.baidu.com</a><br>windows地址：C:\Program Files<br>linux地址：/home/nginx/logs<br>linux中的转义字符 find ./ -name *.c<br>其他常见转义字符 ： 如 \n \t <br>java中注释： / * 单行注释 * /      //单行注释<br>所以谨记正则表达式、转义字符都是用反斜杠 \</p>
<p>15.查看win10系统的<strong>激活过期</strong>时间：windows键+r打开运行，再输入 <code>slmgr.vbs -xpr</code></p>
<p>16.<strong>一级缓存、二级缓存和三级缓存</strong></p>
<p>当cpu进行读取缓存数据的时候，是先从缓存的数据进行查找的，读取之后再输入到电脑cpu里面进行处理，如果没有对应的缓存文件给cpu进行处理的话，那电脑就会从内存中的数据进行处理并给cpu进行处理。这一段时间会相比找到缓存文件来要慢的多。cpu处理完数据之后，就会把处理完的的数据模块进行保存，这个就是缓存文件</p>
<p>电脑的缓存文件分为三个等级，分别是一二三级缓存。</p>
<p>一级缓存基本上都是内置在cpu的内部和cpu一个速度进行运行，能有效的提升cpu的工作效率。一级缓存越多，cpu的工作效率就会越来越高，是cpu的内部结构限制了一级缓存的容量大小，使一级缓存的容量都是很小的。</p>
<p>二级缓存，主要作用是协调一级缓存和内存之间的工作效率。cpu首先用的是一级内存，当cpu的速度慢慢提升之后，一级缓存就不够cpu的使用量了，这就需要用到二级内存。当然二级内存会比一级内存的缓存的效率要低很多，但是相比容量来说二级内存的容量要比一级的容量要大很多。一级内存和二级内存主要是为cpu的处理数据的时候临时进行数据交换的时候使用的。</p>
<p>三级缓存和一级缓存与二级缓存的关系差不多，是为了在读取二级缓存不够用的时候而设计的一种缓存手段，在有三级缓存cpu之中，只有大约百分之五的数据需要在内存中调取使用，这能提升cpu不少的效率，从而cpu能够高速的工作。</p>
<p>现在市场上主流的cpu有两种型号的cpu： amd 和intel。amd型号的cpu只用一级缓存和二级缓存，没有三级缓存。但是intel的cpu恰恰相反，有二级缓存和三级缓存，但是没有一级缓存。</p>
<h3 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h3><p>1.浏览器主要是看<strong>内核</strong>来分辨显示。有的浏览器会自动过滤掉一些资源（比如一个名为guanggao的图片）</p>
<p>   Apple的Safari, Google的Chrome, Nokia S60平台的默认浏览器，Apple手机的默认浏览器，Android手机的默认浏览器均采用的Webkit作为器浏览器内核</p>
<p>   Firefox使用Gecko 内核</p>
<p>   微软的IE系列则使用的是Trident内核</p>
<p>2.网址后可以加**#+代码块的id**（这个id是唯一的），表示打开这个网站，可以直接定位到这个代码块对应的前端部分。如果没有跟任何东西，只有#，代表定位到上次访问的位置。</p>
<p>3.根据坐标查询地理位置，可以去某个地图网站的<strong>坐标拾取器</strong>进行搜索。</p>
<p>4.谷歌浏览器<strong>快捷键</strong>：ctrl+shift+t，打开刚刚关闭的网页。ctrl+w，关闭当前网页。</p>
<p>5.浏览器的储存：</p>
<ul>
<li><p>cookie空间太小，一旦大了，会消耗流量，只适合存一些登录会话信息</p>
</li>
<li><p>sessionStorage的过期时间就是关闭浏览器，是个临时会话窗口；sessionStorage只能在同一标签下共享，假如你把网址复制粘贴到新打开的标签页里面，不共享数据</p>
</li>
<li><p>localStorage存储空间大，长时间保存，同一浏览器，标签页全部共享，它是直接存到电脑硬盘上的，是永久有效的，除非手动清除</p>
</li>
</ul>
<p>localStorage和sessionStorage的区别：两者都可用来存储数据，但是localStorage会保留原始数据，即使关闭浏览器，数据仍然存在。而sessionStorage不会保留，关闭浏览器后数据被销毁。由于要求用户在保持登录状态下重新打开浏览器可以不用登录直接进入主页面，所以要用localStorage</p>
<p>6.4g不能<strong>访问</strong>某个<strong>网站</strong>，换到了wifi就可以：（本地项目可以通过在同一个局域网下的设备通过内网ip访问来实现本地的现实机型调试）</p>
<p>服务器商那边对移动网络的问题。实际上跳转的时候的ip发生了变化，找服务商解决的。不是阿里云也不是腾讯云</p>
<p>7.<strong>SEO</strong>（Search Engine Optimization）：汉译为搜索引擎优化。是一种方式：利用搜索引擎的规则提高网站在有关搜索引擎内的自然排名。目的是让其在行业内占据领先地位，获得品牌收益。很大程度上是网站经营者的一种商业行为，将自己或自己公司的排名前移</p>
<p>搜索引擎优化的技术手段主要有黑帽（black hat）、白帽（white hat）两大类。</p>
<p>通过作弊手法欺骗搜索引擎和访问者，最终将遭到搜索引擎惩罚的手段被称为黑帽，比如隐藏关键字、制造大量的meta字、alt标签等。</p>
<p>而通过正规技术和方式，且被搜索引擎所接受的SEO技术，称为白帽</p>
<p>8.浏览器下的<strong>F12调试模式</strong>：</p>
<p>   Network下的所有请求和回复：不止一个请求，会有多个。<br>   Headers：<br>       User-Agent：我们的浏览器信息：操作系统，位数，什么类型的浏览器等一些信息（没有这个无法返回消息）<br>       Cookie：保存在本地的信息（往往是加密的）（没有这个可能会出现登录的问题，如果无法登录，自然无法爬取一些特定的内容）<br>       …<br>   Elements下点击某个标签后，最下面一行会显示这个标签的所有父模块，便于更快的定位html元素</p>
<p>9.ping 百度时候ping <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> 会出现<a target="_blank" rel="noopener" href="http://www.a.shifen.com.这是百度以前的网址/">www.a.shifen.com。这是百度以前的网址</a></p>
<p>10.<strong>localhost</strong> 是一个域名，在过去它指向 127.0.0.1 这个IP地址。在操作系统支持 ipv6 后，它同时还指向ipv6 的地址 [::1] </p>
<p>整个127.* 网段通常被用作 loopback 网络接口的默认地址，按惯例通常设置为 127.0.0.1。这个地址在其他计算机上不能访问，就算你想访问，访问的也是自己，因为每台带有TCP/IP协议栈的设备基本上都有 localhost/127.0.0.1</p>
<p>本机地址通常指的是绑定在物理或虚拟网络接口上的IP地址，可供其他设备访问到：IPv4地址：192.168.0.156</p>
<p>11.<strong>chromedriver</strong>是操作浏览器的一个exe应用程序。java，python都可以在程序里读到这个exe并对其进行操作。相当于就是在程序里对浏览器进行操作。</p>
<p>12.通过<strong>网站域名 +robots.txt</strong> 方式查看这个网站自己禁止爬取本站信息的爬虫名单</p>
<p>robots.txt（统一小写）是一种存放于网站根目录下的ASCII编码的文本文件，它通常告诉网络搜索引擎的漫游器（又称网络蜘蛛），此网站中的哪些内容是不应被搜索引擎的漫游器获取的，哪些是可以被漫游器获取的。因为一些系统中的URL是大小写敏感的，所以robots.txt的文件名应统一为小写。robots.txt应放置于网站的根目录下。如果想单独定义搜索引擎的漫游器访问子目录时的行为，那么可以将自定的设置合并到根目录下的robots.txt，或者使用robots元数据（Metadata，又称元数据）<br>robots.txt协议并不是一个规范，而只是约定俗成的，所以并不能保证网站的隐私。注意robots.txt是用字符串比较来确定是否获取URL，所以目录末尾有与没有斜杠“/”表示的是不同的URL。robots.txt允许使用类似”Disallow: *.gif”这样的通配符。</p>
<p>13.<strong>PhantomJS</strong>是一个Python包，他可以在没有图形界面的情况下，完全模拟一个”浏览器“，js脚本验证什么的再也不是问题了</p>
<h3 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h3><p>1.<strong>调试</strong>程序的时候，得到什么值输出一下，一步一步查看错误在哪，对于不懂得错误，学会用搜索引擎解决。</p>
<p>2.<strong>魔法数字</strong></p>
<p>魔法数值，是指在代码中直接出现的数值，只有在这个数值记述的那部分代码中才能明确了解其含义</p>
<p>在Java语言中，对有名字的值的定义，可以<strong>使用用Static final或者enum来声明的值</strong>。</p>
<p>注意(命名方法)：在取名时一定要注意增加名字的信息量。</p>
<p>如果16表示的是价格表的一个元素，为16命名为SIXTEEN是没有意义的，应该命名为PRICE_TABLE_MAX</p>
<p><strong>阿里：尽量不要在接口里定义变量，如果一定要定义变量，肯定是与接口方法相关。不要在程序中出现魔法数字</strong></p>
<p>3.项目里报错，首先要注意排查<strong>格式错误</strong>，避免出现中文写的符号，避免多加空格之类的低级错误。</p>
<p>4.<strong>mock</strong>,是前端写好的json可以用来进行接口测试，使用mock data来模拟后台传数据。</p>
<p>6.正则表达式的<strong>反斜杠</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String reg = <span class="string">&quot;^\\&#123;\&quot;data_type\&quot;:\&quot;[a-z]&#123;3,8&#125;(_[a-z]&#123;3,6&#125;)&#123;0,2&#125;\&quot;,\&quot;data\&quot;:\\[\\&#123;\&quot;[a-z]&#123;3,7&#125;(_[a-z]&#123;2,4&#125;)?\&quot;:\&quot;[0-9A-Z]&#123;2,8&#125;\&quot;&quot;</span>+<span class="string">&quot;(,\&quot;[a-z]&#123;3,7&#125;(_[a-z]&#123;2,4&#125;)?\&quot;:\&quot;[0-9A-Z]&#123;2,8&#125;\&quot;)&#123;0,5&#125;\\&#125;\\]\\&#125;$&quot;</span></span><br><span class="line">^表示正则开头 第一个\表示java的字符串里需要加\转义，第二个\表示正则的&#123;&#125;需要\转义 &#123;后的\表示java的字符串的下个“需要\转义</span><br></pre></td></tr></table></figure>

<p>7.idea查看<strong>jar包源码</strong></p>
<p>将jar包放到项目里，右击选择<code>add as Library</code> 就可以正常查看了</p>
<p>8.<strong>replace(/-/g, “/“)</strong></p>
<p>一般用于格式化日期，如2019-1-1 格式化为2019/1/1，然后js 可以直接操作这个时间。  /g 代表全局，所有的- 都替换</p>
<p>9.<strong>-n=~n+1</strong> 对十进制的n取反 ~n 其实等于 -n-1<br>10.java存储文件到mysql数据库的操作：</p>
<ul>
<li>将它们另存为blob/图像/无论您选择的DB调用什么字节流：Blob是一个可以存储二进制文件的容器，最大容量只有64kb。</li>
<li>存储文件的路径，并将文件存储在文件系统中(服务器上)</li>
</ul>
<p>java类型与mysql类型的对应表</p>
<p><img src="/1.2.%E5%B0%8F%E7%9F%A5%E8%AF%86/20180925114748729" alt="在这里插入图片描述"></p>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>1.数据库增加一个字段，对增删改查业务没有影响。</p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>1.政府，标准文件格式： </p>
<p>标题  宋体/黑体 2号                 小标题可以自己定                              正文 仿宋 4号</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/18/1.2.%E5%B0%8F%E7%9F%A5%E8%AF%86/" data-id="ckxho8wks0043h8vw8lzhh24b" data-title="小知识" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/" rel="tag">小技巧</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B0%8F%E7%A7%91%E6%99%AE/" rel="tag">小科普</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-1.1.起点" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/17/1.1.%E8%B5%B7%E7%82%B9/" class="article-date">
  <time class="dt-published" datetime="2021-03-17T10:08:54.000Z" itemprop="datePublished">2021-03-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/17/1.1.%E8%B5%B7%E7%82%B9/">起点</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="起点"><a href="#起点" class="headerlink" title="起点"></a>起点</h1><p>​    <code>好记性始终不如烂笔头</code>，一个人的记忆力是有限的，而写出来以后再看的时候就会很快想起来。所以从今天开始在hexo上写点东西来记录自己的转行学习java的经历。</p>
<p>​    曾经我认为世界上最神奇的两件事：基因和计算机。基因这种东西，每个人都不同，像世界上没有两片相同的叶子，只是因为基因不同，就能决定一个人的性格，长相，体质等因素，像一个人怎么吃都不会长胖，像一个人天生就很善于交际，像一个人从小就天赋异禀……生命本身就是神奇的东西，大学有幸学到一点相关知识，却也没有深究，最后不了了之，也许到以后也没有机会去了解了，也会是一个遗憾吧。说回计算机，在刚接触的时候还是被震惊了，就像只需要动动鼠标和键盘，就会点击互动产生一些神奇的效果，在当时对于我还是很神奇的，以致于有了以后的沉迷网络游戏，却还是自以为自己很擅长，甚至妄图平衡游戏和学习，最后还是后悔莫及，但也奠定了自己的兴趣方向，为自己的爱好而努力应该也是一件幸事吧。正如我无法逃离网络游戏的诱惑，也是因为个人不自制且莫名自信，自学起来断断续续，没有目标，三天打鱼两天晒网，也相当于是什么也没有。</p>
<p>​    最早接触计算机还不知道里面的门路有这么多，甚至不知道都有些什么语言，底层原理，甚至高级算法。回顾我的历程，还要从大二自学C语言开始。当初有个贴吧的帖子是教C语言的，还画了很多漫画，当时作为一个外行人看感觉还是很神奇的，从网上找了一个比自己还小的高中生的一个教C语言的视频看起来，在笔记本上做了很多基础知识的记录，也从未下载过相关软件，甚至一行代码都没有亲手敲过，后来荒废了。大学毕业后，受到java语言的铺天广告，于是正式决定投入java的行业。</p>
<p>​    再决定学习java后，从网上找了相关视频，当时没有想到B站甚至可以用来学习，所以去百度云存了一个很老的视频：尚学堂的300集java基础视频。当时也是跟着敲了很多demo，只记得当时的老师一直用马士兵、高琪举例（现在朋友圈的公众号一直被马士兵刷屏，这也是个大佬吧），以至于为什么这样敲，对一些底层的语法都没有细思，学的云里雾里。</p>
<p>​    再然后看完视频又荒废了一段日子，买了本《java从入门到精通》（现在经常有人调侃，从入门到放弃，哈哈哈），看着是清华大学出版社，然后就开始eng看，一天看几页，最后看完也不知道讲了啥，也有很多忘了，就相当于没看。</p>
<p>​    时间就这样荒废了一天又一天。中间穿插着各种微信公众号的小文章推送，知乎的相关经历介绍，被各种难懂烦躁，洗脑劝退。后来又看了黑马程序员的java教学，因为视频源比较老，当时还没有java8，边做笔记边敲代码，慢慢懂了点基础原理。后来也慢慢了解到java的体系结构。但是学习的路还是很长。</p>
<p>​    现在入职了一家公司，与一个软件专业的同学交流后，发现自己差的还很多。了解到一些博客，想写点自己的东西，一来是记录自己的学习过程，二也是为了以后自己找轮子更方便一些。</p>
<p>​    just for it！只要开始了，什么时候都不算晚。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/03/17/1.1.%E8%B5%B7%E7%82%B9/" data-id="ckxho8wia0000h8vw29yhe07c" data-title="起点" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9D%82%E8%B0%88/" rel="tag">杂谈</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BB%8F%E5%8E%86/" rel="tag">经历</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/11/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eclipse/" rel="tag">Eclipse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ElasticSearch/" rel="tag">ElasticSearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitee/" rel="tag">Gitee</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HATEOAS/" rel="tag">HATEOAS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDEA/" rel="tag">IDEA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JPA/" rel="tag">JPA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JQuery/" rel="tag">JQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSP/" rel="tag">JSP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis-Plus/" rel="tag">MyBatis-Plus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" rel="tag">MySQL基础概念</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Navicat/" rel="tag">Navicat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PBOOTCMS/" rel="tag">PBOOTCMS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PO-BO-VO%EF%BC%8CDTO-DAO%E4%B8%8EPOJO/" rel="tag">PO-BO-VO，DTO-DAO与POJO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Portainer-io/" rel="tag">Portainer.io</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RESTful/" rel="tag">RESTful</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tomcat/" rel="tag">Tomcat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Typora/" rel="tag">Typora</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WEB/" rel="tag">WEB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebRTC/" rel="tag">WebRTC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/for%E5%BE%AA%E7%8E%AF/" rel="tag">for循环</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/" rel="tag">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/if/" rel="tag">if</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java%E6%A6%82%E8%BF%B0/" rel="tag">java概述</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/" rel="tag">json</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mqtt/" rel="tag">mqtt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/" rel="tag">mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ngnix/" rel="tag">ngnix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/" rel="tag">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servlet/" rel="tag">servlet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/" rel="tag">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springfox/" rel="tag">springfox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swagger/" rel="tag">swagger</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vite/" rel="tag">vite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%8E%E4%BA%BA%E6%B2%9F%E9%80%9A/" rel="tag">与人沟通</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B9%A6/" rel="tag">书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8B%E5%8A%A1/" rel="tag">事务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%90%86/" rel="tag">代理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E9%83%A8%E7%B1%BB/" rel="tag">内部类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC/" rel="tag">历史版本</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%8B%E7%BC%A9%E7%AE%97%E6%B3%95/" rel="tag">压缩算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" rel="tag">基础概念</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E8%A3%85/" rel="tag">安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/" rel="tag">小技巧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A7%91%E6%99%AE/" rel="tag">小科普</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7%E7%B1%BB%E4%BB%A3%E7%A0%81/" rel="tag">工具类代码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1/" rel="tag">微信</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" rel="tag">快捷键</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%93%E5%8C%85/" rel="tag">打包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB/" rel="tag">抽象类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%A5%E5%8F%A3/" rel="tag">接口</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8F%92%E4%BB%B6/" rel="tag">插件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/" rel="tag">搜索技巧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%94%B6%E8%97%8F/" rel="tag">收藏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%B0%E7%8E%AF%E5%A2%83/" rel="tag">新环境</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97/" rel="tag">日志</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E8%B0%88/" rel="tag">杂谈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">消息中间件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%99%BE%E5%BA%A6/" rel="tag">百度</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" rel="tag">类型转换</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B4%A2%E5%BC%95/" rel="tag">索引</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%8F%E5%8E%86/" rel="tag">经历</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/" rel="tag">编程规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/" rel="tag">设计规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%B7%E6%AD%8C/" rel="tag">谷歌</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AE%E5%AD%90/" rel="tag">轮子</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E8%AF%B4%E6%98%8E/" rel="tag">软件说明</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD/" rel="tag">逻辑判断</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%94%81/" rel="tag">锁</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" rel="tag">面向对象</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE%E5%90%88%E4%BD%9C/" rel="tag">项目合作</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 10px;">C</a> <a href="/tags/Eclipse/" style="font-size: 10px;">Eclipse</a> <a href="/tags/ElasticSearch/" style="font-size: 10px;">ElasticSearch</a> <a href="/tags/Gitee/" style="font-size: 10px;">Gitee</a> <a href="/tags/HATEOAS/" style="font-size: 10px;">HATEOAS</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/IDEA/" style="font-size: 10px;">IDEA</a> <a href="/tags/JPA/" style="font-size: 10px;">JPA</a> <a href="/tags/JQuery/" style="font-size: 10px;">JQuery</a> <a href="/tags/JSP/" style="font-size: 10px;">JSP</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/MyBatis-Plus/" style="font-size: 10px;">MyBatis-Plus</a> <a href="/tags/MySQL%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" style="font-size: 10px;">MySQL基础概念</a> <a href="/tags/Navicat/" style="font-size: 10px;">Navicat</a> <a href="/tags/PBOOTCMS/" style="font-size: 10px;">PBOOTCMS</a> <a href="/tags/PO-BO-VO%EF%BC%8CDTO-DAO%E4%B8%8EPOJO/" style="font-size: 10px;">PO-BO-VO，DTO-DAO与POJO</a> <a href="/tags/Portainer-io/" style="font-size: 10px;">Portainer.io</a> <a href="/tags/RESTful/" style="font-size: 10px;">RESTful</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/SQL/" style="font-size: 10px;">SQL</a> <a href="/tags/SpringBoot/" style="font-size: 10px;">SpringBoot</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/Typora/" style="font-size: 10px;">Typora</a> <a href="/tags/WEB/" style="font-size: 10px;">WEB</a> <a href="/tags/WebRTC/" style="font-size: 10px;">WebRTC</a> <a href="/tags/for%E5%BE%AA%E7%8E%AF/" style="font-size: 10px;">for循环</a> <a href="/tags/git/" style="font-size: 20px;">git</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/if/" style="font-size: 10px;">if</a> <a href="/tags/java%E6%A6%82%E8%BF%B0/" style="font-size: 10px;">java概述</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/mqtt/" style="font-size: 10px;">mqtt</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/ngnix/" style="font-size: 10px;">ngnix</a> <a href="/tags/node-js/" style="font-size: 20px;">node.js</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/servlet/" style="font-size: 10px;">servlet</a> <a href="/tags/spring/" style="font-size: 10px;">spring</a> <a href="/tags/springfox/" style="font-size: 10px;">springfox</a> <a href="/tags/swagger/" style="font-size: 10px;">swagger</a> <a href="/tags/vite/" style="font-size: 10px;">vite</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/%E4%B8%8E%E4%BA%BA%E6%B2%9F%E9%80%9A/" style="font-size: 10px;">与人沟通</a> <a href="/tags/%E4%B9%A6/" style="font-size: 10px;">书</a> <a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 10px;">事务</a> <a href="/tags/%E4%BB%A3%E7%90%86/" style="font-size: 10px;">代理</a> <a href="/tags/%E5%86%85%E9%83%A8%E7%B1%BB/" style="font-size: 10px;">内部类</a> <a href="/tags/%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC/" style="font-size: 10px;">历史版本</a> <a href="/tags/%E5%8E%8B%E7%BC%A9%E7%AE%97%E6%B3%95/" style="font-size: 10px;">压缩算法</a> <a href="/tags/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" style="font-size: 10px;">基础概念</a> <a href="/tags/%E5%AE%89%E8%A3%85/" style="font-size: 10px;">安装</a> <a href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/" style="font-size: 10px;">小技巧</a> <a href="/tags/%E5%B0%8F%E7%A7%91%E6%99%AE/" style="font-size: 10px;">小科普</a> <a href="/tags/%E5%B7%A5%E5%85%B7%E7%B1%BB%E4%BB%A3%E7%A0%81/" style="font-size: 10px;">工具类代码</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 10px;">微信</a> <a href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 20px;">快捷键</a> <a href="/tags/%E6%89%93%E5%8C%85/" style="font-size: 10px;">打包</a> <a href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB/" style="font-size: 10px;">抽象类</a> <a href="/tags/%E6%8E%A5%E5%8F%A3/" style="font-size: 10px;">接口</a> <a href="/tags/%E6%8F%92%E4%BB%B6/" style="font-size: 10px;">插件</a> <a href="/tags/%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/" style="font-size: 10px;">搜索技巧</a> <a href="/tags/%E6%94%B6%E8%97%8F/" style="font-size: 10px;">收藏</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10px;">数据库</a> <a href="/tags/%E6%96%B0%E7%8E%AF%E5%A2%83/" style="font-size: 10px;">新环境</a> <a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 10px;">日志</a> <a href="/tags/%E6%9D%82%E8%B0%88/" style="font-size: 10px;">杂谈</a> <a href="/tags/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 10px;">消息中间件</a> <a href="/tags/%E7%99%BE%E5%BA%A6/" style="font-size: 10px;">百度</a> <a href="/tags/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" style="font-size: 10px;">类型转换</a> <a href="/tags/%E7%B4%A2%E5%BC%95/" style="font-size: 10px;">索引</a> <a href="/tags/%E7%BB%8F%E5%8E%86/" style="font-size: 10px;">经历</a> <a href="/tags/%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/" style="font-size: 10px;">编程规范</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/" style="font-size: 10px;">设计规范</a> <a href="/tags/%E8%B0%B7%E6%AD%8C/" style="font-size: 10px;">谷歌</a> <a href="/tags/%E8%BD%AE%E5%AD%90/" style="font-size: 10px;">轮子</a> <a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 10px;">软件</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E8%AF%B4%E6%98%8E/" style="font-size: 10px;">软件说明</a> <a href="/tags/%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD/" style="font-size: 10px;">逻辑判断</a> <a href="/tags/%E9%94%81/" style="font-size: 10px;">锁</a> <a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 10px;">面向对象</a> <a href="/tags/%E9%A1%B9%E7%9B%AE%E5%90%88%E4%BD%9C/" style="font-size: 10px;">项目合作</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/12/20/Jenkins/">Jenkins</a>
          </li>
        
          <li>
            <a href="/2021/12/17/SpringBootSecurity/">SpringBootSecurity</a>
          </li>
        
          <li>
            <a href="/2021/12/16/SpringBootActuator/">SpringBootActuator</a>
          </li>
        
          <li>
            <a href="/2021/09/17/8.7.vite/">vite</a>
          </li>
        
          <li>
            <a href="/2021/09/03/%E5%B7%A5%E5%85%B7%E7%B1%BB%E4%BB%A3%E7%A0%81/">工具类代码</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 swx<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>
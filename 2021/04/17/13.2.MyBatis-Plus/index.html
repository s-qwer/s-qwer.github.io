<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>MyBatis-Plus | swx</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="创建表 创建user表 123456789101112131415DROP TABLE IF EXISTS user;CREATE TABLE user(id BIGINT(20) NOT NULL COMMENT &#39;主键ID&#39;,name VARCHAR(30) NULL DEFAULT NULL COMMENT &#39;姓名&#39;,age INT(11) NULL DEFA">
<meta property="og:type" content="article">
<meta property="og:title" content="MyBatis-Plus">
<meta property="og:url" content="https://s-qwer.github.io/2021/04/17/13.2.MyBatis-Plus/index.html">
<meta property="og:site_name" content="swx">
<meta property="og:description" content="创建表 创建user表 123456789101112131415DROP TABLE IF EXISTS user;CREATE TABLE user(id BIGINT(20) NOT NULL COMMENT &#39;主键ID&#39;,name VARCHAR(30) NULL DEFAULT NULL COMMENT &#39;姓名&#39;,age INT(11) NULL DEFA">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNd39mhfXyvAy8u03NdNp1NAgCmCEu5xfzypoCFL4HacsnQVdibOTuMsw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNWAtgIoypYicbSibbbermgJwKE4NqZW8ibuRadvia1JT3drRFekkHW8z31A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNnzeO55n0wiaQpFIWIb2Q6GiccEmZbAdViaW59zoj74USUSibtbS8iaATicFg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNJVYEX7ggBr7R68sD4CMmwX6KWEpicouS367k5Wx32ZByIHAAknXTQ5g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNnPPia9sbGUd7U5eHHSicSoeq304ibYvWuEbkqI0a6JOfPpxChRMK85cww/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNxarNibicF6Syrs4OsUj68icoVicIJbE4o2PtqgkfgBXRhrRiaWNiagFhsKUQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNmGGT87q8MqCibewOQlvo1ngEuUT8HthbQZS54lic6a9x1PwmMBXWvroQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyN3p8JtwPbTEibSpToMm1UllysCVd11fvPiazqe0Uh5z6JXRZNVh0D8WaQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyN53MQicicnuXHhRx7JxKsXkUofruF0IMV5eR8ETE0CNb0ORicJREM6b32A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNFsMT0LDzBIqbdsSZrLqBAcD5zBKicibSfnmGZia3mwN5Z6fnv3ucacG4w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyN8jdp9vP4I9JvnL4X4SwUdSUwian9QjTeyb0wPuf4bYqhQQweDJKjqSw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNYAkkeVT0qqwKzUoFNd2fJsSaOBTtTI4ictBoF7dLVK9EpeibyPo0pKRQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNpcZDibJWvF44CkfnA2eVEbgMzIJCB6g9u0PiauVnmN54sU7Ctrm3edEA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182324596-297575739.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182351692-1490253732.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182402784-1080563045.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182613102-1729540101.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182640635-986081965.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182707965-401919746.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182736101-1311032320.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182747677-610854146.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182838295-636931302.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182900276-19452208.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182927553-240645059.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183041633-571344925.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183427652-919200133.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183526359-1836932007.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183609399-44267929.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183638934-543199454.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183711767-990015180.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183739640-1849006710.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183843115-1369120260.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183959603-847557538.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184012946-489939673.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184023676-1916956821.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184044446-583363399.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184057341-414839563.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184134459-1998710648.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184212763-1123404604.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184345369-1234458679.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184439393-659580638.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184519097-1477211602.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184606042-2140497864.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184616508-1167828998.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184721039-779905975.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184732325-807928909.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184846756-1724510855.png">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184939865-892962988.png">
<meta property="og:image" content="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509185011268-453045850.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/11531502-2a0d958939bdcde8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/863/format/webp">
<meta property="og:image" content="https://s-qwer.github.io/13.2.MyBatis-Plus/20190530134824262.png">
<meta property="og:image" content="https://s-qwer.github.io/13.2.MyBatis-Plus/2019053013474765.png">
<meta property="article:published_time" content="2021-04-17T05:06:36.000Z">
<meta property="article:modified_time" content="2021-07-01T00:50:26.274Z">
<meta property="article:author" content="swx">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNd39mhfXyvAy8u03NdNp1NAgCmCEu5xfzypoCFL4HacsnQVdibOTuMsw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">
  
    <link rel="alternate" href="/atom.xml" title="swx" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">swx</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">blog</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://s-qwer.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-13.2.MyBatis-Plus" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/17/13.2.MyBatis-Plus/" class="article-date">
  <time class="dt-published" datetime="2021-04-17T05:06:36.000Z" itemprop="datePublished">2021-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      MyBatis-Plus
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>创建表</strong></p>
<p>创建user表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS user;</span><br><span class="line">CREATE TABLE user</span><br><span class="line">(</span><br><span class="line">id BIGINT(20) NOT NULL COMMENT &#39;主键ID&#39;,</span><br><span class="line">name VARCHAR(30) NULL DEFAULT NULL COMMENT &#39;姓名&#39;,</span><br><span class="line">age INT(11) NULL DEFAULT NULL COMMENT &#39;年龄&#39;,</span><br><span class="line">email VARCHAR(50) NULL DEFAULT NULL COMMENT &#39;邮箱&#39;,</span><br><span class="line">PRIMARY KEY (id)</span><br><span class="line">);</span><br><span class="line">INSERT INTO user (id, name, age, email) VALUES</span><br><span class="line">(1, &#39;Jone&#39;, 18, &#39;test1@baomidou.com&#39;),</span><br><span class="line">(2, &#39;Jack&#39;, 20, &#39;test2@baomidou.com&#39;),</span><br><span class="line">(3, &#39;Tom&#39;, 28, &#39;test3@baomidou.com&#39;),</span><br><span class="line">(4, &#39;Sandy&#39;, 21, &#39;test4@baomidou.com&#39;),</span><br><span class="line">(5, &#39;Billie&#39;, 24, &#39;test5@baomidou.com&#39;);</span><br></pre></td></tr></table></figure>

<p>注意：– 真实开发中往往都会有这四个字段，version（乐观锁）、deleted（逻辑删除）、gmt_create（创建时间）、gmt_modified（修改时间）</p>
<h2 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a><strong>导入依赖</strong></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 数据库驱动 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;!-- lombok --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.projectlombok&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;lombok&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;!-- mybatis-plus --&gt;</span><br><span class="line">&lt;!-- mybatis-plus 是自己开发，并非官方的！--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;com.baomidou&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;mybatis-plus-boot-starter&lt;&#x2F;artifactId&gt;</span><br><span class="line">  &lt;version&gt;3.0.5&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<p>注意：尽量不要同时导入 mybatis 和 mybatis-plus！避免版本的差异造成无法预知的问题。</p>
<h2 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a><strong>连接数据库</strong></h2><p><strong>创建application.yml</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  profiles:</span><br><span class="line">    active: dev</span><br><span class="line">  datasource:</span><br><span class="line"># 驱动不同 mysql 5  com.mysql.jdbc.Driver</span><br><span class="line"># mysql 8  com.mysql.cj.jdbc.Driver、需要增加时区的配置serverTimezone&#x3D;GMT%2B8</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;mybatis_plus?useSSL&#x3D;false&amp;useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf-8&amp;serverTimezone&#x3D;GMT%2B8</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">    username: root</span><br><span class="line">    password: root</span><br></pre></td></tr></table></figure>

<h2 id="业务代码"><a href="#业务代码" class="headerlink" title="业务代码"></a><strong>业务代码</strong></h2><p>实体类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">@NoArgsConstructor</span><br><span class="line">public class User &#123;</span><br><span class="line">  private Long id;</span><br><span class="line">  private String name;</span><br><span class="line">  private Integer age;</span><br><span class="line">  private String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>mapper接口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line">import com.kuang.pojo.User;</span><br><span class="line">import org.springframework.stereotype.Repository;</span><br><span class="line">&#x2F;&#x2F; 在对应的Mapper上面继承基本的类 BaseMapper</span><br><span class="line">@Repository &#x2F;&#x2F; 代表持久层</span><br><span class="line">public interface UserMapper extends BaseMapper&lt;User&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; 所有的CRUD操作都已经编写完成了</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意点，我们需要在主启动类上去扫描我们的mapper包下的所有接口 @MapperScan(“com.kwhua.mapper”)</p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootTest</span><br><span class="line">class MybatisPlusApplicationTests &#123;</span><br><span class="line">  &#x2F;&#x2F; 继承了BaseMapper，所有的方法都来自己父类</span><br><span class="line">  &#x2F;&#x2F; 我们也可以编写自己的扩展方法！</span><br><span class="line">  @Autowired</span><br><span class="line">  private UserMapper userMapper;</span><br><span class="line">  @Test</span><br><span class="line">  void contextLoads() &#123;</span><br><span class="line">    &#x2F;&#x2F; 参数是一个 Wrapper ，条件构造器，这里我们先设置条件为空，查询所有。</span><br><span class="line">    List&lt;User&gt; users &#x3D; userMapper.selectList(null);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>所有数据输出</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNd39mhfXyvAy8u03NdNp1NAgCmCEu5xfzypoCFL4HacsnQVdibOTuMsw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h2 id="配置日志"><a href="#配置日志" class="headerlink" title="配置日志"></a><strong>配置日志</strong></h2><p>我们所有的sql现在是不可见的，我们希望知道它是怎么执行的，所有我们要配置日志的输出 application.yml文件添加日志配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#配置日志</span><br><span class="line">mybatis-plus:</span><br><span class="line">  configuration:</span><br><span class="line">    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span><br></pre></td></tr></table></figure>

<p>查看执行sql的日志信息</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNWAtgIoypYicbSibbbermgJwKE4NqZW8ibuRadvia1JT3drRFekkHW8z31A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>Mybatis-plus的CRUD</p>
<p><strong>插入操作</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 测试插入</span><br><span class="line">    @Test</span><br><span class="line">    public void testInsert()&#123;</span><br><span class="line">        User user &#x3D; new User();</span><br><span class="line">        user.setName(&quot;kwhua_mybatis-plus_insertTest&quot;);</span><br><span class="line">        user.setAge(15);</span><br><span class="line">        user.setEmail(&quot;310697723@qq.com&quot;);</span><br><span class="line"></span><br><span class="line">        int result &#x3D; userMapper.insert(user); &#x2F;&#x2F; 帮我们自动生成id</span><br><span class="line">        System.out.println(result); &#x2F;&#x2F; 受影响的行数</span><br><span class="line">        System.out.println(user); &#x2F;&#x2F; 看到id会自动填充。&#125;</span><br></pre></td></tr></table></figure>



<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNnzeO55n0wiaQpFIWIb2Q6GiccEmZbAdViaW59zoj74USUSibtbS8iaATicFg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>看到id会自动填充。数据库插入的id的默认值为：全局的唯一id</p>
<p><strong>主键生成策略</strong></p>
<p>1）主键自增 1、实体类字段上 @TableId(type = IdType.AUTO)</p>
<p>2、数据库id字段设置为自增！</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNJVYEX7ggBr7R68sD4CMmwX6KWEpicouS367k5Wx32ZByIHAAknXTQ5g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>3、再次测试（可以看到id值比上次插入的大1）id的生成策略源码解释</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNnPPia9sbGUd7U5eHHSicSoeq304ibYvWuEbkqI0a6JOfPpxChRMK85cww/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public enum IdType &#123;</span><br><span class="line">  AUTO(0), &#x2F;&#x2F; 数据库id自增</span><br><span class="line">  NONE(1), &#x2F;&#x2F; 未设置主键</span><br><span class="line">  INPUT(2), &#x2F;&#x2F; 手动输入</span><br><span class="line">  ID_WORKER(3), &#x2F;&#x2F; 默认的方式,全局唯一id</span><br><span class="line">  UUID(4), &#x2F;&#x2F; 全局唯一id uuid</span><br><span class="line">  ID_WORKER_STR(5); &#x2F;&#x2F;ID_WORKER 字符串表示法</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="更新操作"><a href="#更新操作" class="headerlink" title="更新操作"></a>更新操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testUpdate()&#123;</span><br><span class="line">        User user &#x3D; new User();</span><br><span class="line">        &#x2F;&#x2F; 通过条件自动拼接动态sql</span><br><span class="line">        user.setId(1302223874217295874L);</span><br><span class="line">        user.setName(&quot;kwhua_mybatis-plus_updateTest&quot;);</span><br><span class="line">        user.setAge(20);</span><br><span class="line">        &#x2F;&#x2F; 注意：updateById 但是参数是一个对象！</span><br><span class="line">        int i &#x3D; userMapper.updateById(user);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNxarNibicF6Syrs4OsUj68icoVicIJbE4o2PtqgkfgBXRhrRiaWNiagFhsKUQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h2 id="自动填充"><a href="#自动填充" class="headerlink" title="自动填充"></a><strong>自动填充</strong></h2><p>创建时间、修改时间！这两个字段操作都是自动化完成的，我们不希望手动更新！阿里巴巴开发手册：所有的数据库表都要配置上gmt_create、gmt_modified！而且需要自动化！</p>
<p>方式一：数据库级别（工作中一般不用）</p>
<p>1、在表中新增字段 gmt_create, gmt_modified</p>
<p>2、把实体类同步</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">private Date gmtCreate;</span><br><span class="line">private Date gmtModified;</span><br></pre></td></tr></table></figure>

<p>3、再次查看</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNmGGT87q8MqCibewOQlvo1ngEuUT8HthbQZS54lic6a9x1PwmMBXWvroQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>方式二：代码级别 </p>
<p>1、删除数据库的默认值、更新操作！</p>
<p>2、实体类字段属性上需要增加注解</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 字段添加填充内容</span><br><span class="line">@TableField(fill &#x3D; FieldFill.INSERT)</span><br><span class="line">private Date gmt_create;</span><br><span class="line"></span><br><span class="line">@TableField(fill &#x3D; FieldFill.INSERT_UPDATE)</span><br><span class="line">private Date gmt_modified;</span><br></pre></td></tr></table></figure>

<p>3、编写处理器来处理这个注解即可！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Slf4j</span><br><span class="line">@Component &#x2F;&#x2F; 一定不要忘记把处理器加到IOC容器中！</span><br><span class="line">public class MyMetaObjectHandler implements MetaObjectHandler &#123;</span><br><span class="line">    &#x2F;&#x2F; 插入时的填充策略</span><br><span class="line">    @Override</span><br><span class="line">    public void insertFill(MetaObject metaObject) &#123;</span><br><span class="line">        log.info(&quot;start insert fill.....&quot;);</span><br><span class="line">        &#x2F;&#x2F; setFieldValByName(String fieldName, Object fieldVal, MetaObject metaObject</span><br><span class="line">        this.setFieldValByName(&quot;gmt_create&quot;,new Date(),metaObject);</span><br><span class="line">        this.setFieldValByName(&quot;gmt_modified&quot;,new Date(),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 更新时的填充策略</span><br><span class="line">    @Override</span><br><span class="line">    public void updateFill(MetaObject metaObject) &#123;</span><br><span class="line">        log.info(&quot;start update fill.....&quot;);</span><br><span class="line">        this.setFieldValByName(&quot;gmt_modified&quot;,new Date(),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4、测试插入和更新，检查时间变化。</p>
<h2 id="乐观锁"><a href="#乐观锁" class="headerlink" title="乐观锁"></a>乐观锁</h2><p>乐观锁 : 顾名思义，十分乐观，它总是认为不会出现问题，无论干什么不去上锁！如果出现了问题， 再次更新值测试 悲观锁：顾名思义，十分悲观，它总是认为总是出现问题，无论干什么都会上锁！再去操作！</p>
<p>乐观锁实现方式：</p>
<p>取出记录时，获取当前version 更新时，带上这个version 执行更新时， set version = newVersion where version = oldVersion 如果version不对，就更新失败</p>
<p>乐观锁：1、先查询，获得版本号 version = 1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- A</span><br><span class="line">update user set name &#x3D; &quot;kwhua&quot;, version &#x3D; version + 1</span><br><span class="line">where id &#x3D; 2 and version &#x3D; 1</span><br><span class="line">-- B 线程抢先完成，这个时候 version &#x3D; 2，会导致 A 修改失败！</span><br><span class="line">update user set name &#x3D; &quot;kwhua&quot;, version &#x3D; version + 1</span><br><span class="line">where id &#x3D; 2 and version &#x3D; 1</span><br></pre></td></tr></table></figure>

<p>乐观锁测试</p>
<p>1、给数据库中增加version字段！</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyN3p8JtwPbTEibSpToMm1UllysCVd11fvPiazqe0Uh5z6JXRZNVh0D8WaQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>2、实体类加对应的字段</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Version &#x2F;&#x2F;乐观锁Version注解</span><br><span class="line">private Integer version;</span><br></pre></td></tr></table></figure>

<p>3、注册组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 扫描我们的 mapper 文件夹</span><br><span class="line">@MapperScan(&quot;com.kwhua.mapper&quot;)</span><br><span class="line">@EnableTransactionManagement</span><br><span class="line">@Configuration &#x2F;&#x2F; 配置类</span><br><span class="line">public class MyBatisPlusConfig &#123;</span><br><span class="line">    &#x2F;&#x2F; 注册乐观锁插件</span><br><span class="line">    @Bean</span><br><span class="line">    public OptimisticLockerInterceptor optimisticLockerInterceptor() &#123;</span><br><span class="line">        return new OptimisticLockerInterceptor();</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<p>4、测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 测试乐观锁成功！</span><br><span class="line">@Test</span><br><span class="line">public void testOptimisticLocker()&#123;</span><br><span class="line">        &#x2F;&#x2F; 1、查询用户信息</span><br><span class="line">        User user &#x3D; userMapper.selectById(1L);</span><br><span class="line">        &#x2F;&#x2F; 2、修改用户信息</span><br><span class="line">        user.setName(&quot;kwhua&quot;);</span><br><span class="line">        user.setEmail(&quot;123456@qq.com&quot;);</span><br><span class="line">        &#x2F;&#x2F; 3、执行更新操作</span><br><span class="line">        userMapper.updateById(user);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>version字段已经由1变成了2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 测试乐观锁失败！多线程下</span><br><span class="line">    @Test</span><br><span class="line">    public void testOptimisticLocker2()&#123;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 线程 1</span><br><span class="line">        User user &#x3D; userMapper.selectById(1L);</span><br><span class="line">        user.setName(&quot;kwhua111&quot;);</span><br><span class="line">        user.setEmail(&quot;123456@qq.com&quot;);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 模拟另外一个线程执行了插队操作</span><br><span class="line">        User user2 &#x3D; userMapper.selectById(1L);</span><br><span class="line">        user2.setName(&quot;kwhua222&quot;);</span><br><span class="line">        user2.setEmail(&quot;123456@qq.com&quot;);</span><br><span class="line">        userMapper.updateById(user2);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 自旋锁来多次尝试提交！</span><br><span class="line">        userMapper.updateById(user); &#x2F;&#x2F; 如果没有乐观锁就会覆盖插队线程的值！</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyN53MQicicnuXHhRx7JxKsXkUofruF0IMV5eR8ETE0CNb0ORicJREM6b32A/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>可以看到线程1执行更新失败</p>
<h2 id="查询操作"><a href="#查询操作" class="headerlink" title="查询操作"></a><strong>查询操作</strong></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 测试查询</span><br><span class="line">    @Test</span><br><span class="line">    public void testSelectById()&#123;</span><br><span class="line">        User user &#x3D; userMapper.selectById(1L);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 测试批量查询！</span><br><span class="line">    @Test</span><br><span class="line">    public void testSelectByBatchId()&#123;</span><br><span class="line">        List&lt;User&gt; users &#x3D; userMapper.selectBatchIds(Arrays.asList(1, 2, 3));</span><br><span class="line">        users.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 按条件查询之一使用map操作</span><br><span class="line">    @Test</span><br><span class="line">    public void testSelectByBatchIds()&#123;</span><br><span class="line">        HashMap&lt;String, Object&gt; map &#x3D; new HashMap&lt;&gt;();</span><br><span class="line">        &#x2F;&#x2F; 自定义要查询</span><br><span class="line">        map.put(&quot;name&quot;,&quot;kwhua&quot;);</span><br><span class="line">        map.put(&quot;age&quot;,15);</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; users &#x3D; userMapper.selectByMap(map);</span><br><span class="line">        users.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<p>1、配置拦截器组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 分页插件</span><br><span class="line">@Bean</span><br><span class="line">public PaginationInterceptor paginationInterceptor() &#123;</span><br><span class="line">  return  new PaginationInterceptor();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、直接使用Page对象即可！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 测试分页查询</span><br><span class="line">@Test</span><br><span class="line">public void testPage()&#123;</span><br><span class="line">  &#x2F;&#x2F; 参数一：当前页</span><br><span class="line">  &#x2F;&#x2F; 参数二：页面大小</span><br><span class="line">  Page&lt;User&gt; page &#x3D; new Page&lt;&gt;(2,5);</span><br><span class="line">  userMapper.selectPage(page,null);</span><br><span class="line">  page.getRecords().forEach(System.out::println);</span><br><span class="line">  System.out.println(page.getTotal());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>物理删除</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 测试删除</span><br><span class="line">    @Test</span><br><span class="line">    public void testDeleteById()&#123;</span><br><span class="line">        userMapper.deleteById(1L);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 通过id批量删除</span><br><span class="line">    @Test</span><br><span class="line">    public void testDeleteBatchId()&#123;</span><br><span class="line">        userMapper.deleteBatchIds(Arrays.asList(2L,3L));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 通过map删除</span><br><span class="line">    @Test</span><br><span class="line">    public void testDeleteMap()&#123;</span><br><span class="line">        HashMap&lt;String, Object&gt; map &#x3D; new HashMap&lt;&gt;();</span><br><span class="line">        map.put(&quot;name&quot;,&quot;kwhua&quot;);</span><br><span class="line">        userMapper.deleteByMap(map);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>逻辑删除</strong></p>
<p>物理删除 ：从数据库中直接移除 逻辑删除 ：在数据库中没有被移除，而是通过一个变量来让它失效！deleted = 0 =&gt; deleted = 1 管理员可以查看被删除的记录！防止数据的丢失，类似于回收站！</p>
<p>1、在数据表中增加一个 deleted 字段2、实体类中增加属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@TableLogic &#x2F;&#x2F;逻辑删除</span><br><span class="line"> private Integer deleted;</span><br></pre></td></tr></table></figure>

<p>3、配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 逻辑删除组件！</span><br><span class="line">    @Bean</span><br><span class="line">    public ISqlInjector sqlInjector() &#123;</span><br><span class="line">        return new LogicSqlInjector();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>配置文件配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">global-config:</span><br><span class="line">    db-config:</span><br><span class="line">      logic-delete-value: 1</span><br><span class="line">      logic-not-delete-value: 0</span><br></pre></td></tr></table></figure>

<p>4、测试 测试删除</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNFsMT0LDzBIqbdsSZrLqBAcD5zBKicibSfnmGZia3mwN5Z6fnv3ucacG4w/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>字段值也从0修改成了1测试查询</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyN8jdp9vP4I9JvnL4X4SwUdSUwian9QjTeyb0wPuf4bYqhQQweDJKjqSw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h2 id="性能分析插件"><a href="#性能分析插件" class="headerlink" title="性能分析插件"></a><strong>性能分析插件</strong></h2><p>作用：性能分析拦截器，用于输出每条 SQL 语句及其执行时间 MP也提供性能分析插件，如果超过这个时间就停止运行！</p>
<p>1、导入插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">     * SQL执行效率插件</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Bean</span><br><span class="line">    @Profile(&#123;&quot;dev&quot;,&quot;test&quot;&#125;)&#x2F;&#x2F; 设置 dev test 环境开启，保证我们的效率</span><br><span class="line">    public PerformanceInterceptor performanceInterceptor() &#123;</span><br><span class="line">        PerformanceInterceptor performanceInterceptor &#x3D; new PerformanceInterceptor();</span><br><span class="line">        performanceInterceptor.setMaxTime(100); &#x2F;&#x2F;ms 设置sql执行的最大时间，如果超过了则不执行</span><br><span class="line">        performanceInterceptor.setFormat(true);</span><br><span class="line">        return performanceInterceptor;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNYAkkeVT0qqwKzUoFNd2fJsSaOBTtTI4ictBoF7dLVK9EpeibyPo0pKRQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>条件构造器(Wrapper)</strong></p>
<p>isNotNull .gt</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">void contextLoads() &#123;</span><br><span class="line">        &#x2F;&#x2F; 查询name不为空的用户，并且邮箱不为空的用户，年龄大于等于12</span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper &#x3D; new QueryWrapper&lt;&gt;();</span><br><span class="line">        wrapper</span><br><span class="line">                .isNotNull(&quot;name&quot;) &#x2F;&#x2F;不为空</span><br><span class="line">                .isNotNull(&quot;email&quot;)</span><br><span class="line">                .ge(&quot;age&quot;,18);</span><br><span class="line">        userMapper.selectList(wrapper).forEach(System.out::println); &#x2F;&#x2F; 和我们刚才学习的map对比一下</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<p><img src="https://mmbiz.qpic.cn/mmbiz_png/oTKHc6F8tsiaicIibGNyuxJNbNay2XqjcyNpcZDibJWvF44CkfnA2eVEbgMzIJCB6g9u0PiauVnmN54sU7Ctrm3edEA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>.eq</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">void test2()&#123;</span><br><span class="line">        &#x2F;&#x2F; 查询名字kwhua</span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper &#x3D; new QueryWrapper&lt;&gt;();</span><br><span class="line">        wrapper.eq(&quot;name&quot;,&quot;kwhua&quot;);</span><br><span class="line">        User user &#x3D; userMapper.selectOne(wrapper); &#x2F;&#x2F; 查询一个数据用selectOne，查询多个结果使用List 或者 Map</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h2 id="代码自动生成器"><a href="#代码自动生成器" class="headerlink" title="代码自动生成器"></a><strong>代码自动生成器</strong></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 代码自动生成器</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">generateCode</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 需要构建一个 代码自动生成器 对象</span></span><br><span class="line">    AutoGenerator mpg = <span class="keyword">new</span> AutoGenerator();</span><br><span class="line">    <span class="comment">// 配置策略</span></span><br><span class="line">    <span class="comment">// 1、全局配置</span></span><br><span class="line">    GlobalConfig gc = <span class="keyword">new</span> GlobalConfig();</span><br><span class="line">    String projectPath = System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">    gc.setOutputDir(projectPath+<span class="string">&quot;/src/main/java&quot;</span>);</span><br><span class="line">    gc.setAuthor(<span class="string">&quot;kwhua&quot;</span>);<span class="comment">//作者名称</span></span><br><span class="line">    gc.setOpen(<span class="keyword">false</span>);</span><br><span class="line">    gc.setFileOverride(<span class="keyword">false</span>); <span class="comment">// 是否覆盖</span></span><br><span class="line">    gc.setIdType(IdType.ID_WORKER);</span><br><span class="line">    gc.setDateType(DateType.ONLY_DATE);</span><br><span class="line">    gc.setSwagger2(<span class="keyword">true</span>);<span class="comment">//实体属性 Swagger2 注解</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自定义文件命名，注意 %s 会自动填充表实体属性！</span></span><br><span class="line">    gc.setServiceName(<span class="string">&quot;%sService&quot;</span>); </span><br><span class="line">    gc.setControllerName(<span class="string">&quot;%sController&quot;</span>);</span><br><span class="line">    gc.setServiceName(<span class="string">&quot;%sService&quot;</span>);</span><br><span class="line">    gc.setServiceImplName(<span class="string">&quot;%sServiceImpl&quot;</span>);</span><br><span class="line">    gc.setMapperName(<span class="string">&quot;%sMapper&quot;</span>);</span><br><span class="line">    gc.setXmlName(<span class="string">&quot;%sMapper&quot;</span>);</span><br><span class="line"></span><br><span class="line">    mpg.setGlobalConfig(gc);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2、设置数据源</span></span><br><span class="line">    DataSourceConfig dsc = <span class="keyword">new</span> DataSourceConfig();</span><br><span class="line">    dsc.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/kwhua_test?</span></span><br><span class="line"><span class="string">useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT%2B8&quot;</span>);</span><br><span class="line">    dsc.setDriverName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">    <span class="comment">// dsc.setDriverName(&quot;com.mysql.jdbc.Driver&quot;); //mysql5.6以下的驱动</span></span><br><span class="line">    dsc.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">    dsc.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">    dsc.setDbType(DbType.MYSQL);</span><br><span class="line">    mpg.setDataSource(dsc);</span><br><span class="line">    <span class="comment">//3、包的配置</span></span><br><span class="line">    PackageConfig pc = <span class="keyword">new</span> PackageConfig();</span><br><span class="line">    pc.setParent(<span class="string">&quot;com.kwhua&quot;</span>); <span class="comment">//包名</span></span><br><span class="line">    pc.setModuleName(<span class="string">&quot;model&quot;</span>); <span class="comment">//模块名</span></span><br><span class="line">    pc.setEntity(<span class="string">&quot;entity&quot;</span>);</span><br><span class="line">    pc.setMapper(<span class="string">&quot;mapper&quot;</span>);</span><br><span class="line">    pc.setService(<span class="string">&quot;service&quot;</span>);</span><br><span class="line">    pc.setController(<span class="string">&quot;controller&quot;</span>);</span><br><span class="line">    mpg.setPackageInfo(pc);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4、策略配置</span></span><br><span class="line">    StrategyConfig strategy = <span class="keyword">new</span> StrategyConfig();</span><br><span class="line">    strategy.setInclude(<span class="string">&quot;user&quot;</span>,<span class="string">&quot;course&quot;</span>); <span class="comment">// 设置要映射的表名</span></span><br><span class="line">    strategy.setNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">    strategy.setColumnNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">    strategy.setEntityLombokModel(<span class="keyword">true</span>); <span class="comment">// 自动lombok；</span></span><br><span class="line">    strategy.setLogicDeleteFieldName(<span class="string">&quot;deleted&quot;</span>);</span><br><span class="line">    <span class="comment">// 自动填充配置</span></span><br><span class="line">    TableFill gmtCreate = <span class="keyword">new</span> TableFill(<span class="string">&quot;gmt_create&quot;</span>, FieldFill.INSERT);</span><br><span class="line">    TableFill gmtModified = <span class="keyword">new</span> TableFill(<span class="string">&quot;gmt_modified&quot;</span>,FieldFill.INSERT_UPDATE);</span><br><span class="line">    ArrayList&lt;TableFill&gt; tableFills = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    tableFills.add(gmtCreate);</span><br><span class="line">    tableFills.add(gmtModified);</span><br><span class="line">    strategy.setTableFillList(tableFills);</span><br><span class="line">    <span class="comment">// 乐观锁</span></span><br><span class="line">    strategy.setVersionFieldName(<span class="string">&quot;version&quot;</span>);</span><br><span class="line">    <span class="comment">//根据你的表名来建对应的类名，如果你的表名没有下划线，比如test，那么你就可以取消这一步</span></span><br><span class="line">    strategy.setTablePrefix(<span class="string">&quot;t_&quot;</span>);</span><br><span class="line">    strategy.setRestControllerStyle(<span class="keyword">true</span>); <span class="comment">//rest请求</span></span><br><span class="line">    <span class="comment">//自动转下划线，比如localhost:8080/hello_id_2</span></span><br><span class="line">    strategy.setControllerMappingHyphenStyle(<span class="keyword">true</span>); </span><br><span class="line">    mpg.setStrategy(strategy);</span><br><span class="line">    mpg.execute(); <span class="comment">//执行</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行主方法即可生成对应代码</p>
<p><a target="_blank" rel="noopener" href="https://www.codota.com/code/java/packages/com.baomidou.mybatisplus.extension.api">com.baomidou.mybatisplus.extension.api</a></p>
<p>统一返回结果集:R</p>
<h2 id="逻辑删除"><a href="#逻辑删除" class="headerlink" title="逻辑删除"></a>逻辑删除</h2><p>说明:</p>
<p>只对自动注入的sql起效:</p>
<ul>
<li>插入: 不作限制</li>
<li>查找: 追加where条件过滤掉已删除数据,且使用 wrapper.entity 生成的where条件会忽略该字段</li>
<li>更新: 追加where条件防止更新到已删除数据,且使用 wrapper.entity 生成的where条件会忽略该字段</li>
<li>删除: 转变为 更新</li>
</ul>
<p>例如:</p>
<ul>
<li>删除: <code>update user set deleted=1 where id = 1 and deleted=0</code></li>
<li>查找: <code>select id,name,deleted from user where deleted=0</code></li>
</ul>
<p>字段类型支持说明:</p>
<ul>
<li>支持所有数据类型(推荐使用 <code>Integer</code>,<code>Boolean</code>,<code>LocalDateTime</code>)</li>
<li>如果数据库字段使用<code>datetime</code>,逻辑未删除值和已删除值支持配置为字符串<code>null</code>,另一个值支持配置为函数来获取值如<code>now()</code></li>
</ul>
<p>附录:</p>
<ul>
<li>逻辑删除是为了方便数据恢复和保护数据本身价值等等的一种方案，但实际就是删除。</li>
<li>如果你需要频繁查出来看就不应使用逻辑删除，而是以一个状态去表示。</li>
</ul>
<p>使用方法：</p>
<h3 id="步骤1-配置com-baomidou-mybatisplus-core-config-GlobalConfig-DbConfig"><a href="#步骤1-配置com-baomidou-mybatisplus-core-config-GlobalConfig-DbConfig" class="headerlink" title="#步骤1: 配置com.baomidou.mybatisplus.core.config.GlobalConfig$DbConfig"></a><a target="_blank" rel="noopener" href="https://mp.baomidou.com/guide/logic-delete.html#%E6%AD%A5%E9%AA%A41-%E9%85%8D%E7%BD%AEcom-baomidou-mybatisplus-core-config-globalconfig-dbconfig">#</a>步骤1: 配置<code>com.baomidou.mybatisplus.core.config.GlobalConfig$DbConfig</code></h3><ul>
<li>例: application.yml</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">flag</span>  <span class="comment"># 全局逻辑删除的实体字段名(since 3.3.0,配置后可以忽略不配置步骤2)</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span> <span class="comment"># 逻辑已删除值(默认为 1)</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span> <span class="comment"># 逻辑未删除值(默认为 0)</span></span><br></pre></td></tr></table></figure>

<h3 id="步骤2-实体类字段上加上-TableLogic注解"><a href="#步骤2-实体类字段上加上-TableLogic注解" class="headerlink" title="#步骤2: 实体类字段上加上@TableLogic注解"></a><a target="_blank" rel="noopener" href="https://mp.baomidou.com/guide/logic-delete.html#%E6%AD%A5%E9%AA%A42-%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%AD%97%E6%AE%B5%E4%B8%8A%E5%8A%A0%E4%B8%8A-tablelogic%E6%B3%A8%E8%A7%A3">#</a>步骤2: 实体类字段上加上<code>@TableLogic</code>注解</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableLogic</span></span><br><span class="line"><span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure>

<p>常见问题:</p>
<h4 id="1-如何-insert"><a href="#1-如何-insert" class="headerlink" title="#1. 如何 insert ?"></a><a target="_blank" rel="noopener" href="https://mp.baomidou.com/guide/logic-delete.html#_1-%E5%A6%82%E4%BD%95-insert">#</a>1. 如何 insert ?</h4><blockquote>
<ol>
<li>字段在数据库定义默认值(推荐)</li>
<li>insert 前自己 set 值</li>
<li>使用自动填充功能</li>
</ol>
</blockquote>
<h4 id="2-删除接口自动填充功能失效"><a href="#2-删除接口自动填充功能失效" class="headerlink" title="#2. 删除接口自动填充功能失效"></a><a target="_blank" rel="noopener" href="https://mp.baomidou.com/guide/logic-delete.html#_2-%E5%88%A0%E9%99%A4%E6%8E%A5%E5%8F%A3%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85%E5%8A%9F%E8%83%BD%E5%A4%B1%E6%95%88">#</a>2. 删除接口自动填充功能失效</h4><blockquote>
<ol>
<li>使用 <code>update</code> 方法并: <code>UpdateWrapper.set(column, value)</code>(推荐)</li>
<li>使用 <code>update</code> 方法并: <code>UpdateWrapper.setSql(&quot;column=value&quot;)</code></li>
<li>使用<a target="_blank" rel="noopener" href="https://mp.baomidou.com/guide/sql-injector.html">Sql注入器</a>注入<code>com.baomidou.mybatisplus.extension.injector.methods.LogicDeleteByIdWithFill</code>并使用(推荐)</li>
</ol>
</blockquote>
<h2 id="一、MyBatis-Plus"><a href="#一、MyBatis-Plus" class="headerlink" title="一、MyBatis-Plus"></a>一、MyBatis-Plus</h2><h3 id="1、简介"><a href="#1、简介" class="headerlink" title="1、简介"></a>1、简介</h3><p>　　MyBatis-Plus 是一个 Mybatis 增强版工具，在 MyBatis 上扩充了其他功能没有改变其基本功能，为了简化开发提交效率而存在。</p>
<p>官网文档地址：<br>　　<a target="_blank" rel="noopener" href="https://mp.baomidou.com/guide/">https://mp.baomidou.com/guide/</a></p>
<p>MyBatis-Plus 特性：<br>　　<a target="_blank" rel="noopener" href="https://mp.baomidou.com/guide/#%E7%89%B9%E6%80%A7">https://mp.baomidou.com/guide/#%E7%89%B9%E6%80%A7</a></p>
<h3 id="2、使用-SpringBoot-快速使用-MyBatis-Plus"><a href="#2、使用-SpringBoot-快速使用-MyBatis-Plus" class="headerlink" title="2、使用 SpringBoot 快速使用 MyBatis-Plus"></a>2、使用 SpringBoot 快速使用 MyBatis-Plus</h3><p>（1）准备工作<br>　　需要 Java 开发环境（JDK）以及相应的开发工具（IDE）。<br>　　需要 maven（用来下载相关依赖的 jar 包）。<br>　　需要 SpringBoot。<br>　　可以使用 IDEA 安装一个 mybatis-plus 插件。</p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182324596-297575739.png" alt="img"></p>
<p>（2）创建一个 SpringBoot 项目。<br>　　方式一：去官网 <a target="_blank" rel="noopener" href="https://start.spring.io/">https://start.spring.io/</a> 初始化一个，然后导入 IDE 工具即可。<br>　　方式二：直接使用 IDE 工具创建一个。 Spring Initializer。</p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182351692-1490253732.png" alt="img"></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182402784-1080563045.png" alt="img"></p>
<p>（3）添加 MyBatis-Plus 依赖（mybatis-plus-boot-starter）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.baomidou&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-plus-boot-starter&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.3.1.tmp&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<p>（4）为了测试开发，此处使用 mysql 8，需要引入 mysql 相关依赖。<br>　　为了简化代码，引入 lombok 依赖（减少 getter、setter 等方法）。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;8.0.18&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.projectlombok&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;lombok&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.18.10&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>（5）完整依赖文件（pom.xml）</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0&quot; xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class="line">         xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0 https:&#x2F;&#x2F;maven.apache.org&#x2F;xsd&#x2F;maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;&#x2F;modelVersion&gt;</span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.2.6.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;relativePath&#x2F;&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">    &lt;&#x2F;parent&gt;</span><br><span class="line">    &lt;groupId&gt;com.lyh.test&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;test-mybatis-plus&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.0.1-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;name&gt;test-mybatis-plus&lt;&#x2F;name&gt;</span><br><span class="line">    &lt;description&gt;测试 -- 测试 MyBatis-Plus 功能&lt;&#x2F;description&gt;</span><br><span class="line"></span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;java.version&gt;1.8&lt;&#x2F;java.version&gt;</span><br><span class="line">    &lt;&#x2F;properties&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.baomidou&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;3.3.1.tmp&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;8.0.18&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.projectlombok&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;lombok&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.18.10&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-test&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;&#x2F;scope&gt;</span><br><span class="line">            &lt;exclusions&gt;</span><br><span class="line">                &lt;exclusion&gt;</span><br><span class="line">                    &lt;groupId&gt;org.junit.vintage&lt;&#x2F;groupId&gt;</span><br><span class="line">                    &lt;artifactId&gt;junit-vintage-engine&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;&#x2F;exclusion&gt;</span><br><span class="line">            &lt;&#x2F;exclusions&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">    &lt;&#x2F;dependencies&gt;</span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line">        &lt;&#x2F;plugins&gt;</span><br><span class="line">    &lt;&#x2F;build&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;project&gt;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>（6）使用一个表进行测试。</p>
<p>　　仅供参考，可以定义 创建时间、修改时间等字段。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">DROP DATABASE IF EXISTS testMyBatisPlus;</span><br><span class="line"></span><br><span class="line">CREATE DATABASE testMyBatisPlus;</span><br><span class="line"></span><br><span class="line">USE testMyBatisPlus;</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS user;</span><br><span class="line"></span><br><span class="line">CREATE TABLE user</span><br><span class="line">(</span><br><span class="line">    id BIGINT(20) NOT NULL COMMENT &#39;主键ID&#39;,</span><br><span class="line">    name VARCHAR(30) NULL DEFAULT NULL COMMENT &#39;姓名&#39;,</span><br><span class="line">    age INT(11) NULL DEFAULT NULL COMMENT &#39;年龄&#39;,</span><br><span class="line">    email VARCHAR(50) NULL DEFAULT NULL COMMENT &#39;邮箱&#39;,</span><br><span class="line">    PRIMARY KEY (id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO user (id, name, age, email) VALUES</span><br><span class="line">(1, &#39;Jone&#39;, 18, &#39;test1@baomidou.com&#39;),</span><br><span class="line">(2, &#39;Jack&#39;, 20, &#39;test2@baomidou.com&#39;),</span><br><span class="line">(3, &#39;Tom&#39;, 28, &#39;test3@baomidou.com&#39;),</span><br><span class="line">(4, &#39;Sandy&#39;, 21, &#39;test4@baomidou.com&#39;),</span><br><span class="line">(5, &#39;Billie&#39;, 24, &#39;test5@baomidou.com&#39;);</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182613102-1729540101.png" alt="img"></p>
<p>（7）在 application.yml 文件中配置 mysql 数据源信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">    username: root</span><br><span class="line">    password: 123456</span><br><span class="line">    url: jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;testMyBatisPlus?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8</span><br></pre></td></tr></table></figure>

<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182640635-986081965.png" alt="img"></p>
<p>（8）编写表对应的 实体类。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package entity;</span><br><span class="line"></span><br><span class="line">import lombok.Data;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">public class User &#123;</span><br><span class="line">    private Long id;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line">    private String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182707965-401919746.png" alt="img"></p>
<p>（9）编写操作实体类的 Mapper 类。<br>　　直接继承 BaseMapper，这是 mybatis-plus 封装好的类。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package mapper;</span><br><span class="line"></span><br><span class="line">import bean.User;</span><br><span class="line">import com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"></span><br><span class="line">public interface UserMapper extends BaseMapper&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182736101-1311032320.png" alt="img"></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182747677-610854146.png" alt="img"></p>
<p>（10）实体类、Mapper 类都写好了，就可以使用了。<br>　　Step1：先得在启动类里扫描 Mapper 类，即添加 @MapperScan 注解</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package com.lyh.test.testmybatisplus;</span><br><span class="line"></span><br><span class="line">import org.mybatis.spring.annotation.MapperScan;</span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line">@MapperScan(&quot;mapper&quot;)</span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class TestMybatisPlusApplication &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(TestMybatisPlusApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>　　Step2：写一个测试类测试一下。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package com.lyh.test.testmybatisplus;</span><br><span class="line"></span><br><span class="line">import bean.User;</span><br><span class="line">import mapper.UserMapper;</span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">@SpringBootTest</span><br><span class="line">class TestMybatisPlusApplicationTests &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testSelect() &#123;</span><br><span class="line">        System.out.println((&quot;----- selectAll method test ------&quot;));</span><br><span class="line">        List&lt;User&gt; userList &#x3D; userMapper.selectList(null);</span><br><span class="line">        for(User user:userList) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182838295-636931302.png" alt="img"></p>
<p>（11）总结：<br>　　通过以上简单操作，就能对 user 表进行 CRUD 操作，不需要去编写 xml 文件。<br>注：<br>　　若遇到 @Autowired 标记的变量出现 红色下划线，但是不影响 正常运行。</p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182900276-19452208.png" alt="img"></p>
<p>　　可以进入 Settings，找到 Inspection，并选择其中的 Spring Core -&gt; Code -&gt; Autowiring for Bean Class,将 Error 改为 Warning，即可。<br><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509182927553-240645059.png" alt="img"></p>
<p> 二、Mybatis-Plus 常用操作</p>
<h3 id="1、配置日志"><a href="#1、配置日志" class="headerlink" title="1、配置日志"></a>1、配置日志</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">【参考地址（两种方式配置日志）】</span><br><span class="line">    https:&#x2F;&#x2F;blog.csdn.net&#x2F;dfBeautifulLive&#x2F;article&#x2F;details&#x2F;100700365</span><br></pre></td></tr></table></figure>

<p>　　想要查看执行的 sql 语句，可以在 yml 文件中添加配置信息，如下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mybatis-plus:</span><br><span class="line">  configuration:</span><br><span class="line">    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span><br></pre></td></tr></table></figure>

<p>　　如下图所示：执行时会打印出 sql 语句。</p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183041633-571344925.png" alt="img"></p>
<h3 id="2、简单认识一下常用注解"><a href="#2、简单认识一下常用注解" class="headerlink" title="2、简单认识一下常用注解"></a>2、简单认识一下常用注解</h3><p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">【@TableName 】</span><br><span class="line">    @TableName               用于定义表名</span><br><span class="line">注：</span><br><span class="line">    常用属性：</span><br><span class="line">        value                用于定义表名</span><br><span class="line"></span><br><span class="line">【@TableId】</span><br><span class="line">    @TableId                 用于定义表的主键</span><br><span class="line">注：</span><br><span class="line">    常用属性：</span><br><span class="line">        value           用于定义主键字段名</span><br><span class="line">        type            用于定义主键类型（主键策略 IdType）</span><br><span class="line"></span><br><span class="line">   主键策略：</span><br><span class="line">      IdType.AUTO          主键自增，系统分配，不需要手动输入</span><br><span class="line">      IdType.NONE          未设置主键</span><br><span class="line">      IdType.INPUT         需要自己输入 主键值。</span><br><span class="line">      IdType.ASSIGN_ID     系统分配 ID，用于数值型数据（Long，对应 mysql 中 BIGINT 类型）。</span><br><span class="line">      IdType.ASSIGN_UUID   系统分配 UUID，用于字符串型数据（String，对应 mysql 中 varchar(32) 类型）。</span><br><span class="line"></span><br><span class="line">【@TableField】  </span><br><span class="line">    @TableField            用于定义表的非主键字段。</span><br><span class="line">注：</span><br><span class="line">    常用属性：</span><br><span class="line">        value                用于定义非主键字段名</span><br><span class="line">        exist                用于指明是否为数据表的字段， true 表示是，false 为不是。</span><br><span class="line">        fill                 用于指定字段填充策略（FieldFill）。</span><br><span class="line">        </span><br><span class="line">    字段填充策略：（一般用于填充 创建时间、修改时间等字段）</span><br><span class="line">        FieldFill.DEFAULT         默认不填充</span><br><span class="line">        FieldFill.INSERT          插入时填充</span><br><span class="line">        FieldFill.UPDATE          更新时填充</span><br><span class="line">        FieldFill.INSERT_UPDATE   插入、更新时填充。</span><br><span class="line"></span><br><span class="line">【@TableLogic】</span><br><span class="line">    @TableLogic           用于定义表的字段进行逻辑删除（非物理删除）</span><br><span class="line">注：</span><br><span class="line">    常用属性：</span><br><span class="line">        value            用于定义未删除时字段的值</span><br><span class="line">        delval           用于定义删除时字段的值</span><br><span class="line">        </span><br><span class="line">【@Version】</span><br><span class="line">    @Version             用于字段实现乐观锁</span><br></pre></td></tr></table></figure>



<h3 id="3、代码生成器"><a href="#3、代码生成器" class="headerlink" title="3、代码生成器"></a>3、代码生成器</h3><p>（1）AutoGenerator 简介<br>　　AutoGenerator 是 MyBatis-Plus 的代码生成器，通过 AutoGenerator 可以快速生成 Entity、Mapper、Mapper XML、Service、Controller 等各个模块的代码，极大的提升了开发效率。<br>　　与 mybatis 中的 mybatis-generator-core 类似。</p>
<p>（2）添加依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.baomidou&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-plus-generator&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.3.1.tmp&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;!-- 添加 模板引擎 依赖 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.velocity&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;velocity-engine-core&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.2&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>



<p>（3）代码分析<br>Step1：<br>　　创建一个 代码生成器。用于生成代码。<br>　　此处不用修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Step1：代码生成器</span><br><span class="line">AutoGenerator mpg &#x3D; new AutoGenerator();</span><br></pre></td></tr></table></figure>

<p>Step2：<br>　　配置全局信息。指定代码输出路径，以及包名、作者等信息。<br>　　此处按需添加，projectPath 需要修改，setAuthor 需要修改。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Step2：全局配置</span><br><span class="line">GlobalConfig gc &#x3D; new GlobalConfig();</span><br><span class="line">&#x2F;&#x2F; 填写代码生成的目录(需要修改)</span><br><span class="line">String projectPath &#x3D; &quot;E:\\myProject\\test\\test_mybatis_plus&quot;;</span><br><span class="line">&#x2F;&#x2F; 拼接出代码最终输出的目录</span><br><span class="line">gc.setOutputDir(projectPath + &quot;&#x2F;src&#x2F;main&#x2F;java&quot;);</span><br><span class="line">&#x2F;&#x2F; 配置开发者信息（可选）（需要修改）</span><br><span class="line">gc.setAuthor(&quot;lyh&quot;);</span><br><span class="line">&#x2F;&#x2F; 配置是否打开目录，false 为不打开（可选）</span><br><span class="line">gc.setOpen(false);</span><br><span class="line">&#x2F;&#x2F; 实体属性 Swagger2 注解，添加 Swagger 依赖，开启 Swagger2 模式（可选）</span><br><span class="line">&#x2F;&#x2F;gc.setSwagger2(true);</span><br><span class="line">&#x2F;&#x2F; 重新生成文件时是否覆盖，false 表示不覆盖（可选）</span><br><span class="line">gc.setFileOverride(false);</span><br><span class="line">&#x2F;&#x2F; 配置主键生成策略，此处为 ASSIGN_ID（可选）</span><br><span class="line">gc.setIdType(IdType.ASSIGN_ID);</span><br><span class="line">&#x2F;&#x2F; 配置日期类型，此处为 ONLY_DATE（可选）</span><br><span class="line">gc.setDateType(DateType.ONLY_DATE);</span><br><span class="line">&#x2F;&#x2F; 默认生成的 service 会有 I 前缀</span><br><span class="line">gc.setServiceName(&quot;%sService&quot;);</span><br><span class="line">mpg.setGlobalConfig(gc);</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>Step3：<br>　　配置数据源信息。用于指定 需要生成代码的 数据仓库、数据表。<br>　　setUrl、setDriverName、setUsername、setPassword 均需修改。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Step3：数据源配置（需要修改）</span><br><span class="line">DataSourceConfig dsc &#x3D; new DataSourceConfig();</span><br><span class="line">&#x2F;&#x2F; 配置数据库 url 地址</span><br><span class="line">dsc.setUrl(&quot;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;testMyBatisPlus?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&quot;);</span><br><span class="line">&#x2F;&#x2F; dsc.setSchemaName(&quot;testMyBatisPlus&quot;); &#x2F;&#x2F; 可以直接在 url 中指定数据库名</span><br><span class="line">&#x2F;&#x2F; 配置数据库驱动</span><br><span class="line">dsc.setDriverName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">&#x2F;&#x2F; 配置数据库连接用户名</span><br><span class="line">dsc.setUsername(&quot;root&quot;);</span><br><span class="line">&#x2F;&#x2F; 配置数据库连接密码</span><br><span class="line">dsc.setPassword(&quot;123456&quot;);</span><br><span class="line">mpg.setDataSource(dsc);</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>Step4：<br>　　配置包信息。<br>　　setParent、setModuleName 均需修改。其余按需求修改.</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Step:4：包配置</span><br><span class="line">PackageConfig pc &#x3D; new PackageConfig();</span><br><span class="line">&#x2F;&#x2F; 配置父包名（需要修改）</span><br><span class="line">pc.setParent(&quot;com.lyh.test&quot;);</span><br><span class="line">&#x2F;&#x2F; 配置模块名（需要修改）</span><br><span class="line">pc.setModuleName(&quot;test_mybatis_plus&quot;);</span><br><span class="line">&#x2F;&#x2F; 配置 entity 包名</span><br><span class="line">pc.setEntity(&quot;entity&quot;);</span><br><span class="line">&#x2F;&#x2F; 配置 mapper 包名</span><br><span class="line">pc.setMapper(&quot;mapper&quot;);</span><br><span class="line">&#x2F;&#x2F; 配置 service 包名</span><br><span class="line">pc.setService(&quot;service&quot;);</span><br><span class="line">&#x2F;&#x2F; 配置 controller 包名</span><br><span class="line">pc.setController(&quot;controller&quot;);</span><br><span class="line">mpg.setPackageInfo(pc);</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>Step5：<br>　　配置数据表映射信息。<br>　　setInclude 需要修改，其余按实际开发修改。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Step5：策略配置（数据库表配置）</span><br><span class="line">StrategyConfig strategy &#x3D; new StrategyConfig();</span><br><span class="line">&#x2F;&#x2F; 指定表名（可以同时操作多个表，使用 , 隔开）（需要修改）</span><br><span class="line">strategy.setInclude(&quot;test_mybatis_plus_user&quot;);</span><br><span class="line">&#x2F;&#x2F; 配置数据表与实体类名之间映射的策略</span><br><span class="line">strategy.setNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">&#x2F;&#x2F; 配置数据表的字段与实体类的属性名之间映射的策略</span><br><span class="line">strategy.setColumnNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">&#x2F;&#x2F; 配置 lombok 模式</span><br><span class="line">strategy.setEntityLombokModel(true);</span><br><span class="line">&#x2F;&#x2F; 配置 rest 风格的控制器（@RestController）</span><br><span class="line">strategy.setRestControllerStyle(true);</span><br><span class="line">&#x2F;&#x2F; 配置驼峰转连字符</span><br><span class="line">strategy.setControllerMappingHyphenStyle(true);</span><br><span class="line">&#x2F;&#x2F; 配置表前缀，生成实体时去除表前缀</span><br><span class="line">&#x2F;&#x2F; 此处的表名为 test_mybatis_plus_user，模块名为 test_mybatis_plus，去除前缀后剩下为 user。</span><br><span class="line">strategy.setTablePrefix(pc.getModuleName() + &quot;_&quot;);</span><br><span class="line">mpg.setStrategy(strategy);</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>Step6：<br>　　执行代码生成操作。</p>
<p>　　此处不用修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Step6：执行代码生成操作</span><br><span class="line">mpg.execute();</span><br></pre></td></tr></table></figure>

<p>完整配置如下：</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">package com.lyh.test.test_mybatis_plus;</span><br><span class="line"></span><br><span class="line">import com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line">import com.baomidou.mybatisplus.generator.AutoGenerator;</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.DataSourceConfig;</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.GlobalConfig;</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.PackageConfig;</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.StrategyConfig;</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.rules.DateType;</span><br><span class="line">import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;</span><br><span class="line">import org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line">public class TestAutoGenerate &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void autoGenerate() &#123;</span><br><span class="line">        &#x2F;&#x2F; Step1：代码生成器</span><br><span class="line">        AutoGenerator mpg &#x3D; new AutoGenerator();</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Step2：全局配置</span><br><span class="line">        GlobalConfig gc &#x3D; new GlobalConfig();</span><br><span class="line">        &#x2F;&#x2F; 填写代码生成的目录(需要修改)</span><br><span class="line">        String projectPath &#x3D; &quot;E:\\myProject\\test\\test_mybatis_plus&quot;;</span><br><span class="line">        &#x2F;&#x2F; 拼接出代码最终输出的目录</span><br><span class="line">        gc.setOutputDir(projectPath + &quot;&#x2F;src&#x2F;main&#x2F;java&quot;);</span><br><span class="line">        &#x2F;&#x2F; 配置开发者信息（可选）（需要修改）</span><br><span class="line">        gc.setAuthor(&quot;lyh&quot;);</span><br><span class="line">        &#x2F;&#x2F; 配置是否打开目录，false 为不打开（可选）</span><br><span class="line">        gc.setOpen(false);</span><br><span class="line">        &#x2F;&#x2F; 实体属性 Swagger2 注解，添加 Swagger 依赖，开启 Swagger2 模式（可选）</span><br><span class="line">        &#x2F;&#x2F;gc.setSwagger2(true);</span><br><span class="line">        &#x2F;&#x2F; 重新生成文件时是否覆盖，false 表示不覆盖（可选）</span><br><span class="line">        gc.setFileOverride(false);</span><br><span class="line">        &#x2F;&#x2F; 配置主键生成策略，此处为 ASSIGN_ID（可选）</span><br><span class="line">        gc.setIdType(IdType.ASSIGN_ID);</span><br><span class="line">        &#x2F;&#x2F; 配置日期类型，此处为 ONLY_DATE（可选）</span><br><span class="line">        gc.setDateType(DateType.ONLY_DATE);</span><br><span class="line">        &#x2F;&#x2F; 默认生成的 service 会有 I 前缀</span><br><span class="line">        gc.setServiceName(&quot;%sService&quot;);</span><br><span class="line">        mpg.setGlobalConfig(gc);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Step3：数据源配置（需要修改）</span><br><span class="line">        DataSourceConfig dsc &#x3D; new DataSourceConfig();</span><br><span class="line">        &#x2F;&#x2F; 配置数据库 url 地址</span><br><span class="line">        dsc.setUrl(&quot;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;testMyBatisPlus?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&quot;);</span><br><span class="line">        &#x2F;&#x2F; dsc.setSchemaName(&quot;testMyBatisPlus&quot;); &#x2F;&#x2F; 可以直接在 url 中指定数据库名</span><br><span class="line">        &#x2F;&#x2F; 配置数据库驱动</span><br><span class="line">        dsc.setDriverName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">        &#x2F;&#x2F; 配置数据库连接用户名</span><br><span class="line">        dsc.setUsername(&quot;root&quot;);</span><br><span class="line">        &#x2F;&#x2F; 配置数据库连接密码</span><br><span class="line">        dsc.setPassword(&quot;123456&quot;);</span><br><span class="line">        mpg.setDataSource(dsc);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Step:4：包配置</span><br><span class="line">        PackageConfig pc &#x3D; new PackageConfig();</span><br><span class="line">        &#x2F;&#x2F; 配置父包名（需要修改）</span><br><span class="line">        pc.setParent(&quot;com.lyh.test&quot;);</span><br><span class="line">        &#x2F;&#x2F; 配置模块名（需要修改）</span><br><span class="line">        pc.setModuleName(&quot;test_mybatis_plus&quot;);</span><br><span class="line">        &#x2F;&#x2F; 配置 entity 包名</span><br><span class="line">        pc.setEntity(&quot;entity&quot;);</span><br><span class="line">        &#x2F;&#x2F; 配置 mapper 包名</span><br><span class="line">        pc.setMapper(&quot;mapper&quot;);</span><br><span class="line">        &#x2F;&#x2F; 配置 service 包名</span><br><span class="line">        pc.setService(&quot;service&quot;);</span><br><span class="line">        &#x2F;&#x2F; 配置 controller 包名</span><br><span class="line">        pc.setController(&quot;controller&quot;);</span><br><span class="line">        mpg.setPackageInfo(pc);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Step5：策略配置（数据库表配置）</span><br><span class="line">        StrategyConfig strategy &#x3D; new StrategyConfig();</span><br><span class="line">        &#x2F;&#x2F; 指定表名（可以同时操作多个表，使用 , 隔开）（需要修改）</span><br><span class="line">        strategy.setInclude(&quot;test_mybatis_plus_user&quot;);</span><br><span class="line">        &#x2F;&#x2F; 配置数据表与实体类名之间映射的策略</span><br><span class="line">        strategy.setNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">        &#x2F;&#x2F; 配置数据表的字段与实体类的属性名之间映射的策略</span><br><span class="line">        strategy.setColumnNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">        &#x2F;&#x2F; 配置 lombok 模式</span><br><span class="line">        strategy.setEntityLombokModel(true);</span><br><span class="line">        &#x2F;&#x2F; 配置 rest 风格的控制器（@RestController）</span><br><span class="line">        strategy.setRestControllerStyle(true);</span><br><span class="line">        &#x2F;&#x2F; 配置驼峰转连字符</span><br><span class="line">        strategy.setControllerMappingHyphenStyle(true);</span><br><span class="line">        &#x2F;&#x2F; 配置表前缀，生成实体时去除表前缀</span><br><span class="line">        &#x2F;&#x2F; 此处的表名为 test_mybatis_plus_user，模块名为 test_mybatis_plus，去除前缀后剩下为 user。</span><br><span class="line">        strategy.setTablePrefix(pc.getModuleName() + &quot;_&quot;);</span><br><span class="line">        mpg.setStrategy(strategy);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; Step6：执行代码生成操作</span><br><span class="line">        mpg.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183427652-919200133.png" alt="img"></p>
<h3 id="4、自动填充数据功能"><a href="#4、自动填充数据功能" class="headerlink" title="4、自动填充数据功能"></a>4、自动填充数据功能</h3><p>（1）简介<br>　　添加、修改数据时，每次都会使用相同的方式进行填充。比如 数据的创建时间、修改时间等。<br>　　Mybatis-plus 支持自动填充这些字段的数据。</p>
<p>　　给之前的数据表新增两个字段：创建时间、修改时间。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE test_mybatis_plus_user</span><br><span class="line">(</span><br><span class="line">    id BIGINT NOT NULL COMMENT &#39;主键ID&#39;,</span><br><span class="line">    name VARCHAR(30) NULL DEFAULT NULL COMMENT &#39;姓名&#39;,</span><br><span class="line">    age INT(11) NULL DEFAULT NULL COMMENT &#39;年龄&#39;,</span><br><span class="line">    email VARCHAR(50) NULL DEFAULT NULL COMMENT &#39;邮箱&#39;,</span><br><span class="line">    create_time timestamp NULL DEFAULT NULL COMMENT &#39;创建时间&#39;,</span><br><span class="line">    update_time timestamp NULL DEFAULT NULL COMMENT &#39;最后修改时间&#39;, </span><br><span class="line">    PRIMARY KEY (id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>并使用 代码生成器生成代码。</p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183526359-1836932007.png" alt="img"></p>
<p>（2）未使用自动填充时<br>　　未使用 自动填充时，每次添加、修改数据都可以手动对其进行添加。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootTest</span><br><span class="line">class TestMybatisPlusApplicationTests &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserService userService;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testUpdate() &#123;</span><br><span class="line">        User user &#x3D; new User();</span><br><span class="line">        user.setName(&quot;tom&quot;).setAge(20).setEmail(&quot;tom@163.com&quot;);</span><br><span class="line">        &#x2F;&#x2F; 手动添加数据</span><br><span class="line">        user.setCreateTime(new Date()).setUpdateTime(new Date());</span><br><span class="line">        if (userService.save(user)) &#123;</span><br><span class="line">            userService.list().forEach(System.out::println);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            System.out.println(&quot;添加数据失败&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183609399-44267929.png" alt="img"></p>
<p>（3）使用自动填充功能。<br>Step1：<br>　　使用 @TableField 注解，标注需要进行填充的字段。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 创建时间</span><br><span class="line"> *&#x2F;</span><br><span class="line">@TableField(fill &#x3D; FieldFill.INSERT)</span><br><span class="line">private Date createTime;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 最后修改时间</span><br><span class="line"> *&#x2F;</span><br><span class="line">@TableField(fill &#x3D; FieldFill.INSERT_UPDATE)</span><br><span class="line">private Date updateTime;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183638934-543199454.png" alt="img"></p>
<p>Step2：<br>　　自定义一个类，实现 MetaObjectHandler 接口，并重写方法。<br>　　添加 @Component 注解，交给 Spring 去管理。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package com.lyh.test.test_mybatis_plus.handler;</span><br><span class="line"></span><br><span class="line">import com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line">import org.apache.ibatis.reflection.MetaObject;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public class MyMetaObjectHandler implements MetaObjectHandler &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void insertFill(MetaObject metaObject) &#123;</span><br><span class="line">        this.strictInsertFill(metaObject, &quot;createTime&quot;, Date.class, new Date());</span><br><span class="line">        this.strictInsertFill(metaObject, &quot;updateTime&quot;, Date.class, new Date());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void updateFill(MetaObject metaObject) &#123;</span><br><span class="line">        this.strictUpdateFill(metaObject, &quot;updateTime&quot;, Date.class, new Date());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183711767-990015180.png" alt="img"></p>
<p>Step3：<br>　　简单测试一下。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testAutoFill() &#123;</span><br><span class="line">    User user &#x3D; new User();</span><br><span class="line">    user.setName(&quot;tom&quot;).setAge(20).setEmail(&quot;tom@163.com&quot;);</span><br><span class="line">    if (userService.save(user)) &#123;</span><br><span class="line">        userService.list().forEach(System.out::println);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        System.out.println(&quot;添加数据失败&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183739640-1849006710.png" alt="img"></p>
<h3 id="5、逻辑删除"><a href="#5、逻辑删除" class="headerlink" title="5、逻辑删除"></a>5、逻辑删除</h3><p>（1）简介<br>　　删除数据，可以通过物理删除，也可以通过逻辑删除。<br>　　物理删除指的是直接将数据从数据库中删除，不保留。<br>　　逻辑删除指的是修改数据的某个字段，使其表示为已删除状态，而非删除数据，保留该数据在数据库中，但是查询时不显示该数据（查询时过滤掉该数据）。</p>
<p>　　给数据表增加一个字段：delete_flag，用于表示该数据是否被逻辑删除。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE test_mybatis_plus_user</span><br><span class="line">(</span><br><span class="line">    id BIGINT NOT NULL COMMENT &#39;主键ID&#39;,</span><br><span class="line">    name VARCHAR(30) NULL DEFAULT NULL COMMENT &#39;姓名&#39;,</span><br><span class="line">    age INT(11) NULL DEFAULT NULL COMMENT &#39;年龄&#39;,</span><br><span class="line">    email VARCHAR(50) NULL DEFAULT NULL COMMENT &#39;邮箱&#39;,</span><br><span class="line">    create_time timestamp NULL DEFAULT NULL COMMENT &#39;创建时间&#39;,</span><br><span class="line">    update_time timestamp NULL DEFAULT NULL COMMENT &#39;最后修改时间&#39;, </span><br><span class="line">    delete_flag tinyint(1) NULL DEFAULT NULL COMMENT &#39;逻辑删除（0 未删除、1 删除）&#39;,</span><br><span class="line">    PRIMARY KEY (id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>（2）使用逻辑删除。<br>　　可以定义一个自动填充规则，初始值为 0。0 表示未删除， 1 表示删除。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 逻辑删除（0 未删除、1 删除）</span><br><span class="line"> *&#x2F;</span><br><span class="line">@TableLogic(value &#x3D; &quot;0&quot;, delval &#x3D; &quot;1&quot;)</span><br><span class="line">@TableField(fill &#x3D; FieldFill.INSERT)</span><br><span class="line">private Integer deleteFlag;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void insertFill(MetaObject metaObject) &#123;</span><br><span class="line">    this.strictInsertFill(metaObject, &quot;deleteFlag&quot;, Integer.class, 0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183843115-1369120260.png" alt="img"></p>
<p>（3）简单测试<br>　　使用 mybatis-plus 封装好的方法时，会自动添加逻辑删除的功能。<br>　　若是自定义的 sql 语句，需要手动添加逻辑。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testDelete() &#123;</span><br><span class="line">    if (userService.removeById(1258924257048547329L)) &#123;</span><br><span class="line">        System.out.println(&quot;删除数据成功&quot;);</span><br><span class="line">        userService.list().forEach(System.out::println);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        System.out.println(&quot;删除数据失败&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>现有数据 </p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509183959603-847557538.png" alt="img"></p>
<p>执行 testDelete 进行逻辑删除。</p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184012946-489939673.png" alt="img"></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184023676-1916956821.png" alt="img"></p>
<p>若去除 TableLogic 注解，再执行 testDelete 时进行物理删除，直接删除这条数据。</p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184044446-583363399.png" alt="img"></p>
<p> <img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184057341-414839563.png" alt="img"></p>
<h3 id="6、分页插件的使用"><a href="#6、分页插件的使用" class="headerlink" title="6、分页插件的使用"></a>6、分页插件的使用</h3><p>（1）简介<br>　　与 mybatis 的插件 pagehelper 用法类似。<br>　　通过简单的配置即可使用。</p>
<p>（2）使用<br>Step1：<br>　　配置分页插件。<br>　　编写一个 配置类，内部使用 @Bean 注解将 PaginationInterceptor 交给 Spring 容器管理。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package com.lyh.test.test_mybatis_plus.config;</span><br><span class="line"></span><br><span class="line">import com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor;</span><br><span class="line">import org.mybatis.spring.annotation.MapperScan;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 自定义一个配置类，mapper 扫描也可在此写上</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Configuration</span><br><span class="line">@MapperScan(&quot;com.lyh.test.test_mybatis_plus.mapper&quot;)</span><br><span class="line">public class Myconfig &#123;</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 分页插件</span><br><span class="line">     * @return 分页插件的实例</span><br><span class="line">     *&#x2F;</span><br><span class="line">    @Bean</span><br><span class="line">    public PaginationInterceptor paginationInterceptor() &#123;</span><br><span class="line">        return new PaginationInterceptor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184134459-1998710648.png" alt="img"></p>
<p>Step2：<br>　　编写分页代码。<br>　　直接 new 一个 Page 对象，对象需要传递两个参数（当前页，每页显示的条数）。<br>　　调用 mybatis-plus 提供的分页查询方法，其会将 分页查询的数据封装到 Page 对象中。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testPage() &#123;</span><br><span class="line">    &#x2F;&#x2F; Step1：创建一个 Page 对象</span><br><span class="line">    Page&lt;User&gt; page &#x3D; new Page&lt;&gt;();</span><br><span class="line">    &#x2F;&#x2F; Page&lt;User&gt; page &#x3D; new Page&lt;&gt;(2, 5);</span><br><span class="line">    &#x2F;&#x2F; Step2：调用 mybatis-plus 提供的分页查询方法</span><br><span class="line">    userService.page(page, null);</span><br><span class="line">    &#x2F;&#x2F; Step3：获取分页数据</span><br><span class="line">    System.out.println(page.getCurrent()); &#x2F;&#x2F; 获取当前页</span><br><span class="line">    System.out.println(page.getTotal()); &#x2F;&#x2F; 获取总记录数</span><br><span class="line">    System.out.println(page.getSize()); &#x2F;&#x2F; 获取每页的条数</span><br><span class="line">    System.out.println(page.getRecords()); &#x2F;&#x2F; 获取每页数据的集合</span><br><span class="line">    System.out.println(page.getPages()); &#x2F;&#x2F; 获取总页数</span><br><span class="line">    System.out.println(page.hasNext()); &#x2F;&#x2F; 是否存在下一页</span><br><span class="line">    System.out.println(page.hasPrevious()); &#x2F;&#x2F; 是否存在上一页</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184212763-1123404604.png" alt="img"></p>
<h3 id="7、乐观锁的实现"><a href="#7、乐观锁的实现" class="headerlink" title="7、乐观锁的实现"></a>7、乐观锁的实现</h3><p>（1）首先认识一下 读问题、写问题？<br>　　操作数据库数据时，遇到的最基本问题就是 读问题与写问题。<br>　　读问题 指的是从数据库中读取数据时遇到的问题，比如：脏读、幻读、不可重复读。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">【脏读、幻读、不可重复读 参考地址：】</span><br><span class="line">    https:&#x2F;&#x2F;www.cnblogs.com&#x2F;l-y-h&#x2F;p&#x2F;12458777.html#_label0_3</span><br></pre></td></tr></table></figure>

<p>　　写问题 指的是数据写入数据库时遇到的问题，比如：丢失更新（多个线程同时对某条数据更新，无论执行顺序如何，都会丢失其他线程更新的数据）</p>
<p>（2）如何解决写问题？<br>　　乐观锁、悲观锁就是为了解决 写问题而存在的。<br>　　　　乐观锁：总是假设最好的情况，每次读取数据时认为数据不会被修改（即不加锁），当进行更新操作时，会判断这条数据是否被修改，未被修改，则进行更新操作。若被修改，则数据更新失败，可以对数据进行重试（重新尝试修改数据）。<br>　　　　悲观锁：总是假设最坏的情况，每次读取数据时认为数据会被修改（即加锁），当进行更新操作时，直接更新数据，结束操作后释放锁（此处才可以被其他线程读取）。</p>
<p>（3）乐观锁、悲观锁使用场景？<br>　　乐观锁一般用于读比较多的场合，尽量减少加锁的开销。<br>　　悲观锁一般用于写比较多的场合，尽量减少 类似 乐观锁重试更新引起的性能开销。</p>
<p>（4）乐观锁两种实现方式<br>方式一：通过版本号机制实现。<br>　　在数据表中增加一个 version 字段。<br>　　取数据时，获取该字段，更新时以该字段为条件进行处理（即set version = newVersion where version = oldVersion），若 version 相同，则更新成功（给新 version 赋一个值，一般加 1）。若 version 不同，则更新失败，可以重新尝试更新操作。</p>
<p>方式二：通过 CAS 算法实现。<br>　　CAS 为 Compare And Swap 的缩写，即比较交换，是一种无锁算法（即在不加锁的情况实现多线程之间的变量同步）。<br>　　CAS 操作包含三个操作数 —— 内存值（V）、预期原值（A）和新值(B)。如果内存地址里面的值 V 和 A 的值是一样的，那么就将内存里面的值更新成B。若 V 与 A 不一致，则不执行任何操作（可以通过自旋操作，不断尝试修改数据直至成功修改）。即 V == A ？ V = B ： V = V。<br>　　CAS 可能导致 ABA 问题（两次读取数据时值相同，但不确定值是否被修改过），比如两个线程操作同一个变量，线程 A、线程B 初始读取数据均为 A，后来 线程B 将数据修改为 B，然后又修改为 A，此时线程 A 再次读取到的数据依旧是 A，虽然值相同但是中间被修改过，这就是 ABA 问题。可以加一个额外的标志位 C，用于表示数据是否被修改。当标志位 C 与预期标志位相同、且 V == A 时，则更新值 B。</p>
<p>（5）mybatis-plus 实现乐观锁（通过 version 机制）<br>实现思路：<br>　　Step1：取出记录时，获取当前version<br>　　Step2：更新时，带上这个version<br>　　Step3：执行更新时， set version = newVersion where version = oldVersion<br>　　Step4：如果version不对，就更新失败</p>
<p>（6）mybatis-plus 代码实现乐观锁<br>Step1：<br>　　配置乐观锁插件。<br>　　编写一个配置类（可以与上例的分页插件共用一个配置类），将 OptimisticLockerInterceptor 通过 @Bean 交给 Spring 管理。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 乐观锁插件</span><br><span class="line"> * @return 乐观锁插件的实例</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Bean</span><br><span class="line">public OptimisticLockerInterceptor optimisticLockerInterceptor() &#123;</span><br><span class="line">    return new OptimisticLockerInterceptor();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184345369-1234458679.png" alt="img"></p>
<p>Step2：<br>　　定义一个数据库字段 version。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE test_mybatis_plus_user</span><br><span class="line">(</span><br><span class="line">    id BIGINT NOT NULL COMMENT &#39;主键ID&#39;,</span><br><span class="line">    name VARCHAR(30) NULL DEFAULT NULL COMMENT &#39;姓名&#39;,</span><br><span class="line">    age INT(11) NULL DEFAULT NULL COMMENT &#39;年龄&#39;,</span><br><span class="line">    email VARCHAR(50) NULL DEFAULT NULL COMMENT &#39;邮箱&#39;,</span><br><span class="line">    create_time timestamp NULL DEFAULT NULL COMMENT &#39;创建时间&#39;,</span><br><span class="line">    update_time timestamp NULL DEFAULT NULL COMMENT &#39;最后修改时间&#39;, </span><br><span class="line">    delete_flag tinyint(1) NULL DEFAULT NULL COMMENT &#39;逻辑删除（0 未删除、1 删除）&#39;,</span><br><span class="line">    version int NULL DEFAULT NULL COMMENT &#39;版本号（用于乐观锁， 默认为 1）&#39;,</span><br><span class="line">    PRIMARY KEY (id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>Step3：<br>　　使用 @Version 注解标注对应的实体类。<br>　　可以通过 @TableField 进行数据自动填充。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * 版本号（用于乐观锁， 默认为 1）</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Version</span><br><span class="line">@TableField(fill &#x3D; FieldFill.INSERT)</span><br><span class="line">private Integer version;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void insertFill(MetaObject metaObject) &#123;</span><br><span class="line">    this.strictInsertFill(metaObject, &quot;version&quot;, Integer.class, 1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184439393-659580638.png" alt="img"></p>
<p>Step4：<br>　　简单测试一下，可以看一下 控制台 打印的 sql 语句。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testVersion() &#123;</span><br><span class="line">    User user &#x3D; new User();</span><br><span class="line">    user.setName(&quot;tom&quot;).setAge(20).setEmail(&quot;tom@163.com&quot;);</span><br><span class="line">    userService.save(user);</span><br><span class="line">    userService.list().forEach(System.out::println);</span><br><span class="line">    user.setName(&quot;jarry&quot;);</span><br><span class="line">    userService.update(user, null);</span><br><span class="line">    userService.list().forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184519097-1477211602.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/l-y-h/p/12859477.html#_labelTop">回到顶部</a></p>
<h2 id="三、Mybatis-Plus-CRUD-操作简单了解一下"><a href="#三、Mybatis-Plus-CRUD-操作简单了解一下" class="headerlink" title="三、Mybatis-Plus CRUD 操作简单了解一下"></a>三、Mybatis-Plus CRUD 操作简单了解一下</h2><h3 id="1、Mapper-接口方法（CRUD）简单了解一下"><a href="#1、Mapper-接口方法（CRUD）简单了解一下" class="headerlink" title="1、Mapper 接口方法（CRUD）简单了解一下"></a>1、Mapper 接口方法（CRUD）简单了解一下</h3><p>（1）简介<br>　　使用代码生成器生成的 mapper 接口中，其继承了 BaseMapper 接口。<br>　　而 BaseMapper 接口中封装了一系列 CRUD 常用操作，可以直接使用，而不用自定义 xml 与 sql 语句进行 CRUD 操作（当然根据实际开发需要，自定义 sql 还是有必要的）。</p>
<p>此处简单介绍一下 BaseMapper 接口中的常用方法。</p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184606042-2140497864.png" alt="img"></p>
<p> <img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184616508-1167828998.png" alt="img"></p>
<p>（2）方法介绍<br>　　混个眼熟，用多了就记得了。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">【添加数据：（增）】</span><br><span class="line">    int insert(T entity);              &#x2F;&#x2F; 插入一条记录</span><br><span class="line">注：</span><br><span class="line">    T         表示任意实体类型</span><br><span class="line">    entity    表示实体对象</span><br><span class="line"></span><br><span class="line">【删除数据：（删）】</span><br><span class="line">    int deleteById(Serializable id);    &#x2F;&#x2F; 根据主键 ID 删除</span><br><span class="line">    int deleteByMap(@Param(Constants.COLUMN_MAP) Map&lt;String, Object&gt; columnMap);  &#x2F;&#x2F; 根据 map 定义字段的条件删除</span><br><span class="line">    int delete(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; wrapper); &#x2F;&#x2F; 根据实体类定义的 条件删除对象</span><br><span class="line">    int deleteBatchIds(@Param(Constants.COLLECTION) Collection&lt;? extends Serializable&gt; idList); &#x2F;&#x2F; 进行批量删除</span><br><span class="line">注：</span><br><span class="line">    id        表示 主键 ID</span><br><span class="line">    columnMap 表示表字段的 map 对象</span><br><span class="line">    wrapper   表示实体对象封装操作类，可以为 null。</span><br><span class="line">    idList    表示 主键 ID 集合（列表、数组），不能为 null 或 empty</span><br><span class="line"></span><br><span class="line">【修改数据：（改）】</span><br><span class="line">    int updateById(@Param(Constants.ENTITY) T entity); &#x2F;&#x2F; 根据 ID 修改实体对象。</span><br><span class="line">    int update(@Param(Constants.ENTITY) T entity, @Param(Constants.WRAPPER) Wrapper&lt;T&gt; updateWrapper); &#x2F;&#x2F; 根据 updateWrapper 条件修改实体对象</span><br><span class="line">注：</span><br><span class="line">    update 中的 entity 为 set 条件，可以为 null。</span><br><span class="line">    updateWrapper 表示实体对象封装操作类（可以为 null,里面的 entity 用于生成 where 语句）</span><br><span class="line"></span><br><span class="line">【查询数据：（查）】</span><br><span class="line">    T selectById(Serializable id); &#x2F;&#x2F; 根据 主键 ID 查询数据</span><br><span class="line">    List&lt;T&gt; selectBatchIds(@Param(Constants.COLLECTION) Collection&lt;? extends Serializable&gt; idList); &#x2F;&#x2F; 进行批量查询</span><br><span class="line">    List&lt;T&gt; selectByMap(@Param(Constants.COLUMN_MAP) Map&lt;String, Object&gt; columnMap); &#x2F;&#x2F; 根据表字段条件查询</span><br><span class="line">    T selectOne(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 根据实体类封装对象 查询一条记录</span><br><span class="line">    Integer selectCount(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 查询记录的总条数</span><br><span class="line">    List&lt;T&gt; selectList(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 查询所有记录（返回 entity 集合）</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; selectMaps(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 查询所有记录（返回 map 集合）</span><br><span class="line">    List&lt;Object&gt; selectObjs(@Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 查询所有记录（但只保存第一个字段的值）</span><br><span class="line">    &lt;E extends IPage&lt;T&gt;&gt; E selectPage(E page, @Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 查询所有记录（返回 entity 集合），分页</span><br><span class="line">    &lt;E extends IPage&lt;Map&lt;String, Object&gt;&gt;&gt; E selectMapsPage(E page, @Param(Constants.WRAPPER) Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 查询所有记录（返回 map 集合），分页</span><br><span class="line">注：</span><br><span class="line">    queryWrapper 表示实体对象封装操作类（可以为 null）</span><br><span class="line">    page 表示分页查询条件</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<h3 id="2、Service-接口方法（CRUD）简单了解一下"><a href="#2、Service-接口方法（CRUD）简单了解一下" class="headerlink" title="2、Service 接口方法（CRUD）简单了解一下"></a>2、Service 接口方法（CRUD）简单了解一下</h3><p>（1）简介<br>　　使用 代码生成器 生成的 service 接口中，其继承了 IService 接口。<br>　　IService 内部进一步封装了 BaseMapper 接口的方法（当然也提供了更详细的方法）。<br>　　使用时，可以通过 生成的 mapper 类进行 CRUD 操作，也可以通过 生成的 service 的实现类进行 CRUD 操作。（当然，自定义代码执行也可）<br>此处简单介绍一下 IService 中封装的常用方法。</p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184721039-779905975.png" alt="img"></p>
<p> <img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184732325-807928909.png" alt="img"></p>
<p>（2）方法介绍<br>　　混个眼熟，用多了就记得了。<br>　　内部封装了 BaseMapper 的方法，也提供了新的方法。<br>比如：<br>　　添加了 批量更新 方法、更新或修改方法等。<br>　　对 查询方法 做了细化，使用 get 命名的方法查询一条数据，使用 list 命名的方法查询多条数据等。<br>　　增加了链式调用的方法。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">【添加数据：（增）】</span><br><span class="line">    default boolean save(T entity); &#x2F;&#x2F; 调用 BaseMapper 的 insert 方法，用于添加一条数据。</span><br><span class="line">    boolean saveBatch(Collection&lt;T&gt; entityList, int batchSize); &#x2F;&#x2F; 批量插入数据</span><br><span class="line">注：</span><br><span class="line">    entityList 表示实体对象集合 </span><br><span class="line">    batchSize 表示一次批量插入的数据量，默认为 1000</span><br><span class="line"></span><br><span class="line">【添加或修改数据：（增或改）】</span><br><span class="line">    boolean saveOrUpdate(T entity); &#x2F;&#x2F; id 若存在，则修改， id 不存在则新增数据</span><br><span class="line">   default boolean saveOrUpdate(T entity, Wrapper&lt;T&gt; updateWrapper); &#x2F;&#x2F; 先根据条件尝试更新，然后再执行 saveOrUpdate 操作</span><br><span class="line">   boolean saveOrUpdateBatch(Collection&lt;T&gt; entityList, int batchSize); &#x2F;&#x2F; 批量插入并修改数据 </span><br><span class="line"></span><br><span class="line">【删除数据：（删）】</span><br><span class="line">    default boolean removeById(Serializable id); &#x2F;&#x2F; 调用 BaseMapper 的 deleteById 方法，根据 id 删除数据。</span><br><span class="line">    default boolean removeByMap(Map&lt;String, Object&gt; columnMap); &#x2F;&#x2F; 调用 BaseMapper 的 deleteByMap 方法，根据 map 定义字段的条件删除</span><br><span class="line">    default boolean remove(Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 调用 BaseMapper 的 delete 方法，根据实体类定义的 条件删除对象。</span><br><span class="line">    default boolean removeByIds(Collection&lt;? extends Serializable&gt; idList); &#x2F;&#x2F; 用 BaseMapper 的 deleteBatchIds 方法, 进行批量删除。</span><br><span class="line">    </span><br><span class="line">【修改数据：（改）】</span><br><span class="line">    default boolean updateById(T entity); &#x2F;&#x2F; 调用 BaseMapper 的 updateById 方法，根据 ID 选择修改。</span><br><span class="line">    default boolean update(T entity, Wrapper&lt;T&gt; updateWrapper); &#x2F;&#x2F; 调用 BaseMapper 的 update 方法，根据 updateWrapper 条件修改实体对象。</span><br><span class="line">    boolean updateBatchById(Collection&lt;T&gt; entityList, int batchSize); &#x2F;&#x2F; 批量更新数据</span><br><span class="line"></span><br><span class="line">【查找数据：（查）】</span><br><span class="line">    default T getById(Serializable id); &#x2F;&#x2F; 调用 BaseMapper 的 selectById 方法，根据 主键 ID 返回数据。</span><br><span class="line">    default List&lt;T&gt; listByIds(Collection&lt;? extends Serializable&gt; idList); &#x2F;&#x2F; 调用 BaseMapper 的 selectBatchIds 方法，批量查询数据。</span><br><span class="line">    default List&lt;T&gt; listByMap(Map&lt;String, Object&gt; columnMap); &#x2F;&#x2F; 调用 BaseMapper 的 selectByMap 方法，根据表字段条件查询</span><br><span class="line">    default T getOne(Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 返回一条记录（实体类保存）。</span><br><span class="line">    Map&lt;String, Object&gt; getMap(Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 返回一条记录（map 保存）。</span><br><span class="line">    default int count(Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 根据条件返回 记录数。</span><br><span class="line">    default List&lt;T&gt; list(); &#x2F;&#x2F; 返回所有数据。</span><br><span class="line">    default List&lt;T&gt; list(Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 调用 BaseMapper 的 selectList 方法，查询所有记录（返回 entity 集合）。</span><br><span class="line">    default List&lt;Map&lt;String, Object&gt;&gt; listMaps(Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 调用 BaseMapper 的 selectMaps 方法，查询所有记录（返回 map 集合）。</span><br><span class="line">    default List&lt;Object&gt; listObjs(); &#x2F;&#x2F; 返回全部记录，但只返回第一个字段的值。</span><br><span class="line">    default &lt;E extends IPage&lt;T&gt;&gt; E page(E page, Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 调用 BaseMapper 的 selectPage 方法，分页查询</span><br><span class="line">    default &lt;E extends IPage&lt;Map&lt;String, Object&gt;&gt;&gt; E pageMaps(E page, Wrapper&lt;T&gt; queryWrapper); &#x2F;&#x2F; 调用 BaseMapper 的 selectMapsPage 方法，分页查询</span><br><span class="line">注：</span><br><span class="line">    get 用于返回一条记录。</span><br><span class="line">    list 用于返回多条记录。</span><br><span class="line">    count 用于返回记录总数。</span><br><span class="line">    page 用于分页查询。</span><br><span class="line">    </span><br><span class="line">【链式调用：】</span><br><span class="line">    default QueryChainWrapper&lt;T&gt; query(); &#x2F;&#x2F; 普通链式查询</span><br><span class="line">    default LambdaQueryChainWrapper&lt;T&gt; lambdaQuery(); &#x2F;&#x2F; 支持 Lambda 表达式的修改</span><br><span class="line">    default UpdateChainWrapper&lt;T&gt; update(); &#x2F;&#x2F; 普通链式修改</span><br><span class="line">    default LambdaUpdateChainWrapper&lt;T&gt; lambdaUpdate(); &#x2F;&#x2F; 支持 Lambda 表达式的修改</span><br><span class="line">注：</span><br><span class="line">    query 表示查询</span><br><span class="line">    update 表示修改</span><br><span class="line">    Lambda 表示内部支持 Lambda 写法。</span><br><span class="line">形如：</span><br><span class="line">    query().eq(&quot;column&quot;, value).one();</span><br><span class="line">    lambdaQuery().eq(Entity::getId, value).list();</span><br><span class="line">    update().eq(&quot;column&quot;, value).remove();</span><br><span class="line">    lambdaUpdate().eq(Entity::getId, value).update(entity);</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<h3 id="3、条件构造器（Wrapper，定义-where-条件）"><a href="#3、条件构造器（Wrapper，定义-where-条件）" class="headerlink" title="3、条件构造器（Wrapper，定义 where 条件）"></a>3、条件构造器（Wrapper，定义 where 条件）</h3><p>（1）简介<br>　　上面介绍的 接口方法的参数中，会出现各种 wrapper，比如 queryWrapper、updateWrapper 等。wrapper 的作用就是用于定义各种各样的查询条件（where）。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Wrapper  条件构造抽象类</span><br><span class="line">    -- AbstractWrapper 查询条件封装，用于生成 sql 中的 where 语句。</span><br><span class="line">        -- QueryWrapper Entity 对象封装操作类，用于查询。</span><br><span class="line">        -- UpdateWrapper Update 条件封装操作类，用于更新。</span><br><span class="line">    -- AbstractLambdaWrapper 使用 Lambda 表达式封装 wrapper</span><br><span class="line">        -- LambdaQueryWrapper 使用 Lambda 语法封装条件，用于查询。</span><br><span class="line">        -- LambdaUpdateWrapper 使用 Lambda 语法封装条件，用于更新。</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184846756-1724510855.png" alt="img"></p>
<p>（2）常用条件<br>　　参考源码以及官方文档总结的，还是一句话，混个眼熟，多用用就熟练了。</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">【通用条件：】</span><br><span class="line">【比较大小： ( &#x3D;, &lt;&gt;, &gt;, &gt;&#x3D;, &lt;, &lt;&#x3D; )】</span><br><span class="line">    eq(R column, Object val); &#x2F;&#x2F; 等价于 &#x3D;，例: eq(&quot;name&quot;, &quot;老王&quot;) ---&gt; name &#x3D; &#39;老王&#39;</span><br><span class="line">    ne(R column, Object val); &#x2F;&#x2F; 等价于 &lt;&gt;，例: ne(&quot;name&quot;, &quot;老王&quot;) ---&gt; name &lt;&gt; &#39;老王&#39;</span><br><span class="line">    gt(R column, Object val); &#x2F;&#x2F; 等价于 &gt;，例: gt(&quot;name&quot;, &quot;老王&quot;) ---&gt; name &gt; &#39;老王&#39;</span><br><span class="line">    ge(R column, Object val); &#x2F;&#x2F; 等价于 &gt;&#x3D;，例: ge(&quot;name&quot;, &quot;老王&quot;) ---&gt; name &gt;&#x3D; &#39;老王&#39;</span><br><span class="line">    lt(R column, Object val); &#x2F;&#x2F; 等价于 &lt;，例: lt(&quot;name&quot;, &quot;老王&quot;) ---&gt; name &lt; &#39;老王&#39;</span><br><span class="line">    le(R column, Object val); &#x2F;&#x2F; 等价于 &lt;&#x3D;，例: le(&quot;name&quot;, &quot;老王&quot;) ---&gt; name &lt;&#x3D; &#39;老王&#39;</span><br><span class="line">    </span><br><span class="line">【范围：（between、not between、in、not in）】</span><br><span class="line">   between(R column, Object val1, Object val2); &#x2F;&#x2F; 等价于 between a and b, 例： between(&quot;age&quot;, 18, 30) ---&gt; age between 18 and 30</span><br><span class="line">   notBetween(R column, Object val1, Object val2); &#x2F;&#x2F; 等价于 not between a and b, 例： notBetween(&quot;age&quot;, 18, 30) ---&gt; age not between 18 and 30</span><br><span class="line">   in(R column, Object... values); &#x2F;&#x2F; 等价于 字段 IN (v0, v1, ...),例: in(&quot;age&quot;,&#123;1,2,3&#125;) ---&gt; age in (1,2,3)</span><br><span class="line">   notIn(R column, Object... values); &#x2F;&#x2F; 等价于 字段 NOT IN (v0, v1, ...), 例: notIn(&quot;age&quot;,&#123;1,2,3&#125;) ---&gt; age not in (1,2,3)</span><br><span class="line">   inSql(R column, Object... values); &#x2F;&#x2F; 等价于 字段 IN (sql 语句), 例: inSql(&quot;id&quot;, &quot;select id from table where id &lt; 3&quot;) ---&gt; id in (select id from table where id &lt; 3)</span><br><span class="line">   notInSql(R column, Object... values); &#x2F;&#x2F; 等价于 字段 NOT IN (sql 语句)</span><br><span class="line">   </span><br><span class="line">【模糊匹配：（like）】</span><br><span class="line">    like(R column, Object val); &#x2F;&#x2F; 等价于 LIKE &#39;%值%&#39;，例: like(&quot;name&quot;, &quot;王&quot;) ---&gt; name like &#39;%王%&#39;</span><br><span class="line">    notLike(R column, Object val); &#x2F;&#x2F; 等价于 NOT LIKE &#39;%值%&#39;，例: notLike(&quot;name&quot;, &quot;王&quot;) ---&gt; name not like &#39;%王%&#39;</span><br><span class="line">    likeLeft(R column, Object val); &#x2F;&#x2F; 等价于 LIKE &#39;%值&#39;，例: likeLeft(&quot;name&quot;, &quot;王&quot;) ---&gt; name like &#39;%王&#39;</span><br><span class="line">    likeRight(R column, Object val); &#x2F;&#x2F; 等价于 LIKE &#39;值%&#39;，例: likeRight(&quot;name&quot;, &quot;王&quot;) ---&gt; name like &#39;王%&#39;</span><br><span class="line">    </span><br><span class="line">【空值比较：（isNull、isNotNull）】</span><br><span class="line">    isNull(R column); &#x2F;&#x2F; 等价于 IS NULL，例: isNull(&quot;name&quot;) ---&gt; name is null</span><br><span class="line">    isNotNull(R column); &#x2F;&#x2F; 等价于 IS NOT NULL，例: isNotNull(&quot;name&quot;) ---&gt; name is not null</span><br><span class="line"></span><br><span class="line">【分组、排序：（group、having、order）】</span><br><span class="line">    groupBy(R... columns); &#x2F;&#x2F; 等价于 GROUP BY 字段, ...， 例: groupBy(&quot;id&quot;, &quot;name&quot;) ---&gt; group by id,name</span><br><span class="line">    orderByAsc(R... columns); &#x2F;&#x2F; 等价于 ORDER BY 字段, ... ASC， 例: orderByAsc(&quot;id&quot;, &quot;name&quot;) ---&gt; order by id ASC,name ASC</span><br><span class="line">    orderByDesc(R... columns); &#x2F;&#x2F; 等价于 ORDER BY 字段, ... DESC， 例: orderByDesc(&quot;id&quot;, &quot;name&quot;) ---&gt; order by id DESC,name DESC</span><br><span class="line">    having(String sqlHaving, Object... params); &#x2F;&#x2F; 等价于 HAVING ( sql语句 )， 例: having(&quot;sum(age) &gt; &#123;0&#125;&quot;, 11) ---&gt; having sum(age) &gt; 11</span><br><span class="line"></span><br><span class="line">【拼接、嵌套 sql：（or、and、nested、apply）】</span><br><span class="line">   or(); &#x2F;&#x2F; 等价于 a or b， 例：eq(&quot;id&quot;,1).or().eq(&quot;name&quot;,&quot;老王&quot;) ---&gt; id &#x3D; 1 or name &#x3D; &#39;老王&#39;</span><br><span class="line">   or(Consumer&lt;Param&gt; consumer); &#x2F;&#x2F; 等价于 or(a or&#x2F;and b)，or 嵌套。例: or(i -&gt; i.eq(&quot;name&quot;, &quot;李白&quot;).ne(&quot;status&quot;, &quot;活着&quot;)) ---&gt; or (name &#x3D; &#39;李白&#39; and status &lt;&gt; &#39;活着&#39;)</span><br><span class="line">   and(Consumer&lt;Param&gt; consumer); &#x2F;&#x2F; 等价于 and(a or&#x2F;and b)，and 嵌套。例: and(i -&gt; i.eq(&quot;name&quot;, &quot;李白&quot;).ne(&quot;status&quot;, &quot;活着&quot;)) ---&gt; and (name &#x3D; &#39;李白&#39; and status &lt;&gt; &#39;活着&#39;)</span><br><span class="line">   nested(Consumer&lt;Param&gt; consumer); &#x2F;&#x2F; 等价于 (a or&#x2F;and b)，普通嵌套。例: nested(i -&gt; i.eq(&quot;name&quot;, &quot;李白&quot;).ne(&quot;status&quot;, &quot;活着&quot;)) ---&gt; (name &#x3D; &#39;李白&#39; and status &lt;&gt; &#39;活着&#39;)</span><br><span class="line">   apply(String applySql, Object... params); &#x2F;&#x2F; 拼接sql（若不使用 params 参数，可能存在 sql 注入），例: apply(&quot;date_format(dateColumn,&#39;%Y-%m-%d&#39;) &#x3D; &#123;0&#125;&quot;, &quot;2008-08-08&quot;) ---&gt; date_format(dateColumn,&#39;%Y-%m-%d&#39;) &#x3D; &#39;2008-08-08&#39;&quot;)</span><br><span class="line">   last(String lastSql); &#x2F;&#x2F; 无视优化规则直接拼接到 sql 的最后，可能存若在 sql 注入。</span><br><span class="line">   exists(String existsSql); &#x2F;&#x2F; 拼接 exists 语句。例: exists(&quot;select id from table where age &#x3D; 1&quot;) ---&gt; exists (select id from table where age &#x3D; 1)</span><br><span class="line">   </span><br><span class="line">【QueryWrapper 条件：】</span><br><span class="line">    select(String... sqlSelect); &#x2F;&#x2F; 用于定义需要返回的字段。例： select(&quot;id&quot;, &quot;name&quot;, &quot;age&quot;) ---&gt; select id, name, age</span><br><span class="line">    select(Predicate&lt;TableFieldInfo&gt; predicate); &#x2F;&#x2F; Lambda 表达式，过滤需要的字段。</span><br><span class="line">    lambda(); &#x2F;&#x2F; 返回一个 LambdaQueryWrapper</span><br><span class="line">    </span><br><span class="line">【UpdateWrapper 条件：】</span><br><span class="line">    set(String column, Object val); &#x2F;&#x2F; 用于设置 set 字段值。例: set(&quot;name&quot;, null) ---&gt; set name &#x3D; null</span><br><span class="line">    etSql(String sql); &#x2F;&#x2F; 用于设置 set 字段值。例: setSql(&quot;name &#x3D; &#39;老李头&#39;&quot;) ---&gt; set name &#x3D; &#39;老李头&#39;</span><br><span class="line">    lambda(); &#x2F;&#x2F; 返回一个 LambdaUpdateWrapper </span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>（3）简单使用，测试一下 QueryWrapper </p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void testQueryWrapper() &#123;</span><br><span class="line">    &#x2F;&#x2F; Step1：创建一个 QueryWrapper 对象</span><br><span class="line">    QueryWrapper&lt;User&gt; queryWrapper &#x3D; new QueryWrapper&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Step2： 构造查询条件</span><br><span class="line">    queryWrapper</span><br><span class="line">            .select(&quot;id&quot;, &quot;name&quot;, &quot;age&quot;)</span><br><span class="line">            .eq(&quot;age&quot;, 20)</span><br><span class="line">            .like(&quot;name&quot;, &quot;j&quot;);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Step3：执行查询</span><br><span class="line">    userService</span><br><span class="line">            .list(queryWrapper)</span><br><span class="line">            .forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>当前数据库数据如下：</p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509184939865-892962988.png" alt="img"></p>
<p>执行测试方法输出如下：</p>
<p><img src="https://img2020.cnblogs.com/blog/1688578/202005/1688578-20200509185011268-453045850.png" alt="img"></p>
<h2 id="lombok包"><a href="#lombok包" class="headerlink" title="lombok包"></a>lombok包</h2><pre><code>1、idea下安装lombok插件
[settings/plugins在插件库中搜索安装即可。]
(https://img-blog.csdnimg.cn/20190501112839630.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Jlbnh0MDUwOA==,size_16,color_FFFFFF,t_70)
2、重启idea
3、在maven库中添加依赖
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;version&gt;1.16.10&lt;/version&gt;
        &lt;/dependency&gt;
4、在实体类上添加注解即可生效
</code></pre>
<h3 id="Data"><a href="#Data" class="headerlink" title="@Data"></a>@Data</h3><p>​     1、@Data可以为类提供读写功能，从而不用写get、set方法。<br>​     2、他还会为类提供 equals()、hashCode()、toString() 方法。</p>
<h3 id="SneakyThrows（隐秘抛出）"><a href="#SneakyThrows（隐秘抛出）" class="headerlink" title="@SneakyThrows（隐秘抛出）"></a>@SneakyThrows（隐秘抛出）</h3><p>是lombok包下的注解 并且继承了Throwable作用 是为了用try{}catch{}捕捉异常添加之后会在  代码编译时 自动捕获异常</p>
<h1 id="一、mybatis-plus简介："><a href="#一、mybatis-plus简介：" class="headerlink" title="一、mybatis-plus简介："></a>一、mybatis-plus简介：</h1><p>Mybatis-Plus（简称MP）是一个 Mybatis 的增强工具，在 Mybatis 的基础上只做增强不做改变，为简化开发、提高效率而生。这是官方给的定义，关于mybatis-plus的更多介绍及特性，可以参考<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=http://mp.baomidou.com/%23/">mybatis-plus官网</a>。那么它是怎么增强的呢？其实就是它已经封装好了一些crud方法，我们不需要再写xml了，直接调用这些方法就行，就类似于JPA。</p>
<h1 id="二、spring整合mybatis-plus"><a href="#二、spring整合mybatis-plus" class="headerlink" title="二、spring整合mybatis-plus:"></a>二、spring整合mybatis-plus:</h1><p>正如官方所说，mybatis-plus在mybatis的基础上只做增强不做改变，因此其与spring的整合亦非常简单。只需把mybatis的依赖换成mybatis-plus的依赖，再把sqlSessionFactory换成mybatis-plus的即可。接下来看具体操作：<br> <strong>1、pom.xml:</strong><br> 核心依赖如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- spring --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.14.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.14.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.14.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mp 依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong>这些是核心依赖，本项目还用到了mysql驱动、c3p0、日志（slf4j-api，slf4j-log4j2）、lombok。集成mybatis-plus要把mybatis、mybatis-spring去掉，避免冲突；lombok是一个工具，添加了这个依赖，开发工具再安装Lombok插件，就可以使用它了，最常用的用法就是在实体类中使用它的@Data注解，这样实体类就不用写set、get、toString等方法了。关于Lombok的更多用法，请自行百度。</p>
<p><strong>2、log4j.xml:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">log4j</span>:configuration <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&quot;log4j.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">log4j:configuration</span> <span class="attr">xmlns:log4j</span>=<span class="string">&quot;http://jakarta.apache.org/log4j/&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;Encoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">&quot;org.apache.log4j.PatternLayout&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;ConversionPattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;%-5p %d&#123;MM-dd</span></span></span><br><span class="line"><span class="tag"><span class="string">HH:mm:ss,SSS&#125; %m (%F:%L) \n&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;debug&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.ibatis&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;info&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;debug&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">log4j:configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>3、jdbc.properties:</strong></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=<span class="symbol">jdbc:</span><span class="symbol">mysql:</span>/<span class="regexp">//</span>数据库名<span class="string">?u</span>seUnicode=<span class="literal">true</span>&amp;characterEncoding=utf8</span><br><span class="line">jdbc.username=<span class="comment">#</span></span><br><span class="line">jdbc.password=<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p><strong>4、mybatis-config.xml:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">PUBLIC <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>因为是与spring整合，所有mybatis-plus的大部分都写在spring的配置文件中，这里定义一个空的mybatis-config.xml即可。</p>
<p><strong>5、spring-dao.xml:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span>    </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span>   </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:jee</span>=<span class="string">&quot;http://www.springframework.org/schema/jee&quot;</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;    </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd  </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd  </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd  </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-4.0.xsd  </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd&quot;</span>&gt;</span>    </span><br><span class="line">        </span><br><span class="line">    <span class="comment">&lt;!-- 配置整合mybatis-plus过程 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1、配置数据库相关参数properties的属性：$&#123;url&#125; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2、配置数据库连接池 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mybatis的sqlsessionFactorybean：org.mybatis.spring.SqlSessionFactoryBean--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 3、配置mybatis-plus的sqlSessionFactory --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.baomidou.mybatisplus.spring.MybatisSqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.zhu.mybatisplus.entity&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 4、DAO接口所在包名，Spring会自动查找其下的类 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.zhu.mybatisplus.dao&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>6、entity:</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(value = <span class="meta-string">&quot;tb_employee&quot;</span>)</span><span class="comment">//指定表名</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="comment">//value与数据库主键列名一致，若实体类属性名与表主键列名一致可省略value</span></span><br><span class="line">    <span class="meta">@TableId(value = <span class="meta-string">&quot;id&quot;</span>,type = IdType.AUTO)</span><span class="comment">//指定自增策略</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="comment">//若没有开启驼峰命名，或者表中列名不符合驼峰规则，可通过该注解指定数据库表中的列名，exist标明数据表中有没有对应列</span></span><br><span class="line">    <span class="meta">@TableField(value = <span class="meta-string">&quot;last_name&quot;</span>,exist = true)</span></span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Integer gender;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>7、mapper:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmplopyeeDao</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">Employee</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样就完成了mybatis-plus与spring的整合。首先是把mybatis和mybatis-spring依赖换成mybatis-plus的依赖，然后把sqlsessionfactory换成mybatis-plus的，然后实体类中添加<code>@TableName</code>、<code>@TableId</code>等注解，最后mapper继承<code>BaseMapper</code>即可。</p>
<p><strong>8、测试：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&#123;&quot;classpath:spring/spring-dao.xml&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDataSource</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行该junit，可输出获取到的连接，说明整合没问题：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/11531502-2a0d958939bdcde8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/863/format/webp" alt="img"></p>
<p>image.png</p>
<p> 本文所有代码本人均亲自测试过，本文涉及代码又较多，为了不影响篇幅，故非必要处不再截图。接下来的所有操作都是基于此整合好的项目。</p>
<h1 id="三、mp的通用crud"><a href="#三、mp的通用crud" class="headerlink" title="三、mp的通用crud:"></a>三、mp的通用crud:</h1><p><strong>需求：</strong><br> 存在一张 tb_employee 表，且已有对应的实体类 Employee，实现tb_employee 表的 CRUD 操作我们需要做什么呢？<br> <strong>基于 Mybatis：</strong><br> 需要编写 EmployeeMapper 接口，并在 EmployeeMapper.xml 映射文件中手动编写 CRUD 方法对应的sql语句。<br> <strong>基于 MP：</strong><br> 只需要创建 EmployeeMapper 接口, 并继承 BaseMapper 接口。<br> 我们已经有了Employee、tb_employee了，并且EmployeeDao也继承了BaseMapper了，接下来就使用crud方法。</p>
<p><strong>1、insert操作：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&#123;&quot;classpath:spring/spring-dao.xml&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmplopyeeDao emplopyeeDao;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsert</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Employee employee = <span class="keyword">new</span> Employee();</span><br><span class="line">        employee.setLastName(<span class="string">&quot;东方不败&quot;</span>);</span><br><span class="line">        employee.setEmail(<span class="string">&quot;dfbb@163.com&quot;</span>);</span><br><span class="line">        employee.setGender(<span class="number">1</span>);</span><br><span class="line">        employee.setAge(<span class="number">20</span>);</span><br><span class="line">        emplopyeeDao.insert(employee);</span><br><span class="line">        <span class="comment">//mybatisplus会自动把当前插入对象在数据库中的id写回到该实体中</span></span><br><span class="line">        System.out.println(employee.getId());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行添加操作，直接调用insert方法传入实体即可。</p>
<p><strong>2、update操作：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Employee employee = <span class="keyword">new</span> Employee();</span><br><span class="line">        employee.setId(<span class="number">1</span>);</span><br><span class="line">        employee.setLastName(<span class="string">&quot;更新测试&quot;</span>);</span><br><span class="line">        <span class="comment">//emplopyeeDao.updateById(employee);//根据id进行更新，没有传值的属性就不会更新</span></span><br><span class="line">        emplopyeeDao.updateAllColumnById(employee);<span class="comment">//根据id进行更新，没传值的属性就更新为null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>注意这两个update操作的区别，<code>updateById</code>方法，没有传值的字段不会进行更新，比如只传入了lastName，那么age、gender等属性就会保留原来的值；<code>updateAllColumnById</code>方法，顾名思义，会更新所有的列，没有传值的列会更新为null。</p>
<p><strong>3、select操作：</strong></p>
<p><strong>(1)、</strong>根据id查询：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Employee employee &#x3D; emplopyeeDao.selectById(1);</span><br></pre></td></tr></table></figure>

<p><strong>(2)、</strong>根据条件查询一条数据：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Employee employeeCondition = <span class="keyword">new</span> Employee();</span><br><span class="line">employeeCondition.setId(<span class="number">1</span>);</span><br><span class="line">employeeCondition.setLastName(<span class="string">&quot;更新测试&quot;</span>);</span><br><span class="line"><span class="comment">//若是数据库中符合传入的条件的记录有多条，那就不能用这个方法，会报错</span></span><br><span class="line">Employee employee = emplopyeeDao.selectOne(employeeCondition);</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>这个方法的sql语句就是<code>where id = 1 and last_name = 更新测试</code>，若是符合这个条件的记录不止一条，那么就会报错。</p>
<p><strong>(3)、</strong>根据查询条件返回多条数据：<br> 当符合指定条件的记录数有多条时，上面那个方法就会报错，就应该用这个方法。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>,<span class="built_in">Object</span>&gt; columnMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">columnMap.put(<span class="string">&quot;last_name&quot;</span>,<span class="string">&quot;东方不败&quot;</span>);<span class="comment">//写表中的列名</span></span><br><span class="line">columnMap.put(<span class="string">&quot;gender&quot;</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line"><span class="built_in">List</span>&lt;Employee&gt; employees = emplopyeeDao.selectByMap(columnMap);</span><br><span class="line">System.out.println(employees.size());</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>查询条件用map集合封装，columnMap，写的是数据表中的列名，而非实体类的属性名。比如属性名为lastName，数据表中字段为last_name，这里应该写的是last_name。selectByMap方法返回值用list集合接收。</p>
<p><strong>(4)、</strong>通过id批量查询：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; idList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">idList.<span class="keyword">add</span>(<span class="number">1</span>);</span><br><span class="line">idList.<span class="keyword">add</span>(<span class="number">2</span>);</span><br><span class="line">idList.<span class="keyword">add</span>(<span class="number">3</span>);</span><br><span class="line">List&lt;Employee&gt; employees = emplopyeeDao.selectBatchIds(idList);</span><br><span class="line">System.<span class="keyword">out</span>.println(employees);</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>把需要查询的id都add到list集合中，然后调用selectBatchIds方法，传入该list集合即可，该方法返回的是对应id的所有记录，所有返回值也是用list接收。</p>
<p><strong>(5)、</strong>分页查询：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Employee&gt; employees = emplopyeeDao.selectPage(<span class="keyword">new</span> Page&lt;&gt;(<span class="number">1</span>,<span class="number">2</span>),<span class="literal">null</span>);</span><br><span class="line">System.<span class="keyword">out</span>.println(employees);</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>selectPage方法就是分页查询，在page中传入分页信息，后者为null的分页条件，这里先让其为null，讲了条件构造器再说其用法。这个分页其实并不是物理分页，而是内存分页。也就是说，查询的时候并没有limit语句。等配置了分页插件后才可以实现真正的分页。</p>
<p><strong>4、delete操作：</strong></p>
<p><strong>(1)、</strong>根据id删除：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">emplopyeeDao<span class="selector-class">.deleteById</span>(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p><strong>(2)、</strong>根据条件删除：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>,<span class="built_in">Object</span>&gt; columnMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">columnMap.put(<span class="string">&quot;gender&quot;</span>,<span class="number">0</span>);</span><br><span class="line">columnMap.put(<span class="string">&quot;age&quot;</span>,<span class="number">18</span>);</span><br><span class="line">emplopyeeDao.deleteByMap(columnMap);</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>该方法与selectByMap类似，将条件封装在columnMap中，然后调用deleteByMap方法，传入columnMap即可，返回值是Integer类型，表示影响的行数。</p>
<p><strong>(3)、</strong>根据id批量删除：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; idList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">idList.<span class="keyword">add</span>(<span class="number">1</span>);</span><br><span class="line">idList.<span class="keyword">add</span>(<span class="number">2</span>);</span><br><span class="line">emplopyeeDao.deleteBatchIds(idList);</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>该方法和selectBatchIds类似，把需要删除的记录的id装进idList，然后调用deleteBatchIds，传入idList即可。</p>
<h1 id="四、全局策略配置："><a href="#四、全局策略配置：" class="headerlink" title="四、全局策略配置："></a>四、全局策略配置：</h1><p>通过上面的小案例我们可以发现，实体类需要加@TableName注解指定数据库表名，通过@TableId注解指定id的增长策略。实体类少倒也无所谓，实体类一多的话也麻烦。所以可以在spring-dao.xml的文件中进行全局策略配置。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 5、mybatisplus的全局策略配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;globalConfiguration&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.baomidou.mybatisplus.entity.GlobalConfiguration&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2.3版本后，驼峰命名默认值就是true，所以可不配置 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;property name=&quot;dbColumnUnderline&quot; value=&quot;true&quot;/&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 全局主键自增策略，0表示auto --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;idType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 全局表前缀配置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;tablePrefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;tb_&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这里配置了还没用，还需要在sqlSessionFactory中注入配置才会生效。如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 3、配置mybatisplus的sqlSessionFactory --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.baomidou.mybatisplus.spring.MybatisSqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.zhu.mybatisplus.entity&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入全局配置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;globalConfig&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;globalConfiguration&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如此一来，实体类中的@TableName注解和@TableId注解就可以去掉了。</p>
<h1 id="五、条件构造器-EntityWrapper-："><a href="#五、条件构造器-EntityWrapper-：" class="headerlink" title="五、条件构造器(EntityWrapper)："></a>五、条件构造器(EntityWrapper)：</h1><p>以上基本的 CRUD 操作，我们仅仅需要继承一个 BaseMapper 即可实现大部分单表 CRUD 操作。BaseMapper 提供了多达 17 个方法供使用, 可以极其方便的实现单一、批量、分页等操作，极大的减少开发负担。但是mybatis-plus的强大不限于此，请看如下需求该如何处理：<br> <strong>需求：</strong><br> 我们需要分页查询 tb_employee 表中，年龄在 18~50 之间性别为男且姓名为 xx 的所有用户，这时候我们该如何实现上述需求呢？<br> <strong>使用MyBatis :</strong> 需要在 SQL 映射文件中编写带条件查询的 SQL,并用PageHelper 插件完成分页. 实现以上一个简单的需求，往往需要我们做很多重复单调的工作。<br> <strong>使用MP:</strong> 依旧不用编写 SQL 语句，MP 提供了功能强大的条件构造器 ——  EntityWrapper。</p>
<p><strong>接下来就直接看几个案例体会EntityWrapper的使用。</strong></p>
<p><strong>1、分页查询年龄在18 - 50且gender为0、姓名为tom的用户：</strong></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;Employee&gt; employees = emplopyeeDao.selectPage(<span class="keyword">new</span> Page&lt;Employee&gt;(<span class="number">1</span>,<span class="number">3</span>),</span><br><span class="line">     <span class="keyword">new</span> EntityWrapper&lt;Employee&gt;()</span><br><span class="line">        .between(<span class="string">&quot;age&quot;</span>,<span class="number">18</span>,<span class="number">50</span>)</span><br><span class="line">        .eq(<span class="string">&quot;gender&quot;</span>,<span class="number">0</span>)</span><br><span class="line">        .eq(<span class="string">&quot;last_name&quot;</span>,<span class="string">&quot;tom&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>由此案例可知，分页查询和之前一样，new 一个page对象传入分页信息即可。至于分页条件，new 一个EntityWrapper对象，调用该对象的相关方法即可。between方法三个参数，分别是column、value1、value2，该方法表示column的值要在value1和value2之间；eq是equals的简写，该方法两个参数，column和value，表示column的值和value要相等。注意column是数据表对应的字段，而非实体类属性字段。</p>
<p><strong>2、查询gender为0且名字中带有老师、或者邮箱中带有a的用户：</strong></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;Employee&gt; employees = emplopyeeDao.selectList(</span><br><span class="line">                <span class="keyword">new</span> EntityWrapper&lt;Employee&gt;()</span><br><span class="line">               .eq(<span class="string">&quot;gender&quot;</span>,<span class="number">0</span>)</span><br><span class="line">               .like(<span class="string">&quot;last_name&quot;</span>,<span class="string">&quot;老师&quot;</span>)</span><br><span class="line">                <span class="comment">//.or()//和or new 区别不大</span></span><br><span class="line">               .orNew()</span><br><span class="line">               .like(<span class="string">&quot;email&quot;</span>,<span class="string">&quot;a&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>未说分页查询，所以用selectList即可，用EntityWrapper的like方法进行模糊查询，like方法就是指column的值包含value值，此处like方法就是查询last_name中包含“老师”字样的记录；“或者”用or或者orNew方法表示，这两个方法区别不大，用哪个都可以，可以通过控制台的sql语句自行感受其区别。</p>
<p><strong>3、查询gender为0，根据age排序，简单分页：</strong></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;Employee&gt; employees = emplopyeeDao.selectList(</span><br><span class="line">                <span class="keyword">new</span> EntityWrapper&lt;Employee&gt;()</span><br><span class="line">                .eq(<span class="string">&quot;gender&quot;</span>,<span class="number">0</span>)</span><br><span class="line">                .orderBy(<span class="string">&quot;age&quot;</span>)<span class="comment">//直接orderby 是升序，asc</span></span><br><span class="line">                .last(<span class="string">&quot;desc limit 1,3&quot;</span>)<span class="comment">//在sql语句后面追加last里面的内容(改为降序，同时分页)</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>简单分页是指不用page对象进行分页。orderBy方法就是根据传入的column进行升序排序，若要降序，可以使用orderByDesc方法，也可以如案例中所示用last方法；last方法就是将last方法里面的value值追加到sql语句的后面，在该案例中，最后的sql语句就变为<code>select ······ order by desc limit 1, 3</code>，追加了<code>desc limit 1,3</code>所以可以进行降序排序和分页。</p>
<p><strong>4、分页查询年龄在18 - 50且gender为0、姓名为tom的用户：</strong><br> 条件构造器除了EntityWrapper，还有Condition。用Condition来处理一下这个需求：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;Employee&gt; employees = emplopyeeDao.selectPage(</span><br><span class="line">               <span class="keyword">new</span> Page&lt;Employee&gt;(<span class="number">1</span>,<span class="number">2</span>),</span><br><span class="line">               Condition.create()</span><br><span class="line">                       .between(<span class="string">&quot;age&quot;</span>,<span class="number">18</span>,<span class="number">50</span>)</span><br><span class="line">                       .eq(<span class="string">&quot;gender&quot;</span>,<span class="string">&quot;0&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>Condition和EntityWrapper的区别就是，创建条件构造器时，EntityWrapper是new出来的，而Condition是调create方法创建出来。</p>
<p><strong>5、根据条件更新：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testEntityWrapperUpdate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Employee employee = <span class="keyword">new</span> Employee();</span><br><span class="line">        employee.setLastName(<span class="string">&quot;苍老师&quot;</span>);</span><br><span class="line">        employee.setEmail(<span class="string">&quot;cjk@sina.com&quot;</span>);</span><br><span class="line">        employee.setGender(<span class="number">0</span>);</span><br><span class="line">        emplopyeeDao.update(employee,</span><br><span class="line">                <span class="keyword">new</span> EntityWrapper&lt;Employee&gt;()</span><br><span class="line">                .eq(<span class="string">&quot;last_name&quot;</span>,<span class="string">&quot;tom&quot;</span>)</span><br><span class="line">                .eq(<span class="string">&quot;age&quot;</span>,<span class="number">25</span>)</span><br><span class="line">        );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>该案例表示把last_name为tom，age为25的所有用户的信息更新为employee中设置的信息。</p>
<p><strong>6、根据条件删除：</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">emplopyeeDao.<span class="keyword">delete</span>(</span><br><span class="line">        <span class="keyword">new</span> EntityWrapper&lt;Employee&gt;()</span><br><span class="line">        .eq(<span class="string">&quot;last_name&quot;</span>,<span class="string">&quot;tom&quot;</span>)</span><br><span class="line">        .eq(<span class="string">&quot;age&quot;</span>,<span class="number">16</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>注：</strong>该案例表示把last_name为tom、age为16的所有用户删除。</p>
<p>作者：贪挽懒月<br>链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ceb1df475021">https://www.jianshu.com/p/ceb1df475021</a><br>来源：简书<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<h2 id="Mybatis-Plus和Mybatis的区别"><a href="#Mybatis-Plus和Mybatis的区别" class="headerlink" title="Mybatis-Plus和Mybatis的区别"></a>Mybatis-Plus和Mybatis的区别</h2><p><img src="/13.2.MyBatis-Plus/20190530134824262.png" alt="在这里插入图片描述"></p>
<p><img src="/13.2.MyBatis-Plus/2019053013474765.png" alt="在这里插入图片描述"></p>
<p>区别一<br>如果Mybatis Plus是扳手，那Mybatis Generator就是生产扳手的工厂。<br>通俗来讲——<br>MyBatis：一种操作数据库的框架，提供一种Mapper类，支持让你用java代码进行增删改查的数据库操作，省去了每次都要手写sql语句的麻烦。但是！有一个前提，你得先在xml中写好sql语句，是不是很麻烦？于是有下面的↓<br>Mybatis Generator：自动为Mybatis生成简单的增删改查sql语句的工具，省去一大票时间，两者配合使用，开发速度快到飞起。至于标题说的↓<br>Mybatis Plus：国人团队苞米豆在Mybatis的基础上开发的框架，在Mybatis基础上扩展了许多功能，荣获了2018最受欢迎国产开源软件第5名，当然也有配套的↓<br>Mybatis Plus Generator：同样为苞米豆开发，比Mybatis Generator更加强大，支持功能更多，自动生成Entity、Mapper、Service、Controller等<br>总结：<br>数据库框架：Mybatis Plus &gt; Mybatis<br>代码生成器：Mybatis Plus Generator &gt; Mybatis Generator</p>
<p>区别二<br>Mybatis-Plus是一个Mybatis的增强工具，它在Mybatis的基础上做了增强，却不做改变。我们在使用Mybatis-Plus之后既可以使用Mybatis-Plus的特有功能，又能够正常使用Mybatis的原生功能。Mybatis-Plus(以下简称MP)是为简化开发、提高开发效率而生，但它也提供了一些很有意思的插件，比如SQL性能监控、乐观锁、执行分析等。</p>
<p>Mybatis虽然已经给我们提供了很大的方便，但它还是有不足之处，实际上没有什么东西是完美的，MP的存在就是为了稍稍弥补Mybatis的不足。在我们使用Mybatis时会发现，每当要写一个业务逻辑的时候都要在DAO层写一个方法，再对应一个SQL，即使是简单的条件查询、即使仅仅改变了一个条件都要在DAO层新增一个方法，针对这个问题，MP就提供了一个很好的解决方案，之后我会进行介绍。另外，MP的代码生成器也是一个很有意思的东西，它可以让我们避免许多重复性的工作，下面我将介绍如何在你的项目中集成MP。</p>
<p>mybatis-plus添加依赖</p>
<p>首先添加maven依赖：springboot项目用下面这个依赖！</p>
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>3.2.0</version>
</dependency>
注意这里的依赖！我之前犯过错误！因为使用的是springboot项目所以用上面这个依赖。如果是spring项目则用下面的依赖 

<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus</artifactId>
    <version>3.2.0</version>
</dependency>
然后就可以使用BaseMapper <entity范型> 



<p>启动类上还需要加上 @MapperScan(“UserMapper接口所在的包”)</p>
<blockquote>
<p>例如：@MapperScan(“top.yumbo.dao”) 这样启动的时候就不会因为注入的时候导致报错</p>
</blockquote>
<p>一、 集成步骤↓：(首先，你要有个spring项目)<br>集成依赖，pom中加入依赖即可，不多说：<br>Java代码 收藏代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- mybatis mybatis-plus mybatis-spring mvc --&gt;  </span><br><span class="line">&lt;dependency&gt;  </span><br><span class="line">    &lt;groupId&gt;com.baomidou&lt;&#x2F;groupId&gt;  </span><br><span class="line">    &lt;artifactId&gt;mybatis-plus&lt;&#x2F;artifactId&gt;  </span><br><span class="line">    &lt;version&gt;$&#123;mybatis-plus.version&#125;&lt;&#x2F;version&gt;  </span><br><span class="line">&lt;&#x2F;dependency&gt;  </span><br><span class="line">&lt;dependency&gt;  </span><br><span class="line">    &lt;groupId&gt;org.apache.velocity&lt;&#x2F;groupId&gt;  </span><br><span class="line">    &lt;artifactId&gt;velocity-engine-core&lt;&#x2F;artifactId&gt;  </span><br><span class="line">    &lt;version&gt;2.0&lt;&#x2F;version&gt;  </span><br><span class="line">&lt;&#x2F;dependency&gt;  </span><br></pre></td></tr></table></figure>


<p>说明：笔者使用的版本为：mybatis-plus.version=2.1-gamma，上边的代码中有两个依赖，第一个是mybatis-plus核心依赖，第二个是使用代码生成器时需要的模板引擎依赖，若果你不打算使用代码生成器，此处可不引入。<br>注意：mybatis-plus的核心jar包中已集成了mybatis和mybatis-spring，所以为避免冲突，请勿再次引用这两个jar包。</p>
<p>说明：笔者使用的版本为：mybatis-plus.version=2.1-gamma，上边的代码中有两个依赖，第一个是mybatis-plus核心依赖，第二个是使用代码生成器时需要的模板引擎依赖，若果你不打算使用代码生成器，此处可不引入。<br>注意：mybatis-plus的核心jar包中已集成了mybatis和mybatis-spring，所以为避免冲突，请勿再次引用这两个jar包。</p>
<p>二、 在spring中配置MP：<br><bean id="sqlSessionFactory"  
    class="com.baomidou.mybatisplus.spring.MybatisSqlSessionFactoryBean"><br>    <!-- 配置数据源 --><br>    <property name="dataSource" ref="dataSource" /><br>    <!-- 自动扫描 Xml 文件位置 --><br>    <property name="mapperLocations" value="classpath*:com/ds/orm/mapper/**/*.xml" /><br>    <!-- 配置 Mybatis 配置文件（可无） --><br>    <property name="configLocation" value="classpath:mybatis-config.xml" /><br>    <!-- 配置包别名，支持通配符 * 或者 ; 分割 --><br>    <property name="typeAliasesPackage" value="com.ds.orm.model" /><br>    <!-- 枚举属性配置扫描，支持通配符 * 或者 ; 分割 --><br>    <!-- <property name="typeEnumsPackage" value="com.baomidou.springmvc.entity.*.enums"   
        /> --><br>    <!-- 以上配置和传统 Mybatis 一致 -->  </p>
<pre><code>&lt;!-- MP 全局配置注入 --&gt;  
&lt;property name=&quot;globalConfig&quot; ref=&quot;globalConfig&quot; /&gt;  
</code></pre>
</bean>  
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
<bean id="globalConfig" class="com.baomidou.mybatisplus.entity.GlobalConfiguration">  
    <!-- 主键策略配置 -->  
    <!-- 可选参数 AUTO->`0`("数据库ID自增") INPUT->`1`(用户输入ID") ID_WORKER->`2`("全局唯一ID")   
        UUID->`3`("全局唯一ID") -->  
    <property name="idType" value="2" />  
    <!-- 数据库类型配置 -->  
    <!-- 可选参数（默认mysql） MYSQL->`mysql` ORACLE->`oracle` DB2->`db2` H2->`h2`   
        HSQL->`hsql` SQLITE->`sqlite` POSTGRE->`postgresql` SQLSERVER2005->`sqlserver2005`   
        SQLSERVER->`sqlserver` -->  
    <property name="dbType" value="mysql" />  
    <!-- 全局表为下划线命名设置 true -->  
    <property name="dbColumnUnderline" value="true" />  
    <property name="sqlInjector">  
        <bean class="com.baomidou.mybatisplus.mapper.AutoSqlInjector" />  
    </property>  
</bean>  
<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">  
    <description>DAO接口所在包名，Spring会自动查找其下的类</description>  
    <property name="basePackage" value="com.ds.orm.mapper" />  
    <property name="sqlSessionFactoryBeanName" value="sqlSessionFactory" />  
</bean>  
<!-- 乐观锁插件 -->  
<bean class="com.baomidou.mybatisplus.plugins.OptimisticLockerInterceptor" />  

<!-- xml mapper热加载 sqlSessionFactory:session工厂 mapperLocations:mapper匹配路径   
    enabled:是否开启动态加载 默认:false delaySeconds:项目启动延迟加载时间 单位：秒 默认:10s sleepSeconds:刷新时间间隔   
    单位：秒 默认:20s -->  
<bean class="com.baomidou.mybatisplus.spring.MybatisMapperRefresh">  
    <constructor-arg name="sqlSessionFactory" ref="sqlSessionFactory" />  
    <constructor-arg name="mapperLocations"  
        value="classpath*:com/ds/orm/mapper/*/*.xml" />  
    <constructor-arg name="delaySeconds" value="10" />  
    <constructor-arg name="sleepSeconds" value="20" />  
    <constructor-arg name="enabled" value="true" />  
</bean>  

<!-- 事务 -->  
<p><bean id="transactionManager"  
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager"><br>    <property name="dataSource" ref="dataSource" /><br></bean><br>&lt;tx:annotation-driven transaction-manager=”transactionManager”<br>    proxy-target-class=”true” /&gt;  </p>
<p> 注意：只要做如上配置就可以正常使用mybatis了，不要重复配置。MP的配置和mybatis一样，都是配置一个sqlSessionFactory，只是现在所配置的类在原本的SqlSessionFactoryBean基础上做了增强。插件等配置请按需取舍。<br>插件配置，按需求配置就可以，此处把可以配置的插件都列了出来，具体的请看代码注释：</p>
<configuration>  
    <settings>  
        <setting name="logImpl" value="SLF4J" />  
        <!-- 字段为空时仍调用model的set方法或map的put方法 -->  
        <setting name="callSettersOnNulls" value="true" />  
    </settings>  
    <plugins>  
        <!-- | 分页插件配置 | 插件提供二种方言选择：1、默认方言 2、自定义方言实现类，两者均未配置则抛出异常！ | overflowCurrent   
            溢出总页数，设置第一页 默认false | optimizeType Count优化方式 （ 版本 2.0.9 改为使用 jsqlparser 不需要配置   
            ） | -->  
        <!-- 注意!! 如果要支持二级缓存分页使用类 CachePaginationInterceptor 默认、建议如下！！ -->  
        <plugin interceptor="com.baomidou.mybatisplus.plugins.PaginationInterceptor">  
            <property name="dialectType" value="mysql" />  
            <!--<property name="sqlParser" ref="自定义解析类、可以没有" />  
            <property name="localPage" value="默认 false 改为 true 开启了 pageHeper 支持、可以没有" />  
            <property name="dialectClazz" value="自定义方言类、可以没有" /> -->  
        </plugin>  

<pre><code>    &lt;!-- SQL 执行性能分析，开发环境使用，线上不推荐。 maxTime 指的是 sql 最大执行时长 --&gt;  
    &lt;plugin interceptor=&quot;com.baomidou.mybatisplus.plugins.PerformanceInterceptor&quot;&gt;  
        &lt;property name=&quot;maxTime&quot; value=&quot;2000&quot; /&gt;  
        &lt;!--SQL是否格式化 默认false --&gt;  
        &lt;property name=&quot;format&quot; value=&quot;true&quot; /&gt;  
    &lt;/plugin&gt;  
  
    &lt;!-- SQL 执行分析拦截器 stopProceed 发现全表执行 delete update 是否停止运行 该插件只用于开发环境，不建议生产环境使用。。。 --&gt;  
    &lt;plugin interceptor=&quot;com.baomidou.mybatisplus.plugins.SqlExplainInterceptor&quot;&gt;  
        &lt;property name=&quot;stopProceed&quot; value=&quot;false&quot; /&gt;  
    &lt;/plugin&gt;  
&lt;/plugins&gt;  
</code></pre>
</configuration>  
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
注意：执行分析拦截器和性能分析推荐只在开发时调试程序使用，为保证程序性能和稳定性，建议在生产环境中注释掉这两个插件。
数据源：(此处使用druid)

<!-- 配置数据源 -->  
<bean name="dataSource" class="com.alibaba.druid.pool.DruidDataSource" init-method="init" destroy-method="close">  
    <!--     <property name="driverClassName" value="${jdbc.driverClassName}" /> -->  
    <property name="url" value="${jdbc.url}" />   
    <property name="username" value="${jdbc.username}" />   
    <property name="password" value="${jdbc.password}" />   
    <property name="initialSize" value="${jdbc.initialSize}" />   
    <property name="minIdle" value="${jdbc.minIdle}" />   
    <property name="maxActive" value="${jdbc.maxActive}" />   
    <property name="maxWait" value="${jdbc.maxWait}" />   
    <property name="timeBetweenEvictionRunsMillis" value="${jdbc.timeBetweenEvictionRunsMillis}" />   
    <property name="minEvictableIdleTimeMillis" value="${jdbc.minEvictableIdleTimeMillis}" />   
    <property name="validationQuery" value="${jdbc.validationQuery}" />   
    <property name="testWhileIdle" value="${jdbc.testWhileIdle}" />   
    <property name="testOnBorrow" value="${jdbc.testOnBorrow}" />   
    <property name="testOnReturn" value="${jdbc.testOnReturn}" />   
    <property name="removeAbandoned" value="${jdbc.removeAbandoned}" />   
    <property name="removeAbandonedTimeout" value="${jdbc.removeAbandonedTimeout}" />   
    <!--     <property name="logAbandoned" value="${jdbc.logAbandoned}" /> -->  
    <property name="filters" value="${jdbc.filters}" />  
    <!-- 关闭abanded连接时输出错误日志 -->  
    <property name="logAbandoned" value="true" />  
    <property name="proxyFilters">  
        <list>  
            <ref bean="log-filter"/>  
        </list>  
    </property>  

<pre><code>&lt;!-- 监控数据库 --&gt;  
&lt;!-- &lt;property name=&quot;filters&quot; value=&quot;stat&quot; /&gt; --&gt;  
&lt;!--     &lt;property name=&quot;filters&quot; value=&quot;mergeStat&quot; /&gt;--&gt;  
</code></pre>
</bean>  
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
到此，MP已经集成进我们的项目中了，下面将介绍它是如何简化我们的开发的。
.
.
.

<p>**</p>
<p>三、 简单的CURD操作↓：<br>**<br>假设我们有一张user表，且已经建立好了一个与此表对应的实体类User，我们来介绍对user的简单增删改查操作。<br>建立DAO层接口。我们在使用普通的mybatis时会建立一个DAO层接口，并对应一个xml用来写SQL。在这里我们同样要建立一个DAO层接口，但是若无必要，我们甚至不需要建立xml，就可以进行资源的CURD操作了，我们只需要让我们建立的DAO继承MP提供的BaseMapper&lt;?&gt;即可：</p>
<p>public interface UserMapper extends BaseMapper { }<br>然后在我们需要做数据CURD时，像下边这样就好了：<br>Java代码 收藏代码<br>// 初始化 影响行数<br>int result = 0;<br>// 初始化 User 对象<br>User user = new User();</p>
<p>// 插入 User (插入成功会自动回写主键到实体类)<br>user.setName(“Tom”);<br>result = userMapper.insert(user);</p>
<p>// 更新 User<br>user.setAge(18);<br>result = userMapper.updateById(user);//user要设置id哦，具体的在下边我会详细介绍</p>
<p>// 查询 User<br>User exampleUser = userMapper.selectById(user.getId());</p>
<p>// 查询姓名为‘张三’的所有用户记录<br>List userList = userMapper.selectList(<br>new EntityWrapper().eq(“name”, “张三”)<br>);</p>
<p>// 删除 User<br>result = userMapper.deleteById(user.getId());</p>
<p>方便吧？如果只使用mybatis可是要写4个SQL和4个方法喔，当然了，仅仅上边这几个方法还远远满足不了我们的需求，请往下看：</p>
<p>.<br>.</p>
<p>**</p>
<p>多条件分页查询：<br>**<br>// 分页查询 10 条姓名为‘张三’、性别为男，且年龄在18至50之间的用户记录</p>
<p>List<User> userList = userMapper.selectPage(<br>        new Page<User>(1, 10),<br>        new EntityWrapper<User>().eq(“name”, “张三”)<br>                .eq(“sex”, 0)<br>                .between(“age”, “18”, “50”)<br>);<br>1<br>2<br>3<br>4<br>5<br>6<br>/**等价于SELECT *<br>*FROM sys_user<br>*WHERE (name=‘张三’ AND sex=0 AND age BETWEEN ‘18’ AND ‘50’)<br>*LIMIT 0,10<br>*/<br>.<br>.<br>.<br>下边这个，多条件构造器。其实对于条件过于复杂的查询，笔者还是建议使用原生mybatis的方式实现，易于维护且逻辑清晰，如果所有的数据操作都强行使用MP，就失去了MP简化开发的意义了。所以在使用时请按实际情况取舍，在这里还是先介绍一下。</p>
<p>public Page<T> selectPage(Page<T> page, EntityWrapper<T> entityWrapper) {<br>  if (null != entityWrapper) {<br>      entityWrapper.orderBy(page.getOrderByField(), page.isAsc());//排序<br>  }<br>  page.setRecords(baseMapper.selectPage(page, entityWrapper));//将查询结果放入page中<br>  return page;<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>** 条件构造一(上边方法的entityWrapper参数)：**</p>
<p>public void testTSQL11() {<br>    /*<br>     * 实体带查询使用方法  输出看结果<br>     <em>/<br>    EntityWrapper<User> ew = new EntityWrapper<User>();<br>    ew.setEntity(new User(1));<br>    ew.where(“user_name={0}”, “‘zhangsan’”).and(“id=1”)<br>            .orNew(“user_status={0}”, “0”).or(“status=1”)<br>            .notLike(“user_nickname”, “notvalue”)<br>            .andNew(“new=xx”).like(“hhh”, “ddd”)<br>            .andNew(“pwd=11”).isNotNull(“n1,n2”).isNull(“n3”)<br>            .groupBy(“x1”).groupBy(“x2,x3”)<br>            .having(“x1=11”).having(“x3=433”)<br>            .orderBy(“dd”).orderBy(“d1,d2”);<br>    System.out.println(ew.getSqlSegment());<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>.<br>.<br>.<br>** 条件构造二（同上）：</em>*</p>
<p>int buyCount = selectCount(Condition.create()<br>.setSqlSelect(“sum(quantity)”)<br>.isNull(“order_id”)<br>.eq(“user_id”, 1)<br>.eq(“type”, 1)<br>.in(“status”, new Integer[]{0, 1})<br>.eq(“product_id”, 1)<br>.between(“created_time”, startDate, currentDate)<br>.eq(“weal”, 1));<br>自定义条件使用entityWrapper：</p>
<p>List selectMyPage(RowBounds rowBounds, @Param(“ew”) Wrapper wrapper);</p>
<p>SELECT * FROM user ${ew.sqlSegment} <em>注意：此处不用担心SQL注入，MP已对ew做了字符串转义处理。 其实在使用MP做数据CURD时，还有另外一个方法，AR(ActiveRecord )，很简单，让我们的实体类继承MP提供Model&lt;?&gt;就好了，这和我们常用的方法可能会有些不同，下边简单说一下吧：</em><br>.<br>.<br>.<br>.<br>//实体类<br>@TableName(“sys_user”) // 注解指定表名<br>public class User extends Model {<br>… // fields</p>
<p>… // getter and setter</p>
<p>.<br>.</p>
<p>/ 指定主键 /*<br>@Override<br>protected Serializable pkVal() { //一定要指定主键哦<br>return this.id;<br>}<br>}<br>.<br>.<br>.<br>下边就是CURD操作了：</p>
<p>// 初始化 成功标识<br>boolean result = false;<br>// 初始化 User<br>User user = new User();</p>
<p>// 保存 User<br>user.setName(“Tom”);<br>result = user.insert();</p>
<p>// 更新 User<br>user.setAge(18);<br>result = user.updateById();</p>
<p>// 查询 User<br>User exampleUser = t1.selectById();</p>
<p>// 查询姓名为‘张三’的所有用户记录<br>List userList1 = user.selectList(<br>new EntityWrapper().eq(“name”, “张三”)<br>);</p>
<p>// 删除 User<br>result = t2.deleteById();</p>
<p>// 分页查询 10 条姓名为‘张三’、性别为男，且年龄在18至50之间的用户记录<br>List userList = user.selectPage(<br>new Page(1, 10),<br>new EntityWrapper().eq(“name”, “张三”)<br>.eq(“sex”, 0)<br>.between(“age”, “18”, “50”)<br>).getRecords();<br>就是这样了，可能你会说MP封装的有些过分了，这样做会分散数据逻辑到不同的层面中，难以管理，使代码难以理解。其实确实是这样，这就需要你在使用的时候注意一下了，在简化开发的同时也要保证你的代码层次清晰，做一个战略上的设计或者做一个取舍与平衡。<br>.<br>.<br>.<br>.<br>.<br>.</p>
<p>**</p>
<p>其实上边介绍的功能也不是MP的全部啦，下边介绍一下MP最有意思的模块——代码生成器。<br>**</p>
<p>步骤↓：<br>如上边所说，使用代码生成器一定要引入velocity-engine-core(模板引擎)这个依赖。<br>准备工作：<br>选择主键策略，就是在上边最开始时候我介绍MP配置时其中的这项配置，如果你不记得了，请上翻！MP提供了如下几个主键策略： 值 描述<br>IdType.AUTO ———-数据库ID自增<br>IdType.INPUT ———-用户输入ID<br>IdType.ID_WORKER———- 全局唯一ID，内容为空自动填充（默认配置）<br>IdType.UUID ———-全局唯一ID，内容为空自动填充<br>MP默认使用的是ID_WORKER，这是MP在Sequence的基础上进行部分优化，用于产生全局唯一ID。</p>
<p>表及字段命名策略选择，同上，还是在那个配置中。下边这段复制至MP官方文档：<br>在MP中，我们建议数据库表名采用下划线命名方式，而表字段名采用驼峰命名方式。</p>
<p>这么做的原因是为了避免在对应实体类时产生的性能损耗，这样字段不用做映射就能直接和实体类对应。当然如果项目里不用考虑这点性能损耗，那么你采用下滑线也是没问题的，只需要在生成代码时配置dbColumnUnderline属性就可以。</p>
<p>建表(命名规则依照刚才你所配置的，这会影响生成的代码的类名、字段名是否正确)。<br>执行下边的main方法，生成代码：</p>
<p>import java.util.HashMap;<br>import java.util.Map;  </p>
<p>import com.baomidou.mybatisplus.generator.AutoGenerator;<br>import com.baomidou.mybatisplus.generator.InjectionConfig;<br>import com.baomidou.mybatisplus.generator.config.DataSourceConfig;<br>import com.baomidou.mybatisplus.generator.config.GlobalConfig;<br>import com.baomidou.mybatisplus.generator.config.PackageConfig;<br>import com.baomidou.mybatisplus.generator.config.StrategyConfig;<br>import com.baomidou.mybatisplus.generator.config.rules.DbType;<br>import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;  </p>
<p>/** </p>
<ul>
<li><p> </li>
<li>代码生成器演示 </li>
<li></p> </li>
<li>/<br>public class MpGenerator {    /** <ul>
<li><p> </li>
<li>MySQL 生成演示 </li>
<li></p> </li>
<li>/<br>public static void main(String[] args) {<br>  AutoGenerator mpg = new AutoGenerator();    // 全局配置<br>  GlobalConfig gc = new GlobalConfig();<br>  gc.setOutputDir(“D://“);<br>  gc.setFileOverride(true);<br>  gc.setActiveRecord(true);// 不需要ActiveRecord特性的请改为false<br>  gc.setEnableCache(false);// XML 二级缓存<br>  gc.setBaseResultMap(true);// XML ResultMap<br>  gc.setBaseColumnList(false);// XML columList<br>// .setKotlin(true) 是否生成 kotlin 代码<br>  gc.setAuthor(“Yanghu”);    // 自定义文件命名，注意 %s 会自动填充表实体属性！<br>  // gc.setMapperName(“%sDao”);<br>  // gc.setXmlName(“%sDao”);<br>  // gc.setServiceName(“MP%sService”);<br>  // gc.setServiceImplName(“%sServiceDiy”);<br>  // gc.setControllerName(“%sAction”);<br>  mpg.setGlobalConfig(gc);    // 数据源配置<br>  DataSourceConfig dsc = new DataSourceConfig();<br>  dsc.setDbType(DbType.MYSQL);<br>  dsc.setTypeConvert(new MySqlTypeConvert(){  <pre><code>  // 自定义数据库表字段类型转换【可选】  
  @Override  
  public DbColumnType processTypeConvert(String fieldType) &#123;  
      System.out.println(&quot;转换类型：&quot; + fieldType);  
</code></pre>
  // 注意！！processTypeConvert 存在默认类型转换，如果不是你要的效果请自定义返回、非如下直接返回。  <pre><code>      return super.processTypeConvert(fieldType);  
  &#125;  
</code></pre>
  });<br>  dsc.setDriverName(“com.mysql.jdbc.Driver”);<br>  dsc.setUsername(“root”);<br>  dsc.setPassword(“521”);<br>  dsc.setUrl(“jdbc:mysql://127.0.0.1:3306/mybatis-plus?characterEncoding=utf8”);<br>  mpg.setDataSource(dsc);    // 策略配置<br>  StrategyConfig strategy = new StrategyConfig();<br>// strategy.setCapitalMode(true);// 全局大写命名 ORACLE 注意<br>  strategy.setTablePrefix(new String[] { “tlog_”, “tsys_” });// 此处可以修改为您的表前缀<br>  strategy.setNaming(NamingStrategy.underline_to_camel);// 表名生成策略<br>  // strategy.setInclude(new String[] { “user” }); // 需要生成的表<br>  // strategy.setExclude(new String[]{“test”}); // 排除生成的表<br>  // 自定义实体父类<br>  // strategy.setSuperEntityClass(“com.baomidou.demo.TestEntity”);<br>  // 自定义实体，公共字段<br>  // strategy.setSuperEntityColumns(new String[] { “test_id”, “age” });<br>  // 自定义 mapper 父类<br>  // strategy.setSuperMapperClass(“com.baomidou.demo.TestMapper”);<br>  // 自定义 service 父类<br>  // strategy.setSuperServiceClass(“com.baomidou.demo.TestService”);<br>  // 自定义 service 实现类父类<br>  // strategy.setSuperServiceImplClass(“com.baomidou.demo.TestServiceImpl”);<br>  // 自定义 controller 父类<br>  // strategy.setSuperControllerClass(“com.baomidou.demo.TestController”);<br>  // 【实体】是否生成字段常量（默认 false）<br>  // public static final String ID = “test_id”;<br>  // strategy.setEntityColumnConstant(true);<br>  // 【实体】是否为构建者模型（默认 false）<br>  // public User setName(String name) {this.name = name; return this;}<br>  // strategy.setEntityBuilderModel(true);<br>  mpg.setStrategy(strategy);    // 包配置<br>  PackageConfig pc = new PackageConfig();<br>  pc.setParent(“com.baomidou”);<br>  pc.setModuleName(“test”);<br>  mpg.setPackageInfo(pc);    // 注入自定义配置，可以在 VM 中使用 cfg.abc 【可无】<br>  InjectionConfig cfg = new InjectionConfig() {  <pre><code>  @Override  
  public void initMap() &#123;  
      Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();  
      map.put(&quot;abc&quot;, this.getConfig().getGlobalConfig().getAuthor() + &quot;-mp&quot;);  
      this.setMap(map);  
  &#125;  
</code></pre>
  };    // 自定义 xxList.jsp 生成<br>  List<FileOutConfig> focList = new ArrayList<FileOutConfig>();<br>  focList.add(new FileOutConfig(“/template/list.jsp.vm”) {  <pre><code>  @Override  
  public String outputFile(TableInfo tableInfo) &#123;  
      // 自定义输入文件名称  
      return &quot;D://my_&quot; + tableInfo.getEntityName() + &quot;.jsp&quot;;  
  &#125;  
</code></pre>
  });<br>  cfg.setFileOutConfigList(focList);<br>  mpg.setCfg(cfg);  </li>
</ul>
  // 调整 xml 生成目录演示  <pre><code>   focList.add(new FileOutConfig(&quot;/templates/mapper.xml.vm&quot;) &#123;  
      @Override  
      public String outputFile(TableInfo tableInfo) &#123;  
          return &quot;/develop/code/xml/&quot; + tableInfo.getEntityName() + &quot;.xml&quot;;  
      &#125;  
  &#125;);  
  cfg.setFileOutConfigList(focList);  
  mpg.setCfg(cfg);  

  // 关闭默认 xml 生成，调整生成 至 根目录  
  TemplateConfig tc = new TemplateConfig();  
  tc.setXml(null);  
  mpg.setTemplate(tc);  
  
  // 自定义模板配置，可以 copy 源码 mybatis-plus/src/main/resources/templates 下面内容修改，  
  // 放置自己项目的 src/main/resources/templates 目录下, 默认名称一下可以不配置，也可以自定义模板名称  
  // TemplateConfig tc = new TemplateConfig();  
  // tc.setController(&quot;...&quot;);  
  // tc.setEntity(&quot;...&quot;);  
  // tc.setMapper(&quot;...&quot;);  
  // tc.setXml(&quot;...&quot;);  
  // tc.setService(&quot;...&quot;);  
  // tc.setServiceImpl(&quot;...&quot;);  
</code></pre>
  // 如上任何一个模块如果设置 空 OR Null 将不生成该模块。  <pre><code>  // mpg.setTemplate(tc);  

  // 执行生成  
  mpg.execute();  
  
  // 打印注入设置【可无】  
  System.err.println(mpg.getCfg().getMap().get(&quot;abc&quot;));  
</code></pre>
  }  </li>
</ul>
<p>}  </p>
<p>说明：中间的内容请自行修改，注释很清晰。<br>成功生成代码，将生成的代码拷贝到你的项目中就可以了，这个东西节省了我们大量的时间和精力！</p>
<p>**<br>.<br>.<br>.<br>.<br>.<br>.</p>
<p>以下是注解说明，摘自官方文档： 注解说明**<br>表名注解 @TableName</p>
<p>com.baomidou.mybatisplus.annotations.TableName<br>值 描述<br>value ———- 表名（ 默认空 ）<br>resultMap ———- xml 字段映射 resultMap ID</p>
<p>主键注解 @TableId</p>
<p>com.baomidou.mybatisplus.annotations.TableId<br>值 描述<br>value ———- 字段值（驼峰命名方式，该值可无）<br>type ———-主键 ID 策略类型（ 默认 INPUT ，全局开启的是 ID_WORKER ）<br>暂不支持组合主键</p>
<p>字段注解 @TableField</p>
<p>com.baomidou.mybatisplus.annotations.TableField<br>值 描述<br>value ———-字段值（驼峰命名方式，该值可无）<br>el ———- 详看注释说明<br>exist ———-是否为数据库表字段（ 默认 true 存在，false 不存在 ）<br>strategy ———- 字段验证 （ 默认 非 null 判断，查看 com.baomidou.mybatisplus.enums.FieldStrategy ）<br>.<br>fill ———-字段填充标记 （ FieldFill, 配合自动填充使用 ）<br>字段填充策略 FieldFill<br>值 描述<br>DEFAULT ———-默认不处理<br>INSERT ———-插入填充字段<br>UPDATE ———-更新填充字段<br>INSERT_UPDATE ———-插入和更新填充字段</p>
<p>序列主键策略 注解 @KeySequence</p>
<p>com.baomidou.mybatisplus.annotations.KeySequence<br>值 描述<br>value ———-序列名<br>clazz ———-id的类型<br>乐观锁标记注解 ———-@Version</p>
<p>com.baomidou.mybatisplus.annotations.Version<br>排除非表字段、查看文档常见问题部分！</p>
<p>总结：MP的宗旨是简化开发，但是它在提供方便的同时却容易造成代码层次混乱，我们可能会把大量数据逻辑写到service层甚至contoller层中，使代码难以阅读。凡事过犹不及，在使用MP时一定要做分析，不要将所有数据操作都交给MP去实现。毕竟MP只是mybatis的增强工具，它并没有侵入mybatis的原生功能，在使用MP的增强功能的同时，原生mybatis的功能依然是可以正常使用的</p>
<h2 id="一些疑问"><a href="#一些疑问" class="headerlink" title="一些疑问"></a>一些疑问</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://s-qwer.github.io/2021/04/17/13.2.MyBatis-Plus/" data-id="ckqk8k3ht006y2wwdb51kakqh" data-title="MyBatis-Plus" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/04/17/10.7.%E5%85%B3%E4%BA%8E%E9%87%8D%E6%9E%84/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          关于重构
        
      </div>
    </a>
  
  
    <a href="/2021/04/17/12.2.SpringMVC/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">SpringMVC</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eclipse/" rel="tag">Eclipse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ElasticSearch/" rel="tag">ElasticSearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gitee/" rel="tag">Gitee</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HATEOAS/" rel="tag">HATEOAS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDEA/" rel="tag">IDEA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JQuery/" rel="tag">JQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSP/" rel="tag">JSP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" rel="tag">MySQL基础概念</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Navicat/" rel="tag">Navicat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PBOOTCMS/" rel="tag">PBOOTCMS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PO-BO-VO%EF%BC%8CDTO-DAO%E4%B8%8EPOJO/" rel="tag">PO-BO-VO，DTO-DAO与POJO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Portainer-io/" rel="tag">Portainer.io</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RESTful/" rel="tag">RESTful</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tomcat/" rel="tag">Tomcat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Typora/" rel="tag">Typora</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WEB/" rel="tag">WEB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebRTC/" rel="tag">WebRTC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/for%E5%BE%AA%E7%8E%AF/" rel="tag">for循环</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/" rel="tag">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/if/" rel="tag">if</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java%E6%A6%82%E8%BF%B0/" rel="tag">java概述</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/json/" rel="tag">json</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mqtt/" rel="tag">mqtt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ngnix/" rel="tag">ngnix</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/" rel="tag">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servlet/" rel="tag">servlet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springfox/" rel="tag">springfox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swagger/" rel="tag">swagger</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%8E%E4%BA%BA%E6%B2%9F%E9%80%9A/" rel="tag">与人沟通</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B9%A6/" rel="tag">书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8B%E5%8A%A1/" rel="tag">事务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E9%83%A8%E7%B1%BB/" rel="tag">内部类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC/" rel="tag">历史版本</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%8B%E7%BC%A9%E7%AE%97%E6%B3%95/" rel="tag">压缩算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" rel="tag">基础概念</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E8%A3%85/" rel="tag">安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/" rel="tag">小技巧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A7%91%E6%99%AE/" rel="tag">小科普</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1/" rel="tag">微信</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" rel="tag">快捷键</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%93%E5%8C%85/" rel="tag">打包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB/" rel="tag">抽象类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%A5%E5%8F%A3/" rel="tag">接口</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/" rel="tag">搜索技巧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%94%B6%E8%97%8F/" rel="tag">收藏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%B0%E7%8E%AF%E5%A2%83/" rel="tag">新环境</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E8%B0%88/" rel="tag">杂谈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%99%BE%E5%BA%A6/" rel="tag">百度</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" rel="tag">类型转换</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%B4%A2%E5%BC%95/" rel="tag">索引</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%8F%E5%8E%86/" rel="tag">经历</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/" rel="tag">编程规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/" rel="tag">设计规范</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%B7%E6%AD%8C/" rel="tag">谷歌</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E8%AF%B4%E6%98%8E/" rel="tag">软件说明</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD/" rel="tag">逻辑判断</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%94%81/" rel="tag">锁</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" rel="tag">面向对象</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A1%B9%E7%9B%AE%E5%90%88%E4%BD%9C/" rel="tag">项目合作</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/Eclipse/" style="font-size: 10px;">Eclipse</a> <a href="/tags/ElasticSearch/" style="font-size: 10px;">ElasticSearch</a> <a href="/tags/Gitee/" style="font-size: 10px;">Gitee</a> <a href="/tags/HATEOAS/" style="font-size: 10px;">HATEOAS</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/IDEA/" style="font-size: 10px;">IDEA</a> <a href="/tags/JQuery/" style="font-size: 10px;">JQuery</a> <a href="/tags/JSP/" style="font-size: 10px;">JSP</a> <a href="/tags/MySQL%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" style="font-size: 10px;">MySQL基础概念</a> <a href="/tags/Navicat/" style="font-size: 10px;">Navicat</a> <a href="/tags/PBOOTCMS/" style="font-size: 10px;">PBOOTCMS</a> <a href="/tags/PO-BO-VO%EF%BC%8CDTO-DAO%E4%B8%8EPOJO/" style="font-size: 10px;">PO-BO-VO，DTO-DAO与POJO</a> <a href="/tags/Portainer-io/" style="font-size: 10px;">Portainer.io</a> <a href="/tags/RESTful/" style="font-size: 10px;">RESTful</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/SQL/" style="font-size: 10px;">SQL</a> <a href="/tags/SpringBoot/" style="font-size: 10px;">SpringBoot</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/Typora/" style="font-size: 10px;">Typora</a> <a href="/tags/WEB/" style="font-size: 10px;">WEB</a> <a href="/tags/WebRTC/" style="font-size: 10px;">WebRTC</a> <a href="/tags/for%E5%BE%AA%E7%8E%AF/" style="font-size: 10px;">for循环</a> <a href="/tags/git/" style="font-size: 20px;">git</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/http/" style="font-size: 10px;">http</a> <a href="/tags/if/" style="font-size: 10px;">if</a> <a href="/tags/java%E6%A6%82%E8%BF%B0/" style="font-size: 10px;">java概述</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/mqtt/" style="font-size: 10px;">mqtt</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/ngnix/" style="font-size: 10px;">ngnix</a> <a href="/tags/node-js/" style="font-size: 20px;">node.js</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/servlet/" style="font-size: 10px;">servlet</a> <a href="/tags/springfox/" style="font-size: 10px;">springfox</a> <a href="/tags/swagger/" style="font-size: 10px;">swagger</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/%E4%B8%8E%E4%BA%BA%E6%B2%9F%E9%80%9A/" style="font-size: 10px;">与人沟通</a> <a href="/tags/%E4%B9%A6/" style="font-size: 10px;">书</a> <a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 10px;">事务</a> <a href="/tags/%E5%86%85%E9%83%A8%E7%B1%BB/" style="font-size: 10px;">内部类</a> <a href="/tags/%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC/" style="font-size: 10px;">历史版本</a> <a href="/tags/%E5%8E%8B%E7%BC%A9%E7%AE%97%E6%B3%95/" style="font-size: 10px;">压缩算法</a> <a href="/tags/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5/" style="font-size: 10px;">基础概念</a> <a href="/tags/%E5%AE%89%E8%A3%85/" style="font-size: 10px;">安装</a> <a href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/" style="font-size: 10px;">小技巧</a> <a href="/tags/%E5%B0%8F%E7%A7%91%E6%99%AE/" style="font-size: 10px;">小科普</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 10px;">微信</a> <a href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 20px;">快捷键</a> <a href="/tags/%E6%89%93%E5%8C%85/" style="font-size: 10px;">打包</a> <a href="/tags/%E6%8A%BD%E8%B1%A1%E7%B1%BB/" style="font-size: 10px;">抽象类</a> <a href="/tags/%E6%8E%A5%E5%8F%A3/" style="font-size: 10px;">接口</a> <a href="/tags/%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/" style="font-size: 10px;">搜索技巧</a> <a href="/tags/%E6%94%B6%E8%97%8F/" style="font-size: 10px;">收藏</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10px;">数据库</a> <a href="/tags/%E6%96%B0%E7%8E%AF%E5%A2%83/" style="font-size: 10px;">新环境</a> <a href="/tags/%E6%9D%82%E8%B0%88/" style="font-size: 10px;">杂谈</a> <a href="/tags/%E7%99%BE%E5%BA%A6/" style="font-size: 10px;">百度</a> <a href="/tags/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" style="font-size: 10px;">类型转换</a> <a href="/tags/%E7%B4%A2%E5%BC%95/" style="font-size: 10px;">索引</a> <a href="/tags/%E7%BB%8F%E5%8E%86/" style="font-size: 10px;">经历</a> <a href="/tags/%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83/" style="font-size: 10px;">编程规范</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/" style="font-size: 10px;">设计规范</a> <a href="/tags/%E8%B0%B7%E6%AD%8C/" style="font-size: 10px;">谷歌</a> <a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 10px;">软件</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E8%AF%B4%E6%98%8E/" style="font-size: 10px;">软件说明</a> <a href="/tags/%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD/" style="font-size: 10px;">逻辑判断</a> <a href="/tags/%E9%94%81/" style="font-size: 10px;">锁</a> <a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 10px;">面向对象</a> <a href="/tags/%E9%A1%B9%E7%9B%AE%E5%90%88%E4%BD%9C/" style="font-size: 10px;">项目合作</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/30/4.27.%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/">序列化与反序列化</a>
          </li>
        
          <li>
            <a href="/2021/06/28/%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/">电商项目</a>
          </li>
        
          <li>
            <a href="/2021/06/24/4.26.JSR/">JSR</a>
          </li>
        
          <li>
            <a href="/2021/06/24/31.3.%E8%85%BE%E8%AE%AF%E4%BA%91%E9%9F%B3%E8%A7%86%E9%A2%91%E7%9A%84%E5%BC%80%E5%8F%91/">腾讯云音视频的开发</a>
          </li>
        
          <li>
            <a href="/2021/06/23/%E7%94%B3%E8%AF%B7%E8%BD%AF%E8%91%97/">申请软著</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 swx<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>